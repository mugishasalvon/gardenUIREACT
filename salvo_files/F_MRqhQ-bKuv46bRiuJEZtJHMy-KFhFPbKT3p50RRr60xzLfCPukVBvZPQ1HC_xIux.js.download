;/*FB_PKG_DELIM*/

__d("BusinessComposerIGAudienceTypes",["$InternalEnum"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["IG_AUDIENCE_PUBLIC","IG_AUDIENCE_RESTRICTED"]),s=["SD","CU","IR","SY","KP"];l.BusinessComposerIGAudienceTypes=e,l.UnsupportedIGAudienceCountryList=s}),98);
__d("MediaCancelledPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743938"),s=o("FalcoLoggerInternal").create("media_cancelled_post_flow",e),u=s;l.default=u}),98);
__d("MediaFailedPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743939"),s=o("FalcoLoggerInternal").create("media_failed_post_flow",e),u=s;l.default=u}),98);
__d("MediaFinishedPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743940"),s=o("FalcoLoggerInternal").create("media_finished_post_flow",e),u=s;l.default=u}),98);
__d("MediaStartedPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743941"),s=o("FalcoLoggerInternal").create("media_started_post_flow",e),u=s;l.default=u}),98);
__d("VideoUploadLoggerEvents",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({EVENT_STARTED_GENERATE_THUMBNAILS:"upload.client.started_generate_thumbnails",EVENT_FINISHED_GENERATE_THUMBNAILS:"upload.client.finished_generate_thumbnails",EVENT_SELECTED_CUSTOM_THUMBNAIL:"upload.client.selected_custom_thumbnail",EVENT_VIDEO_DIMENSIONS_UNREADABLE:"upload.client.video_dimensions_unreadable",EVENT_REPLACE_VIDEO:"upload.client.replace_video",EVENT_STARTED_FLOW:"upload.client.started_flow",EVENT_FINISHED_FLOW:"upload.client.finished_flow",EVENT_FAILED_FLOW:"upload.client.failed_flow",EVENT_CANCELED_FLOW:"upload.client.canceled_flow",EVENT_RESIGNED_FLOW:"upload.client.resigned_flow",EVENT_REQUESTED_UPLOADING:"upload.client.requested_uploading",EVENT_INVALIDATED_UPLOADING:"upload.client.invalidated_uploading",EVENT_STARTED_UPLOADING:"upload.client.started_uploading",EVENT_PROGRESS_UPLOADING_START_REQUEST:"upload.client.progress_uploading_start_request",EVENT_FINISHED_UPLOADING:"upload.client.finished_uploading",EVENT_CANCELED_UPLOADING:"upload.client.canceled_uploading",EVENT_ABANDONED_UPLOADING:"upload.client.abandoned_uploading",EVENT_FAILED_UPLOADING:"upload.client.failed_uploading",EVENT_STARTED_SENDING_BYTES:"upload.client.started_sending_bytes",EVENT_FINISHED_SENDING_BYTES:"upload.client.finished_sending_bytes",EVENT_CANCELED_SENDING_BYTES:"upload.client.canceled_sending_bytes",EVENT_FAILED_SENDING_BYTES:"upload.client.failed_sending_bytes",EVENT_STARTED_START_REQUEST:"upload.client.started_sending_start_request",EVENT_FINISHED_START_REQUEST:"upload.client.finished_sending_start_request",EVENT_FAILED_START_REQUEST:"upload.client.failed_sending_start_request",EVENT_CANCELED_START_REQUEST:"upload.client.canceled_sending_start_request",EVENT_STARTED_RECEIVE_REQUEST:"upload.client.started_sending_receive_request",EVENT_FINISHED_RECEIVE_REQUEST:"upload.client.finished_sending_receive_request",EVENT_FAILED_RECEIVE_REQUEST:"upload.client.failed_sending_receive_request",EVENT_STARTED_POST_REQUEST:"upload.client.started_sending_post_request",EVENT_FINISHED_POST_REQUEST:"upload.client.finished_sending_post_request",EVENT_FAILED_POST_REQUEST:"upload.client.failed_sending_post_request",EVENT_HANDLING_SERVER_FAILURE_RESPONSE:"upload.client.handling_server_failure_response",EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE:"upload.client.handling_transport_failure_response",EVENT_DUPLICATE_POST_REQUEST:"upload.client.duplicate_post_request",EVENT_STARTED_SENDING_CHUNK_BYTES:"upload.client.started_sending_chunk_bytes",EVENT_FINISHED_SENDING_CHUNK_BYTES:"upload.client.finished_sending_chunk_bytes",EVENT_CANCELED_SENDING_CHUNK_BYTES:"upload.client.canceled_sending_chunk_bytes",EVENT_FAILED_SENDING_CHUNK_BYTES:"upload.client.failed_sending_chunk_bytes",EVENT_TIMEOUT_SENDING_CHUNK_BYTES:"upload.client.timeout_sending_chunk_bytes",EVENT_STARTED_FETCHING_STATUS:"upload.client.started_fetching_status",EVENT_FINISHED_FETCHING_STATUS:"upload.client.finished_fetching_status",EVENT_STARTED_POST_FLOW:"upload.client.started_post_flow",EVENT_FINISHED_POST_FLOW:"upload.client.finished_post_flow",EVENT_CANCELED_POST_FLOW:"upload.client.canceled_post_flow",EVENT_FAILED_POST_FLOW:"upload.client.failed_post_flow",EVENT_RETRY_ATTEMPT:"upload.client.retry_attempt",EVENT_RESUMABLE_CALLED:"upload.client.resumable_called",EVENT_RESUMABLE_STARTED:"upload.client.resumable_started",EVENT_RESUMABLE_SUCCESS:"upload.client.resumable_success",EVENT_RESUMABLE_FAILED:"upload.client.resumable_failed",EVENT_ENCODING_START_OBSERVED:"encode.client.encoding_start_observed",EVENT_ENCODING_SUCCESS_OBSERVED:"encode.client.encoding_success_observed",EVENT_ENCODING_FAIL_OBSERVED:"encode.client.encoding_fail_observed",EVENT_ENCODING_ABORT_OBSERVED:"encode.client.encoding_abort_observed",EVENT_FETCH_FAIL_OBSERVED:"encode.client.fetch_video_info_fail_observed",EVENT_ENCODING_SUBSCRIBE_TO_VIDEO_STATUS:"encode.client.subscribe_to_video_status",EVENT_ENCODING_POLLING_FALLBACK:"encode.client.polling_fallback",EVENT_RECEIVED_RESPONSE:"upload.client.received_response",EVENT_STARTED_FLOW_EXP1:"upload.client.started_flow_exp1",EVENT_FINISHED_FLOW_EXP1:"upload.client.finished_flow_exp1",EVENT_CANCELED_FLOW_EXP1:"upload.client.canceled_flow_exp1",EVENT_MEASURE_FREE_LOCAL_STORAGE:"upload.client.free_local_storage"});i.VideoUploadLoggerEvents=e}),66);
__d("VideoUploadLoggingConfig.experimental",["cr:8923"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8923")}),98);
__d("MediaUploadCommonWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1839305"),s=o("FalcoLoggerInternal").create("media_upload_common_www",e),u=s;l.default=u}),98);
__d("VideoComposerDialogVersion",[],(function(t,n,r,o,a,i){var e=Object.freeze({V1:"V1",V2:"V2"});i.default=e}),66);
__d("VideoUploadSourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADS_INTERFACES:"ads_interfaces",DIALOG:"dialog",COMPOSER:"composer",BIZ_COMPOSER:"biz_composer",VIDEO_COMPOSER_V2:"video_composer_v2",ADS_API:"ads_api",API:"api",APP_PROMO_VIDEO:"app_promo_video",APP_GAMEPLAY_VIDEO:"app_gameplay_video",APP_PROMO_VIDEO_AB_TEST:"app_promo_video_ab_test",APP_GAMEPLAY_VIDEO_AB_TEST:"app_gameplay_video_ab_test",APP_PROMO_VIDEO_LANDSCAPE:"app_promo_video_landscape",APP_PROMO_VIDEO_PORTRAIT:"app_promo_video_portrait",APP_PROMO_VIDEO_SQUARE:"app_promo_video_square",APP_GAMEPLAY_VIDEO_LANDSCAPE:"app_gameplay_video_landscape",APP_GAMEPLAY_VIDEO_PORTRAIT:"app_gameplay_video_portrait",APP_GAMEPLAY_VIDEO_SQUARE:"app_gameplay_video_square",ASPERA:"aspera",PIXELCLOUD:"pixelcloud",PROTON:"proton",PLATFORM:"platform",INSTANT_ARTICLE:"instant_article",INSTANT_APPLICATION_PREVIEW:"instant_application_preview",IS_REWARDS_ENABLED:"is_rewards_enabled",POWER_EDITOR:"power_editor",CAMPAIGN_MANAGER:"campaign_manager",CREATE_FLOW:"create_flow",VIDEO_BROADCAST:"video_broadcast",SVE_PIPELINE:"sve_pipeline",ALBUM_UPLOADER:"album_uploader",PROFILE_VIDEO:"profile_video",LEARN_VIDEO:"learn_video",BIRTHDAY_VIDEO:"birthday_video",NUX_MEDIA_TOOL:"nux_media_tool",LIVE_BROADCAST:"live_broadcast",CANVAS:"canvas",DYNAMIC_ITEM_DISPLAY_BUNDLE:"dynamic_item_display_bundle",GOODWILL_VIDEO:"goodwill_video",APP_REVIEW:"app_review",APP_REREVIEW:"app_rereview",APP_REREVIEW_SCREENCAST:"app_rereview_screencast",REFERENCE_FILE_COMPOSER:"reference_file_composer",PRODUCT_EDIT_TOOL:"product_edit_tool",SLIDESHOW:"slideshow",ISSUE_MODULE:"issue_module",TAROT_DIGEST:"tarot_digest",LEARN:"learn",PAGES_COVER_VIDEO:"pages_cover_video",EVENT_TOUR:"event_tour",EVENT_COVER_VIDEO:"event_cover_video",PAGE_TRAILER:"page_trailer",SHOW_VIDEO_LIBRARY:"show_video_library",GMS_HUB_ANNOUCEMENTS:"gms_hub_annoucements",LIVE_CREATIVE_KIT_VIDEO:"live_creative_kit_video",MESSENGER_GROUP_VIDEO:"messenger_group_video",P2P:"p2p",DYNAMIC_ITEM:"dynamic_item",AUDIO_STORY_VIDEO:"audio_story_video",IMAGE_OVERLAY_STORY_VIDEO:"image_overlay_story_video",REACTION_STORY:"inspiration_react_mode",SHOWREEL_VIDEO:"showreel_video",INSPIRATIONS:"inspirations",INSPIRATIONS_DIRECT:"inspirations-direct",BACKSTAGE:"backstage",FUNDRAISER_COVER_VIDEO:"fundraiser_cover_video",THIRD_PARTY_VIDEO:"third_party_video",NEWSFEED_COMPOSER:"newsfeed_composer",COMPPHOTO_GENERATED:"compphoto_generated",SIMPLE:"simple",ATTACH_PHOTOS:"attach_photos",COMMENT:"comment",REPLACE:"replace",PAGE_REVIEW:"page_review",WOODHENGE:"woodhenge",UC_DEMONETIZATION_APPEALS:"uc_demonetization_appeals",CREATOR_STOREFRONT_PERSONALIZED_VIDEO:"creator_storefront_personalized_video",CREATOR_STOREFRONT_PROMOTIONAL_VIDEO:"creator_storefront_promotional_video",PROFILE_FEATURED:"profile_featured",INSTANT_GAMES_DVR:"instant_games_dvr",BCMP_PROFILE_PITCHDECK:"branded_content_profile_pitchdeck",MEDIA_MANAGER_INSTAGRAM_VIDEO_COMPOSER:"media_manager_instagram_video_composer",MEDIA_MANAGER_INSTAGRAM_VIDEO:"media_manager_instagram_video",OCULUS_CREATOR_PORTAL:"oculus_creator_portal",VR_CREATOR_STUDIO:"vr_creator_studio",INSTAGRAM_XPOST:"instagram_xpost",WHATSAPP_XPOST:"whatsapp_xpost",HORIZON_XPOST:"horizon_xpost",PH_XPOST:"ph_xpost",DIM_SUM:"dim_sum",VML_VIDEO_SUPERRES:"vml_video_superres_service",MEDIA_MANAGER_BULK_VIDEO_IMPORTER:"media_manager_bulk_video_importer",MARKETPLACE_COMPOSER:"marketplace_composer",MARKETPLACE_COMPOSER_PRE_RECORDED_VIDEO:"marketplace_composer_pre_recorded_video",SOUND_PLATFORM:"sound_platform",OPTIMISTIC_POST:"optimistic_post",WORKPLACE_KNOWLEDGE_LIBRARY:"workplace_knowledge_library",COPYRIGHT_INGESTION:"copyright_ingestion",CMS_MEDIA_MANAGER:"cms_media_manager",PREMIUM_MUSIC_VIDEO:"premium_music_video",BOOSTED_COMPONENT:"boosted_component",VISUAL_EDITOR:"visual_editor",GIF_LINK:"gif_link",SRT_ATTACHMENT:"srt_attachment",SOUNDBITES_VIDEO:"soundbites_video",VOICES_CREATOR_STUDIO:"voices_creator_studio",VOICES_AUDIO_EMBED:"voices_audio_embed",VOICES_ARTICLE:"voices_article",TPG:"tpg",BUSINESS_CREATIVE_ASSET_MANAGER:"business_creative_asset_manager",STAGES:"stages",RMSI_VIDEO_INGESTION:"rights_manager_scaled_video_ingestion",ASSET_MANAGER:"asset_manager",PAID_CONTENT_DIALOG:"paid_content_dialog",CREATION_ML_PRECREATION:"creation_ml_precreation",PODCAST:"podcast",BUSINESS_OMNI_UPLOADER:"business_omni_uploader",BUSINESS_UNIFIED_CREATIVE_EDITOR:"business_unified_creative_editor",REEL_COMPOSER:"reel_composer",CONTENT_INJECTION:"content_injection",DROPS_SHOPPING_EVENT_PAGE:"drops_shopping_event_page",HORIZON_VIDEO:"horizon_video",PAPER_COMPOSER:"paper_composer",SHOP_BUILDER_VIDEO:"shop_builder_video",PROFESSIONAL_DASHBOARD_AB_TESTING:"professional_dashboard_ab_testing",PROFESSIONAL_DASHBOARD_BULK_UPLOAD:"professional_dashboard_bulk_upload",LIVE_CLIP_VIDEO:"live_clip_video",STARFOX_PLAYGROUND:"starfox_playground",CREATOR_FAN_CHALLENGE:"creator_fan_challenge",COMPOSER_ADS_CANVAS_VIDEO_ASSET_CLONER_FEATURE:"composer_ads_canvas_video_asset_cloner_feature",COMPOSER_ADS_VIDEO_AUTO_CROPPER_FEATURE:"composer_ads_video_auto_cropper_feature",COMPOSER_ADS_VIDEO_CLONE_FEATURE:"composer_ads_video_clone_feature",COMPOSER_ADS_VIDEO_CREATIVE_COMPOSER_FEATURE:"composer_ads_video_creative_composer_feature",COMPOSER_ADS_VIDEO_SLIDESHOW_FEATURE:"composer_ads_video_slideshow_feature",COMPOSER_ADS_VIDEO_SLIDESHOW_VARIATIONS_FEATURE:"composer_ads_video_slideshow_variations_feature",COMPOSER_AUTO_CLIPS_TO_REELS:"composer_auto_clips_to_reels",COMPOSER_AUTOGEN_BACK_CATALOG:"composer_autogen_back_catalog",COMPOSER_BASE_VIDEO_EDIT_FEATURE:"composer_base_video_edit_feature",COMPOSER_BIZWEB_AB_TESTING:"composer_bizweb_ab_testing",COMPOSER_BIZWEB_COMPOSER:"composer_bizweb_composer",COMPOSER_BULK_EDIT_COMPOSER:"composer_bulk_edit_composer",COMPOSER_COMET_REEL_COMPOSER:"composer_comet_reel_composer",COMPOSER_CROSS_POST_FROM_VIDEO_ASSET_OBSERVER_FEATURE:"composer_cross_post_from_video_assset_observer_feature",COMPOSER_CS_AB_TESTING:"composer_cs_ab_testing",COMPOSER_CS_AUTO_GENERATE_FB_SHORTS:"composer_cs_auto_generate_fb_shorts",COMPOSER_CS_BULK_UPLOAD:"composer_cs_bulk_upload",COMPOSER_CS_REEL_COMPOSER:"composer_cs_reel_composer",COMPOSER_GRAPH_API_CLIPPING:"composer_graph_api_clipping",COMPOSER_GRAPH_API_CROSSPOST:"composer_graph_api_crosspost",COMPOSER_GRAPH_API_NON_RESUMABLE:"composer_graph_api_non_resumable",COMPOSER_GRAPH_API_RESUMABLE:"composer_graph_api_resumable",COMPOSER_HORIZON_VIDEO_POST_TO_FB:"composer_horizon_video_post_to_fb",COMPOSER_HZ_STORY_XPOST_TO_FB:"composer_hz_story_xpost_to_fb",COMPOSER_IG_GLADOS_VIDEO_ADS_SHOWREEL:"composer_ig_glados_video_ads_showreel",COMPOSER_IG_REELS_SHARED_TO_FB:"composer_ig_reels_shared_to_fb",COMPOSER_IG_STORY_XPOST_TO_FB:"composer_ig_story_xpost_to_fb",COMPOSER_LIVE_VIDEO_BROADCAST:"composer_live_video_broadcast",COMPOSER_LONG_FORM_VIDEO_TO_PLAYLIST:"composer_long_form_video_to_playlist",COMPOSER_PAGE_SLIDESHOW_FEATURE:"composer_page_slideshow_feature",COMPOSER_PAGE_VIDEO_COMPOSER:"composer_page_video_composer",COMPOSER_PH_STORY_XPOST_TO_FB:"composer_ph_story_xpost_to_fb",COMPOSER_PLAYLIST_COMPOSER:"composer_playlist_composer",COMPOSER_PROFILE_VIDEO_INTRO_CLONER:"composer_profile_video_intro_cloner",COMPOSER_REMOTE_TRIMMER:"composer_remote_trimmer",COMPOSER_STORY_VIDEO_RENDER_FEATURE:"composer_story_video_render_feature",COMPOSER_SVE_SHADOW_CLONE_FEATURE:"composer_sve_shadow_clone_feature",COMPOSER_TEXT_BASED_VIDEO_EDITOR:"composer_text_based_video_editor",COMPOSER_UNIFIED_API_FOR_POST_CREATION_FEATURE:"composer_unified_stories_api_for_post_creation_feature",COMPOSER_UNIFIED_STORIES_VIDEO_CONVERTER:"composer_unified_stories_video_converter",COMPOSER_VIDEO_CLONE_FEATURE:"composer_video_clone_feature",COMPOSER_WA_STORY_XPOST_TO_FB:"composer_wa_story_xpost_to_fb",EXPERIMENT_HQ:"experiment_hq",GROUPS_AI:"groups_ai"});i.default=e}),66);
__d("WorkSharedDraftMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({DRAFTER_CREATING:"drafter_creating",FINAL_AUTHOR_EDITING:"final_author_editing"});i.default=e}),66);
__d("logVideoUploadViaFalco",["FBLogger","MediaUploadCommonWwwFalcoEvent","VideoComposerDialogVersion","VideoUploadSourceType","WorkSharedDraftMode","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("FBLogger")("media_upload","media_upload_common_www")}function s(e){if(e!=null)return String(e)}function u(e){if(e!=null)return e==="false"||e==="0"?!1:!!e}function c(t){try{if(t==null)return;var n;return typeof t=="number"?n=Number.isInteger(t)?t:Math.trunc(t):n=Number.parseInt(String(t),10),Number.isNaN(n)||!Number.isFinite(n)?void 0:String(n)}catch(n){e().catching(r("getErrorSafe")(n)).warn("Value should be integer, but it was not - %s",String(t));return}}function d(e){if(e!=null){var t=Number(e);return Number.isNaN(t)||!Number.isFinite(t)?void 0:t}}function m(e){if(!(e==null||typeof e!="object"))return e}function p(e,t){if(e!=null&&Object.values(t).indexOf(e)>=0)return e}function _(t){var n=s(t.waterfall_id);if(n==null){e().warn("Video upload event cannot be logged due missing waterfall_id: %s",String(t.waterfall_id));return}var o=p(t.source,r("VideoUploadSourceType"));if(o==null){e().warn("Video upload event cannot be logged due missing or invalid source type: %s (original: %s)",String(o),String(t.source));return}var a=s(t.event);if(a==null){e().warn("Video upload event cannot be logged due missing event field: %s",String(t.event));return}var i={waterfall_id:n,source:o,event:a,actor_id:s(t.actor_id),target_id:s(t.target_id),composer_entry_point_ref:s(t.composer_entry_point_ref),container_type:c(t.container_type),is_chunked_upload:u(t.is_chunked_upload),hinted_app_id:s(t.app_id),is_remote_upload:u(t.is_remote_upload),composer_dialog_version:p(t.composer_dialog_version,r("VideoComposerDialogVersion")),composer_work_shared_draft_mode:p(t.composer_work_shared_draft_mode,r("WorkSharedDraftMode")),elapsed_time:c(t.elapsed_time),error:s(t.error),error_inner:s(t.error_inner),error_code:c(t.error_code),error_description:s(t.error_description),error_summary:s(t.error_summary),error_trace:s(t.error_trace),source_height:c(t.source_height),source_width:c(t.source_width),duration:c(t.duration),file_size:c(t.file_size),has_file_been_replaced:u(t.has_file_been_replaced),composer_session_id:s(t.composer_session_id),retries:c(t.retries),server_retries:c(t.server_retries),asset_id:s(t.asset_id),file_can_read:u(t.file_can_read),application_state:s(t.application_state),upload_method:s(t.upload_method),upload_domain:s(t.upload_domain),hash:s(t.hash),hash_time:c(t.hash_time),hash_exception:s(t.hash_exception),video_id:s(t.video_id),upload_speed:d(t.upload_speed),skip_upload:u(t.skip_upload),trigger_time:s(t.trigger_time),ad_account_id:s(t.ad_account_id),video_original_file_path:s(t.video_original_file_path),event_reason:s(t.event_reason),retry_id:s(t.retry_id),internet_status:s(t.internet_status),network_status:s(t.network_status),is_spherical:u(t.is_spherical),file_extension:s(t.file_extension),sent_bytes:c(t.sent_bytes),start_offset:c(t.start_offset),transport_retries:c(t.transport_retries),timeout_retries:c(t.timeout_retries),request_manager_state:s(t.request_manager_state),debug:m(t.debug),creative_tools:s(t.creative_tools)};r("MediaUploadCommonWwwFalcoEvent").logCritical(function(){return i})}l.default=_}),98);
__d("VideoUploadLogger",["Banzai","CurrentUser","VideoUploadLoggerEvents","VideoUploadLoggingConfig.experimental","logVideoUploadViaFalco"],(function(t,n,r,o,a,i,l){var e,s=babelHelpers.extends({BANZAI_GK:"videos",BANZAI_ROUTE:"video_waterfall",SOURCE_SIMPLE:"simple",SOURCE_COMPOSER:"composer"},(e=o("VideoUploadLoggerEvents")).VideoUploadLoggerEvents),u=new Set([e.VideoUploadLoggerEvents.EVENT_STARTED_FLOW,e.VideoUploadLoggerEvents.EVENT_FINISHED_FLOW,e.VideoUploadLoggerEvents.EVENT_FAILED_FLOW,e.VideoUploadLoggerEvents.EVENT_CANCELED_FLOW]),c=(function(){function e(t){this.$1=t.source,this.$2=t.composer_dialog_version,this.$3=t.waterfall_id,this.$4=t.ad_account_id,this.$5=t.target_id,this.$6=t.delay,this.$7=[],this.$8=t.is_chunked_upload,this.$9=t.actor_id,this.$10=t.composer_entry_point_ref,this.$11=t.composer_work_shared_draft_mode,this.$12=t.is_remote_upload,this.$13=t.container_type,this.$14=t.has_file_been_replaced,this.$15=t.composer_session_id,this.$16=t.creative_tools,this.$17=t.asset_id,this.$18=r("CurrentUser").getAppID(),this.$19=!t.reported_by_notifier&&e.shouldSendFlowEventsViaNotifier({source_type:t.source,composer_entry_point_ref:t.composer_entry_point_ref})}e.shouldSendFlowEventsViaNotifier=function(t){return!!(r("VideoUploadLoggingConfig.experimental").FLOW_VIA_NOTIFIER_COMPOSERS||[]).find(function(e){return e.source_type===t.source_type&&e.composer_entry_point_ref===t.composer_entry_point_ref})};var t=e.prototype;return t.logEvent=function(t,n){if(!(this.$19&&u.has(t))){var e=babelHelpers.extends({},n);e.elapsed_time==null&&(t.indexOf("started")!==-1?this.$7[t]=Date.now():t.indexOf("finished")!==-1?e.elapsed_time=this.$20(t,"finished"):t.indexOf("canceled")!==-1?e.elapsed_time=this.$20(t,"canceled"):t.indexOf("failed")!==-1&&(e.elapsed_time=this.$20(t,"failed"))),e.event=t,e.source=this.$1,e.composer_dialog_version=e.composer_dialog_version||this.$2,e.waterfall_id=this.$3,e.ad_account_id=this.$4,e.target_id=this.$5,e.is_chunked_upload=this.$8,e.actor_id=this.$9,e.composer_entry_point_ref=this.$10,e.composer_work_shared_draft_mode=this.$11,e.is_remote_upload=this.$12,e.container_type=this.$13,e.has_file_been_replaced=this.$14,e.trigger_time=Date.now(),e.composer_session_id=this.$15,e.asset_id=this.$17,e.app_id=this.$18,r("logVideoUploadViaFalco")(e)}},t.postOnShutdown=function(t){return r("Banzai").subscribe(r("Banzai").SHUTDOWN,t)},t.getWaterfallID=function(){return this.$3},t.$20=function(t,n){var e=t.replace(n,"started"),r=this.$7[e];return r?Date.now()-r:null},e})();Object.assign(c,s);var d=c;l.default=d}),98);
__d("VideoUploadLoggerTyped",["VideoUploadLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,t)||this}return babelHelpers.inheritsLoose(t,e),t})(r("VideoUploadLogger"));l.VideoUploadLogger=e}),98);
__d("VideoUploadFlowNotifier",["Banzai","MediaCancelledPostFlowFalcoEvent","MediaFailedPostFlowFalcoEvent","MediaFinishedPostFlowFalcoEvent","MediaStartedPostFlowFalcoEvent","Run","SubscriptionsHandler","VideoUploadLoggerEvents","VideoUploadLoggerTyped","WaterfallIDGenerator"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({SUCCESSFUL:"successful",FAILED:"failed",CANCELED:"canceled",REQUESTED:"requested",STARTED:"started"}),s=(function(){function t(){this.$1={}}var n=t.prototype;return n.registerUpload=function(t,n){var e={isStarted:!1,isUploaded:!1,isCanceled:!1,isFailed:!1};this.$1[String(n)]=e,t.subscribe("upload-started",function(){e.isStarted=!0}),t.subscribe("upload-canceled",function(){e.isCanceled=!0}),t.subscribe("upload-failed",function(){e.isFailed=!0}),t.subscribe("upload-finished",function(){e.isUploaded=!0})},n.cancelUpload=function(t){var e=this.$1[String(t)];e!=null&&(e.isCanceled=!0)},n.$2=function(n){return n.isCanceled?e.CANCELED:n.isUploaded?e.SUCCESSFUL:n.isFailed?e.FAILED:n.isStarted?e.STARTED:e.REQUESTED},n.areAnyVideosIncludedInPost=function(){var t=this,n=Object.keys(this.$1).map(function(e){return t.$2(t.$1[e])});return n.some(function(t){return t!==e.CANCELED})},n.getSummary=function(){var t=this,n=Object.keys(this.$1).map(function(e){return t.$2(t.$1[e])});return{total:n.length,successful:n.filter(function(t){return t===e.SUCCESSFUL}).length,started:n.filter(function(t){return t===e.STARTED}).length,canceled:n.filter(function(t){return t===e.CANCELED}).length,failed:n.filter(function(t){return t===e.FAILED}).length}},t})(),u=(function(){function e(){}var t=e.prototype;return t.logFlowStarted=function(){},t.logFlowFinished=function(){},t.logFlowCanceled=function(){},t.logFlowFailed=function(){},t.release=function(){},e})(),c=(function(){function e(e,t){var n=this;this.$2=t,this.$1=e,this.$4=new Set,this.$3=new(r("SubscriptionsHandler")),e.cancel_on_unload&&this.$3.addSubscriptions(r("Banzai").subscribe(r("Banzai").SHUTDOWN,function(){return n.$6("shutdown")})),e.cancel_on_leave&&this.$3.addSubscriptions(o("Run").onLeave(function(){return n.$6("leave")}))}var t=e.prototype;return t.release=function(){this.$3.release()},t.$7=function(){var e=this.$2.getSummary(),t=this.$5;return{composer_session_id:this.$1.composer_session_id,source_type:this.$1.source,target_id:this.$1.target_id,target_type:this.$1.target_type,composer_entry_point_ref:this.$1.composer_entry_point_ref,total_uploads:e.total,started_uploads:e.started,successful_uploads:e.successful,canceled_uploads:e.canceled,failed_uploads:e.failed,elapsed_time:t!=null?Date.now()-t:null}},t.logFlowFinished=function(){var e=this;this.$4.has(r("MediaFinishedPostFlowFalcoEvent"))||(r("MediaFinishedPostFlowFalcoEvent").log(function(){return e.$7()}),this.$4.add(r("MediaFinishedPostFlowFalcoEvent")))},t.logFlowStarted=function(){var e=this;this.$4.has(r("MediaStartedPostFlowFalcoEvent"))||(r("MediaStartedPostFlowFalcoEvent").log(function(){return e.$7()}),this.$5=Date.now(),this.$4.add(r("MediaStartedPostFlowFalcoEvent")))},t.logFlowCanceled=function(){this.$6("user")},t.logFlowFailed=function(){var e=this;this.$4.has(r("MediaFailedPostFlowFalcoEvent"))||(r("MediaFailedPostFlowFalcoEvent").log(function(){return e.$7()}),this.$4.add(r("MediaFailedPostFlowFalcoEvent")))},t.$6=function(t){var e=this;this.$4.has(r("MediaCancelledPostFlowFalcoEvent"))||(r("MediaCancelledPostFlowFalcoEvent").log(function(){return babelHelpers.extends({},e.$7(),{event_reason:t})}),this.$4.add(r("MediaCancelledPostFlowFalcoEvent")))},e})(),d=(function(){function e(e,t){var n=this;this.$1=t,this.$3=new Set,this.$4=new(o("VideoUploadLoggerTyped")).VideoUploadLogger({source:e.source,waterfall_id:e.composer_session_id,composer_session_id:e.composer_session_id,target_id:e.target_id,composer_entry_point_ref:e.composer_entry_point_ref,reported_by_notifier:!0}),this.$2=new(r("SubscriptionsHandler")),this.$2.addSubscriptions(this.$4.postOnShutdown(function(){return n.$5("shutdown")})),e.cancel_on_leave&&this.$2.addSubscriptions(o("Run").onLeave(function(){return n.$5("leave")}))}var t=e.prototype;return t.release=function(){this.$2.release()},t.logFlowFinished=function(){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_FINISHED_FLOW)},t.logFlowStarted=function(){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_STARTED_FLOW)},t.logFlowCanceled=function(){this.$5("user")},t.logFlowFailed=function(){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_FAILED_FLOW)},t.$6=function(t,n){if(!this.$3.has(t)){var e=this.$1.getSummary();this.$4.logEvent(t,babelHelpers.extends({},n,{debug:{total_uploads:e.total,started_uploads:e.started,successful_uploads:e.successful,canceled_uploads:e.canceled,failed_uploads:e.failed}})),this.$3.add(t)}},t.$5=function(t){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_CANCELED_FLOW,{event_reason:t})},e})(),m=Object.freeze({UPLOAD_USER_REMOVED:"upload_removed"}),p=Object.freeze({POST_USER_CANCELED:"post_user_canceled",POST_USER_REQUESTED:"post_user_requested",POST_FAILED:"post_failed",POST_SUCCESSFUL:"post_successful"});function _(e){return e==null?o("WaterfallIDGenerator").generate():e}function f(e){return e.extended_flow_logging_enabled?new h(e):g.getInstance()}var g=(function(){function e(){}e.getInstance=function(){return e.$1};var t=e.prototype;return t.registerVideoUpload=function(t,n){return _(n)},t.notifyOnUploadAction=function(t){},t.notifyOnPostAction=function(t){},e})();g.$1=new g;var h=(function(){function e(e){this.$3=e,this.$5=new s,this.$2=new u,this.$1=!1,this.$4=e.composer_session_id==null?o("WaterfallIDGenerator").generate():e.composer_session_id}var t=e.prototype;return t.$6=function(){var e=o("VideoUploadLoggerTyped").VideoUploadLogger.shouldSendFlowEventsViaNotifier({source_type:this.$3.source,composer_entry_point_ref:this.$3.composer_entry_point_ref}),t=e?d:c;return new t({composer_entry_point_ref:this.$3.composer_entry_point_ref,source:this.$3.source,target_id:this.$3.target_id,target_type:this.$3.target_type,composer_session_id:this.$4,cancel_on_leave:this.$3.cancel_on_leave,cancel_on_unload:this.$3.cancel_on_unload==null?!0:this.$3.cancel_on_unload},this.$5)},t.registerVideoUpload=function(t,n){var e=_(n);return t.setComposerSessionID(this.$4),this.$5.registerUpload(t,e),e},t.notifyOnUploadAction=function(t){switch(t.action){case m.UPLOAD_USER_REMOVED:this.$5.cancelUpload(t.trackingID);break}},t.notifyOnPostAction=function(t){switch(t.action){case p.POST_USER_REQUESTED:!this.$1&&this.$5.areAnyVideosIncludedInPost()&&(this.$2=this.$6(),this.$1=!0),this.$2.logFlowStarted();break;case p.POST_FAILED:this.$2.logFlowFailed(),this.$2.release();break;case p.POST_SUCCESSFUL:this.$2.logFlowFinished(),this.$2.release(),this.$2=new u;break;case p.POST_USER_CANCELED:this.$2.logFlowCanceled(),this.$2.release();break}},e})();l.VideoUploadActions=m,l.VideoPostActions=p,l.createVideoUploadFlowNotifier=f,l.NoOpVideoUploadFlowNotifier=g}),98);
__d("VideoUploadSurface",["$InternalEnum","VideoUploadFlowNotifier","WaterfallIDGenerator"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({JEST_TESTS:"jest_tests",COMMENTS:"comments",FEED:"feed"}),s=(function(){function e(e){this.$1={},this.$2=e}var t=e.prototype;return t.getByID=function(t){return this.$1[t]},t.getExistingOrNoOpByID=function(t){var e=this.getByID(t);return e==null?this.$2.noOpProvider():e},t.register=function(t,n){var e=n==null?o("WaterfallIDGenerator").generate():n;return this.$1[e]=t,e},t.clear=function(t){this.$1[t]=void 0},e})(),u=(function(){function e(){this.$2=new s({noOpProvider:function(){return o("VideoUploadFlowNotifier").NoOpVideoUploadFlowNotifier.getInstance()}})}e.getOrCreate=function(n){var t=e.$1[n];return t==null&&(t=new e,e.$1[n]=t),t};var t=e.prototype;return t.notifiers=function(){return this.$2},e})();u.$1={},l.VideoUploadSurfaceIDs=e,l.VideoUploadSurface=u}),98);
__d("MediaUploadAssetEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ASSET_ADDED","ASSET_STARTED","ASSET_REMOVED","ASSET_FAILED","ASSET_SUCCEED","ASSET_PROGRESS","ASSET_STALL"]),l=e;i.default=l}),66);
__d("MediaUploadClientEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["CLIENT_CREATED","CLIENT_CONFIG_REQUESTED","CLIENT_CONFIG_RECEIVED","CLIENT_CONFIG_FAILED","CLIENT_CONFIG_CACHED","CLIENT_INTERNET_ONLINE","CLIENT_INTERNET_OFFLINE","CLIENT_INTERNET_UNKNOWN"]),l=e;i.default=l}),66);
__d("MediaUploadEntryPointID",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){this.key=t};i.default=e}),66);
__d("MediaUploadFBEntryPointID",["MediaUploadEntryPointID"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,t+"\\"+n)||this,r.sourceType=t,r.entryPointRef=n,r}return babelHelpers.inheritsLoose(t,e),t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided entry point ID has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadEntryPointID"));l.default=e}),98);
__d("MediaUploadAsset",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.mediaType=e.mediaType,this.data=e.data}var t=e.prototype;return t.dataAsFile=function(){var e=this.data;return e.mode==="File"?e:null},t.dataAsHTMLInput=function(){var e=this.data;return e.mode==="HTMLInput"?e:null},e})();i.default=e}),66);
__d("MediaUploadMediaType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["VIDEO"]),l=e;i.default=l}),66);
__d("MediaUploadTime",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=e*60,s=l*60;function u(e){return e}function c(t){return t*e}function d(e){return e*l}function m(e){return e*s}function p(e){return e}function _(t){return 1*t/e}function f(e){return 1*e/l}function g(e){return 1*e/s}function h(e,t){return e==null?null:t(e)}function y(e){return h(e,p)}function C(e){return h(e,_)}function b(e){return h(e,f)}function v(e){return h(e,g)}function S(e,t){return e+t}function R(e,t){return e-t}function L(e,t){return e<t?-1:e>t?1:0}i.millisecondsToTime=u,i.secondsToTime=c,i.minutesToTime=d,i.hoursToTime=m,i.timeToMilliseconds=p,i.timeToSeconds=_,i.timeToMinutes=f,i.timeToHours=g,i.maybeTimeToMilliseconds=y,i.maybeTimeToSeconds=C,i.maybeTimeToMinutes=b,i.maybeTimeToHours=v,i.addTime=S,i.subtractTime=R,i.compareTime=L}),66);
__d("MediaUploadAssetFactory",["MediaUploadAsset","MediaUploadMediaType","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;var t=/\.([^.]+)$/.exec(e);return t==null||t.length<2?null:t[1]}var s=(function(){function t(e){var t=e.features;this.$1=t}var n=t.prototype;return n.$2=function(n){return{mode:"File",file:n,lastModified:o("MediaUploadTime").millisecondsToTime(n.lastModified),name:n.name,size:n.size,mimeType:n.type,extension:e(n.name)}},n.$3=function(n){return{mode:"HTMLInput",inputElement:n,name:n.value,extension:e(n.value)}},n.createFromFile=function(t,n){return n===void 0&&(n=r("MediaUploadMediaType").VIDEO),new(r("MediaUploadAsset"))({mediaType:n,data:this.$2(t)})},n.createFromHTMLInput=function(t,n){var e;n===void 0&&(n=r("MediaUploadMediaType").VIDEO);var o;if(this.$1.supportFileFromHTML&&((e=t.files)==null?void 0:e.length)>0){var a=t.files[0];o=this.$2(a)}else o=this.$3(t);return new(r("MediaUploadAsset"))({mediaType:n,data:o})},t})();l.default=s}),98);
__d("MediaUploadSDK",["MediaUploadAssetFactory"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){var e=this;this.isSupported=function(){return e.features.supportFileManipulation&&e.features.supportFileFromHTML},this.currentTimeProvider=t.currentTimeProvider,this.randomNumberProvider=t.randomNumberProvider,this.randomStringProvider=t.randomStringProvider,this.retryPolicyProvider=t.retryPolicyProvider,this.promiseTerminator=t.promiseTerminator,this.delayedExecutor=t.delayedExecutor,this.reportRecoverableError=t.reportRecoverableError,this.createThrowableError=t.createThrowableError,this.features=t.featureDetector(),this.registerUnloadHook=t.registerUnloadHook,this.factories={assets:new(r("MediaUploadAssetFactory"))(this)}};l.default=e}),98);
__d("mediaUploadFBRetryPolicyProvider",["MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e,s={backoff:{initial:(e=o("MediaUploadTime")).millisecondsToTime(400),jitter:e.millisecondsToTime(100),expBase:e.millisecondsToTime(100),expMultiplier:1.5,max:e.secondsToTime(8)},limits:{totalRetryCount:3e3,totalTime:e.hoursToTime(6)}};function u(){return s}l.default=u}),98);
__d("MediaUploadFBSDK",["Banzai","FBLogger","MediaUploadSDK","MediaUploadTime","Random","SubscriptionsHandler","WaterfallIDGenerator","clearTimeout","fileSlice","getErrorSafe","mediaUploadFBRetryPolicyProvider","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e="media_upload",s=(function(t){function n(){return t.call(this,{currentTimeProvider:function(){return o("MediaUploadTime").millisecondsToTime(Date.now())},randomNumberProvider:function(t,n){return(n-t)*r("Random").random()+t},randomStringProvider:function(){return o("WaterfallIDGenerator").generate()},retryPolicyProvider:r("mediaUploadFBRetryPolicyProvider"),promiseTerminator:function(t){return r("promiseDone")(t)},delayedExecutor:function(t,n,a){var e=r("setTimeout")(n,o("MediaUploadTime").timeToMilliseconds(t));return{cancel:function(){a!=null&&a(),r("clearTimeout")(e)}}},reportRecoverableError:function(n,o){o!=null?r("FBLogger")(e).catching(r("getErrorSafe")(o)).mustfix(n):r("FBLogger")(e).mustfix(n)},createThrowableError:function(n){throw r("FBLogger")(e).mustfixThrow(n)},featureDetector:function(){return{supportFileFromHTML:"FileList"in window,supportFileManipulation:"FileReader"in window&&"DataView"in window&&"FormData"in window&&typeof r("fileSlice")=="function"}},registerUnloadHook:function(n){var t=new(r("SubscriptionsHandler")),o=r("Banzai").subscribe(r("Banzai").SHUTDOWN,n);return o!=null?t.addSubscriptions():r("FBLogger")(e).mustfix("Banzai did not return handle for unsubscribing from the unload hook; logging quality will be bad"),{cancel:function(){try{t.release()}catch(t){r("FBLogger")(e).catching(r("getErrorSafe")(t)).mustfix("Failed to unsubscribe from the unload hook")}}}}})||this}return babelHelpers.inheritsLoose(n,t),n})(r("MediaUploadSDK")),u=new s,c=u;l.default=c}),98);
__d("MediaUploadFBStage",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["METADATA_EXTRACTION","METADATA_VALIDATION","HASHING","START_REQUEST","BYTES_UPLOAD","RECEIVE_REQUEST"]),l=e;i.default=l}),66);
__d("MediaUploadSessionEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SESSION_CONFIRMED","SESSION_SUCCEED","SESSION_FAILED","SESSION_CANCELED","SESSION_FINISHED","SESSION_PROGRESS","PUBLISH_STARTED","PUBLISH_SUCCEED","PUBLISH_FAILED"]),l=e;i.default=l}),66);
__d("MediaUploadStageEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["STAGE_STARTED","STAGE_PROGRESS","STAGE_SUCCEED","STAGE_FAILED","STAGE_CANCELED"]),l=e;i.default=l}),66);
__d("MediaUploadVUShim",["MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadFBEntryPointID","MediaUploadFBSDK","MediaUploadFBStage","MediaUploadSessionEvent","MediaUploadStageEvent","MediaUploadVUShimSession","MediaUploadVUShimSurface","Promise","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=new Map}var o=t.prototype;return o.createSession=function(t){if(!r("MediaUploadFBSDK").isSupported())return null;var e=t.source,n=t.composer_entry_point_ref;if(e==null||n==null)return null;var o=new(r("MediaUploadFBEntryPointID"))(e,n);if(!r("MediaUploadVUShimSurface").isClientSupported(o)||!r("gkx")("25479"))return null;var a=r("MediaUploadVUShimSurface").getClient(o),i=new(r("MediaUploadVUShimSession"))(t,a);return this.$1.set(i.sessionID,i),i},o.triggerPublish=function(r,o){var t=this.$1.get(r.sessionID);return t==null?(e||(e=n("Promise"))).resolve({isSuccessful:!1,errorCode:"MISSING_SESSION"}):t.triggerPublish(r,o)},o.setupEventSubscription=function(t){var e=this,n=function(r){t.addClientEventListener(r,function(t){return e.emitClientEvents(r)})};for(var o of r("MediaUploadClientEvent").members())n(o);var a=function(r){t.addSessionEventListener(r,function(t){var n;return(n=e.$1.get(t.sessionID))==null?void 0:n.sessionUpdated(r,t)})};for(var i of r("MediaUploadSessionEvent").members())a(i);var l=function(r){t.addAssetEventListener(r,function(t,n){var o;(o=e.$1.get(t.sessionID))==null||o.assetUpdated(r,t,n)})};for(var s of r("MediaUploadAssetEvent").members())l(s);var u=function(o){var n=function(r){t.addStageEventListener(o,r,function(t,n){var a;(a=e.$1.get(t.sessionID))==null||a.stageUpdated(o,r,t,n)})};for(var a of r("MediaUploadFBStage").members())n(a)};for(var c of r("MediaUploadStageEvent").members())u(c)},o.emitClientEvents=function(t){var e;if(t===r("MediaUploadClientEvent").CLIENT_INTERNET_ONLINE)e="online";else if(t===r("MediaUploadClientEvent").CLIENT_INTERNET_OFFLINE)e="offline";else return;for(var n of this.$1.values())n.inform(e)},t})(),u=new s,c=u;l.default=c}),98);
__d("MediaUploadAssetStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["REQUESTED","SCHEDULED","PROCESSING","UPLOADING","COMPLETED","FAILED","REMOVED"]),l=e;i.default=l}),66);
__d("MediaUploadCancelReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["USER_REQUEST","NAVIGATION_AWAY","UNLOAD_HOOK"]),l=e;i.default=l}),66);
__d("MediaUploadCancelablePromise",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l={cancel:function(){}},s=(function(){function t(t){var r=this;this.$1=!1,this.promise=new(e||(e=n("Promise")))(function(e,n){r.$2=t(e,n),r.$2==null&&(r.$2=l),r.$1&&r.$2.cancel()})}t.resolve=function(n){return new t(function(e){e(n)})};var r=t.prototype;return r.then=function(n){var e=this;return new t(function(r,o){var a={cancelable:e};return e.promise.then(function(r){if(a.cancelable=l,e.$1)return r;var o=n(r);return o instanceof t?(a.cancelable=o,o.promise):o}).then(r).catch(function(){a.cancelable=l,o.apply(void 0,arguments)}),{cancel:function(){a.cancelable.cancel()}}})},r.isCanceled=function(){return this.$1},r.cancel=function(){if(!this.$1){var e;this.$1=!0,(e=this.$2)==null||e.cancel()}},t})();i.default=s}),66);
__d("MediaUploadClientEventContext",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n){this.startedAt=t.currentTimeProvider(),this.entryPoint=n};i.default=e}),66);
__d("MediaUploadBytesSummary",["MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.reset=function(){this.$2=null},t.updateForUploadStart=function(t){var e=this.$1.currentTimeProvider();this.$2={fullyCompleted:!1,startedAt:e,updatedAt:e,totalBytes:t,uploadedBytes:0,skippedUpload:!1}},t.updateForUploadSkip=function(t){var e=this.$1.currentTimeProvider();this.$2={fullyCompleted:!0,startedAt:e,updatedAt:e,finishedAt:e,totalBytes:t,uploadedBytes:t,skippedUpload:!0}},t.updateForProgress=function(t){var e=this.$2;if(e==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}e.uploadedBytes=t,e.updatedAt=this.$1.currentTimeProvider()},t.updateForUploadComplete=function(){var e=this.$2;if(e==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}this.updateForProgress(e.totalBytes),e.fullyCompleted=!0,e.uploadedBytes=e.totalBytes},t.updateForUploadAbandoned=function(){var e=this.$2;if(e==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}e.finishedAt=this.$1.currentTimeProvider()},t.computeSpeedBps=function(){var e=this.$2;if(e==null||e.skippedUpload)return null;var t=o("MediaUploadTime").timeToSeconds(o("MediaUploadTime").subtractTime(e.updatedAt,e.startedAt));return t>.1?e.uploadedBytes/t:0},t.computeUploadedPortion=function(){var e=this.$2;return e==null?null:e.fullyCompleted?1:e.totalBytes===0?0:1*e.uploadedBytes/e.totalBytes},t.computeSnapshot=function(){var e=this.$2;return e==null?null:{uploadedBytes:e.uploadedBytes,speedBps:this.computeSpeedBps(),skippedUpload:e.skippedUpload,startedAtMs:o("MediaUploadTime").timeToMilliseconds(e.startedAt),finishedAtMs:o("MediaUploadTime").maybeTimeToMilliseconds(e.finishedAt)}},e})();l.default=e}),98);
__d("MediaUploadOperationOutcome",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SUCCESS","CANCELED","FAILED_NON_TRANSIENT","FAILED_NO_MORE_RETRIES","FAILED_OUT_OF_TIME"]),l=e;i.default=l}),66);
__d("MediaUploadAssetContext",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadBytesSummary","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.assetRequest,n=e.emitter,o=e.params,a=e.progressCalculator,i=e.retryState,l=e.sessionContext;this.sessionContext=l,this.request=t,this.assetID=t.assetID,this.asset=t.asset,this.retryState=i,this.$2=n,this.$3=a,this.$1=o.currentTimeProvider,this.$4=r("MediaUploadAssetStatus").REQUESTED,this.createdAt=this.$1(),this.uploadSummary=new(r("MediaUploadBytesSummary"))(o),this.progress={completedStages:new Set,calculated:{rawValue:0,percentageComplete:0}}}var t=e.prototype;return t.emitAssetEvent=function(t){this.$2.emitAssetEvent(t,this),(t===r("MediaUploadAssetEvent").ASSET_SUCCEED||t===r("MediaUploadAssetEvent").ASSET_REMOVED)&&this.recalculateProgressAndEmit()},t.emitStageEvent=function(t,n){this.$2.emitStageEvent(t,this,n),t===r("MediaUploadStageEvent").STAGE_SUCCEED&&(this.progress.completedStages.add(n),this.recalculateProgressAndEmit()),t===r("MediaUploadStageEvent").STAGE_PROGRESS&&this.recalculateProgressAndEmit()},t.emitStageEventForOperationOutcome=function(t,n){t===r("MediaUploadOperationOutcome").SUCCESS?this.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,n):t===r("MediaUploadOperationOutcome").CANCELED?this.emitStageEvent(r("MediaUploadStageEvent").STAGE_CANCELED,n):this.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,n)},t.recalculateProgressAndEmit=function(){var e=this.$3.calculateAssetProgress(this);this.sessionContext.recalculateProgressAndEmit(),e&&this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_PROGRESS)},t.$5=function(){this.uploadSummary.reset(),this.progress.completedStages.clear(),this.recalculateProgressAndEmit()},t.updateStatusAndEmit=function(t){if(this.$4!==t)switch(this.$4=t,t){case r("MediaUploadAssetStatus").REMOVED:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_REMOVED);break;case r("MediaUploadAssetStatus").FAILED:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_FAILED);break;case r("MediaUploadAssetStatus").COMPLETED:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_SUCCEED);break;case r("MediaUploadAssetStatus").PROCESSING:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_STARTED);break;case r("MediaUploadAssetStatus").UPLOADING:this.progress.lastAttemptStartedAt=this.$1();break;case r("MediaUploadAssetStatus").REQUESTED:case r("MediaUploadAssetStatus").SCHEDULED:this.$5();break}},t.isCompleted=function(){return this.$4===r("MediaUploadAssetStatus").COMPLETED},t.isSchedulable=function(){return this.$4===r("MediaUploadAssetStatus").REQUESTED||this.$4===r("MediaUploadAssetStatus").FAILED},t.isRemoved=function(){return this.$4===r("MediaUploadAssetStatus").REMOVED},t.isFailed=function(){return this.$4===r("MediaUploadAssetStatus").FAILED},t.__composeBaseSnapshot=function(){return{asset:this.asset,assetID:this.assetID,status:this.$4,createdAtMs:o("MediaUploadTime").timeToMilliseconds(this.createdAt),lastUploadStartedAtMs:o("MediaUploadTime").maybeTimeToMilliseconds(this.progress.lastAttemptStartedAt),metadata:this.metadata==null?void 0:{width:this.metadata.width,height:this.metadata.height,isSpherical:this.metadata.isSpherical,durationMs:o("MediaUploadTime").maybeTimeToMilliseconds(this.metadata.duration)},retries:{totalRetryAttempts:this.retryState.getRetryAttempts()},uploadSummary:this.uploadSummary.computeSnapshot(),percentageComplete:this.progress.calculated.percentageComplete}},e})();l.default=e}),98);
__d("MediaUploadExtrasStorage",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$2=new Map,this.$1=e}var t=e.prototype;return t.setFromObject=function(t){for(var e of Object.keys(t))this.set(e,t[e]);return this},t.set=function(t,n){return this.$2.set(t,n),this},t.getNumber=function(t){var e=this.getUnsafe(t);return e==null||typeof e=="number"?e:(this.$1.reportRecoverableError("Requested key "+t+" as number, but it was "+typeof e),null)},t.getString=function(t){var e=this.getUnsafe(t);return e==null||typeof e=="string"?e:(this.$1.reportRecoverableError("Requested key "+t+" as string, but it was "+typeof e),null)},t.getBoolean=function(t){var e=this.getUnsafe(t);return e==null||typeof e=="boolean"?e:(this.$1.reportRecoverableError("Requested key "+t+" as boolean, but it was "+typeof e),null)},t.getUnsafe=function(t){return this.$2.get(t)},t.getClassInstance=function(t,n){var e=this.getUnsafe(t);return e==null||e instanceof n?e:(this.$1.reportRecoverableError("Requested key "+t+" as "+String(n)+", but it was something else"),null)},e})();i.default=e}),66);
__d("MediaUploadFBAssetContext",["ErrorNormalizeUtils","MediaUploadAssetContext","MediaUploadExtrasStorage","MediaUploadStageEvent","MediaUploadTime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.request=t.assetRequest,n.sessionContext=t.sessionContext,n.processing={rawData:new(r("MediaUploadExtrasStorage"))(t.params)},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.recordStageOutcome=function(t){var e=t.displayError,n=t.errorAttributes,o=t.networkRequestID,a=t.outcome,i=t.rawErrorCode,l=t.rawErrorObject,s=t.stage,u=l==null?void 0:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")(l));this.$MediaUploadFBAssetContext$p_1={stage:s,outcome:a,rawErrorCode:i,errorObject:u,displayError:e,errorAttributes:n,networkRequestID:o,rawErrorObject:l}},n.emitStageEvent=function(n,o){n===r("MediaUploadStageEvent").STAGE_STARTED&&(this.$MediaUploadFBAssetContext$p_1=null),e.prototype.emitStageEvent.call(this,n,o)},n.composeSnapshot=function(){var e=this.__composeBaseSnapshot();return babelHelpers.extends({},e,{videoID:this.videoID,request:this.request,uploadServiceDomain:this.processing.uploadServiceDomain,hash:this.processing.pseudoHash==null?null:{hashValue:this.processing.pseudoHash.hashValue,calculationTimeCostMs:o("MediaUploadTime").timeToMilliseconds(this.processing.pseudoHash.calculationTimeCost)},lastAction:this.$MediaUploadFBAssetContext$p_1})},t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided asset context has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadAssetContext"));l.default=e}),98);
__d("MediaUploadSessionStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UNCONFIRMED","CONFIRMED","FAILED","PUBLISHING","COMPLETED","CANCELED"]),l=e;i.default=l}),66);
__d("MediaUploadSessionContext",["MediaUploadExtrasStorage","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set([r("MediaUploadSessionStatus").COMPLETED,r("MediaUploadSessionStatus").CANCELED,r("MediaUploadSessionStatus").FAILED]),s=(function(){function t(e){var t=e.emitter,n=e.params,o=e.progressCalculator,a=e.sessionID;this.assetsByID=new Map,this.sessionID=a,this.$1=t,this.$2=o,this.extras=new(r("MediaUploadExtrasStorage"))(n),this.$4=n.currentTimeProvider,this.$5=n.randomStringProvider,this.$6=r("MediaUploadSessionStatus").UNCONFIRMED,this.$3={createdAt:this.$4()},this.progress={retryID:this.$5(),publishingExtrasProvided:!1,publishingDone:!1,percentageComplete:0},this.releaseOnFinish=[]}var n=t.prototype;return n.emitSessionEvent=function(t){this.$1.emitSessionEvent(t,this),t===r("MediaUploadSessionEvent").PUBLISH_SUCCEED&&(this.progress.publishingDone=!0,this.recalculateProgressAndEmit()),t===r("MediaUploadSessionEvent").SESSION_FINISHED&&this.$7()},n.renewRetryID=function(){this.progress.retryID=this.$5()},n.updateLastError=function(t){this.__lastError=t},n.recalculateProgressAndEmit=function(){this.$2.calculateSessionProgress(this)&&this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_PROGRESS)},n.$7=function(){for(;this.releaseOnFinish.length>0;){var e=this.releaseOnFinish.pop();e.cancel()}},n.updateStatusAndEmit=function(n){if(this.$6!==n)switch(this.$6=n,this.progress.terminalStatus==null&&e.has(n)&&(this.progress.terminalStatus=n,this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_FINISHED)),n){case r("MediaUploadSessionStatus").CONFIRMED:this.progress.terminalStatus=void 0,this.$3.confirmedAt=this.$4(),this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_CONFIRMED);break;case r("MediaUploadSessionStatus").COMPLETED:this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_SUCCEED);break;case r("MediaUploadSessionStatus").CANCELED:this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_CANCELED);break;case r("MediaUploadSessionStatus").FAILED:this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_FAILED);break;case r("MediaUploadSessionStatus").PUBLISHING:this.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_STARTED);break;default:}},n.getActiveAssets=function(){var e=[];for(var t of this.assetsByID.values())t.isRemoved()||e.push(t);return e},n.isCanceled=function(){return this.$6===r("MediaUploadSessionStatus").CANCELED},n.isPublished=function(){return this.$6===r("MediaUploadSessionStatus").COMPLETED},n.isPublishing=function(){return this.$6===r("MediaUploadSessionStatus").PUBLISHING},n.isConfirmed=function(){return this.$6===r("MediaUploadSessionStatus").CONFIRMED},n.isFailed=function(){return this.$6===r("MediaUploadSessionStatus").FAILED},n.__composeBaseSnapshot=function(){return{sessionID:this.sessionID,retryID:this.progress.retryID,status:this.$6,extras:this.extras,timing:{createdAtMs:o("MediaUploadTime").timeToMilliseconds(this.$3.createdAt),confirmedAtMs:o("MediaUploadTime").maybeTimeToMilliseconds(this.$3.confirmedAt)},terminalStatus:this.progress.terminalStatus,percentageComplete:this.progress.percentageComplete,publishingResponse:this.progress.publishingResponse,cancelReason:this.progress.cancelReason}},t})();l.default=s}),98);
__d("MediaUploadFBSessionContext",["ErrorNormalizeUtils","MediaUploadSessionContext","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,{sessionID:t.sessionID,emitter:t.emitter,progressCalculator:t.progressCalculator,params:t.params})||this,n.entryPoint=t.entryPoint,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.composeSnapshot=function(){var e=this.__composeBaseSnapshot();return babelHelpers.extends({},e,{entryPoint:this.entryPoint,lastError:this.__lastError==null?null:{errorObject:this.__lastError.rawErrorObject==null?null:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")(this.__lastError.rawErrorObject)),rawErrorCode:this.__lastError.rawErrorCode}})},t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided session context has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadSessionContext"));l.default=e}),98);
__d("MediaUploadFBClientEventContext",["ErrorNormalizeUtils","MediaUploadClientEventContext","MediaUploadFBAssetContext","MediaUploadFBSessionContext","MediaUploadTime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t.envParams,t.entryPoint)||this,n.entryPoint=t.entryPoint,t.context!=null&&t.context instanceof r("MediaUploadFBSessionContext")?n.sessionContext=t.context:t.context!=null&&t.context instanceof r("MediaUploadFBAssetContext")&&(n.sessionContext=t.context.sessionContext,n.assetContext=t.context),n}babelHelpers.inheritsLoose(t,e),t.castOrThrow=function(n,r){if(n instanceof t)return n;var e;throw r.createThrowableError('Provided client event context has incorrect type of "'+((e=n.constructor)==null?void 0:e.name)+'"')};var n=t.prototype;return n.composerSnapshot=function(){var e,t,n,a,i=((e=this.errorInfo)==null?void 0:e.rawErrorObject)==null?void 0:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")((t=this.errorInfo)==null?void 0:t.rawErrorObject));return{entryPoint:this.entryPoint,startedAtMs:o("MediaUploadTime").timeToMilliseconds(this.startedAt),sessionSnapshot:(n=this.sessionContext)==null?void 0:n.composeSnapshot(),assetSnapshot:(a=this.assetContext)==null?void 0:a.composeSnapshot(),errorObject:i}},t})(r("MediaUploadClientEventContext"));l.default=e}),98);
__d("MediaUploadFBDefaultServerConfigurationRetrieverQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24229633186643574"}),null);
__d("MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql",["MediaUploadFBDefaultServerConfigurationRetrieverQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"source_type"}],t=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],r=[{alias:null,args:null,kind:"ScalarField",name:"service_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_domain",storageKey:null}],o=[{alias:null,args:null,concreteType:"MediaUploadConfiguration",kind:"LinkedField",name:"media_upload_config",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"source_type",variableName:"source_type"}],concreteType:"MediaUploadVideoMetadataValidation",kind:"LinkedField",name:"video_metadata_validation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_size_kb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_size_kb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_duration_secs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_duration_secs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_aspect_ration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_aspect_ration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_extensions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"accept_dimensions_from_player",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkStart",kind:"LinkedField",name:"network_start",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkReceive",kind:"LinkedField",name:"network_receive",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadService",kind:"LinkedField",name:"network_upload_service",plural:!1,selections:[{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTarget",kind:"LinkedField",name:"default",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTarget",kind:"LinkedField",name:"targeted",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTracing",kind:"LinkedField",name:"tracing",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_file_size_kb",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkMonitor",kind:"LinkedField",name:"network_monitor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"network_probe_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internet_probe_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internet_probe_timeout_ms",storageKey:null},{alias:null,args:null,concreteType:"MediaUploadBackoffPolicy",kind:"LinkedField",name:"internet_probe_backoff",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"backoff_initial_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_jitter_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_exp_base_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_exp_multiplier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_max_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limits_total_retry_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limits_total_time_ms",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stall_detection_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stall_detection_timeout_ms",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",selections:o,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",selections:o},params:{id:n("MediaUploadFBDefaultServerConfigurationRetrieverQuery_facebookRelayOperation"),metadata:{},name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("isOndemandHost",[],(function(t,n,r,o,a,i){"use strict";var e=/(^|\.)(od[0-9]+\.\w{4}|\d{4,}\.od|my-od\.|my-od-[0-9]\.)/;function l(t){return e.test(t)}i.default=l}),66);
__d("MediaUploadFBDefaultServerConfigurationRetriever",["MediaUploadCancelablePromise","MediaUploadClientEvent","MediaUploadFBClientEventContext","MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql","MediaUploadOperationOutcome","MediaUploadTime","RelayFBEnvironment","RelayHooks","URI","isOndemandHost","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=e!==void 0?e:e=n("MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql"),d={metadataValidation:{minSizeKB:1,maxSizeKB:10*1024*1024,minDuration:o("MediaUploadTime").secondsToTime(1),maxDuration:o("MediaUploadTime").hoursToTime(24),minWidth:100,minHeight:100,minAspectRatio:.5,maxAspectRatio:4,extensions:new Set(["3g2","3gp","3gpp","asf","avi","dat","divx","dv","f4v","flv","gif","m2ts","m4v","mkv","mod","mov","mp4","mpe","mpeg","mpeg4","mpg","mts","nsv","ogm","ogv","qt","rmvb","tmp","tod","ts","vob","webm","wmv"]),acceptDimensionsFromPlayer:!1},startRequest:{baseURI:new(s||(s=r("URI")))("https://vupload-edge.facebook.com/ajax/video/upload/requests/start/")},startRequestPath:"/ajax/video/upload/requests/start/",receiveRequest:{baseURI:new s("https://vupload-edge.facebook.com/ajax/video/upload/requests/receive/")},receiveRequestPath:"/ajax/video/upload/requests/receive/",uploadService:{defaultService:{serviceName:"rupload",serviceDomain:"facebook.com",serviceConsumer:"fb_video"},targetedService:null,tracing:{enabled:!1,minFileSizeKB:102400},oculusCreatorStudio:"meta_quest_media_studio"},networkMonitor:{networkProbe:{enabled:!0},internetProbe:{enabled:!1,timeout:o("MediaUploadTime").secondsToTime(2),backoffPolicy:{backoff:{initial:o("MediaUploadTime").secondsToTime(10),jitter:o("MediaUploadTime").secondsToTime(0),expBase:o("MediaUploadTime").secondsToTime(1),expMultiplier:2,max:o("MediaUploadTime").secondsToTime(60)},limits:{}}},stallDetector:{enabled:!1,timeout:o("MediaUploadTime").secondsToTime(30)}}},m=(function(){function e(e){this.$5=!0,this.$1=e.entryPoint,this.$3=e.emitter,this.$2=e.setters,this.$4=e.envParams}e.setUriOverrides=function(t,n){u.set(t,n)},e.clearUriOverrides=function(t){u.delete(t)};var t=e.prototype;return t.$6=function(){return o("RelayHooks").fetchQuery(r("RelayFBEnvironment"),c,{source_type:this.$1.sourceType})},t.run=function(t){var e=this,n=new(r("MediaUploadFBClientEventContext"))({entryPoint:this.$1,envParams:this.$4,context:t});return this.$5?(this.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_REQUESTED,n),new(r("MediaUploadCancelablePromise"))(function(t){try{var o=e.$6().subscribe({error:(function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})(function(o){e.$4.reportRecoverableError("Error getting client configuration",o),e.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_FAILED,n),e.$7(null),t(r("MediaUploadOperationOutcome").SUCCESS)}),next:function(a){e.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_RECEIVED,n),e.$7(a),e.$5=!1,t(r("MediaUploadOperationOutcome").SUCCESS)}});return{cancel:function(){o.unsubscribe()}}}catch(o){e.$4.reportRecoverableError("Error requesting client configuration",o),e.$7(null),e.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_FAILED,n),t(r("MediaUploadOperationOutcome").SUCCESS)}})):(this.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_CACHED,n),r("MediaUploadCancelablePromise").resolve(r("MediaUploadOperationOutcome").SUCCESS))},t.$8=function(t){var e,n,r,o,a,i,l;if((t==null||(e=t.default)==null?void 0:e.service_name)==null||(t==null||(n=t.default)==null?void 0:n.service_domain)==null)this.$4.reportRecoverableError("Invalid configuration for default endpoint of the Upload Service, falling back to default"),l=d.uploadService.defaultService;else{var s,c;l={serviceName:t==null||(s=t.default)==null?void 0:s.service_name,serviceDomain:t==null||(c=t.default)==null?void 0:c.service_domain,serviceConsumer:d.uploadService.defaultService.serviceConsumer}}var m=u.get(this.$1.sourceType),p=m==null?void 0:m.service_domain;p!=null&&(l=babelHelpers.extends({},l,{serviceDomain:p}));var _;if((t==null||(r=t.targeted)==null?void 0:r.service_name)!=null&&(t==null||(o=t.targeted)==null?void 0:o.service_domain)!=null){var f,g;_={serviceName:t==null||(f=t.targeted)==null?void 0:f.service_name,serviceDomain:t==null||(g=t.targeted)==null?void 0:g.service_domain}}else(t==null?void 0:t.targeted)==null?_=null:(this.$4.reportRecoverableError("Invalid configuration for target endpoint of the Upload Service, falling back to default"),_=d.uploadService.targetedService);var h;if((t==null||(a=t.tracing)==null?void 0:a.enabled)!=null&&(t==null||(i=t.tracing)==null?void 0:i.min_file_size_kb)!=null){var y,C;h={enabled:t==null||(y=t.tracing)==null?void 0:y.enabled,minFileSizeKB:t==null||(C=t.tracing)==null?void 0:C.min_file_size_kb}}else this.$4.reportRecoverableError("Invalid configuration for tracing in the Upload Service, falling back to default"),h=d.uploadService.tracing;var b=!1;this.$1.sourceType==="vr_creator_studio"&&(b=!0,l.serviceConsumer=d.uploadService.oculusCreatorStudio),this.$2.uploadService({defaultService:l,targetedService:_,tracing:h,includeAccessToken:b})},t.$9=function(t){var e;if((t==null?void 0:t.min_size_kb)==null||(t==null?void 0:t.max_size_kb)==null||(t==null?void 0:t.min_width)==null||(t==null?void 0:t.min_height)==null||(t==null?void 0:t.min_duration_secs)==null||(t==null?void 0:t.max_duration_secs)==null||(t==null?void 0:t.min_aspect_ration)==null||(t==null?void 0:t.max_aspect_ration)==null||(t==null?void 0:t.allowed_extensions)==null||(t==null?void 0:t.accept_dimensions_from_player)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),e=babelHelpers.extends({sourceType:this.$1.sourceType},d.metadataValidation),this.$1.sourceType==="vr_creator_studio"&&(e.maxSizeKB=100*1024*1024);else{var n=t==null?void 0:t.max_duration_secs;e={sourceType:this.$1.sourceType,minSizeKB:t==null?void 0:t.min_size_kb,maxSizeKB:t==null?void 0:t.max_size_kb,minWidth:t==null?void 0:t.min_width,minHeight:t==null?void 0:t.min_height,minAspectRatio:t==null?void 0:t.min_aspect_ration,maxAspectRatio:t==null?void 0:t.max_aspect_ration,extensions:new Set(t==null?void 0:t.allowed_extensions),acceptDimensionsFromPlayer:t==null?void 0:t.accept_dimensions_from_player,minDuration:o("MediaUploadTime").secondsToTime(t==null?void 0:t.min_duration_secs),maxDuration:o("MediaUploadTime").secondsToTime(n)}}this.$2.metadataValidation(e)},t.$10=function(t){return(t==null?void 0:t.backoff_initial_ms)==null?null:{backoff:{initial:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_initial_ms),jitter:(t==null?void 0:t.backoff_jitter_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_jitter_ms),expBase:(t==null?void 0:t.backoff_exp_base_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_exp_base_ms),expMultiplier:t==null?void 0:t.backoff_exp_multiplier,max:(t==null?void 0:t.backoff_max_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_max_ms)},limits:{totalRetryCount:t==null?void 0:t.limits_total_retry_count,totalTime:(t==null?void 0:t.limits_total_time_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.limits_total_time_ms)}}},t.$11=function(t){var e,n=this.$10(t==null?void 0:t.internet_probe_backoff);if((t==null?void 0:t.network_probe_enabled)==null||(t==null?void 0:t.internet_probe_enabled)==null||(t==null?void 0:t.internet_probe_timeout_ms)==null||n==null||(t==null?void 0:t.stall_detection_enabled)==null||(t==null?void 0:t.stall_detection_timeout_ms)==null)this.$4.reportRecoverableError("Invalid network monitor configuration, falling back to default"),e=d.networkMonitor;else{var r=t.internet_probe_enabled,a=t.internet_probe_timeout_ms,i=t.network_probe_enabled,l=t.stall_detection_enabled,s=t.stall_detection_timeout_ms;e={networkProbe:{enabled:i},internetProbe:{enabled:r,timeout:o("MediaUploadTime").millisecondsToTime(a),backoffPolicy:n},stallDetector:{enabled:l,timeout:o("MediaUploadTime").millisecondsToTime(s)}}}this.$2.networkMonitor(e)},t.$12=function(t){var e=u.get(this.$1.sourceType);if((e==null?void 0:e.start_uri)!=null){var n=new(s||(s=r("URI")))(e.start_uri);this.$2.startRequest({baseURI:n});return}var o;if((t==null?void 0:t.uri)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),this.$1.sourceType==="vr_creator_studio"?o={baseURI:new(s||(s=r("URI")))("https://"+window.location.hostname+d.startRequestPath)}:o=d.startRequest;else{var a=new(s||(s=r("URI")))(t==null?void 0:t.uri);o={baseURI:a}}this.$2.startRequest(o)},t.$13=function(t){var e=u.get(this.$1.sourceType);if((e==null?void 0:e.receive_uri)!=null){var n=new(s||(s=r("URI")))(e.receive_uri);this.$2.receiveRequest({baseURI:n});return}var o;if((t==null?void 0:t.uri)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),this.$1.sourceType==="vr_creator_studio"?o={baseURI:new(s||(s=r("URI")))("https://"+window.location.hostname+d.receiveRequestPath)}:o=d.receiveRequest;else{var a=new(s||(s=r("URI")))(t==null?void 0:t.uri);o={baseURI:a}}this.$2.receiveRequest(o)},t.$7=function(t){var e,n,r,o,a;this.$12(t==null||(e=t.media_upload_config)==null?void 0:e.network_start),this.$13(t==null||(n=t.media_upload_config)==null?void 0:n.network_receive),this.$8(t==null||(r=t.media_upload_config)==null?void 0:r.network_upload_service),this.$9(t==null||(o=t.media_upload_config)==null?void 0:o.video_metadata_validation),this.$11(t==null||(a=t.media_upload_config)==null?void 0:a.network_monitor)},e})();function p(e){return e}l.default=m}),98);
__d("GraphQLVideoPublisherInputDataHandlerBase",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(e,t){this.postData=e,this.extraData=t}var t=e.prototype;return t.mapPostDataToGraphQLInputObject=function(){s(0,85)},t.hasAPISupport=function(){return u(this.postData)},t.uploadables=function(){s(0,85)},e})();function u(e){return!0}l.GraphQLVideoPublisherInputDataHandlerBase=e,l.hasAPISupport=u}),98);
__d("ExpirationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,DELETE:1,HIDE:2,ONLY_ME:3,HIDE_LONG_DURATION:4});i.default=e}),66);
__d("VideoAssetMatureContentRating",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNSET:0,SUITABLE_FOR_ALL:1,FOURTEEN_PLUS:2,EIGHTEEN_PLUS:3});i.default=e}),66);
__d("VideoCommentatingPermission",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNSET:"unset",ALLOW:"allow",DISALLOW:"disallow"});i.default=e}),66);
__d("VideoFundedContentFlagProgram",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNSET:0,IS_FUNDED_CONTENT:1,NOT_FUNDED_CONTENT:2});i.default=e}),66);
__d("VideoProjection",[],(function(t,n,r,o,a,i){var e=Object.freeze({FLAT:"flat",EQUIRECTANGULAR:"equirectangular",CUBEMAP:"cubemap",ROTATED_CUBEMAP:"rotated_cubemap",BARREL:"barrel",BARREL_SPLIT:"barrel_split",CDS_BARREL:"cds_barrel",HALF_EQUIRECTANGULAR:"half_equirectangular"});i.default=e}),66);
__d("VideoStereoFormat",[],(function(t,n,r,o,a,i){var e=Object.freeze({MONO:"mono",LEFT_RIGHT:"left-right",TOP_BOTTOM:"top-bottom"});i.default=e}),66);
__d("GraphQLVideoPublisherVideoUploaderInputDataHandler",["BrandedContentSharedToSponsorStatus","BrandedContentSponsorRelationship","CallToActionTypes","ClientIDs","ExpirationType","GraphQLVideoPublisherInputDataHandlerBase","VideoAssetMatureContentRating","VideoCommentatingPermission","VideoFundedContentFlagProgram","VideoProjection","VideoStereoFormat","enumUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.mapPostDataToGraphQLInputObject=function(){var e,t=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_1(),n=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_2(),r=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_3(),a=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_4(),i=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_5(),l=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_6(),s=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_7(),u=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_8(),c=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_9(),d=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_10(),m=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_11(),p=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_12(),_=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_13(),f=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_14(),g=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_15(),h=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_16(),y=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_17(),C=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_18(),b=this.postData.publish_as_reel,v=this.postData.translated_audio_metadata,S=(e=this.postData.non_uuc_reel_data)!=null?e:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_19(),R=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_20();return{actor_id:this.extraData.target_id,basic_data:t,client_mutation_id:o("ClientIDs").getNewClientID(),thumbnail_data:n,ad_break_data:a,vu_editor_data:u,post_status_data:r,main_composer_tab_data:i,distribution_data:l,stars_data:s,questions_data:c,polls_data:d,tracking_data:m,captions_data:p,spherical_data:_,live_premiere_data:f,video_editor_config_json:this.postData.video_editor_config_json,location_preset_data:g,video_abtesting_data:h,auto_dub_data:y,reel_publish_data:C,publish_as_reel:b,non_uuc_reel_data:S,translated_audio_data:{translated_audio_metadata:v},share_story_settings:R}},n.uploadables=function(){return babelHelpers.extends({},this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_21(),this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_22(),this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_23())},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_1=function(){var e;return{source:this.extraData.source,target_id:this.extraData.target_id,video_id:this.extraData.video_id,video_title:this.postData.video_title,waterfall_id:this.extraData.waterfall_id,xhpc_message:this.postData.xhpc_message,creator_product:(e=this.extraData.creator_product)==null?void 0:e.toString(),composer_entry_point_ref:this.extraData.composer_entry_point_ref,composer_dialog_version:this.extraData.composer_dialog_version,has_file_been_replaced:this.extraData.has_file_been_replaced,supports_chunking:this.extraData.supports_chunking}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_2=function(){return{thumbnail_type:this.postData.thumbnail_type}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_22=function(){return this.postData.thumbnail_uploadable},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_23=function(){var e={},t=this.postData.schedule_custom_background_image,n=this.postData.schedule_custom_profile_image,r=this.postData.schedule_feed_background_image;return t!=null&&(e.schedule_custom_background_image=t),n!=null&&(e.schedule_custom_profile_image=n),r!=null&&(e.schedule_feed_background_image=r),e},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_4=function(){var e,t=(e=this.postData.ad_breaks)==null?void 0:e.map(function(e){return{time_offset:parseInt(e.time_offset,10),status:e.status}});return{ad_breaks:t,ad_break_prereview:this.postData.ad_break_prereview,ad_breaks_experiment_revenue_loss_threshold:this.postData.ad_breaks_experiment_revenue_loss_threshold,ad_breaks_creator_chosen_contextual_category:this.postData.ad_breaks_creator_chosen_contextual_category,enable_ad_breaks_experiment:this.postData.enable_ad_breaks_experiment,ad_breaks_block_lists:this.postData.ad_breaks_block_lists,has_ad_breaks_block_lists:this.postData.has_ad_breaks_block_lists,is_in_stream_enabled:this.postData.is_in_stream_enabled,self_cert_answers:this.postData.self_cert_answers,self_cert_educational_form:this.postData.self_cert_educational_form,self_cert_selected_no_sensitive:this.postData.self_cert_selected_no_sensitive,self_cert_predicted_status:this.postData.self_cert_predicted_status,should_auto_adjust_manual_ad_breaks:this.postData.should_auto_adjust_manual_ad_breaks,should_auto_insert_ad_breaks:this.postData.should_auto_insert_ad_breaks,should_use_image_ads:this.postData.should_use_image_ads,monetization_pre_check_options:this.postData.monetization_pre_check_options}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_3=function(){return{dogfooding:this.postData.dogfooding,draft:this.postData.draft,is_reviewable_branded_content:this.postData.is_reviewable_branded_content,scheduled:this.postData.scheduled,future_date:this.postData.future_date,future_time:this.postData.future_time,expiring:this.postData.expiring,expire_type:this.postData.expire_type!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.expire_type,r("ExpirationType")):null,expire_time:this.postData.expire_time,backdated_date:this.postData.backdated_date,hide_from_newsfeed:this.postData.hide_from_newsfeed,schedule_timestamp:this.postData.schedule_timestamp}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_24=function(){var e=this.postData.branded_content_data;if(e==null)return null;var t=e.tagging_data;return t!=null&&(t=babelHelpers.extends({},t,{shared_to_sponsor_status:t.shared_to_sponsor_status!=null?o("enumUtils").enumValueToKeyEnforcing(t.shared_to_sponsor_status,r("BrandedContentSharedToSponsorStatus")):null,sponsor_relationship:t.sponsor_relationship!=null?o("enumUtils").enumValueToKeyEnforcing(t.sponsor_relationship,r("BrandedContentSponsorRelationship")):null})),babelHelpers.extends({},e,{tagging_data:t})},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_5=function(){return{action_type_id:this.postData.action_type_id,branded_content_data:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_24(),collaborator_id:this.postData.collaborator_id,composertags_place_name:this.postData.composertags_place_name,composertags_place:this.postData.composertags_place,composertags_product_items:this.postData.composertags_product_items,composertags_sponsor:this.postData.composertags_sponsor,composertags_with:this.postData.composertags_with,content_tags:this.postData.content_tags,cta_type:this.postData.cta_type!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.cta_type,r("CallToActionTypes")):null,deal_id:this.postData.deal_id,direct_share_status:this.postData.direct_share_status!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.direct_share_status,r("BrandedContentSharedToSponsorStatus")):null,episode_data_json:this.postData.episode_data_json,external_movie_data:this.postData.external_movie_data,feed_targeted_data:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_25(),fan_funding_promotion_metadata:this.postData.fan_funding_promotion_metadata,free_form_tags:this.postData.free_form_tags,funded_content_program:this.postData.funded_content_program?o("enumUtils").enumValueToKeyEnforcing(this.postData.funded_content_program,r("VideoFundedContentFlagProgram")):null,fundraiser_for_story_charity_id:this.postData.fundraiser_for_story_charity_id,fundraiser_for_story_charity_type:this.postData.fundraiser_for_story_charity_type,game_id:this.postData.game_id,icon_id:this.postData.icon_id,is_explicitly_tagged_as_gaming_video:this.postData.is_explicitly_tagged_as_gaming_video,is_rewards_enabled:this.postData.is_rewards_enabled,is_stars_enabled_for_post:this.postData.is_stars_enabled_for_post,multilingual_specified_lang:this.postData.multilingual_specified_lang,multilingual_status_langs:this.postData.multilingual_status_langs,multilingual_statuses:this.postData.multilingual_statuses,object_id:this.postData.object_id,object_str:this.postData.object_str,playlistIDs:this.postData.playlistIDs,share_to_parent_page_option_selected:this.postData.share_to_parent_page_option_selected,send_dm_invite:this.postData.send_dm_invite,sponsor_relationship:this.postData.sponsor_relationship?o("enumUtils").enumValueToKeyEnforcing(this.postData.sponsor_relationship,r("BrandedContentSponsorRelationship")):null,targeted_privacy_data:JSON.stringify(this.postData.targeted_privacy_data),background_ab_opted_in:this.postData.background_ab_opted_in,video_duration:this.postData.video_duration}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_25=function(){var e=babelHelpers.extends({},this.postData.feed_targeted_data);return this.postData.relevant_until_date!=null&&(e["relevant-until-date"]=this.postData.relevant_until_date),this.postData.relevant_until_time!=null&&(e["relevant-until-time"]=this.postData.relevant_until_time),Object.keys(e).length===0&&(e=void 0),JSON.stringify(e)},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_6=function(){return{commentating_permission:this.postData.commentating_permission!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.commentating_permission,r("VideoCommentatingPermission")):null,crossposting_config:this.postData.crossposting_config,disturbing:this.postData.disturbing,embeddable:this.postData.embeddable,enable_drm:this.postData.enable_drm,exclude_from_watch:this.postData.exclude_from_watch,mature_content_rating:this.postData.mature_content_rating!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.mature_content_rating,r("VideoAssetMatureContentRating")):null,no_story:this.postData.no_story,secret:this.postData.secret,shows_v2_episode_data:this.postData.shows_v2_episode_data,social_actions:this.postData.social_actions}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_7=function(){return{is_receiving_stars_enabled:this.postData.is_receiving_stars_enabled,stars_goal_id:this.postData.stars_goal_id,stars_cue_trigger_timestamp:this.postData.stars_cue_trigger_timestamp}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_11=function(){return{custom_labels:this.postData.custom_labels,external_video_id:this.postData.external_video_id}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_9=function(){return{questions:this.postData.questions}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_10=function(){return{polls:this.postData.polls}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_26=function(t){return t.getIsDefault()?"captions_default":"captions_file"},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_12=function(){var e,t=this,n=(e=this.postData.captions)==null?void 0:e.map(function(e,n){return t.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_26(e)+n});return{autopublish_captions:this.postData.autopublish_captions,captions:n,should_review_all_captions:this.postData.should_review_all_captions,spoken_locale:this.postData.spoken_locale,autopublish_subtitles:this.postData.autopublish_subtitles}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_21=function(){var e,t=this,n={};return(e=this.postData.captions)==null||e.forEach(function(e,r){n[t.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_26(e)+r]=e.getFile()}),n},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_8=function(){return{auto_reframe_aspect_ratios:this.postData.auto_reframe_aspect_ratios,auto_reframe_publish_mode:this.postData.auto_reframe_publish_mode,trailer_review_required:this.postData.trailer_review_required,trailer_generate_on:this.postData.trailer_generate_on,auto_reframe_mobile_only:this.postData.auto_reframe_mobile_only||!1}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_13=function(){return{initialHeading:this.postData.initialHeading,initialPitch:this.postData.initialPitch,fov:this.postData.fov,guide_enabled:this.postData.guide_enabled,guide_keyframes:this.postData.guide_keyframes,enable_omnistab:this.postData.enable_omnistab,spherical:this.postData.spherical,projection:this.postData.projection!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.projection,r("VideoProjection")):null,stereoMode:this.postData.stereoMode!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.stereoMode,r("VideoStereoFormat")):null}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_14=function(){return{premiere_time_ms:this.postData.premiere_time_ms,should_premiere:this.postData.should_premiere,premiere_in_living_room_video_ids:this.postData.premiere_in_living_room_video_ids,premiere_custom_profile_image_focus:this.postData.premiere_custom_profile_image_focus,feed_background_focus:this.postData.feed_background_focus,premiere_audience:this.postData.premiere_audience,premiere_is_loe:this.postData.premiere_is_loe,premiere_event_category_id:this.postData.premiere_event_category_id}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_15=function(){return{location_preset_id:this.postData.location_preset_id}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_16=function(){return{is_abtesting:this.postData.is_abtesting,should_publish_uuc:this.postData.should_publish_uuc}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_17=function(){return{dubbing_enabled:this.postData.dubbing_enabled,dub_voice_speed:this.postData.dub_voice_speed,target_locale:this.postData.target_locale,voice_code:this.postData.voice_code}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_19=function(){return{publish_as_non_uuc_reel:this.postData.publish_as_non_uuc_reel}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_18=function(){return this.postData.reel_publish_data},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_20=function(){return this.postData.reshare_post_as_sticker==null?null:{reshare_post_as_sticker:this.postData.reshare_post_as_sticker,resharing_frequency:this.postData.resharing_frequency}},t})(o("GraphQLVideoPublisherInputDataHandlerBase").GraphQLVideoPublisherInputDataHandlerBase);l.default=e}),98);
__d("ReelComposerReelPublishMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24143317328587698"}),null);
__d("ReelComposerReelPublishMutation.graphql",["ReelComposerReelPublishMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"CpxReelPublishResponsePayload",kind:"LinkedField",name:"cpx_reel_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"published_video_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ReelComposerReelPublishMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ReelComposerReelPublishMutation",selections:t},params:{id:n("ReelComposerReelPublishMutation_facebookRelayOperation"),metadata:{},name:"ReelComposerReelPublishMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("ReelComposerReframeAspectRatio",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["NONE","VERTICAL","SQUARE","FOUR_BY_FIVE","MANUAL_9X16","SPLIT_1X3"]);i.ReelComposerReframeAspectRatio=e}),66);
__d("ReelCreationFlowUtils",["$InternalEnum","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("$InternalEnum")).Mirrored(["PUBLISH_NOW","SCHEDULE","DRAFT"]),u=e.Mirrored(["AUDIO","VIDEO"]),c=e.Mirrored(["CREATE","EDIT","AB_TESTING"]),d=e.Mirrored(["CREATOR_STUDIO","MBS","REELS_BULK_UPLOAD"]),m=e.Mirrored(["ENABLED","DISABLED"]),p=function(t){switch(r("vulture")("Zy_DFT_d9vEB43MOHwvCR9PVUGA="),t){case s.PUBLISH_NOW:return"published";case s.DRAFT:return"draft";case s.SCHEDULE:return"scheduled"}};l.ReelPublishType=s,l.ReelEnhancementType=u,l.ReelComposerMode=c,l.ReelsComposerEntrypoint=d,l.ReelsComposerOriginalAudioReuseMode=m,l.getReelPostStatusFromReelPublishType=p}),98);
__d("XFBXFamilyBusinessContentType.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["POST","REEL","STORY"]),l=e;i.default=l}),66);
__d("getEnumFromString",["memoizeByReference"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={};return Object.values(e).forEach(function(e){t[e]=e}),t}var s=r("memoizeByReference")(e);function u(e,t){if(t==null)return null;var n=s(e);return n[t]!=null?n[t]:null}l.default=u}),98);
__d("getChunkForContentState",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){if(t){var r=n.getEntity(t);if(r.getType()==="EMOTICON")return r.getData().originalEmoticon;if(r.getType()==="EMOJI")return r.getData().emoji.join("")}return e.replace("@[","@ [")}i.default=e}),66);
__d("getMentionsTextForContentState",["emptyFunction","getChunkForContentState"],(function(t,n,r,o,a,i){"use strict";var e=n("emptyFunction").thatReturnsTrue,l=/[\\\]:]/g;function s(t,n,r){n===void 0&&(n=""),r===void 0&&(r=!0);var o=t.getBlockMap().map(function(n){var o=n.getText(),a=[];return n.findEntityRanges(e,function(e,i){a.push(u(o.slice(e,i),n.getEntityAt(e),t,r))}),a.join("")});return o.join("\n"+n)}function u(e,t,r,o){if(t){var a=r.getEntity(t);if(a.getType()==="MENTION"){o&&(e=e.replace(l,function(e){return"\\"+e}));var i=a.getData().id;if(/^\d+$/.test(i))return"@["+i+":"+e+"]"}}return n("getChunkForContentState")(e,t,r)}a.exports=s}),null);
__d("getShouldDisableCollabsDraftsandScheduling",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!r("gkx")("9836")}l.getShouldDisableCollabsDraftsandScheduling=e}),98);
__d("shouldUsePostCollabsField",["getShouldDisableCollabsDraftsandScheduling","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e?t===!1?r("gkx")("10000"):!o("getShouldDisableCollabsDraftsandScheduling").getShouldDisableCollabsDraftsandScheduling():!1}l.shouldUsePostCollabsField=e}),98);
__d("ReelComposerReelPublishMutation",["AdsValidationConsts","BusinessComposerIGAudienceTypes","DateConsts","ISOCountryCode","ReelComposerReelPublishMutation.graphql","ReelComposerReframeAspectRatio","ReelCreationFlowUtils","RelayModern","getEnumFromString","getMentionsTextForContentState","justknobx","requireDeferred","shouldUsePostCollabsField","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ODS").__setRef("ReelComposerReelPublishMutation"),u=1,c=e!==void 0?e:e=n("ReelComposerReelPublishMutation.graphql");function d(e,t,n,r){var a=m(r);o("RelayModern").commitMutation(e,{mutation:c,variables:{input:a},onCompleted:t,onError:function(t){return n()}})}function m(e){var t,n,a,i,l,c,d,m,p=e.addedHashtags,h=e.allowTrimBeyondMaxLength,y=e.alternateAudioTracks,C=e.audioCustomStartTimeMs,b=e.audioEnhancementProcessingAmount,v=e.autoDubbingSettings,S=e.closedCaptions,R=e.collaborators,L=e.fbMonetizationData,E=e.geoTargetingData,k=e.igBusinessID,I=e.igTargetingPrivacyData,T=e.inStreamAdsSettings,D=e.isABTest,x=e.isBoostToggleOn,$=e.isFormatMergeEnabled,P=e.isReceivingStarsEnabled,N=e.isTrimTimestampsEqualToEntireVideo,M=e.linkedVideoID,w=e.locationTag,A=e.loggingClientInfo,F=e.mainTrack,O=e.manualCrop,B=e.mixingParams,W=e.music,q=e.original_resolution,U=e.overlay,V=e.pageCaptionSettings,H=e.photoTrack,G=e.placements,z=e.reelCaptionSettings,j=e.reelDescription,K=e.reelEmbeddingEnabled,Q=e.reelPublishType,X=e.reelReframeAspectRatio,Y=e.reelRemixingEnabled,J=e.reelScheduledUnixTimestamp,Z=e.reelsCreatorPlaylistID,ee=e.reelsCreatorPlaylistItemBatchSize,te=e.reelsCreatorPlaylistItemOrder,ne=e.reelsPoll,re=e.reelsReshareDestination,oe=e.shouldDisplayManualDescriptionsSectioninBYOA,ae=e.shouldEnforceVideoEditorPath,ie=e.shouldShareToStory,le=e.shouldSkipEncoding,se=e.shouldUseConsolidatedReelEditPublishPath,ue=e.storySharingFrequency,ce=e.thumbnailType,de=e.totalVideoDuration,me=e.trimEndTimeMs,pe=e.trimStartTimeMs,_e=e.videoContainerType,fe=e.videoID,ge=e.videoThumbnailFileID,he=e.vodTitle,ye=_e==="POST"||$===!0,Ce=Q===o("ReelCreationFlowUtils").ReelPublishType.DRAFT||D===!0,be=Q===o("ReelCreationFlowUtils").ReelPublishType.SCHEDULE&&D!==!0,ve={caption:j,enable_remix:Y,is_draft:Ce,is_scheduled:be,scheduled_publish_time:J},Se=(W==null?void 0:W.id)!=null?{id:W.id,offset:(C!=null?C:W.audio.highlightStartTimeMs)/o("DateConsts").MS_PER_SEC,duration:(me-pe)/o("DateConsts").MS_PER_SEC}:null,Re=N&&X===o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.NONE&&Se===null&&b===0,Le=Re?null:{start_time_in_sec:pe/o("DateConsts").MS_PER_SEC,end_time_in_sec:me/o("DateConsts").MS_PER_SEC},Ee=(t=E==null||(n=E.countries)==null?void 0:n.map(function(e){return r("getEnumFromString")(r("ISOCountryCode"),e)}).filter(Boolean))!=null?t:[],ke=((a=E==null?void 0:E.regions)!=null?a:[]).map(function(e){var t,n;return{key:e.key,country:(t=e.country)!=null?t:"",name:(n=e.name)!=null?n:""}});Ee.length>0&&s.onReady(function(e){e.bumpEntityKey(5907,"fb_stories_web","geo_gating.reel.create",1)});var Ie=(i=I==null||(l=I.targetingData)==null?void 0:l.geoLocations.countries)!=null?i:null,Te=(c=I==null?void 0:I.isIncluded)!=null?c:!1,De=null;if(Ie!=null&&Ie.length>0)if(Te){var xe;De={age_min:r("AdsValidationConsts").minAge,geo_locations:{countries:(xe=Array.from(new Set(Ie)))!=null?xe:[]}}}else{var $e,Pe=Object.keys(r("ISOCountryCode")).filter(function(e){return!o("BusinessComposerIGAudienceTypes").UnsupportedIGAudienceCountryList.includes(e)&&!Ie.includes(e)});De={age_min:r("AdsValidationConsts").minAge,geo_locations:{countries:($e=Array.from(new Set(Pe)))!=null?$e:[]}}}var Ne={reshare_destination:re==null?void 0:re.map(function(e){return{message:{text:e.postText},reshare_audience:{to_id:e.groupID}}})},Me=null;Z!=null&&(Me={videolist_ids:[Z],order:te,batch_size:ee});var we=ye?["FACEBOOK_NEWS_FEED"]:G,Ae=null;if(ye&&T!=null){var Fe,Oe,Be,We,qe,Ue,Ve=(Fe=T==null||(Oe=T.ad_breaks_block_lists)==null||(Oe=Oe.filter(Boolean))==null?void 0:Oe.map(function(e){return e}))!=null?Fe:[],He=(Be=Ve==null?void 0:Ve.map(function(e){return e.toString()}))!=null?Be:[];Ae={has_ad_breaks_block_lists:(We=T==null?void 0:T.has_ad_breaks_block_lists)!=null?We:!1,should_auto_insert_ad_breaks:(qe=T==null?void 0:T.should_auto_insert_ad_breaks)!=null?qe:!1,should_use_image_ads:(Ue=T==null?void 0:T.should_use_image_ads)!=null?Ue:!1,ad_breaks_block_lists:He!=null?He:[]}}var Ge=f(X),ze=o("shouldUsePostCollabsField").shouldUsePostCollabsField(R.length>0,Ce||be),je=S!=null&&S.length>0?{caption_ids:S.map(function(e){return e.id})}:null;return{video_id:fe!=null?fe:"",should_skip_encoding:le!=null?le:!1,should_enforce_video_editor_path:ae!=null?ae:!1,metadata:ve,trim_timestamps:Le,reframe_aspect_ratio:_(X),client_info:A,client_mutation_id:(d=A==null?void 0:A.client_session_id)!=null?d:r("uuidv4")(),reframe_aggressiveness:u,reframe_settings:Ge?{version:Ge}:void 0,video_collaboration:ze?null:{collaborators:R},post_collaborators:ze?{post_collaborators:R}:null,video_thumbnail_file_id:ge,thumbnail_type:ce.toString(),audio_enhancement:{processing:b},is_boost_toggle_on:x,music_overlay:Se,placements:we,ig_business_id:k,manual_reframe:O?g(O):null,audio_mixing:babelHelpers.extends({},B),targeted_privacy_data:Ee.length>0||ke.length>0?{age_min:0,geo_locations:{countries:Ee,regions:ke}}:null,overlay:U,main_track:F,photo_track:H,original_resolution:q,is_receiving_stars_enabled:P,linked_vod_data:M!=null?{target_video_id:M}:null,videolist:Me,hashtags_logging_data:{added_hashtags:(p!=null?p:[]).map(function(e){return{hashtag:e.hashtag,tool_type:e.toolType}})},fb_monetization_data:L,embeddable:K,should_share_to_story:ie,total_video_duration:de,should_use_consolidated_reel_edit_publish_path:se,ig_targeted_privacy_data:De,vod_in_stream_ads_settings:Ae,location_tag:w!=null?{place_id:w.id}:null,groups_schedule_resharing:Ne,reels_poll:ne,auto_gen_captions_settings:z!=null?{autogenerate_captions_enabled:z.autogenerate_captions_enabled,should_review_all_captions:z.should_review_all_captions}:r("justknobx")._("1058")&&V!=null?{autogenerate_captions_enabled:V.autogenerate_captions_enabled,should_review_all_captions:V.should_review_all_captions}:null,translated_audio_metadata:y!=null&&y.length>0?y.map(function(e){var t,n,o,a=e.description,i=a!=null?r("getMentionsTextForContentState")(a.getCurrentContent()):null;return{audio_handle:(t=e.handle)!=null?t:"",lang_code:(n=(o=e.langCode)==null?void 0:o.valueOf())!=null?n:"",handle_type:"UPLOAD_SERVICE_HANDLE",enabled:!0,description:oe===!0&&i!==j?i:null}}):(v==null?void 0:v.translateVoiceWithMetaAi)===!0?v==null||(m=v.targetLanguages)==null?void 0:m.map(function(e){return{lang_code:e,is_lipsync_enabled:v.enableLipSyncing,enabled:!0,source_lang_code:v.sourceLanguage,audio_handle:"",require_review:v.reviewBeforePublishing}}):null,vod_title:ye?he:void 0,allow_trim_beyond_max_length:h,closed_captions:je,has_overridden_video_format:$===!0}}var p={aspect_ratio_denominator:16,aspect_ratio_numerator:9};function _(e){switch(e){case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.NONE:return null;case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.MANUAL_9X16:case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.SPLIT_1X3:case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.VERTICAL:return{aspect_ratio_denominator:16,aspect_ratio_numerator:9};case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.SQUARE:return{aspect_ratio_denominator:1,aspect_ratio_numerator:1};case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.FOUR_BY_FIVE:return{aspect_ratio_denominator:5,aspect_ratio_numerator:4}}}function f(e){if(e===o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.VERTICAL)return"VERSION_3"}function g(e){return{left:e==null?void 0:e.crop_section_relative_top_x,right:e?e.crop_section_relative_top_x+e.crop_section_relative_width:void 0,top:e==null?void 0:e.crop_section_relative_top_y,bottom:e?e.crop_section_relative_top_y+e.crop_section_relative_height:void 0}}l.reelPublishMutation=d,l.getReelPublishInputObject=m,l.DEFAULT_ASPECT_RATIO_PARAMS=p,l.getAspectRatioParams=_,l.getReframeVersion=f,l.manualCropToReframeParameters=g}),98);
__d("VideoComposerVideoPublishingMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29705123342436060"}),null);
__d("VideoComposerVideoPublishingMutation.graphql",["VideoComposerVideoPublishingMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPublishResponsePayload",kind:"LinkedField",name:"video_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_asset_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VideoComposerVideoPublishingMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VideoComposerVideoPublishingMutation",selections:t},params:{id:n("VideoComposerVideoPublishingMutation_facebookRelayOperation"),metadata:{},name:"VideoComposerVideoPublishingMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VideoComposerVideoPublishingMutation",["RelayAPIConfig","VideoComposerVideoPublishingMutation.graphql","cr:1012418"],(function(t,n,r,o,a,i,l){"use strict";var e,s=9e4,u=e!==void 0?e:e=n("VideoComposerVideoPublishingMutation.graphql");function c(e,t,o,a,i){var l=r("RelayAPIConfig").fetchTimeout;return r("RelayAPIConfig").fetchTimeout=s,n("cr:1012418").commitMutation(t,{uploadables:o,mutation:u,variables:{input:e},onCompleted:function(t){r("RelayAPIConfig").fetchTimeout=l,a(t)},onError:function(t){r("RelayAPIConfig").fetchTimeout=l,i(t)}})}l.commit=c}),98);
__d("VideoComposerVideoPublisher",["ReelComposerReelPublishMutation","ReelComposerReframeAspectRatio","ReelCreationFlowUtils","RelayFBEnvironmentFactory","VideoComposerVideoPublishingMutation","err","getIsEligibleFor180SecondReelLimit"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.mapPostDataToGraphQLInputObject(),this.$3=e.hasAPISupport(),this.$2=e.uploadables()}var t=e.prototype;return t.publish=function(t,n){if(this.$1.publish_as_reel===!0){var e,a,i,l,s,u,c=r("RelayFBEnvironmentFactory").getForActorID(this.$1.basic_data.target_id),d=((e=this.$1.post_status_data)==null?void 0:e.draft)===!0?o("ReelCreationFlowUtils").ReelPublishType.DRAFT:((a=this.$1.post_status_data)==null?void 0:a.scheduled)===!0?o("ReelCreationFlowUtils").ReelPublishType.SCHEDULE:o("ReelCreationFlowUtils").ReelPublishType.PUBLISH_NOW,m=null,p=(i=this.$1.post_status_data)==null?void 0:i.future_date,_=(l=this.$1.post_status_data)==null?void 0:l.future_time;p!=null&&_!=null&&(m=+new Date(p).getTime()+ +_*1e3),o("ReelComposerReelPublishMutation").reelPublishMutation(c,function(){},function(){},{videoID:(s=this.$1.basic_data.video_id)!=null?s:"",shouldSkipEncoding:!1,shouldEnforceVideoEditorPath:null,loggingClientInfo:{entry_point:"CS_IG_CROSSPOST_REEL",composer_entry_point:"CS_IG_CROSSPOST_REEL",product:"CREATOR_STUDIO",feature:"IG_REELS_SHARED_TO_FB"},reelRemixingEnabled:!1,reelPublishType:d,reelScheduledUnixTimestamp:m!=null?m/1e3:0,reelDescription:(u=this.$1.basic_data.xhpc_message)!=null?u:"",trimStartTimeMs:0,trimEndTimeMs:0,isTrimTimestampsEqualToEntireVideo:!0,reelReframeAspectRatio:o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.NONE,collaborators:[],videoThumbnailFileID:null,thumbnailType:"generated_default",audioEnhancementProcessingAmount:0,music:null,audioCustomStartTimeMs:null,placements:["FACEBOOK_REEL"],igBusinessID:null,manualCrop:null,mixingParams:null,geoTargetingData:null,allowTrimBeyondMaxLength:r("getIsEligibleFor180SecondReelLimit")()})}else{if(!this.$3)throw r("err")("This api does not support your publishing use case");o("VideoComposerVideoPublishingMutation").commit(this.$1,r("RelayFBEnvironmentFactory").getForActorID(this.$1.basic_data.target_id),this.$2,t,n)}},e})();l.default=e}),98);
__d("VideoUploadGraphQLPostRequestManager",["FBLogger","GraphQLVideoPublisherInputDataHandlerBase","GraphQLVideoPublisherVideoUploaderInputDataHandler","VideoComposerVideoPublisher","clearTimeout","cr:909282","err","mixin","setTimeout"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t,n,r,o){var a;return a=e.call(this)||this,a.$VideoUploadGraphQLPostRequestManager$p_1=0,a.$VideoUploadGraphQLPostRequestManager$p_2=0,a.$VideoUploadGraphQLPostRequestManager$p_3=0,a.$VideoUploadGraphQLPostRequestManager$p_4=0,a.$VideoUploadGraphQLPostRequestManager$p_5=0,a.$VideoUploadGraphQLPostRequestManager$p_6=0,a.$VideoUploadGraphQLPostRequestManager$p_7=null,a.$VideoUploadGraphQLPostRequestManager$p_8=null,a.$VideoUploadGraphQLPostRequestManager$p_9=!1,a.$VideoUploadGraphQLPostRequestManager$p_1=t,a.$VideoUploadGraphQLPostRequestManager$p_2=n,a.$VideoUploadGraphQLPostRequestManager$p_3=0,a.$VideoUploadGraphQLPostRequestManager$p_4=r,a.$VideoUploadGraphQLPostRequestManager$p_5=o,a.$VideoUploadGraphQLPostRequestManager$p_6=0,a}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.sendRequest=function(t){if(this.$VideoUploadGraphQLPostRequestManager$p_8=t,this.$VideoUploadGraphQLPostRequestManager$p_9){r("FBLogger")("video_publish_graphql").info("Sending publishing request again while processing another request");return}this.$VideoUploadGraphQLPostRequestManager$p_10(),this.inform("request-started")},n.clearRequest=function(){this.$VideoUploadGraphQLPostRequestManager$p_9=!1,this.$VideoUploadGraphQLPostRequestManager$p_6=0,this.$VideoUploadGraphQLPostRequestManager$p_3=0},n.$VideoUploadGraphQLPostRequestManager$p_10=function(){var e=this.$VideoUploadGraphQLPostRequestManager$p_8;if(e!=null){r("clearTimeout")(this.$VideoUploadGraphQLPostRequestManager$p_7),this.$VideoUploadGraphQLPostRequestManager$p_7=null;var t=e.getMetadata(),n=this.__createRequestData(e),o=new(r("GraphQLVideoPublisherVideoUploaderInputDataHandler"))(t,n);this.$VideoUploadGraphQLPostRequestManager$p_9=!0;var a=new(r("VideoComposerVideoPublisher"))(o);a.publish(this.$VideoUploadGraphQLPostRequestManager$p_11.bind(this),this.$VideoUploadGraphQLPostRequestManager$p_12.bind(this))}},n.__createRequestData=function(t){var e=t.getVideoID(),n=t.getTargetID();if(e==null)throw r("err")("Video id cannot be null");if(n==null)throw r("err")("Target id cannot be null");return{video_id:e,target_id:n,source:"COMPOSER",waterfall_id:t.getWaterfallID()||"",creator_product:t.getCreatorProduct(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_dialog_version:t.getComposerDialogVersion(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking()}},n.$VideoUploadGraphQLPostRequestManager$p_11=function(t){var e;this.inform("request-finished",{video_asset_id:(e=t.video_publish)==null?void 0:e.video_asset_id}),this.clearRequest()},n.$VideoUploadGraphQLPostRequestManager$p_13=function(t){this.inform("request-failed",{error_code:t.number,error_description:t.message,error_summary:t.name,error_object:t}),this.clearRequest()},n.$VideoUploadGraphQLPostRequestManager$p_12=function(t){this.$VideoUploadGraphQLPostRequestManager$p_14(t)&&this.$VideoUploadGraphQLPostRequestManager$p_6<this.$VideoUploadGraphQLPostRequestManager$p_4?(r("FBLogger")("video_publish_graphql").info("retry publishing for error: %s",t.stack),this.$VideoUploadGraphQLPostRequestManager$p_6++,this.$VideoUploadGraphQLPostRequestManager$p_15(this.$VideoUploadGraphQLPostRequestManager$p_16(this.$VideoUploadGraphQLPostRequestManager$p_5,this.$VideoUploadGraphQLPostRequestManager$p_6))):this.$VideoUploadGraphQLPostRequestManager$p_13(t)},n.$VideoUploadGraphQLPostRequestManager$p_16=function(t,n){return Math.pow(t,n)*1e3},n.$VideoUploadGraphQLPostRequestManager$p_15=function(t){r("clearTimeout")(this.$VideoUploadGraphQLPostRequestManager$p_7),this.$VideoUploadGraphQLPostRequestManager$p_7=r("setTimeout")(this.$VideoUploadGraphQLPostRequestManager$p_10.bind(this),t)},n.$VideoUploadGraphQLPostRequestManager$p_14=function(t){var e=t.toString();return!!(e.includes("NetworkTransportError")||e.includes("NetworkTimeoutError")||e.includes("NetworkRequestError"))},n.hasAPISupport=function(t){return o("GraphQLVideoPublisherInputDataHandlerBase").hasAPISupport(t)},t})(r("mixin")(n("cr:909282")));l.default=e}),98);
__d("submitForm",["cr:6114"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.querySelector('input[type="submit"]');t!=null?t.click():(t=n("cr:6114").create("input",{type:"submit",className:"hidden_elem"}),n("cr:6114").appendContent(e,t),t.click(),n("cr:6114").remove(t))}l.default=e}),98);
__d("VideoUploadRequest",["AsyncRequest","DOM","DTSG","FileForm","Form","VideoUploadFeatureDetector","emptyFunction","flattenPHPQueryData","submitForm"],(function(t,n,r,o,a,i){var e="video",l=(function(){"use strict";function t(e){var t;this.$1=e,this.$2=null,this.$3=!1,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=t=n("emptyFunction"),this.$9=t,this.$10=t,this.$11=t,this.$12=null}var r=t.prototype;return r.setAllowCrossOrigin=function(t){return this.$3=t,this},r.setData=function(t){return this.$4=t,this},r.setWaterfallID=function(t){return this.$6=t,this},r.setSuccessHandler=function(t){return this.$8=t,this},r.setErrorHandler=function(t){return this.$9=t,this},r.setTransportErrorHandler=function(t){return this.$10=t,this},r.setUploadProgressHandler=function(t){return this.$11=t,this},r.setTimeoutHandler=function(t,n){return this.$7=t,this.$12=n,this},r.setThumbnail=function(t){return this.$13=t,this},r.setCustomProfileImage=function(t){return this.$14=t,this},r.setCustomBackgroundImage=function(t){return this.$15=t,this},r.setFeedBackgroundImage=function(t){return this.$16=t,this},r.setHandle=function(t){return this.$5=t,this},r.setCaptions=function(t){return this.$17=t,this},r.setPollOptionImages=function(t){return this.$18=t,this},r.send=function(){if(this.$2)throw new Error("An upload request is already in progress.");if(n("VideoUploadFeatureDetector").supportsXHR()){if(this.$2=this.$19(),this.$13||this.$17||this.$14||this.$15||this.$16||this.$18){var e=new FormData;if(this.$13&&e.append("thumb",this.$13),this.$14&&e.append("schedule_custom_profile_image",this.$14),this.$15&&e.append("schedule_custom_background_image",this.$15),this.$16&&e.append("schedule_feed_background_image",this.$16),this.$17&&this.$17.forEach(function(t,n){var r=t.getIsDefault()?"captions_default":"captions_file"+n;e.append(r,t.getFile())}),this.$18){var t=this.$18;Object.keys(t).forEach(function(n){e.append(n,t[n])})}if(this.$4){var r=n("flattenPHPQueryData")(this.$4);Object.keys(r).forEach(function(t){e.append(t,r[t])})}this.$2.setRawData(e)}this.$2.send()}else this.$2=this.$20(),this.$21(this.$2)},r.sendChunk=function(t){if(this.$2)throw new Error("An upload request is already in progress.");var e=new FormData;this.$5?e.append("fbuploader_video_file_chunk",this.$5):e.append("video_file_chunk",t),this.$2=this.$19(),this.$2.setRawData(e),this.$2.send()},r.sendFile=function(r){if(this.$2)throw new Error("An upload request is already in progress.");this.$2=this.$20();var t=r.cloneNode(!1);r.name=e,n("DOM").replace(r,t),n("DOM").appendContent(this.$2.getRoot(),r),this.$21(this.$2),r.name=t.name,n("DOM").replace(t,r)},r.abort=function(){this.$2&&(this.$2.abort(),this.$2=null)},r.$19=function(){var e=this.__getAsyncRequest().setAllowCrossOrigin(this.$3).setURI(this.$1).setData(this.$4).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",this.$6).setHandler(this.$8).setErrorHandler(this.$9).setTransportErrorHandler(this.$10).setUploadProgressHandler(this.$11);return this.$12&&e.setTimeoutHandler(this.$7,this.$12),e},r.__getAsyncRequest=function(){return new(n("AsyncRequest"))},r.$20=function(){var e=n("DOM").create("form",{action:this.$1,method:"POST"});n("Form").createHiddenInputs(babelHelpers.extends({fb_dtsg:n("DTSG").getToken()},this.$4),e);var t=new(n("FileForm"))(e,null,{allowCrossOrigin:this.$3});return t.subscribe("success",this.$22.bind(this)),t.subscribe("failure",this.$23.bind(this)),t.subscribe("progress",this.$24.bind(this)),t},r.$21=function(t){n("DOM").appendContent(document.body,t.getRoot()),n("submitForm")(t.getRoot())},r.$22=function(t,n){this.$8(n.response)},r.$23=function(t,n){this.$9(n.response)},r.$24=function(t,n){this.$11(n.event)},t})();a.exports=l}),null);
__d("VideoUploadPostRequestManager",["VideoUploadLogger","VideoUploadRequest","clearTimeout","cr:909282","isEmpty","mixin","setTimeout"],(function(t,n,r,o,a,i,l){var e,s=(function(t){function n(e,n,r,o,a){var i;return i=t.call(this)||this,i.$VideoUploadPostRequestManager2=e,i.$VideoUploadPostRequestManager3=n,i.$VideoUploadPostRequestManager4=r,i.$VideoUploadPostRequestManager5=0,i.$VideoUploadPostRequestManager6=o,i.$VideoUploadPostRequestManager7=a,i.$VideoUploadPostRequestManager8=0,i}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$VideoUploadPostRequestManager9=function(){return this.$VideoUploadPostRequestManager1?new(r("VideoUploadLogger"))({source:this.$VideoUploadPostRequestManager1.getSource(),waterfall_id:this.$VideoUploadPostRequestManager1.getWaterfallID(),target_id:this.$VideoUploadPostRequestManager1.getTargetID(),composer_entry_point_ref:this.$VideoUploadPostRequestManager1.getComposerEntryPointRef&&this.$VideoUploadPostRequestManager1.getComposerEntryPointRef()}):null},o.getRequest=function(){return this.$VideoUploadPostRequestManager10},o.sendRequest=function(t){if(this.$VideoUploadPostRequestManager1=t,this.$VideoUploadPostRequestManager10){var e=this.$VideoUploadPostRequestManager9();e&&e.logEvent(r("VideoUploadLogger").EVENT_DUPLICATE_POST_REQUEST);return}this.$VideoUploadPostRequestManager11=babelHelpers.extends({},t.getMetadata(),this.__createRequestData(t)),this.$VideoUploadPostRequestManager12=this.$VideoUploadPostRequestManager11.thumb,this.$VideoUploadPostRequestManager13=this.$VideoUploadPostRequestManager11.schedule_custom_profile_image,this.$VideoUploadPostRequestManager14=this.$VideoUploadPostRequestManager11.schedule_custom_background_image,this.$VideoUploadPostRequestManager15=this.$VideoUploadPostRequestManager11.schedule_feed_background_image,delete this.$VideoUploadPostRequestManager11.thumb,this.$VideoUploadPostRequestManager16=this.$VideoUploadPostRequestManager11.captions,delete this.$VideoUploadPostRequestManager11.captions,this.$VideoUploadPostRequestManager17=t.getWaterfallID(),this.$VideoUploadPostRequestManager18=this.$VideoUploadPostRequestManager11.pollImages,this.$VideoUploadPostRequestManager19(),this.inform("request-started")},o.$VideoUploadPostRequestManager19=function(){r("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=null,this.$VideoUploadPostRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager2).setAllowCrossOrigin(!0).setData(this.$VideoUploadPostRequestManager11).setThumbnail(this.$VideoUploadPostRequestManager12).setCustomProfileImage(this.$VideoUploadPostRequestManager13).setCustomBackgroundImage(this.$VideoUploadPostRequestManager14).setFeedBackgroundImage(this.$VideoUploadPostRequestManager15).setCaptions(this.$VideoUploadPostRequestManager16).setWaterfallID(this.$VideoUploadPostRequestManager17).setPollOptionImages(this.$VideoUploadPostRequestManager18).setSuccessHandler(this.$VideoUploadPostRequestManager21.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager22.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager23.bind(this)),this.$VideoUploadPostRequestManager10.send()},o.__createRequestData=function(t){return{video_id:t.getVideoID(),target_id:t.getTargetID(),source:t.getSource(),waterfall_id:t.getWaterfallID(),creator_product:t.getCreatorProduct(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_dialog_version:t.getComposerDialogVersion(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking()}},o.__getVideoUploadRequest=function(t){return new(r("VideoUploadRequest"))(t)},o.clearRequest=function(){this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager8=0,this.$VideoUploadPostRequestManager5=0},o.isInProgress=function(){return!!this.$VideoUploadPostRequestManager10},o.$VideoUploadPostRequestManager24=function(t){r("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=r("setTimeout")(this.$VideoUploadPostRequestManager19.bind(this),t)},o.$VideoUploadPostRequestManager25=function(t,n){return Math.pow(t,n)*1e3},o.$VideoUploadPostRequestManager21=function(t){var e=t.getPayload();this.inform("request-finished",{video_id:e.video_id,video_asset_id:e.video_asset_id,container_type:e.container_type,transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,premiere_destination_video_id:e.premiere_destination_video_id}),this.clearRequest()},o.$VideoUploadPostRequestManager26=function(n){var t,o,a=[].concat(n==null||(t=n.getPayload())==null||(t=t.error)==null?void 0:t.opes_mids,[n==null?void 0:n.errorMid]).filter(Boolean);this.inform("request-failed",{error_code:n.getError(),error_description:n.getErrorDescription(),error_summary:n.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,error_is_silent:n.isSilent(),error_is_transient:n.isTransient(),www_request_id:(o=n.getPayload())==null?void 0:o.__www_request_id__,opes_mids:(e||(e=r("isEmpty")))(a)?null:a}),this.clearRequest()},o.$VideoUploadPostRequestManager22=function(t){this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager5=0;var e=this.$VideoUploadPostRequestManager9();if(e){var n={server_retries:this.$VideoUploadPostRequestManager8,extra_data:{failure_is_transient:t.isTransient()}};e.logEvent(r("VideoUploadLogger").EVENT_HANDLING_SERVER_FAILURE_RESPONSE,n)}t.isTransient()&&this.$VideoUploadPostRequestManager8<this.$VideoUploadPostRequestManager6?(this.$VideoUploadPostRequestManager8++,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager7,this.$VideoUploadPostRequestManager8))):this.$VideoUploadPostRequestManager26(t)},o.$VideoUploadPostRequestManager23=function(t){var e=this.$VideoUploadPostRequestManager9();if(e){var n={extra_data:{transport_retries:this.$VideoUploadPostRequestManager5}};e.logEvent(r("VideoUploadLogger").EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE,n)}this.$VideoUploadPostRequestManager3===0||this.$VideoUploadPostRequestManager5>=this.$VideoUploadPostRequestManager3?this.$VideoUploadPostRequestManager26(t):(this.$VideoUploadPostRequestManager5++,this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager4,this.$VideoUploadPostRequestManager5)))},n})(r("mixin")(n("cr:909282"))),u=s;l.default=u}),98);
__d("VideoUploadRequestContext",[],(function(t,n,r,o,a,i){var e=(function(){function e(){var e=this;this.$14=!1,this.$21=0,this.$22=!1,this.$23=!1,this.$26=!1,this.getComposerEntryPointRef=function(){return e.$11},this.reset()}var t=e.prototype;return t.setFile=function(t){return this.$1=t,this},t.getFile=function(){return this.$1},t.setMetadata=function(t){return this.$24=t,this},t.getMetadata=function(){return this.$24},t.setVideoID=function(t){return this.$2=t,this},t.getVideoID=function(){return this.$2},t.setXPVAssetID=function(t){return this.$29=t,this},t.getXPVAssetID=function(){return this.$29},t.setIsXPVSingleProd=function(t){return this.$30=t,this},t.getIsXPVSingleProd=function(){return this.$30},t.setUploadSessionID=function(t){return this.$3=t,this},t.getUploadSessionID=function(){return this.$3},t.setFbRegion=function(t){return this.$4=t,this},t.getFbRegion=function(){return this.$4},t.setStartOffset=function(t){return this.$5=t,this},t.getStartOffset=function(){return this.$5},t.setEndOffset=function(t){return this.$6=t,this},t.getEndOffset=function(){return this.$6},t.setPartitionStartOffset=function(t){return this.$17=t,this},t.getPartitionStartOffset=function(){return this.$17},t.setPartitionEndOffset=function(t){return this.$18=t,this},t.getPartitionEndOffset=function(){return this.$18},t.setPartitionNo=function(t){return this.$19=t,this},t.getPartitionNo=function(){return this.$19},t.setTargetID=function(t){return this.$7=t,this},t.getTargetID=function(){return this.$7},t.setSource=function(t){return this.$8=t,this},t.setComposerDialogVersion=function(t){return this.$9=t,this},t.getComposerDialogVersion=function(){return this.$9},t.getSource=function(){return this.$8},t.setWaterfallID=function(t){return this.$10=t,this},t.getWaterfallID=function(){return this.$10},t.setComposerEntryPointRef=function(t){return this.$11=t,this},t.setComposerWorkSharedDraftMode=function(t){return this.$12=t,this},t.getComposerWorkSharedDraftMode=function(){return this.$12},t.setHasFileBeenReplaced=function(t){return this.$14=t,this},t.getHasFileBeenReplaced=function(){return this.$14},t.setSupportsChunking=function(t){return this.$15=t,this},t.getSupportsChunking=function(){return this.$15},t.setSupportsFileAPI=function(t){return this.$16=t,this},t.getSupportsFileAPI=function(){return this.$16},t.setCreatorProduct=function(t){return this.$20=t,this},t.getCreatorProduct=function(){return this.$20},t.setLastKnownUploadSpeed=function(t){return this.$21=t,this},t.getLastKnownUploadSpeed=function(){return this.$21||0},t.setUseParallelChunks=function(t){return this.$22=t,this},t.getUseParallelChunks=function(){return this.$22},t.setIsSphericalVideo=function(t){return this.$23=t,this},t.getIsSphericalVideo=function(){return this.$23},t.setSphericalMetadata=function(t){return this.$25=t,this},t.getSphericalMetadata=function(){return this.$25},t.setEnableOmnistab=function(t){return this.$26=t,this},t.getEnableOmnistab=function(){return this.$26},t.setClientChunkSize=function(t){return this.$27=t,this},t.getClientChunkSize=function(){return this.$27},t.setVideoPublisherActionSource=function(t){return this.$28=t,this},t.getVideoPublisherActionSource=function(){return this.$28},t.setComposerSessionID=function(t){return this.$13=t,this},t.getComposerSessionID=function(){return this.$13},t.setRetryState=function(t){return this.$31=t,this},t.getRetryState=function(){return this.$31},t.setCreativeTools=function(t){return this.$32=t,this},t.getCreativeTools=function(){return this.$32},t.reset=function(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null,this.$12=null,this.$14=!1,this.$15=null,this.$16=null,this.$17=null,this.$18=null,this.$19=null,this.$20=null,this.$21=0,this.$22=!1,this.$23=!1,this.$24={},this.$25={},this.$26=!1,this.$27=null,this.$28={},this.$13=null,this.$31=null,this.$32=null},e})();i.default=e}),66);
__d("MediaUploadSingleAssetPublisher",["Promise","VideoUploadGraphQLPostRequestManager","VideoUploadPostRequestManager","VideoUploadRequestContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){}t.publish=function(n){return t.$1==null&&(t.$1=new t),t.$1.publish(n)};var o=t.prototype;return o.publish=function(r){var t=this;return new(e||(e=n("Promise")))(function(e){var n=t.$2(r.sessionSnapshot,r.assetSnapshot,r.postData),o,a=t.$3(r.postRequestManagerParams);a.hasAPISupport(r.postData)&&(o=a),o==null&&(o=t.$4(r.postRequestManagerParams)),t.$5(o,e),o.sendRequest(n)})},o.$4=function(t){return new(r("VideoUploadPostRequestManager"))(t==null?void 0:t.chunk_post_uri,t==null?void 0:t.post_max_transport_retries,t==null?void 0:t.post_transport_retry_interval_base,t==null?void 0:t.post_max_server_retries,t==null?void 0:t.post_server_retry_interval_base)},o.$3=function(t){var e,n,o,a;return new(r("VideoUploadGraphQLPostRequestManager"))((e=t==null?void 0:t.post_max_transport_retries)!=null?e:0,(n=t==null?void 0:t.post_transport_retry_interval_base)!=null?n:0,(o=t==null?void 0:t.post_max_server_retries)!=null?o:0,(a=t==null?void 0:t.post_server_retry_interval_base)!=null?a:0)},o.$5=function(t,n){t.subscribe("request-finished",function(e,t){var r={event:e,payload:t};n({isSuccessful:!0,rawResponse:r})}),t.subscribe("request-failed",function(e,t){var r={event:e,payload:t},o=(t==null?void 0:t.error_code)==null||(t==null?void 0:t.error_code)==0?"PublishError":t==null?void 0:t.error_code;n({isSuccessful:!1,errorCode:o,rawErrorObject:t==null?void 0:t.error_object,rawResponse:r})})},o.$2=function(t,n,o){var e;return new(r("VideoUploadRequestContext"))().setVideoID(n.videoID).setTargetID(n.request.attributes.targetID).setSource(t.entryPoint.sourceType).setWaterfallID(t.sessionID).setCreatorProduct(n.request.attributes.creatorProduct).setComposerEntryPointRef(t.entryPoint.entryPointRef).setComposerDialogVersion(n.request.attributes.composerDialogVersion).setHasFileBeenReplaced((e=n.request.attributes.hasFileBeenReplaced)!=null?e:!1).setSupportsChunking(!0).setMetadata(o)},t})();l.default=s}),98);
__d("MediaUploadVUShimLogger",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.logEvent=function(t,n){},t.postOnShutdown=function(t){return{remove:function(){}}},t.getWaterfallID=function(){return this.$1},e})();i.default=e}),66);
__d("MediaUploadVUShimTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({UPLOAD_REQUESTED:"upload-requested",UPLOAD_STARTED:"upload-started",UPLOAD_CANCELED:"upload-canceled",UPLOAD_PROGRESSED:"upload-progressed",UPLOAD_FINISHED:"upload-finished",UPLOAD_FAILED:"upload-failed"});i.MediaUploadAssetEventAction=e}),66);
__d("extractServiceDomainFromUri",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{var t=new URL(e),n=t.hostname.split(".");return n.length>2?n.slice(1).join("."):null}catch(t){throw r("err")('Invalid URI "'+e+'": cannot parse for service_domain')}}l.default=e}),98);
__d("MediaUploadVUShimSession",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadCancelReason","MediaUploadFBDefaultServerConfigurationRetriever","MediaUploadFBSDK","MediaUploadFBStage","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadSingleAssetPublisher","MediaUploadStageEvent","MediaUploadVUShimLogger","MediaUploadVUShimSurface","MediaUploadVUShimTypes","Promise","WaterfallIDGenerator","cr:909282","extractServiceDomainFromUri","mixin"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(t){function a(e,n){var a,i;return i=t.call(this)||this,i.sessionID=o("WaterfallIDGenerator").generate(),i.$MediaUploadVUShimSession$p_1=e,i.$MediaUploadVUShimSession$p_3=(a=e.waterfall_id)!=null?a:i.sessionID,i.$MediaUploadVUShimSession$p_6=n,i.$MediaUploadVUShimSession$p_5=new(r("MediaUploadVUShimLogger"))(i.$MediaUploadVUShimSession$p_3),i.$MediaUploadVUShimSession$p_10=!i.$MediaUploadVUShimSession$p_1.background_upload,i.$MediaUploadVUShimSession$p_11(),i}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.$MediaUploadVUShimSession$p_11=function(){var e=this.$MediaUploadVUShimSession$p_1,t=e.start_uri,n=e.receive_uri;if(t!=null||n!=null){var o=t!=null?r("extractServiceDomainFromUri")(t):null;r("MediaUploadFBDefaultServerConfigurationRetriever").setUriOverrides(e.source,{receive_uri:n,service_domain:o,start_uri:t})}},i.$MediaUploadVUShimSession$p_12=function(){r("MediaUploadFBDefaultServerConfigurationRetriever").clearUriOverrides(this.$MediaUploadVUShimSession$p_1.source)},i.createTestLogger=function(){},i.getLogger=function(){return this.$MediaUploadVUShimSession$p_5},i.start=function(t){var e=this;this.inform("set-waterfall-id",{waterfallID:this.$MediaUploadVUShimSession$p_3});var n=r("MediaUploadVUShimSurface").createAssetRequest(function(e){var n=t.getFile(),o=t.getFileInput();if(n!=null)return e.createFromFile(n);if(o!=null){var a=e.createFromHTMLInput(o);if(a.dataAsFile()==null)throw r("MediaUploadFBSDK").createThrowableError("Cannot get File from the HTML input element");return a}else throw r("MediaUploadFBSDK").createThrowableError("Invalid video upload file, it contains only null objects")},t.getStableAssetID(),function(t){var n,r;return{targetID:(n=e.$MediaUploadVUShimSession$p_4)!=null?n:e.$MediaUploadVUShimSession$p_1.target_id,composerSessionID:e.$MediaUploadVUShimSession$p_2,actorID:e.$MediaUploadVUShimSession$p_1.as_actor_id,composerDialogVersion:"V2",publisherActionSource:e.$MediaUploadVUShimSession$p_1.video_publisher_action_source,creatorProduct:((r=t.dataAsFile())==null?void 0:r.extension)==="gif"?4:2}});this.$MediaUploadVUShimSession$p_9=n,this.$MediaUploadVUShimSession$p_6.startUploads(this.sessionID,[n]),this.$MediaUploadVUShimSession$p_10&&this.$MediaUploadVUShimSession$p_6.confirmSession(this.sessionID,[n],function(e){return e.set("dummyPublish",!0)})},i.setTargetID=function(t){this.$MediaUploadVUShimSession$p_4=t},i.setComposerSessionID=function(t){this.$MediaUploadVUShimSession$p_2=t},i.post=function(t){this.$MediaUploadVUShimSession$p_10?r("MediaUploadFBSDK").reportRecoverableError("Video upload client configured for pessimistic upload and explicit publish calls are now allowed"):this.$MediaUploadVUShimSession$p_9!=null&&this.$MediaUploadVUShimSession$p_6.confirmSession(this.sessionID,[this.$MediaUploadVUShimSession$p_9],function(e){return e.set("postData",t)})},i.cancel=function(t){this.$MediaUploadVUShimSession$p_12(),this.$MediaUploadVUShimSession$p_6.cancelSession(this.sessionID,r("MediaUploadCancelReason").USER_REQUEST)},i.abandon=function(t){this.$MediaUploadVUShimSession$p_12(),this.$MediaUploadVUShimSession$p_6.cancelSession(this.sessionID,r("MediaUploadCancelReason").USER_REQUEST)},i.isPostInProgress=function(){var e;return((e=this.$MediaUploadVUShimSession$p_7)==null?void 0:e.status)===r("MediaUploadSessionStatus").PUBLISHING},i.isInProgress=function(){var e,t;return((e=this.$MediaUploadVUShimSession$p_8)==null?void 0:e.status)===r("MediaUploadAssetStatus").PROCESSING||((t=this.$MediaUploadVUShimSession$p_8)==null?void 0:t.status)===r("MediaUploadAssetStatus").UPLOADING},i.getHasUploadFinished=function(){var e;return((e=this.$MediaUploadVUShimSession$p_8)==null?void 0:e.status)===r("MediaUploadAssetStatus").COMPLETED},i.getVideoID=function(){var e;return(e=this.$MediaUploadVUShimSession$p_8)==null?void 0:e.videoID},i.getUploadTime=function(){var e,t,n=(e=this.$MediaUploadVUShimSession$p_8)==null||(e=e.uploadSummary)==null?void 0:e.startedAtMs,r=(t=this.$MediaUploadVUShimSession$p_8)==null||(t=t.uploadSummary)==null?void 0:t.finishedAtMs;return n!=null&&r!=null?r-n:null},i.getExPartitionNumber=function(t){return 0},i.getIsSphericalVideo=function(){var e,t;return(e=(t=this.$MediaUploadVUShimSession$p_8)==null||(t=t.metadata)==null?void 0:t.isSpherical)!=null?e:!1},i.startFlow=function(){this.$MediaUploadVUShimSession$p_10?r("MediaUploadFBSDK").reportRecoverableError("Video upload client configured for pessimistic upload and explicit publish calls are now allowed"):this.$MediaUploadVUShimSession$p_9!=null&&this.$MediaUploadVUShimSession$p_6.confirmSession(this.sessionID,[this.$MediaUploadVUShimSession$p_9])},i.sessionUpdated=function(t,n){var e,o;this.$MediaUploadVUShimSession$p_7=n;var a=n.extras.getUnsafe("postData");if(a!=null){var i=n.publishingResponse;switch(t){case r("MediaUploadSessionEvent").PUBLISH_STARTED:this.inform("post-started",a);break;case r("MediaUploadSessionEvent").PUBLISH_SUCCEED:this.inform("post-finished",babelHelpers.extends({},(e=i==null?void 0:i.payload)!=null?e:{},a));break;case r("MediaUploadSessionEvent").PUBLISH_FAILED:this.inform("post-failed",(o=i==null?void 0:i.payload)!=null?o:{});break;default:}}},i.assetUpdated=function(t,n,a){var e,i,l,s,u,c,d,m,p,_,f,g,h;this.$MediaUploadVUShimSession$p_7=n,this.$MediaUploadVUShimSession$p_8=a;var y,C,b=(e=(i=a.asset.dataAsFile())==null?void 0:i.size)!=null?e:0,v=(l=(s=a.uploadSummary)==null?void 0:s.skippedUpload)!=null?l:!1;switch(t){case r("MediaUploadAssetEvent").ASSET_ADDED:y=o("MediaUploadVUShimTypes").MediaUploadAssetEventAction.UPLOAD_REQUESTED;break;case r("MediaUploadAssetEvent").ASSET_STARTED:y=o("MediaUploadVUShimTypes").MediaUploadAssetEventAction.UPLOAD_STARTED;break;case r("MediaUploadAssetEvent").ASSET_REMOVED:y=o("MediaUploadVUShimTypes").MediaUploadAssetEventAction.UPLOAD_CANCELED;break;case r("MediaUploadAssetEvent").ASSET_PROGRESS:y=o("MediaUploadVUShimTypes").MediaUploadAssetEventAction.UPLOAD_PROGRESSED,C={start_offset:0,end_offset:b,file_size:b,sent_bytes:v?b:(u=(c=a.uploadSummary)==null?void 0:c.uploadedBytes)!=null?u:0,video_id:a.videoID,upload_domain:a.uploadServiceDomain,skip_upload:v,transport_retries:a.retries.totalRetryAttempts};break;case r("MediaUploadAssetEvent").ASSET_SUCCEED:y=o("MediaUploadVUShimTypes").MediaUploadAssetEventAction.UPLOAD_FINISHED,C={start_offset:0,end_offset:b,video_id:a.videoID,is_spherical_video:(d=a==null||(m=a.metadata)==null?void 0:m.isSpherical)!=null?d:!1};break;case r("MediaUploadAssetEvent").ASSET_FAILED:y=o("MediaUploadVUShimTypes").MediaUploadAssetEventAction.UPLOAD_FAILED,C={error_code:(p=a.lastAction)==null?void 0:p.rawErrorCode,error_summary:(_=a.lastAction)==null||(_=_.displayError)==null?void 0:_.summary,error_description:(f=a.lastAction)==null||(f=f.displayError)==null?void 0:f.description,error_is_transient:(g=a.lastAction)==null||(g=g.errorAttributes)==null?void 0:g.transientError,upload_domain:a.uploadServiceDomain,www_request_id:(h=a.lastAction)==null?void 0:h.networkRequestID};break;default:}y!=null&&this.inform(y,C)},i.stageUpdated=function(t,n,o,a){if(this.$MediaUploadVUShimSession$p_7=o,this.$MediaUploadVUShimSession$p_8=a,t===r("MediaUploadStageEvent").STAGE_SUCCEED&&n===r("MediaUploadFBStage").METADATA_EXTRACTION){var e;if(a.metadata!=null){var i,l=a.metadata,s=l.durationMs==null?void 0:l.durationMs/1e3;e={format:{duration:s,isSpherical:(i=l.isSpherical)!=null?i:!1},metadata:{},streams:{numAudioTracks:1,primaryVideo:{type:"video",width:l.width,height:l.height,duration:s},primaryAudio:{type:"audio",duration:s}}}}else e=null;this.inform("metadata-parsed",e)}},i.triggerPublish=function(o,a){var t;this.$MediaUploadVUShimSession$p_7=o,this.$MediaUploadVUShimSession$p_8=a[0];var i=(t=o.extras.getBoolean("dummyPublish"))!=null?t:!1,l=o.extras.getUnsafe("postData");return i?(e||(e=n("Promise"))).resolve({isSuccessful:!0}):l==null?(e||(e=n("Promise"))).resolve({isSuccessful:!1,errorCode:"MISSING_POST_DATA"}):r("MediaUploadSingleAssetPublisher").publish({sessionSnapshot:o,assetSnapshot:a[0],postData:l,postRequestManagerParams:this.$MediaUploadVUShimSession$p_1})},a})(r("mixin")(n("cr:909282")));l.default=s}),98);
__d("MediaUploadPipeline",["MediaUploadCancelablePromise","MediaUploadOperationOutcome"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$2=[],this.$3=null,this.$2=e,this.$1=t,this.cancelablePromise=new(r("MediaUploadCancelablePromise"))(function(e,t){return n.$4(e,t,[].concat(n.$2)),{cancel:function(){var t;(t=n.$3)==null||t.cancel(),n.$3=null,e(r("MediaUploadOperationOutcome").CANCELED)}}})}var t=e.prototype;return t.$4=function(t,n,o){var e=this;if(o.length===0)this.$3=null,t(r("MediaUploadOperationOutcome").SUCCESS);else{var a=o.shift(),i=a();this.$1.promiseTerminator(i.promise.then(function(a){e.cancelablePromise.isCanceled()?t(r("MediaUploadOperationOutcome").CANCELED):a===r("MediaUploadOperationOutcome").SUCCESS?e.$4(t,n,o):t(a)}).catch(n)),this.$3=i}},e})(),s=(function(){function t(e){this.$2=[],this.$1=e}var n=t.prototype;return n.addCancelableStep=function(t){this.$2.push(t)},n.addPlainStep=function(t){this.$2.push(function(){return new(r("MediaUploadCancelablePromise"))(function(e){e(t())})})},n.run=function(){var t=new e(this.$2,this.$1);return t.cancelablePromise},t})();l.default=s}),98);
__d("MediaUploadAssetStrategy",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadOperationOutcome","MediaUploadPipeline","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e.implementation,this.$2=e.executor,this.$3=e.params}var o=t.prototype;return o.removeAsset=function(t){var e;t.updateStatusAndEmit(r("MediaUploadAssetStatus").REMOVED),(e=t.inFlightUpload)==null||e.cancel()},o.addAsset=function(t){t.sessionContext.assetsByID.set(t.assetID,t),t.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_ADDED)},o.scheduleUpload=function(t){var e=this;return t.updateStatusAndEmit(r("MediaUploadAssetStatus").SCHEDULED),this.$2.schedule(function(){return e.$4(t)})},o.$4=function(o){var t=this;if(o.isRemoved())return(e||(e=n("Promise"))).resolve();o.updateStatusAndEmit(r("MediaUploadAssetStatus").PROCESSING);var a=new(r("MediaUploadPipeline"))(this.$3);a.addCancelableStep(function(){return t.$1.runClientLazyLoading(o)}),a.addCancelableStep(function(){return t.$1.runLocalAssetStategy(o)}),a.addCancelableStep(function(){return o.updateStatusAndEmit(r("MediaUploadAssetStatus").UPLOADING),t.$1.runNetworkAssetStategy(o)});var i=a.run();return o.inFlightUpload=i,i.promise.then(function(e){return t.$5(o,e)}).catch(function(e){t.$3.reportRecoverableError("Unexpected failure during asset pipeline execution",e),o.updateStatusAndEmit(r("MediaUploadAssetStatus").FAILED)})},o.$5=function(t,n){if(!t.isRemoved())switch(n){case r("MediaUploadOperationOutcome").SUCCESS:t.updateStatusAndEmit(r("MediaUploadAssetStatus").COMPLETED);break;case r("MediaUploadOperationOutcome").CANCELED:t.updateStatusAndEmit(r("MediaUploadAssetStatus").REMOVED);break;default:t.updateStatusAndEmit(r("MediaUploadAssetStatus").FAILED)}},t})();l.default=s}),98);
__d("MediaUploadRetryState",["MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.retryPolicy=e,this.$3=0,this.$4=0,this.$1=t.currentTimeProvider,this.$2=t.randomNumberProvider,this.$5=this.$1()}var t=e.prototype;return t.resetBackoff=function(){this.$3=0},t.getRetryAttempts=function(){return this.$4},t.getRetryAttemptsSinceLastReset=function(){return this.$3},t.calculateBackoffDelay=function(){var e=this.retryPolicy.backoff,t=o("MediaUploadTime").timeToMilliseconds(e.initial),n=e.expBase,r=e.expMultiplier;this.$3>0&&n!=null&&r!=null&&(t+=o("MediaUploadTime").timeToMilliseconds(n)*Math.pow(r,this.$3-1)),e.max!=null&&(t=Math.min(t,o("MediaUploadTime").timeToMilliseconds(e.max)));var a=e.jitter==null?0:o("MediaUploadTime").timeToMilliseconds(e.jitter);return a>0&&(t+=this.$2(-.5*a,.5*a)),o("MediaUploadTime").millisecondsToTime(Math.round(t))},t.exceedTotalRetries=function(){var e;return((e=this.retryPolicy.limits)==null?void 0:e.totalRetryCount)!=null&&this.$4>this.retryPolicy.limits.totalRetryCount},t.exceedTotalDuration=function(){var e,t;return((e=this.retryPolicy.limits)==null?void 0:e.totalTime)!=null&&o("MediaUploadTime").compareTime((t=this.retryPolicy.limits)==null?void 0:t.totalTime,o("MediaUploadTime").subtractTime(this.$1(),this.$5))<=0},t.increaseRetryAttemptCounter=function(){this.$3++,this.$4++},e})();l.default=e}),98);
__d("MediaUploadClientResult",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ACCEPTED","SESSION_NOT_FOUND","ASSET_NOT_FOUND","ASSET_ALREADY_EXISTS","SESSION_ALREADY_CANCELED","SESSION_ALREADY_PUBLISHING","SESSION_ALREADY_PUBLISHED","SESSION_NOT_FAILED","INVALID_TYPE","UNSUPPORTED_BROWSER"]),l=e;i.default=l}),66);
__d("MediaUploadSessionStrategy",["MediaUploadCancelReason","MediaUploadClientResult","MediaUploadSessionEvent","MediaUploadSessionStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.implementation,this.$2=e.assetStrategy,this.$3=e.params}var t=e.prototype;return t.$4=function(t){if(t.isConfirmed()&&t.progress.publishingExtrasProvided){var e=t.getActiveAssets();for(var n of e)if(n.isFailed()){t.updateStatusAndEmit(r("MediaUploadSessionStatus").FAILED);return}e.every(function(e){return e.isCompleted()})&&this.$5(t)}},t.$5=function(t){t.updateStatusAndEmit(r("MediaUploadSessionStatus").PUBLISHING);var e=[];for(var n of t.assetsByID.values())n.isCompleted()&&e.push(n);var o=this.$1.publish(t,e).then(function(e){t.progress.publishingResponse=e.rawResponse,e.isSuccessful?(t.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_SUCCEED),t.updateStatusAndEmit(r("MediaUploadSessionStatus").COMPLETED)):(t.updateLastError({rawErrorCode:e.errorCode,rawErrorObject:e.rawErrorObject}),t.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_FAILED),t.updateStatusAndEmit(r("MediaUploadSessionStatus").FAILED),t.updateLastError())}).catch(function(e){t.updateLastError({rawErrorObject:e}),t.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_FAILED),t.updateStatusAndEmit(r("MediaUploadSessionStatus").FAILED),t.updateLastError()});this.$3.promiseTerminator(o)},t.$6=function(t,n){var e=this;this.$2.scheduleUpload(n).finally(function(){return e.$4(t)})},t.$7=function(t){return t.isPublished()?r("MediaUploadClientResult").SESSION_ALREADY_PUBLISHED:t.isPublishing()?r("MediaUploadClientResult").SESSION_ALREADY_PUBLISHING:t.isCanceled()?r("MediaUploadClientResult").SESSION_ALREADY_CANCELED:r("MediaUploadClientResult").ACCEPTED},t.$8=function(t){var e=this;t.releaseOnFinish.push(this.$3.registerUnloadHook(function(){e.cancel(t,r("MediaUploadCancelReason").UNLOAD_HOOK)})),t.updateStatusAndEmit(r("MediaUploadSessionStatus").CONFIRMED)},t.cancel=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;t.progress.cancelReason=n,t.updateStatusAndEmit(r("MediaUploadSessionStatus").CANCELED);for(var o of t.assetsByID.values())this.$2.removeAsset(o);return r("MediaUploadClientResult").ACCEPTED},t.removeAsset=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;var o=t.assetsByID.get(n);return o==null?r("MediaUploadClientResult").ASSET_NOT_FOUND:(this.$2.removeAsset(o),this.$4(t),r("MediaUploadClientResult").ACCEPTED)},t.uploadAsset=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;var o=t.assetsByID.get(n.assetID);if(o!=null&&!o.isRemoved())return r("MediaUploadClientResult").ASSET_ALREADY_EXISTS;var a=this.$1.createAssetContext(t,n);return this.$2.addAsset(a),this.$6(t,a),r("MediaUploadClientResult").ACCEPTED},t.syncAssetUploads=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;var o=new Set(n.map(function(e){return e.assetID})),a=new Set(t.assetsByID.keys());for(var i in a)if(!o.has(i)){var l=t.assetsByID.get(i);l!=null&&this.$2.removeAsset(l)}return this.uploadAssets(t,n),r("MediaUploadClientResult").ACCEPTED},t.uploadAssets=function(t,n){var e=this,r={};return n.forEach(function(n){return r[n.assetID]=e.uploadAsset(t,n)}),r},t.updateSessionExtras=function(t,n,o){var e=this.$7(t);return e!==r("MediaUploadClientResult").ACCEPTED?e:(n(t.extras),o&&(t.progress.publishingExtrasProvided=!0),r("MediaUploadClientResult").ACCEPTED)},t.retry=function(t){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;if(!t.isFailed())return r("MediaUploadClientResult").SESSION_NOT_FAILED;t.renewRetryID(),this.$8(t);for(var n of t.assetsByID.values())n.isSchedulable()&&this.$6(t,n);return this.$4(t),r("MediaUploadClientResult").ACCEPTED},t.confirm=function(t){var e=this.$7(t);return e!==r("MediaUploadClientResult").ACCEPTED?e:t.isFailed()?this.retry(t):t.isConfirmed()?(this.$4(t),r("MediaUploadClientResult").ACCEPTED):(this.$8(t),this.$4(t),r("MediaUploadClientResult").ACCEPTED)},e})();l.default=e}),98);
__d("MediaUploadClientContext",["MediaUploadAssetStrategy","MediaUploadRetryState","MediaUploadSessionStrategy"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.sdk=e.sdk,this.emitter=e.emitter,this.executor=e.executor,this.progressCalculator=e.progressCalculator,this.assetStrategy=new(r("MediaUploadAssetStrategy"))({implementation:this,executor:this.executor,params:this.sdk}),this.sessionStrategy=new(r("MediaUploadSessionStrategy"))({implementation:this,assetStrategy:this.assetStrategy,params:this.sdk})}var t=e.prototype;return t.runLocalAssetStategy=function(t){throw this.sdk.createThrowableError("Not implemented")},t.runNetworkAssetStategy=function(t){throw this.sdk.createThrowableError("Not implemented")},t.runClientLazyLoading=function(t){throw this.sdk.createThrowableError("Not implemented")},t.createSessionContext=function(t){throw this.sdk.createThrowableError("Not implemented")},t.createAssetContext=function(t,n){throw this.sdk.createThrowableError("Not implemented")},t.publish=function(t,n){throw this.sdk.createThrowableError("Not implemented")},t.subscribeToHooks=function(){throw this.sdk.createThrowableError("Not implemented")},t.createRetryState=function(){return new(r("MediaUploadRetryState"))(this.sdk.retryPolicyProvider(),this.sdk)},e})();l.default=e}),98);
__d("MediaUploadEventEmitterAdapter",["EventEmitter","MediaUploadFBAssetContext","MediaUploadFBClientEventContext","MediaUploadFBSessionContext","MediaUploadFBStage"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t},s=(function(){function t(e){this.$2=new(r("EventEmitter")),this.$1=e,this.emitter=this.$3(),this.subscriber=this.$4()}var n=t.prototype;return n.$3=function(){var t=this,n=function(n){var e=r("MediaUploadFBSessionContext").castOrThrow(n,t.$1);return e.composeSnapshot()},o=function(n){var e=r("MediaUploadFBAssetContext").castOrThrow(n,t.$1);return e.composeSnapshot()},a=this.$2,i=function(r){try{for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];a.emit.apply(a,[e(r)].concat(o))}catch(e){t.$1.reportRecoverableError("Session pub/sub chain failed for event "+String(r),e)}};return{emitClientEvent:function(n,o){i(n,r("MediaUploadFBClientEventContext").castOrThrow(o,t.$1).composerSnapshot())},emitSessionEvent:function(t,r){i(t,n(r))},emitAssetEvent:function(t,r){i(t,n(r.sessionContext),o(r))},emitStageEvent:function(a,l,s){var e=r("MediaUploadFBStage").cast(String(s));if(e==null){t.$1.reportRecoverableError("Invalid stage value, it must be MediaUploadFBStage, ignoring");return}i(a,n(l.sessionContext),o(l),e)}}},n.$4=function(){var t=this,n=function(n,r){try{n()}catch(e){t.$1.reportRecoverableError("Stage pub/sub chain failed for event "+r(),e)}};return{addClientEventListener:function(o,a){var r=t.$2.addListener(e(o),function(e){return n(function(){return a(e)},function(){return String(o)})});return{cancel:function(){return r.remove()}}},addSessionEventListener:function(o,a){var r=t.$2.addListener(e(o),function(e){return n(function(){return a(e)},function(){return String(o)})});return{cancel:function(){return r.remove()}}},addAssetEventListener:function(o,a){var r=t.$2.addListener(e(o),function(e,t){return n(function(){return a(e,t)},function(){return String(o)})});return{cancel:function(){return r.remove()}}},addStageEventListener:function(o,a,i){var r=t.$2.addListener(e(o),function(e,t,r){a===r&&n(function(){return i(e,t)},function(){return String(o)+"  "+String(r)})});return{cancel:function(){return r.remove()}}}}},t})();l.default=s}),98);
__d("MediaUploadExecutor",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(e){e===void 0&&(e=1),this.$1=[],this.$3=0,this.$2=e}var r=t.prototype;return r.schedule=function(r){var t=this;return new(e||(e=n("Promise")))(function(e){var n=function(){var t=r();return t.finally(e),t};t.$1.push(n),t.$4()})},r.$4=function(){var e=this;if(!(this.$3>=this.$2||this.$1.length===0)){var t=this.$1.shift();t().finally(function(){e.$3--,e.$4()}),this.$3++}},t})();i.default=l}),66);
__d("MediaUploadAssetRequest",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=t.asset,n=t.assetID,r=t.extras;this.assetID=n,this.asset=e,this.extras=r};i.default=e}),66);
__d("MediaUploadFBAssetRequest",["MediaUploadAssetRequest"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n,r=t.asset,o=t.assetID,a=t.attributes,i=t.extras;return n=e.call(this,{assetID:o,asset:r,extras:i})||this,n.attributes={targetID:a.targetID,actorID:a.actorID,hasFileBeenReplaced:a.hasFileBeenReplaced,composerDialogVersion:a.composerDialogVersion,publisherActionSource:a.publisherActionSource,creatorProduct:a.creatorProduct,composerSessionID:a.composerSessionID},n}return babelHelpers.inheritsLoose(t,e),t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided asset request has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadAssetRequest"));l.default=e}),98);
__d("MediaUploadClient",["MediaUploadClientResult"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$4=new Map,this.$1=e.implementation,this.$2=e.sessionStrategy,this.$3=e.envParams,this.$1.subscribeToHooks(),this.$3.isSupported()||this.$3.reportRecoverableError("This browser does not support this version of the Media Upload SDK")}var t=e.prototype;return t.cancelSession=function(t,n){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$4.get(t);return e==null?r("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.cancel(e,n)},t.cleanSession=function(t){return this.$3.isSupported()?this.$4.delete(t)?r("MediaUploadClientResult").ACCEPTED:r("MediaUploadClientResult").SESSION_NOT_FOUND:r("MediaUploadClientResult").UNSUPPORTED_BROWSER},t.retrySession=function(t){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$4.get(t);return e==null?r("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.retry(e)},t.$5=function(t){var e=this.$4.get(t);return e==null&&(e=this.$1.createSessionContext(t),this.$4.set(t,e)),e},t.updateSessionExtras=function(t,n){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$5(t);return this.$2.updateSessionExtras(e,n,!1)},t.confirmSession=function(t,n,o){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$5(t),a;return o!=null&&(a=this.$2.updateSessionExtras(e,o,!0),a!==r("MediaUploadClientResult").ACCEPTED)||(a=this.$2.syncAssetUploads(e,n),a!==r("MediaUploadClientResult").ACCEPTED)?a:this.$2.confirm(e)},t.startUploads=function(t,n){if(!this.$3.isSupported()){var e={};return n.forEach(function(t){return e[t.assetID]=r("MediaUploadClientResult").UNSUPPORTED_BROWSER}),e}var o=this.$5(t);return this.$2.uploadAssets(o,n)},t.removeUpload=function(t,n){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$4.get(t);return e==null?r("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.removeAsset(e,n)},e})();l.default=e}),98);
__d("MediaUploadFBClient",["MediaUploadClient"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,t)||this}return babelHelpers.inheritsLoose(t,e),t})(r("MediaUploadClient"));l.default=e}),98);
__d("MediaUploadFBStageOutcome",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SUCCESS","CANCEL","EXCEPTION","INTERNAL_FAILURE","UNSUPPORTED_FEATURE","ASSET_IS_NOT_FILE","ASSET_IS_NOT_SUPPORTED","REQUEST_ERROR","INVALID_SERVER_RESPONSE","MISSING_MANDATORY_DATA"]),l=e;i.default=l}),66);
__d("MediaUploadFBFileHasher",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=r("MediaUploadFBStage").HASHING,this.$2=e.pseudoHasher,this.$3=e.fullHasher}var t=e.prototype;return t.process=async function(t){t.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,this.$1);try{await this.$4(t)}catch(e){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:e})}return t.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),r("MediaUploadOperationOutcome").SUCCESS},t.$5=function(t,n,r){return n==null?Promise.resolve():n.hash(t.file).then(function(e){return e.outcome==="SUCCESS"&&r(e.value),e})},t.$4=async function(t){var e=this,n=t.asset.dataAsFile();if(n==null){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA});return}var o=await this.$5(n,this.$3,function(e){return t.processing.fullHash=e}).then(async function(r){return(r==null?void 0:r.outcome)==="SUCCESS"?(t.processing.pseudoHash=t.processing.fullHash,[r,r]):[r,await e.$5(n,e.$2,function(e){return t.processing.pseudoHash=e})]});for(var a of o)if((a==null?void 0:a.outcome)==="FILE_TOO_LARGE"){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").ASSET_IS_NOT_SUPPORTED});return}else if((a==null?void 0:a.outcome)==="FAILURE"){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").INTERNAL_FAILURE,rawErrorCode:a==null?void 0:a.rawErrorCode,rawErrorObject:a==null?void 0:a.rawErrorObject});return}t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS})},e})();l.default=e}),98);
__d("MediaUploadNetworkStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({UNKNOWN:"Unknown",CONNECTED:"Connected",DISCONNECTED:"Disconnected",TIMEOUT:"TimedOut"}),l=e;i.default=l}),66);
__d("MediaUploadFBInternetProbe",["AsyncRequest","MediaUploadCancelablePromise","MediaUploadNetworkStatus","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="https://rupload.facebook.com/fb_video/ping-",s=(function(){function t(t,n){this.$2=t,this.$1=n,this.$3=[""+e+r("uuidv4")()]}var n=t.prototype;return n.$4=function(t){return new(r("MediaUploadCancelablePromise"))(function(e){var n=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(t).setReadOnly(!0).setOption("suppressEvaluation",!0).setHandler(function(t){var n,o=t==null||(n=t.payload)==null?void 0:n.status;e(o===200?r("MediaUploadNetworkStatus").CONNECTED:r("MediaUploadNetworkStatus").DISCONNECTED)}).setTransportErrorHandler(function(){e(r("MediaUploadNetworkStatus").DISCONNECTED)}).setErrorHandler(function(){e(r("MediaUploadNetworkStatus").DISCONNECTED)});return n.send()||e(r("MediaUploadNetworkStatus").DISCONNECTED),{cancel:function(){n.abort()}}})},n.$5=function(){var e=this;return new Promise(function(t){e.$1.delayedExecutor(e.$2.timeout,function(){return t(r("MediaUploadNetworkStatus").TIMEOUT)})})},n.probe=async function(){var e=this,t=this.$3.map(function(t){return e.$4(t)}),n=Promise.race([this.$5()].concat(t.map(function(e){return e.promise}))),r=await n;return t.forEach(function(e){return e.cancel()}),r},t})();l.default=s}),98);
__d("MediaUploadFBLocalAssetStrategy",["MediaUploadPipeline"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.envParams,this.metadataParser=e.metadataParser,this.metadataValidator=e.metadataValidator,this.fileHasher=e.fileHasher}var t=e.prototype;return t.run=function(t){var e=this,n=new(r("MediaUploadPipeline"))(this.$1);n.addPlainStep(function(){return e.metadataParser.parse(t)}),n.addPlainStep(function(){return e.metadataValidator.validate(t,e.metadataParser.retriveRawMetadata(t))});var o=this.fileHasher;return o!=null&&n.addPlainStep(function(){return o.process(t)}),n.run()},e})();l.default=e}),98);
__d("ISOVideoBoxConstants",[],(function(t,n,r,o,a,i){"use strict";var e=8,l=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],s=[174,36,178,77,60,143,79,24,138,123,224,9,193,56,53,193];i.BOX_BASE_SIZE=e,i.GSPHERICAL_UUID=l,i.FBSPHERICAL_UUID=s}),66);
__d("FBSphericalMetadataTags",[],(function(t,n,r,o,a,i){var e=Object.freeze({SPHERICAL:"FBSpherical:Spherical",INITIAL_VERTICAL_FOV_DEGREES:"FBSpherical:InitialVerticalFOVDegrees",GUIDE:"FBSpherical:Guide",HOTSPOT:"FBSpherical:HotspotMetadata",USED_360_DIRECTOR:"FBSpherical:Used360Director"});i.default=e}),66);
__d("GSphericalMetadataTags",[],(function(t,n,r,o,a,i){var e=Object.freeze({SPHERICAL:"GSpherical:Spherical",INITIAL_VIEW_HEADING_DEGREES:"GSpherical:InitialViewHeadingDegrees",INITIAL_VIEW_PITCH_DEGREES:"GSpherical:InitialViewPitchDegrees",PROJECTION_TYPE:"GSpherical:ProjectionType",STEREO_MODE:"GSpherical:StereoMode",STITCHED:"GSpherical:Stitched",STITCHING_SOFTWARE:"GSpherical:StitchingSoftware",CROPPED_AREA_IMAGE_WIDTH_PIXELS:"GSphercal:CroppedAreaImageWidthPixels",CROPPED_AREA_IMAGE_HEIGHT_PIXELS:"GSphercal:CroppedAreaImageHeightPixels",CROPPED_AREA_LEFT_PIXELS:"GSphercal:CroppedAreaLeftPixels",CROPPED_AREA_TOP_PIXELS:"GSphercal:CroppedAreaTopPixels",FULL_PANO_WIDTH_PIXELS:"GSphercal:FullPanoWidthPixels",FULL_PANO_HEIGHT_PIXELS:"GSphercal:FullPanoHeightPixels"});i.default=e}),66);
__d("SphericalVideoMetadataTags",["FBSphericalMetadataTags","GSphericalMetadataTags"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({GSPHERICAL:r("GSphericalMetadataTags"),FBSPHERICAL:r("FBSphericalMetadataTags")});l.default=e}),98);
__d("VideoSphericalMetadataUtil",["SphericalVideoMetadataTags","VideoProjection","VideoStereoFormat"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(!e)return null;e=e.replace(/\0/g,"");var t;if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t}function s(e){return Object.values(r("VideoProjection")).includes(e)?e:null}function u(e){return Object.values(r("VideoStereoFormat")).includes(e)?e:null}function c(e){for(var t=e.getElementsByTagNameNS("*","*"),n=null,o=0;o<t.length;o++){var a=t[o],i=a.nodeName,l=a.parentElement;if(i!=="parsererror"&&l&&l.nodeName!=="parsererror"&&Object.values(r("SphericalVideoMetadataTags").GSPHERICAL).indexOf(i)<0&&Object.values(r("SphericalVideoMetadataTags").GSPHERICAL).indexOf(l.nodeName)<0){n||(n="");var s=a.outerHTML;n+="<"+i+s.slice(i.length+1,-(i.length+1))+i+">"}}return n}function d(e,t,n,r,o){if(t!==null&&n!==null&&r!==null&&o!==null&&e.projectionType==="equirectangular"&&(e.stereoMode==="left-right"||e.stereoMode==="top-bottom")){var a=parseInt(t,10),i=parseInt(n,10),l=parseInt(r,10),s=parseInt(o,10);if(Math.abs(a-l/2)<=1&&Math.abs(i-s)<=1)return!0}return!1}function m(e,t,n){return new File([e],t,{type:n})}function p(e){for(var t=new ArrayBuffer(e.length),n=new DataView(t),r=0;r<e.length;r++)n.setUint8(r,e.charCodeAt(r));return t}function _(e,t,n){var r=e.buffer;return m(r,t,n)}function f(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}l.parseXMLToDocument=e,l.stringToProjectionType=s,l.stringToStereoMode=u,l.getUnsupportedGSphericalTagsXML=c,l.isGoogleVR180=d,l.arrayBufferToFile=m,l.stringToArrayBuffer=p,l.bufferToFile=_,l.uuidArrayEquals=f}),98);
__d("VideoUploadMetadataParserErrorCode",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["FILE_READING_NOT_SUPPORTED","UNKNOWN_FILE_EXTENSION","INTERNAL_FAILURE"]),l=e;i.default=l}),66);
__d("checkForSphericalTag",["VideoSphericalMetadataUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoSphericalMetadataUtil").parseXMLToDocument(e);if(!t)return!1;var n=t.getElementsByTagNameNS("*","Spherical");if(n.length===0)return!1;var r=n[0],a=r.childNodes[0].nodeValue;return a.toLowerCase()==="true"}l.default=e}),98);
__d("getVideo64BitAtomLength",["Int64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o){var a=e.getUint32(t+o+n),i=e.getUint32(t+n+o+o);return new(r("Int64"))(i,a).toNumber()}l.default=e}),98);
__d("VideoUploadMetadataParser",["Bootloader","ErrorNormalizeUtils","ISOVideoBoxConstants","VideoSphericalMetadataUtil","VideoUploadFeatureDetector","VideoUploadMetadataParserErrorCode","checkForSphericalTag","err","fileSlice","getErrorSafe","getVideo64BitAtomLength","gkx","justknobx","nullthrows","promiseDone"],(function(t,n,r,o,a,i,l){var e=4,s=4,u=r("gkx")("26232")?20482048:5242880,c=24,d=32,m=88,p=20,_=28,f=8,g=16,h=4,y=84,C=20,b=62,v=4,S=12,R=12,L=16,E=16,k={0:36,1:52,2:72},I=1,T=1,D=4,x=1,$=1,P=4,N=4,M=16,w=32,A=34,F=(function(){function t(e,t,n,r){this.$1=e,this.$2=t==null?function(){}:t,this.$4=n,this.$5=!0,this.$3=r}var n=t.prototype;return n.getHandler=function(){return this.$2},n.$6=function(t){this.$2(t),this.$3!=null&&this.$3({success:!0,metadata:t})},n.$7=function(t,n){if(this.$2(null),this.$3!=null){var e=n==null?void 0:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")(n));this.$3({success:!1,errorCode:t,errorObject:e})}},n.parse=function(){if(!o("VideoUploadFeatureDetector").supportsFileReading())return this.$7(r("VideoUploadMetadataParserErrorCode").FILE_READING_NOT_SUPPORTED),null;switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":break;case"mkv":if(r("gkx")("26231"))break;default:return this.$7(r("VideoUploadMetadataParserErrorCode").UNKNOWN_FILE_EXTENSION),null}return this.$8()},n.$8=async function(){var e=this,t=this.$9(),n=this.$10(this.$1.getFile(),1e4);return new Promise(function(o,a){try{r("promiseDone")(Promise.all([t,n]).then(function(t){var n=t[0];if(n.completed){var r=t[1];n.videoPlayerData=r,e.$6(n)}o(n)},function(t){e.$7(r("VideoUploadMetadataParserErrorCode").INTERNAL_FAILURE,t),a(t)}))}catch(t){e.$7(r("VideoUploadMetadataParserErrorCode").INTERNAL_FAILURE,t),a(t)}})},n.$9=async function(){var e=this,t;switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":t=this.$11(0,Math.min(u,this.$1.getSize()||0),null);break;case"mkv":await new Promise(function(n,o){r("Bootloader").loadModules(["VideoUploadMetadataMKVParser"],function(r){var o=new r(e.$1);t=o.parse(),n()},"VideoUploadMetadataParser")});break;default:throw new Error("Unrecognized file extension in _parseImpl")}return r("nullthrows")(t)},n.$11=function(t,n,o){var e=this,a=new FileReader;return new Promise(function(i,l){a.onload=async function(r){try{if(!(a.result instanceof ArrayBuffer))throw new Error("reader.result is something other than ArrayBuffer");var s=e.$12(new DataView(a.result),0,n-t,t,o);if(s.completed){var c=e.$13(s);c.completed=!0,i(c)}else{var d=await e.$11(t+s.nextOffset,Math.min(e.$1.getSize()||0,t+s.nextOffset+u),s);i(d)}}catch(e){l(e)}};var s=e.$1.getFile();a.readAsArrayBuffer(r("fileSlice").call(s,t,n))})},n.$10=function(t,n){return!this.$4||!window.URL||!window.URL.createObjectURL||!t?null:new Promise(function(e,r){if(!t.type.startsWith("video/")){r("Incorrect file type, expected video");return}var o=document.createElement("video"),a=window.setTimeout(function(){i(),r("Video onloadedmetadata timed out")},n);function i(){URL.revokeObjectURL(o.src),window.clearTimeout(a),o.remove()}o.onloadedmetadata=function(){if(o.videoWidth===0||o.videoHeight===0){i(),r("Video onloadedmetadata corrupt metadata");return}var t={width:o.videoWidth,height:o.videoHeight};i(),e(t)},o.onerror=function(){var e,t;i(),r("Video error: "+((e=(t=o.error)==null?void 0:t.message)!=null?e:"Unknown error"))},o.src=URL.createObjectURL(t)})},n.$14=function(t,n,r){for(var e=[],o=0;o<r;o++)e.push(String.fromCharCode(t.getUint8(n+o)));return e.join("")},n.$15=function(t,n,r){var e={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_map:[]},o=0;e.version=t.getUint8(n+o),o=I,e.ambisonic_type=t.getUint8(n+o),o+=T,e.ambisonic_order=t.getUint32(n+o),o+=D,e.ambisonic_channel_ordering=t.getUint8(n+o),o+=x,e.ambisonic_normalization=t.getUint8(n+o),o+=$,e.num_channels=t.getUint32(n+o),o+=P;for(var a=0;a<e.num_channels;a++)if(e.channel_map.push(t.getUint32(n+o)),o+=N,o>r)return null;return JSON.stringify(e)},n.$16=function(n,a,i,l){try{var t=s+e,u=o("ISOVideoBoxConstants").GSPHERICAL_UUID.length;if(t+u<i){for(var c=[],d=0;d<u;d++)c.push(n.getUint8(a+t+d));var m=o("VideoSphericalMetadataUtil").uuidArrayEquals(c,o("ISOVideoBoxConstants").GSPHERICAL_UUID),p=o("VideoSphericalMetadataUtil").uuidArrayEquals(c,o("ISOVideoBoxConstants").FBSPHERICAL_UUID);if(t+=u,m||p){var _=this.$14(n,a+t,i-t);r("checkForSphericalTag")(_)&&(l.sphericalMetadata.spherical=!0,p?l.sphericalMetadata.FBSphericalMetadataXML=_:l.sphericalMetadata.sphericalMetadataXml=_)}}}catch(e){}},n.$12=function(n,o,a,i,l){for(var t=l||{widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:!1,sphericalMetadata:{sphericalMetadataXml:null,FBSphericalMetadataXML:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:!1,endOfMediaInformationAtomOffset:null,streamSampleCounts:[],samples:[]},u=null;o<a;){var I=n.getUint32(o),T=this.$14(n,o+e,s);if(I===1&&(I=r("getVideo64BitAtomLength")(n,o,s,e)),o+I>a)return t.completed=!1,t.nextOffset=o,I>a&&(t.nextOffset+=I),t;if(t.isParsingInMediaInformationAtom&&o>=Number(t.endOfMediaInformationAtomOffset)&&(t.isParsingInMediaInformationAtom=!1,t.endOfMediaInformationAtomOffset=null),o+i===0&&T!=="ftyp")throw new Error("No ftyp atom");if(I===0)throw new Error("len is 0");var D=function(){var e=n.getUint8(o+f),t=e===1&&r("justknobx")._("534"),a=t?_:p,i=t?d:c,l=n.getUint32(o+a);if(l===0)throw r("err")("mvhd timescale is 0");var s=t?Number(n.getBigUint64(o+i)):n.getUint32(o+i);return s/l};switch(T){case"moov":case"trak":case"mdia":case"stbl":o+=e+s;break;case"mvhd":t.duration=D(),o+=I;break;case"tkhd":var x=n.getUint16(o+y),$=n.getUint16(o+m);t.widths.push(x),t.heights.push($),t.samples.push({descriptions:[]}),u=n.getUint32(o+C),o+=I;break;case"hdlr":if(!t.isParsingInMediaInformationAtom){var P=this.$14(n,o+g,h);switch(P){case"vide":P="video";break;case"soun":P="audio";break;case"subt":P="subtitle";break;default:P="data"}t.streamTypes.push(P)}o+=I;break;case"mdhd":t.streamDurations.push(D()),o+=I;break;case"uuid":this.$16(n,o,I,t),o+=I;break;case"meta":var N=R+S+v,F=this.$14(n,o+N,4);if(F!=="face"){o+=I;break}var O=e+s+b,B=this.$14(n,o+O,I-O);B!==null&&(t.sphericalMetadata.fbSpatialAudioMetadataXml==null&&(t.sphericalMetadata.fbSpatialAudioMetadataXml="<fb360_spatial_audio>"),u?t.sphericalMetadata.fbSpatialAudioMetadataXml+=`
                <track id="`+u.toString()+`">
                  `+B+`
                </track>
              `:t.sphericalMetadata.fbSpatialAudioMetadataXml+=`
                <spatial_audio_formatting>
                  `+B+`
                </spatial_audio_formatting>
              `),o+=I;break;case"minf":var W=this.$14(n,o+2*e+s,s);W==="smhd"||W==="vmhd"?(o+=e+s,t.isParsingInMediaInformationAtom=!0,t.endOfMediaInformationAtomOffset=o+I):(t.streamSampleCounts.push(null),o+=I);break;case"stsd":o+=L;break;case"avc1":if(this.$5&&t.samples.length>0){var q=t.samples[t.samples.length-1];q.descriptions.push({width:n.getUint16(o+w),height:n.getUint16(o+A)})}o+=I;break;case"mp4a":case"sowt":case"raw ":case"twos":case"fl32":case"fl64":case"in24":case"in32":case"ulaw":case"alaw":case"lpcm":case"Opus":var U=n.getUint16(o+E).toString();Object.prototype.hasOwnProperty.call(k,U)?o+=k[U]:o+=I;break;case"SA3D":var V=this.$15(n,o+e+s,I);V!==null&&t.sphericalMetadata.ytSa3dMetadataJson===null&&(t.sphericalMetadata.ytSa3dMetadataJson=V),o+=I;break;case"stsz":case"stz2":t.streamSampleCounts.push(n.getUint32(o+M)),o+=I;break;default:o+=I}}return t.completed=!0,t.sphericalMetadata.fbSpatialAudioMetadataXml!=null&&(t.sphericalMetadata.fbSpatialAudioMetadataXml+="</fb360_spatial_audio>"),t},n.$13=function(t){var e={streams:{numAudioTracks:0},format:{},metadata:{}},n=t.widths.length,r=t.heights.length,o=t.streamTypes.length,a=t.streamDurations.length,i=t.streamSampleCounts.length,l=t.samples.length;if(n!==r||n!==o||n!==a||n!==i||n!==l)throw new Error("Number of parsed widths, heights, durations or sample counts for video file are mismatched.");for(var s=0;s<n;s++){var u={width:t.widths[s],height:t.heights[s],duration:t.streamDurations[s],type:t.streamTypes[s],sampleCount:t.streamSampleCounts[s]};if(u.type==="video"){this.$5&&t.samples[s].descriptions.forEach(function(e){e.width>u.width&&e.height>u.height&&(u.width=e.width,u.height=e.height)});var c=u.width*u.height,d=e.streams.primaryVideo;(!d||d.width*d.height>c)&&(e.streams.primaryVideo=u)}else if(u.type==="audio"){var m=e.streams.primaryAudio;(!m||m.duration<u.duration)&&(e.streams.primaryAudio=u),e.streams.numAudioTracks++}}return e.format.duration=t.duration,e.format.isSpherical=t.sphericalMetadata.spherical,t.sphericalMetadata.spherical&&(e.metadata.sphericalMetadataXml=t.sphericalMetadata.sphericalMetadataXml,e.metadata.FBSphericalMetadataXML=t.sphericalMetadata.FBSphericalMetadataXML,e.metadata.fbSpatialAudioMetadataXml=t.sphericalMetadata.fbSpatialAudioMetadataXml,e.metadata.ytSa3dMetadataJson=t.sphericalMetadata.ytSa3dMetadataJson),e},t})();l.default=F}),98);
__d("MediaUploadFBMetadataParser",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime","VideoUploadFile","VideoUploadMetadataParser","err"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadMetadataParser",s=(function(){function t(){this.$1=r("MediaUploadFBStage").METADATA_EXTRACTION}var n=t.prototype;return n.parse=async function(t){t.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,this.$1);try{await this.$2(t)}catch(e){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:e})}return t.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),r("MediaUploadOperationOutcome").SUCCESS},n.retriveRawMetadata=function(n){return n.processing.rawData.getUnsafe(e)},n.$2=function(t){var e=this,n=t.asset,o=n.dataAsFile();if(o==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").ASSET_IS_NOT_FILE}),Promise.resolve();var a=new(r("VideoUploadFile"))(null,o.file,o.size,o.extension);return new Promise(function(n){var o=new(r("VideoUploadMetadataParser"))(a,null,!1,function(o){if(o.success)e.$3(t,o.metadata);else if(o.errorObject!=null){var a=o.errorObject,i=r("err")(a.message);i.name=a.name,t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorCode:String(o.errorCode),rawErrorObject:i})}else t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").INTERNAL_FAILURE,rawErrorCode:String(o.errorCode)});n()});o.parse()})},n.$3=function(n,r){var t,a,i,l,s,u;n.processing.rawData.set(e,r);var c=(t=r.format)==null?void 0:t.duration,d=c==null?void 0:o("MediaUploadTime").secondsToTime(c),m=(a=r.streams)==null||(a=a.primaryVideo)==null?void 0:a.width,p=(i=r.streams)==null||(i=i.primaryVideo)==null?void 0:i.height;r.videoPlayerData!=null&&((l=r.videoPlayerData)==null?void 0:l.width)>0&&((s=r.videoPlayerData)==null?void 0:s.height)>0&&(m=r.videoPlayerData.width,p=r.videoPlayerData.height);var _=(u=r.format)==null?void 0:u.isSpherical;n.metadata={duration:d,width:m,height:p,isSpherical:_}},t})();l.default=s}),98);
__d("VideoUploadFileValidator",["errorCode","fbt","cr:909496","cr:909497","react","vulture"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=n("react")),c=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],d=["VIDEO__INVALID_GUIDE_DATA"],m=(function(){"use strict";function e(e){this.$1=e}var t=e.prototype;return t.validate=function(t,n){return this.$2(t)&&this.$3(t)&&this.$4(t.getExtension()==="gif",n)},t.getValidationErrorMessage=function(t,n){return this.$5(t)||this.$6(t)||this.$7(t.getExtension()==="gif",n)},e.canReplaceVideoForError=function(t){return n("vulture")("GXIBEX7SKQtgztutRnjhZ9IvfSk="),t?d.indexOf(t)>-1?!1:c.indexOf(t)>-1:!0},t.$2=function(t){var e=this.$5(t);return e?(n("cr:909496")!==null&&n("cr:909496").show(e.summary,e.description),!1):!0},t.$5=function(t){var e;if(!this.$1.extensions[(e=t.getExtension())==null?void 0:e.toLowerCase()]){var r="http://www.facebook.com/help/218673814818907/",o=u.jsx(n("cr:909497"),{target:"_blank",href:r,children:s._(/*BTDS*/"recommended formats")});return{summary:s._(/*BTDS*/"Unsupported File Format"),description:s._(/*BTDS*/"Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[s._param("link",o)])}}},t.$3=function(t){var e=this.$6(t);return e?(n("cr:909496")!==null&&n("cr:909496").show(e.summary,e.description),!1):!0},t.$6=function(t){var e;if(t.getSize()!==null)return t.getSize()<this.$1.minSize&&(e=this.$8()),t.getSize()>this.$1.maxSize&&(e=this.$9()),e},t.$8=function(){var e=Math.round(this.$1.minSize/1024);return{summary:s._(/*BTDS*/"Video File Too Small"),description:s._(/*BTDS*/"The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[s._param("min-size",e)])}},t.$9=function(){var e=Math.floor(this.$1.maxSize/1024/1024);return{summary:s._(/*BTDS*/"Video File Too Large"),description:s._(/*BTDS*/"The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[s._param("max-size",e)])}},t.$4=function(t,r){var e=this.$7(t,r);return e?(n("cr:909496")!==null&&n("cr:909496").show(e.summary,e.description),!1):!0},t.$7=function(t,n){var e;if(n){var r=n.format.duration;if(r&&(r>this.$1.maxLength&&(e=this.$10()),r<this.$1.minLength&&!t&&(e=this.$11())),!(!n.streams||!n.streams.primaryVideo)){var o=n.streams.primaryVideo.width,a=n.streams.primaryVideo.height,i=0,l=0;n.videoPlayerData!==null&&(i=n.videoPlayerData.height,l=n.videoPlayerData.width),this.$1.acceptDimensionsFromPlayer&&l!==0&&i!==0&&(o=l,a=i),!n.streams.primaryVideo&&n.streams.primaryAudio&&(e=this.$12()),o<this.$1.minWidth&&(e=this.$13()),a<this.$1.minHeight&&(e=this.$14());var s=o/a;return this.$1.require16to9AspectRatio&&(s>2||s<1.6)&&(e=this.$15()),this.$1.minAspectRatio&&s<this.$1.minAspectRatio&&(e=this.$16()),this.$1.maxAspectRatio&&s>this.$1.maxAspectRatio&&(e=this.$17()),e}}},t.$10=function(){return this.$1.source==="profile_video"?{summary:s._(/*BTDS*/"Profile Video Duration Too Long"),description:s._(/*BTDS*/"The maximum length is {max-length} seconds. Please upload a shorter video.",[s._param("max-length",this.$1.maxLength)])}:this.$1.source==="event_cover_video"?{summary:s._(/*BTDS*/"Event Cover Video Duration Too Long"),description:s._(/*BTDS*/"Videos can't be longer than {max-length} seconds.",[s._param("max-length",this.$1.maxLength)])}:{summary:s._(/*BTDS*/"Video Duration Too Long"),description:s._(/*BTDS*/"The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[s._param("max-length",Math.round(this.$1.maxLength/60))])}},t.$11=function(){return{summary:s._(/*BTDS*/"Video File Too Short"),description:s._(/*BTDS*/"_j{\"second\":\"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.\",\"seconds\":\"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video.\"}",[s._enum(this.$1.minLength===1?"second":"seconds",{second:"second",seconds:"seconds"}),s._param("min-length",this.$1.minLength)])}},t.$12=function(){n("vulture")("INKG3L69H5R65NZ1WJ71126FvrI=");var e="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?",t=u.jsx(n("cr:909497"),{href:e,children:s._(/*BTDS*/"supported video format")});return{summary:s._(/*BTDS*/"No Video Detected"),description:s._(/*BTDS*/"It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[s._param("supported-video-format link",t)])}},t.$13=function(){return{summary:s._(/*BTDS*/"Video Width Too Narrow"),description:s._(/*BTDS*/"The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[s._param("min-width",this.$1.minWidth)])}},t.$15=function(){return n("vulture")("uxlnhk-6pEg8Fk9bfORWCRp4alE="),{summary:s._(/*BTDS*/"Problem Uploading Video"),description:s._(/*BTDS*/"Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload again.")}},t.$14=function(){return{summary:s._(/*BTDS*/"Video Height Too Short"),description:s._(/*BTDS*/"The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[s._param("min-height",this.$1.minHeight)])}},t.$17=function(){return{summary:s._(/*BTDS*/"Video Too Wide"),description:s._(/*BTDS*/"The video you selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a taller video.",[s._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),s._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}},t.$16=function(){return{summary:s._(/*BTDS*/"Video Too Tall"),description:s._(/*BTDS*/"The video you selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a narrower video.",[s._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),s._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}},e})();a.exports=m}),130);
__d("MediaUploadFBMetadataValidator",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime","Promise","VideoUploadFile","VideoUploadFileValidator"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=r("MediaUploadFBStage").METADATA_VALIDATION,this.$2=e}var a=t.prototype;return a.validate=function(o,a){o.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,this.$1);var t;try{t=this.$3(o,a)}catch(e){o.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:e}),t=r("MediaUploadOperationOutcome").SUCCESS}return o.emitStageEventForOperationOutcome(t,this.$1),(e||(e=n("Promise"))).resolve(t)},a.$4=function(t){var e={};return t.extensions.forEach(function(t){return e[t]=1}),{minSize:t.minSizeKB*1024,maxSize:t.maxSizeKB*1024,maxLength:o("MediaUploadTime").timeToSeconds(t.maxDuration),minLength:o("MediaUploadTime").timeToSeconds(t.minDuration),acceptDimensionsFromPlayer:t.acceptDimensionsFromPlayer,minWidth:t.minWidth,minHeight:t.minHeight,require16to9AspectRatio:!1,minAspectRatio:t.minAspectRatio,maxAspectRatio:t.maxAspectRatio,source:t.sourceType,extensions:e}},a.$3=function(t,n){var e=t.asset.dataAsFile();if(e==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").ASSET_IS_NOT_FILE}),r("MediaUploadOperationOutcome").SUCCESS;if(this.configuration==null)throw this.$2.createThrowableError("Missing configuration in the MediaUploadFBMetadataValidator");var o=new(r("VideoUploadFile"))(null,e.file,e.size,e.extension),a=this.$4(this.configuration),i=new(r("VideoUploadFileValidator"))(a),l=i.getValidationErrorMessage(o,n);return l!=null?(t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").INTERNAL_FAILURE,displayError:l}),r("MediaUploadOperationOutcome").FAILED_NON_TRANSIENT):(t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),r("MediaUploadOperationOutcome").SUCCESS)},t})();l.default=s}),98);
__d("MediaUploadOperationAttemptOutcome",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SUCCESS","CANCELED","TRANSIENT_FAILURE","TRANSIENT_FAILURE_IMMEDIATE_RETRY","NON_TRANSIENT_FAILURE"]),l=e;i.default=l}),66);
__d("MediaUploadRetryableOperation",["MediaUploadCancelablePromise","MediaUploadOperationAttemptOutcome","MediaUploadOperationOutcome"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var o=this;this.$4=null,this.$1=e,this.$2=t,this.$3=n,this.cancelablePromise=new(r("MediaUploadCancelablePromise"))(function(e){return o.$5(e),{cancel:function(){var t;(t=o.$4)==null||t.cancel(),o.$4=null,e(r("MediaUploadOperationOutcome").CANCELED)}}})}e.createAsPromise=function(n,r,o){var t=new e(n,r,o);return t.cancelablePromise};var t=e.prototype;return t.$5=function(t){var e=this,n=this.$1();this.$4=n,this.$3.promiseTerminator(n.promise.then(function(n){e.$4=null,e.$6(t,n)},function(n){throw e.$4=null,e.$6(t,r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE),n}))},t.$6=function(t,n){switch(n){case r("MediaUploadOperationAttemptOutcome").CANCELED:t(r("MediaUploadOperationOutcome").CANCELED);break;case r("MediaUploadOperationAttemptOutcome").SUCCESS:t(r("MediaUploadOperationOutcome").SUCCESS);break;case r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:t(r("MediaUploadOperationOutcome").FAILED_NON_TRANSIENT);break;case r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE:this.$7(t,!1);break;case r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE_IMMEDIATE_RETRY:this.$7(t,!0);break}},t.$7=function(t,n){var e=this;if(this.$2.increaseRetryAttemptCounter(),this.$2.exceedTotalDuration())t(r("MediaUploadOperationOutcome").FAILED_OUT_OF_TIME);else if(this.$2.exceedTotalRetries())t(r("MediaUploadOperationOutcome").FAILED_NO_MORE_RETRIES);else if(n)this.$5(t);else{var o=this.$2.calculateBackoffDelay();this.$4=this.$3.delayedExecutor(o,function(){return e.$5(t)},function(){return t(r("MediaUploadOperationOutcome").CANCELED)})}},e})();l.default=e}),98);
__d("MediaUploadFBNetworkAssetStrategy",["MediaUploadPipeline","MediaUploadRetryableOperation"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r){this.$1=e,this.startRequest=t,this.uploadServiceRequest=n,this.receiveRequest=r}var t=e.prototype;return t.run=function(t){var e=this,n=t.asset.dataAsFile();if(n==null)throw this.$1.createThrowableError("Browser is not compatible with current version of the SDK");var o=new(r("MediaUploadPipeline"))(this.$1);return o.addCancelableStep(function(){return r("MediaUploadRetryableOperation").createAsPromise(function(){return e.startRequest.send(t)},t.retryState,e.$1)}),o.addCancelableStep(function(){return r("MediaUploadRetryableOperation").createAsPromise(function(){return e.uploadServiceRequest.send(t,n,e.startRequest.retriveResponse(t))},t.retryState,e.$1)}),o.addCancelableStep(function(){return r("MediaUploadRetryableOperation").createAsPromise(function(){return e.receiveRequest.send(t,e.startRequest.retriveResponse(t),e.uploadServiceRequest.retriveResponse(t))},t.retryState,e.$1)}),o.run()},t.cancel=function(){},e})();l.default=e}),98);
__d("MediaUploadFBNetworkProbe",["MediaUploadNetworkStatus","Network"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.probe=function(){return r("Network").isOnline()?r("MediaUploadNetworkStatus").CONNECTED:r("MediaUploadNetworkStatus").DISCONNECTED},e})();l.default=e}),98);
__d("MediaUploadFBEndpointRequest",["AsyncRequest","MediaUploadCancelablePromise","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.send=function(t,n){var e=this;return new(r("MediaUploadCancelablePromise"))(function(o){n.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,t.stage);var a=t.createPayload();if(a==null){n.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,t.stage),o(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);return}var i=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(t.uri).setData(a).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",n.sessionContext.sessionID).setProgressHandler(function(){t.networkNotifier.notifyOnProgress(n,t.stage)}).setHandler(function(r){o(e.$1(t,n,r))}).setErrorHandler(function(r){o(e.$2(t,n,r))});if(i.send())return t.networkNotifier.notifyOnNewRequest(n,t.stage),{cancel:function(){t.networkNotifier.notifyOnAbandon(n,t.stage),i.abort()}};o(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE)})},t.$1=function(t,n,o){var e;return t.networkNotifier.notifyOnResponse(n,t.stage),(e=n.retryState)==null||e.resetBackoff(),t.acceptSuccessfulResponse(o),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,t.stage),r("MediaUploadOperationAttemptOutcome").SUCCESS},t.$2=function(t,n,o){var e=o.error<1e3,a=o.error>9999;e||a?t.networkNotifier.notifyOnResponse(n,t.stage):t.networkNotifier.notifyOnTransportError(n,t.stage),t.acceptErrorResponse(o),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,t.stage);var i=e&&o.error>=400&&o.error<500||a&&!o.transientError;return i?r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE},e})();l.default=e}),98);
__d("MediaUploadFBReceiveRequest",["ActorURI","MediaUploadCancelablePromise","MediaUploadFBEndpointRequest","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadFBReceiveRequest",s=(function(){function t(e){this.$1=r("MediaUploadFBStage").RECEIVE_REQUEST,this.$2=e.entryPoint,this.$3=e.payloadHook,this.$4=e.customHeadersHook,this.$5=e.envParams,this.$6=new(r("MediaUploadFBEndpointRequest")),this.$7=e.networkNotifier}var n=t.prototype;return n.send=function(n,a,i){var t=this;if(this.configuration==null)throw this.$5.createThrowableError("Missing configuration in the MediaUploadFBReceiveRequest");return(a==null?void 0:a.skip_upload)===!0?(n.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),r("MediaUploadCancelablePromise").resolve(r("MediaUploadOperationAttemptOutcome").SUCCESS)):this.$6.send({stage:this.$1,networkNotifier:this.$7,uri:n.request.attributes.actorID==null?this.configuration.baseURI:o("ActorURI").create(this.configuration.baseURI,n.request.attributes.actorID),createPayload:function(){return t.$8(n,a,i)},createCustomHeaders:function(){return t.$9(n)},acceptSuccessfulResponse:function(a){n.processing.rawData.set(e,a.payload),n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS})},acceptErrorResponse:function(o){var e;n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:o.error,rawErrorObject:o.toError(),displayError:{summary:o.errorSummary,description:o.errorDescription},errorAttributes:{silentError:o.silentError,transientError:o.transientError},networkRequestID:(e=o.payload)==null?void 0:e.__www_request_id__})}},n)},n.$9=function(t){var e=this.$4;return e?e({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot()}):null},n.$8=function(t,n,o){if(n==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_START_CALL_RESPONSE"}),null;if(o==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_UPLOAD_SERVICE_RESPONSE"}),null;var e=t.asset.dataAsFile(),a={waterfall_id:t.sessionContext.sessionID,target_id:t.request.attributes.targetID,video_id:n.video_id,source:this.$2.sourceType,composer_entry_point_ref:this.$2.entryPointRef,supports_chunking:!0,supports_upload_service:!0,partition_start_offset:0,partition_end_offset:e==null?void 0:e.size,start_offset:0,end_offset:e==null?void 0:e.size,upload_speed:t.uploadSummary.computeSpeedBps(),fbuploader_video_file_chunk:o.everstoreHandle,has_file_been_replaced:t.request.attributes.hasFileBeenReplaced,composer_dialog_version:t.request.attributes.composerDialogVersion,composer_work_shared_draft_mode:t.request.attributes.workSharedDraftMode},i=this.$3;return i!=null&&i({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot(),startCallResponse:n,payload:a}),a},t})();l.default=s}),98);
__d("MediaUploadFBStartRequest",["ActorURI","MediaUploadFBEndpointRequest","MediaUploadFBStage","MediaUploadFBStageOutcome"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadFBStartRequest",s=(function(){function t(e){this.$1=r("MediaUploadFBStage").START_REQUEST,this.$2=e.entryPoint,this.$3=e.payloadHook,this.$4=e.customHeadersHook,this.$5=e.envParams,this.$6=new(r("MediaUploadFBEndpointRequest")),this.$7=e.networkNotifier}var n=t.prototype;return n.retriveResponse=function(n){return n.processing.rawData.getUnsafe(e)},n.send=function(n){var t=this;if(this.configuration==null)throw this.$5.createThrowableError("Missing configuration in the MediaUploadFBStartRequest");return this.$6.send({stage:this.$1,networkNotifier:this.$7,uri:n.request.attributes.actorID==null?this.configuration.baseURI:o("ActorURI").create(this.configuration.baseURI,n.request.attributes.actorID),createPayload:function(){return t.$8(n)},createCustomHeaders:function(){return t.$9(n)},acceptSuccessfulResponse:function(a){var o=a.payload;if(o.video_id!=null)n.processing.rawData.set(e,o),n.videoID=o.video_id,n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS});else{var i;n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").INVALID_SERVER_RESPONSE,networkRequestID:(i=a.payload)==null?void 0:i.__www_request_id__})}},acceptErrorResponse:function(o){var e;n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:o.error,rawErrorObject:o.toError(),displayError:{summary:o.errorSummary,description:o.errorDescription},errorAttributes:{silentError:o.silentError,transientError:o.transientError},networkRequestID:(e=o.payload)==null?void 0:e.__www_request_id__})}},n)},n.$9=function(t){var e=this.$4;return e!=null?e({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot()}):null},n.$8=function(t){var e,n=t.asset.dataAsFile(),r={waterfall_id:t.sessionContext.sessionID,target_id:t.request.attributes.targetID,source:this.$2.sourceType,composer_entry_point_ref:this.$2.entryPointRef,supports_chunking:n!=null,supports_file_api:n!=null,file_size:n==null?0:n.size,file_extension:String(t.asset.data.extension),spherical:(e=t.metadata)==null?void 0:e.isSpherical,partition_start_offset:0,partition_end_offset:n==null?void 0:n.size,has_file_been_replaced:t.request.attributes.hasFileBeenReplaced,composer_dialog_version:t.request.attributes.composerDialogVersion,video_publisher_action_source:t.request.attributes.publisherActionSource,composer_work_shared_draft_mode:t.request.attributes.workSharedDraftMode},o=this.$3;return o!=null&&o({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot(),payload:r}),r},t})();l.default=s}),98);
__d("MediaUploadFBUploadServiceRequest",["AsyncResponse","MediaUploadCancelablePromise","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent","RelayAPIConfig","ResumableUploadService","ResumableUploadServiceState.enum","md5"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadFBUploadServiceRequest",s=(function(){function t(e){this.$1=r("MediaUploadFBStage").BYTES_UPLOAD,this.$2=e.envParams,this.$3=e.networkNotifier}var n=t.prototype;return n.send=function(t,n,o){var e=this;return new(r("MediaUploadCancelablePromise"))(function(a){t.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,e.$1);var i=e.configuration;if(i==null)throw e.$2.createThrowableError("Missing configuration in the MediaUploadFBUploadServiceRequest");if(o==null){t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_START_CALL_RESPONSE"}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,e.$1),a(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);return}if(o.skip_upload){t.uploadSummary.updateForUploadSkip(n.size),t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,e.$1),a(r("MediaUploadOperationAttemptOutcome").SUCCESS);return}t.uploadSummary.updateForUploadStart(n.size),t.recalculateProgressAndEmit();var l=e.$4(t,n,i,o),s=r("ResumableUploadService").create(l);return t.processing.uploadServiceDomain=s.getServiceName(),e.$5(t,s,a),s.resume(n.file),e.$3.notifyOnNewRequest(t,e.$1),{cancel:function(){s.cancel()}}})},n.retriveResponse=function(n){return n.processing.rawData.getUnsafe(e)},n.$6=function(n,o,a){this.$3.notifyOnResponse(n,this.$1),typeof a=="string"?(n.processing.rawData.set(e,{everstoreHandle:a}),n.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),o(r("MediaUploadOperationAttemptOutcome").SUCCESS)):(n.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").INVALID_SERVER_RESPONSE,rawErrorCode:"RECEIVED_HANDLE_IS_NOT_STRING"}),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,this.$1),o(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE))},n.$7=function(t,n,o){o.error<1e3?this.$3.notifyOnResponse(t,this.$1):this.$3.notifyOnTransportError(t,this.$1),t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:o.error,displayError:{summary:o.errorSummary,description:o.errorDescription},errorAttributes:{silentError:o.silentError,transientError:o.transientError}}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,this.$1);var e=o.error>=400&&o.error<500;n(e?r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE)},n.$8=function(t,n,o){o instanceof r("AsyncResponse")?this.$7(t,n,o):(this.$3.notifyOnAbandon(t,this.$1),t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorObject:o}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,this.$1),n(r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE))},n.$9=function(t,n){this.$3.notifyOnAbandon(t,this.$1),t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").CANCEL}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_CANCELED,this.$1),n(r("MediaUploadOperationAttemptOutcome").CANCELED)},n.$10=function(t,n){this.$3.notifyOnProgress(t,this.$1),(n==null?void 0:n.loaded)!=null&&(t.uploadSummary.updateForProgress(n.loaded),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_PROGRESS,this.$1))},n.$5=function(t,n,o){var e=this,a;n.addListener((a=r("ResumableUploadServiceState.enum")).SUCCESS,function(n){return e.$6(t,o,n)}),n.addListener(a.TRANSPORT_FAILURE,function(n){return e.$7(t,o,n)}),n.addListener(a.FAIL,function(n){return e.$8(t,o,n)}),n.addListener(a.CANCEL,function(){return e.$9(t,o)}),n.addListener(a.PROGRESS,function(n){return e.$10(t,n)})},n.$4=function(t,n,o,a){var e,i,l=n.file,s=[String(l.lastModified),l.name,l.type,String(l.size),(e=(i=t.processing.pseudoHash)==null?void 0:i.hashValue)!=null?e:[t.sessionContext.sessionID,t.assetID].join("-")].join("-"),u=[r("md5")(s),String(a.start_offset),String(a.end_offset)].join("-"),c=o.tracing.enabled&&o.tracing.minFileSizeKB<l.size/1024?["video_upload_www",[t.assetID,String(t.retryState.getRetryAttempts())].join("_"),[String(t.sessionContext.sessionID),String(a.video_id)].join("_")].join(":"):null,d=o.defaultService,m=d.serviceDomain,p=d.serviceName;t.retryState.getRetryAttemptsSinceLastReset()<10&&o.targetedService!=null&&(p=o.targetedService.serviceName,m=o.targetedService.serviceDomain);var _=null;return o.includeAccessToken&&(_=r("RelayAPIConfig").accessToken),{consumer:o.defaultService.serviceConsumer,accessToken:_,sessionKey:u,serviceName:p,serviceDomain:m,tracingHeaderValue:c,receiveParameters:{start_offset:String(a.start_offset),end_offset:String(a.end_offset),composer_session_id:t.sessionContext.sessionID,upload_session_id:String(a.upload_session_id),product_media_id:a.video_id,xpv_asset_id:a.xpv_asset_id,is_xpv_single_prod:a.is_xpv_single_prod,fb_region:a.fb_region,total_file_size:String(l.size),target_id:t.request.attributes.targetID,video_waterfall_id:t.sessionContext.sessionID}}},t})();l.default=s}),98);
__d("MediaUploadFalcoLogger",["CurrentUser","MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadStageEvent","MediaUploadTime","logVideoUploadViaFalco"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map([[(e=r("MediaUploadClientEvent")).CLIENT_CONFIG_REQUESTED,"upload.client.started_client_config_fetch"],[e.CLIENT_CONFIG_RECEIVED,"upload.client.finished_client_config_fetch"],[e.CLIENT_CONFIG_FAILED,"upload.client.failed_client_config_fetch"],[e.CLIENT_CONFIG_CACHED,"upload.client.cached_client_config_fetch"]]),p=new Map([[(s=r("MediaUploadSessionEvent")).SESSION_CONFIRMED,"upload.client.started_flow"],[s.PUBLISH_STARTED,"upload.client.started_sending_post_request"],[s.PUBLISH_SUCCEED,"upload.client.finished_sending_post_request"],[s.PUBLISH_FAILED,"upload.client.failed_sending_post_request"]]),_=new Map([[r("MediaUploadSessionStatus").FAILED,"upload.client.failed_flow"],[r("MediaUploadSessionStatus").CANCELED,"upload.client.canceled_flow"],[r("MediaUploadSessionStatus").COMPLETED,"upload.client.finished_flow"]]),f=new Map([[(u=r("MediaUploadAssetEvent")).ASSET_ADDED,"upload.client.requested_uploading"],[u.ASSET_STARTED,"upload.client.started_uploading"],[u.ASSET_FAILED,"upload.client.failed_uploading"],[u.ASSET_REMOVED,"upload.client.canceled_uploading"],[u.ASSET_SUCCEED,"upload.client.finished_uploading"],[u.ASSET_STALL,"upload.client.stall_detected"]]),g=new Map([[(c=r("MediaUploadStageEvent")).STAGE_STARTED,new Map([[(d=r("MediaUploadFBStage")).START_REQUEST,"upload.client.started_sending_start_request"],[d.BYTES_UPLOAD,"upload.client.started_sending_bytes"],[d.RECEIVE_REQUEST,"upload.client.started_sending_receive_request"]])],[c.STAGE_SUCCEED,new Map([[d.START_REQUEST,"upload.client.finished_sending_start_request"],[d.BYTES_UPLOAD,"upload.client.finished_sending_bytes"],[d.RECEIVE_REQUEST,"upload.client.finished_sending_receive_request"]])],[c.STAGE_FAILED,new Map([[d.START_REQUEST,"upload.client.failed_sending_start_request"],[d.RECEIVE_REQUEST,"upload.client.failed_sending_receive_request"],[d.BYTES_UPLOAD,"upload.client.failed_sending_bytes"],[d.METADATA_VALIDATION,"upload.client.invalidated_uploading"]])],[c.STAGE_CANCELED,new Map([[d.START_REQUEST,"upload.client.canceled_sending_start_request"],[d.BYTES_UPLOAD,"upload.client.canceled_sending_bytes"],[d.RECEIVE_REQUEST,"upload.client.canceled_sending_receive_request"]])]]),h=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.subscribe=function(t,n){var e=this;m.forEach(function(r,o){t.addClientEventListener(o,function(t){return e.$3(n,r,t)})}),p.forEach(function(r,o){t.addSessionEventListener(o,function(t){return e.$4(n,r,t)})}),_.forEach(function(o,a){t.addSessionEventListener(r("MediaUploadSessionEvent").SESSION_FINISHED,function(t){t.terminalStatus===a&&t.timing.confirmedAtMs!=null&&e.$4(n,o,t)})}),f.forEach(function(r,o){t.addAssetEventListener(o,function(t,o){return e.$5(n,r,t,o)})}),g.forEach(function(r,o){r.forEach(function(r,a){t.addStageEventListener(o,a,function(t,o){e.$5(n,r,t,o)})})})},t.$6=function(t){return t==null?null:o("MediaUploadTime").timeToMilliseconds(this.$1.currentTimeProvider())-t},t.$7=function(t,n){var e,o;return{event:t,application_state:"www_v2",is_chunked_upload:!0,file_can_read:this.$1.features.supportFileManipulation,network_status:(e=this.$2)==null||(e=e.injectNetworkStatus)==null?void 0:e.getNetworkStatus(),internet_status:(o=this.$2)==null||(o=o.injectNetworkStatus)==null?void 0:o.getInternetStatus(),trigger_time:this.$1.currentTimeProvider(),app_id:r("CurrentUser").getAppID(),source:n.sourceType,composer_entry_point_ref:n.entryPointRef}},t.$8=function(t){var e,n,o,a,i,l=(t==null?void 0:t.rawErrorCode)!=null&&typeof(t==null?void 0:t.rawErrorCode)=="string"?t==null?void 0:t.rawErrorCode:void 0,s=(t==null?void 0:t.rawErrorCode)!=null&&typeof(t==null?void 0:t.rawErrorCode)=="number"?t==null?void 0:t.rawErrorCode:void 0;return{error:l!=null?l:t==null||(e=t.displayError)==null?void 0:e.summary,error_inner:(t==null?void 0:t.outcome)===r("MediaUploadFBStageOutcome").SUCCESS||t==null?void 0:t.outcome,error_description:(n=t==null||(o=t.errorObject)==null?void 0:o.message)!=null?n:t==null||(a=t.displayError)==null?void 0:a.description,error_trace:t==null||(i=t.errorObject)==null?void 0:i.stack,error_code:s}},t.$9=function(t){return{event_reason:t.cancelReason,elapsed_time:this.$6(t.timing.confirmedAtMs),waterfall_id:t.sessionID,retry_id:t.retryID}},t.$10=function(t){var e,n,r,o,a,i,l,s,u;return{elapsed_time:this.$6(t.lastUploadStartedAtMs),asset_id:t.assetID,video_id:t.videoID,composer_session_id:t.request.attributes.composerSessionID,target_id:t.request.attributes.targetID,composer_dialog_version:t.request.attributes.composerDialogVersion,has_file_been_replaced:t.request.attributes.hasFileBeenReplaced,source_width:(e=t.metadata)==null?void 0:e.width,source_height:(n=t.metadata)==null?void 0:n.height,is_spherical:(r=t.metadata)==null?void 0:r.isSpherical,duration:(o=t.metadata)==null?void 0:o.durationMs,file_size:(a=t.asset.dataAsFile())==null?void 0:a.size,video_original_file_path:t.asset.data.name,hash:(i=t.hash)==null?void 0:i.hashValue,hash_time:(l=t.hash)==null?void 0:l.calculationTimeCostMs,retries:t.retries.totalRetryAttempts,upload_domain:t.uploadServiceDomain,upload_speed:(s=t.uploadSummary)==null?void 0:s.speedBps,skip_upload:(u=t.uploadSummary)==null?void 0:u.skippedUpload}},t.$11=function(t){var e,n;return((e=this.$2)==null?void 0:e.injectExtraSessionFields)!=null?(n=this.$2)==null?void 0:n.injectExtraSessionFields(t):null},t.$12=function(t,n){var e,r;return((e=this.$2)==null?void 0:e.injectExtraAssetFields)!=null?(r=this.$2)==null?void 0:r.injectExtraAssetFields(t,n):null},t.$13=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return e!=null?e:{}});return Object.assign.apply(Object,[{}].concat(r))},t.$3=function(t,n,r){var e=r.assetSnapshot,o=r.sessionSnapshot,a=this.$13(o==null?null:this.$11(o),o==null||e==null?null:this.$12(o,e),this.$7(n,t),o==null?null:this.$9(o),o==null||e==null?null:this.$10(e),this.$8(r),{elapsed_time:this.$6(r.startedAtMs)});this.$14(a)},t.$4=function(t,n,r){var e=this.$13(this.$11(r),this.$7(n,t),this.$9(r),this.$8(r.lastError));this.$14(e)},t.$5=function(t,n,r,o){var e=this.$13(this.$11(r),this.$12(r,o),this.$7(n,t),this.$9(r),this.$10(o),this.$8(o.lastAction));this.$14(e)},t.$14=function(t){r("logVideoUploadViaFalco")(t)},e})();l.default=h}),98);
__d("MediaUploadLinearProgressCalculator",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e,this.$2=this.$4(),this.$3=this.$1.sessionWeights.assets+this.$1.sessionWeights.publishing}var t=e.prototype;return t.$4=function(){var e=this.$1.assetWeights.uploadBytes;return this.$1.assetWeights.singleOperations.forEach(function(t){return e+=t}),e},t.$5=function(t,n){var e=Math.floor(t*100/this.$1.percentagePrecision)*this.$1.percentagePrecision,r=Math.abs(e-n)>=this.$1.percentagePrecision;return{percentageProgress:e,isDifferent:r}},t.calculateAssetProgress=function(t){var e=this.$1.assetWeights,n=0;if(t.isCompleted())n=1;else{for(var r of t.progress.completedStages.values()){var o=e.singleOperations.get(r);o!=null&&(n+=o)}var a=t.uploadSummary.computeUploadedPortion();a!=null&&(n+=e.uploadBytes*a),n/=this.$2}var i=this.$5(n,t.progress.calculated.percentageComplete);return t.progress.calculated.rawValue=n,t.progress.calculated.percentageComplete=i.percentageProgress,t.progress.calculated.rawValue=n,i.isDifferent},t.calculateSessionProgress=function(t){var e=this.$1.sessionWeights,n=0;t.progress.publishingDone&&(n+=e.publishing);var r=t.getActiveAssets();if(r.length>0){var o=e.assets/r.length;t.getActiveAssets().forEach(function(e){n+=o*e.progress.calculated.rawValue})}else n+=e.assets;n/=this.$3;var a=this.$5(n,t.progress.percentageComplete);return t.progress.percentageComplete=a.percentageProgress,a.isDifferent},e})();i.default=e}),66);
__d("MediaUploadNetworkMonitor",["MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadNetworkStatus","MediaUploadRetryState","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={probe:function(){return r("MediaUploadNetworkStatus").UNKNOWN}},u={probe:function(){return(e||(e=n("Promise"))).resolve(r("MediaUploadNetworkStatus").UNKNOWN)}},c=(function(){function e(e,t){this.$1=e,this.$3=s,this.$2=u,this.$4=r("MediaUploadNetworkStatus").UNKNOWN,this.$5=new Map,this.$6=null,this.$8=null,this.$9=t.emitClientEvent}var t=e.prototype;return t.updateConfiguration=function(t){var e,n;this.$3=(e=t.networkProbe)!=null?e:s,this.$2=(n=t.internetProbe)!=null?n:u,this.$7=t.internetProbeBackoffPolicy==null?null:new(r("MediaUploadRetryState"))(t.internetProbeBackoffPolicy,this.$1),this.$8=t.stallDetectorTimeout,this.$10()},t.getNetworkStatus=function(){return this.$3.probe()},t.getInternetStatus=function(){return this.$4},t.$11=function(t,n){return t.sessionContext.sessionID+"/"+t.assetID+"/"+String(n)},t.$12=function(t,n,o){var e,a;this.$13(r("MediaUploadNetworkStatus").CONNECTED),(e=this.$7)==null||e.resetBackoff(),(a=this.$6)==null||a.cancel(),this.$6=null;var i=this.$11(t,n);o&&this.$5.set(i,{assetContext:t}),this.$10(),this.$14(i)},t.$15=function(t,n){var e=this.$11(t,n),r=this.$5.get(e);if(r!=null){var o;(o=r.stallDetector)==null||o.cancel(),r.stallDetector=null}this.$5.delete(e)},t.$14=function(t){var e,n=this.$8;if(n!=null){var o=this.$5.get(t);o!=null&&((e=o.stallDetector)==null||e.cancel(),o.stallDetector=this.$1.delayedExecutor(n,function(){o.assetContext.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_STALL),o.stallDetector=null}))}},t.$10=function(){var e=this,t=this.$7;t!=null&&this.$5.size!==0&&this.$6==null&&(this.$6=this.$1.delayedExecutor(t.calculateBackoffDelay(),function(){var t=e.$2.probe().then(function(t){return e.$13(t)}).finally(function(){e.$6=null,e.$10()});e.$1.promiseTerminator(t)}),t.increaseRetryAttemptCounter())},t.$13=function(t){if(this.$4!==t)switch(this.$4=t,this.$4){case r("MediaUploadNetworkStatus").CONNECTED:this.$9(r("MediaUploadClientEvent").CLIENT_INTERNET_ONLINE);break;case r("MediaUploadNetworkStatus").DISCONNECTED:this.$9(r("MediaUploadClientEvent").CLIENT_INTERNET_OFFLINE);break;case r("MediaUploadNetworkStatus").TIMEOUT:this.$9(r("MediaUploadClientEvent").CLIENT_INTERNET_UNKNOWN);break;case r("MediaUploadNetworkStatus").UNKNOWN:}},t.notifyOnNewRequest=function(t,n){this.$12(t,n,!0)},t.notifyOnProgress=function(t,n){this.$12(t,n,!1)},t.notifyOnAbandon=function(t,n){this.$15(t,n)},t.notifyOnTransportError=function(t,n){this.$15(t,n)},t.notifyOnResponse=function(t,n){this.$15(t,n),this.$12(t,n,!1)},e})();l.default=c}),98);
__d("MediaUploadFBDefaultClientContext",["MediaUploadClientContext","MediaUploadClientEvent","MediaUploadEventEmitterAdapter","MediaUploadExecutor","MediaUploadFBAssetContext","MediaUploadFBAssetRequest","MediaUploadFBClient","MediaUploadFBClientEventContext","MediaUploadFBDefaultServerConfigurationRetriever","MediaUploadFBFileHasher","MediaUploadFBInternetProbe","MediaUploadFBLocalAssetStrategy","MediaUploadFBMetadataParser","MediaUploadFBMetadataValidator","MediaUploadFBNetworkAssetStrategy","MediaUploadFBNetworkProbe","MediaUploadFBReceiveRequest","MediaUploadFBSessionContext","MediaUploadFBStage","MediaUploadFBStartRequest","MediaUploadFBUploadServiceRequest","MediaUploadFalcoLogger","MediaUploadLinearProgressCalculator","MediaUploadNetworkMonitor","cr:1856704"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,o){var a,i=new(r("MediaUploadEventEmitterAdapter"))(t);return a=e.call(this,{sdk:t,emitter:i.emitter,executor:new(r("MediaUploadExecutor")),progressCalculator:new(r("MediaUploadLinearProgressCalculator"))({assetWeights:{uploadBytes:.9,singleOperations:new Map([[r("MediaUploadFBStage").START_REQUEST,.05],[r("MediaUploadFBStage").RECEIVE_REQUEST,.05]])},sessionWeights:{publishing:.1,assets:.9},percentagePrecision:1})})||this,a.entryPoint=n,a.eventAdapter=i,a.configuration=o,a.networkMonitor=new(r("MediaUploadNetworkMonitor"))(a.sdk,{emitClientEvent:function(o){return i.emitter.emitClientEvent(o,new(r("MediaUploadFBClientEventContext"))({entryPoint:n,envParams:t}))}}),a.localAssetStategy=a.$MediaUploadFBDefaultClientContext$p_1(),a.networkAssetStategy=a.$MediaUploadFBDefaultClientContext$p_2(),a.serverConfigurationRetriever=new(r("MediaUploadFBDefaultServerConfigurationRetriever"))({entryPoint:n,emitter:a.emitter,setters:{metadataValidation:function(t){a.localAssetStategy.metadataValidator.configuration=t},startRequest:function(t){a.networkAssetStategy.startRequest.configuration=t},receiveRequest:function(t){a.networkAssetStategy.receiveRequest.configuration=t},uploadService:function(t){a.networkAssetStategy.uploadServiceRequest.configuration=t},networkMonitor:function(t){a.networkMonitor.updateConfiguration({networkProbe:t.networkProbe.enabled?new(r("MediaUploadFBNetworkProbe")):null,internetProbe:t.internetProbe.enabled?new(r("MediaUploadFBInternetProbe"))({timeout:t.internetProbe.timeout},a.sdk):null,internetProbeBackoffPolicy:t.internetProbe.backoffPolicy,stallDetectorTimeout:t.stallDetector.enabled?t.stallDetector.timeout:null})}},envParams:a.sdk}),a.client=new(r("MediaUploadFBClient"))({implementation:a,sessionStrategy:a.sessionStrategy,envParams:a.sdk}),a.emitter.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CREATED,new(r("MediaUploadFBClientEventContext"))({entryPoint:n,envParams:a.sdk})),a}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.$MediaUploadFBDefaultClientContext$p_1=function(){return new(r("MediaUploadFBLocalAssetStrategy"))({envParams:this.sdk,metadataParser:new(r("MediaUploadFBMetadataParser")),metadataValidator:new(r("MediaUploadFBMetadataValidator"))(this.sdk),fileHasher:new(r("MediaUploadFBFileHasher"))({pseudoHasher:n("cr:1856704")==null?void 0:new(n("cr:1856704"))({maxChunkSize:1048576,takeFirstBytes:102400,hashingAlgorithm:"sha256",outputEncoding:"base64"},this.sdk)})})},o.$MediaUploadFBDefaultClientContext$p_2=function(){var e,t,n,o,a=new(r("MediaUploadFBStartRequest"))({entryPoint:this.entryPoint,payloadHook:(e=this.configuration.networkHooks)==null?void 0:e.startRequestPayload,customHeadersHook:(t=this.configuration.networkHooks)==null?void 0:t.startRequestCustomHeaders,envParams:this.sdk,networkNotifier:this.networkMonitor}),i=new(r("MediaUploadFBUploadServiceRequest"))({envParams:this.sdk,networkNotifier:this.networkMonitor}),l=new(r("MediaUploadFBReceiveRequest"))({entryPoint:this.entryPoint,payloadHook:(n=this.configuration.networkHooks)==null?void 0:n.receiveRequestPayload,customHeadersHook:(o=this.configuration.networkHooks)==null?void 0:o.receiveRequestCustomHeaders,envParams:this.sdk,networkNotifier:this.networkMonitor});return new(r("MediaUploadFBNetworkAssetStrategy"))(this.sdk,a,i,l)},o.runClientLazyLoading=function(t){return this.serverConfigurationRetriever.run(r("MediaUploadFBAssetContext").castOrThrow(t,this.sdk))},o.runLocalAssetStategy=function(t){return this.localAssetStategy.run(r("MediaUploadFBAssetContext").castOrThrow(t,this.sdk))},o.runNetworkAssetStategy=function(t){return this.networkAssetStategy.run(r("MediaUploadFBAssetContext").castOrThrow(t,this.sdk))},o.createSessionContext=function(t){return new(r("MediaUploadFBSessionContext"))({sessionID:t,entryPoint:this.entryPoint,emitter:this.emitter,progressCalculator:this.progressCalculator,params:this.sdk})},o.createAssetContext=function(t,n){return new(r("MediaUploadFBAssetContext"))({sessionContext:r("MediaUploadFBSessionContext").castOrThrow(t,this.sdk),assetRequest:r("MediaUploadFBAssetRequest").castOrThrow(n,this.sdk),emitter:this.emitter,progressCalculator:this.progressCalculator,retryState:this.createRetryState(),params:this.sdk})},o.publish=function(t,n){var e=this,o=r("MediaUploadFBSessionContext").castOrThrow(t,this.sdk).composeSnapshot(),a=n.map(function(t){return r("MediaUploadFBAssetContext").castOrThrow(t,e.sdk).composeSnapshot()});return this.configuration.eventHooks.publishCallback(o,a)},o.subscribeToHooks=function(){var e=this,t=new(r("MediaUploadFalcoLogger"))(this.sdk,{injectNetworkStatus:this.networkMonitor,injectExtraSessionFields:function(){return{composer_dialog_version:e.configuration.composerDialogVersion}}});t.subscribe(this.eventAdapter.subscriber,this.entryPoint),this.configuration.eventHooks.eventSubscriber!=null&&this.configuration.eventHooks.eventSubscriber(this.eventAdapter.subscriber)},t})(r("MediaUploadClientContext"));l.default=e}),98);
__d("MediaUploadSurface",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=t,this.sdk=e}var t=e.prototype;return t.isClientSupported=function(t){var e=this.$1.get(t.key);return e!=null},t.getClient=function(t){var e=this.$1.get(t.key);if(e==null)throw this.sdk.createThrowableError("Client configuration was not provided for the entry point "+t.key);return e()},e})();i.default=e}),66);
__d("MediaUploadFBSurface",["MediaUploadExtrasStorage","MediaUploadFBAssetRequest","MediaUploadSurface"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){return e.call(this,t,n)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.createAssetRequest=function(t,n,o,a){var e=t(this.sdk.factories.assets),i;a!=null&&(i=new(r("MediaUploadExtrasStorage"))(this.sdk),a(i));var l;return typeof o=="function"?l=o(e):l=o,new(r("MediaUploadFBAssetRequest"))({asset:e,assetID:n,attributes:l,extras:i})},t})(r("MediaUploadSurface"));l.default=e}),98);
__d("MediaUploadSurfaceDefinition",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e,this.$2=new Map,this.$3=new Map}var t=e.prototype;return t.$4=function(t,n){var e=this;return function(){var r=e.$3.get(t.key);return r==null&&(r=e.$1.client(t,n),e.$3.set(t.key,r)),r}},t.registerClientConfiguration=function(t){var e=this;return t.entryPoints.forEach(function(n){e.$2.set(n.key,e.$4(n,t))}),this},t.createSurface=function(){return this.$1.surface(this.$2)},e})();i.default=e}),66);
__d("MediaUploadFBDefaultSurfaceDefinition",["MediaUploadFBDefaultClientContext","MediaUploadFBEntryPointID","MediaUploadFBSurface","MediaUploadSurfaceDefinition"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,{client:function(n,o){var e=new(r("MediaUploadFBDefaultClientContext"))(t,r("MediaUploadFBEntryPointID").castOrThrow(n,t),o);return e.client},surface:function(n){return new(r("MediaUploadFBSurface"))(t,n)}})||this}return babelHelpers.inheritsLoose(t,e),t})(r("MediaUploadSurfaceDefinition"));l.default=e}),98);
__d("MediaUploadVUShimSurface",["MediaUploadFBDefaultSurfaceDefinition","MediaUploadFBEntryPointID","MediaUploadFBSDK","MediaUploadVUShim"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(r("MediaUploadFBDefaultSurfaceDefinition"))(r("MediaUploadFBSDK"));s.registerClientConfiguration({entryPoints:[new(e=r("MediaUploadFBEntryPointID"))("composer","pages_feed"),new e("composer","pages_feed_video_composer"),new e("newsfeed_composer","feed"),new e("composer","timeline")],eventHooks:{publishCallback:function(t,n){return r("MediaUploadVUShim").triggerPublish(t,n)},eventSubscriber:function(t){r("MediaUploadVUShim").setupEventSubscription(t)}}});var u=s.createSurface(),c=u;l.default=c}),98);
__d("VideoUploadCrashMonitor",["Bandicoot","VideoUploadLogger"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(t,n,r,o,a,i,l,s){var u;return u=e.call(this,"VideoUploadSession")||this,u.$VideoUploadCrashMonitor1={waterfallID:t,actorID:n,source:r,targetID:o,loggingDelay:a,supportsChunking:i,composerEntryPointRef:l,flowStarted:s},u}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.flowStarted=function(){this.$VideoUploadCrashMonitor1.flowStarted=!0},r.getCrashTimeData=function(){return this.$VideoUploadCrashMonitor1},r.logCrash=function(t,r,o){if(r.waterfallID){var e=new(n("VideoUploadLogger"))({actor_id:r.actorID,source:r.source,waterfall_id:r.waterfallID,target_id:r.targetID,delay:r.loggingDelay,is_chunked_upload:r.supportsChunking,composer_entry_point_ref:r.composerEntryPointRef}),a={error:"Crash Detected",error_description:"Detected video upload did not complete due to a crash"};e.logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,a),r.flowStarted&&e.logEvent(n("VideoUploadLogger").EVENT_RESIGNED_FLOW,{})}},t})(n("Bandicoot"));a.exports=e}),null);
__d("GraphQLVideoPublishUtils",["immutable"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("immutable").List(["cs_ab_testing_video_upload","cs_content_library","cs_content_library_bulk_upload","cs_content_library_upload_videos","cs_content_show_episode_upload","cs_global_bulk_upload","cs_global_multipost","cs_global_upload_video","cs_home_basic_post","cs_home_bulk_video","cs_home_upload_video","cs_home_multipost","cs_instagram_content_library","media_manager","pages_feed_video_composer","pages_composer_bulk_upload_upsell","page_content_tab_drafts","page_content_tab_published_posts_opted_out","page_content_tab_scheduled_posts_opted_out","page_content_tab_video_library","page_content_tab_video_library_premiere","pages_posts","pages_video_tab","timeline","video_page_video_list","cs_unified_composer_optout","cs_content_show_trailer_upload","biz_web_testing_video_upload"]);n=n.push("feed_story");var o=n.contains(t);return(e==="composer"||e==="media_manager_instagram_video_composer"||e==="comment")&&o}l.isGraphQLPublish=e}),98);
__d("ResumableUploadAsyncService",["AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rupload",u="facebook.com",c=(function(t){function n(e,n,o,a,i,l,c,d,m){var p;return p=t.call(this)||this,p.consumer=e,p.accessToken=n,p.sessionKey=o||r("uuidv4")(),p.contentKey=a||"",p.contentValue=i||"",p.serviceName=l&&l!=""?l:s,p.serviceDomain=c&&c!=""?c:u,p.receiveParameters=d,p.tracingHeaderValue=m,p}babelHelpers.inheritsLoose(n,t),n.create=function(t){return new n(t.consumer,t.accessToken,t.sessionKey||"",t.contentKey,t.contentValue,t.serviceName,t.serviceDomain,t.receiveParameters,t.tracingHeaderValue)};var o=n.prototype;return o.resume=async function(t){try{var e=await this.sendOffsetRequest();this.emit(r("ResumableUploadServiceState.enum").START,{offset:e.offset});var n=await this.sendUploadRequest(t,e);this.emit(r("ResumableUploadServiceState.enum").SUCCESS,n.h)}catch(e){this.emit(r("ResumableUploadServiceState.enum").FAIL,e)}this.abortUpload=void 0},o.cancel=function(){this.abortUpload&&this.abortUpload(),this.emit(r("ResumableUploadServiceState.enum").CANCEL)},o.sendOffsetRequest=function(){var e=this;return new Promise(function(t,n){var o=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(e.getUploadUri()).setReadOnly(!0).setRequestHeader("Authorization","OAuth "+e.accessToken).setHandler(function(e){return t(JSON.parse(e.payload.response))}).setErrorHandler(n).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(t){e.emit(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,t)});e.abortUpload=function(){return o.abort()},o.send()})},o.sendUploadRequest=function(t,n){var e=this,o=n||{},a=o.duplicate,i=o.offset,l=a?"":t.slice(i);return new Promise(function(n,o){var a=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(e.getUploadUri()).setRawData(l).setHandler(function(e){return n(JSON.parse(e.payload.response))}).setErrorHandler(o).setRequestHeader("Authorization","OAuth "+e.accessToken).setRequestHeader("X-Entity-Name",encodeURIComponent(t.name)).setRequestHeader("X-Entity-Type",t.type).setRequestHeader("X-Entity-Length",String(t.size)).setRequestHeader("Offset",String(i)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(n){var o=new ProgressEvent("upload-service",{total:t.size,loaded:n.loaded+Number(i)});e.emit(r("ResumableUploadServiceState.enum").PROGRESS,o)}).setTransportErrorHandler(function(t){e.emit(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,t)});e.abortUpload=function(){return a.abort()};var s=e.receiveParameters;s&&(a.setRequestHeader("start_offset",String(s.start_offset)).setRequestHeader("end_offset",String(s.end_offset)).setRequestHeader("composer_session_id",String(s.composer_session_id)).setRequestHeader("id",String(s.upload_session_id)),s.fb_region&&a.setRequestHeader("X-FB-Region",String(s.fb_region))),e.tracingHeaderValue&&a.setRequestHeader("x-fb-product-log",e.tracingHeaderValue),a.send()})},o.getUploadUri=function(){var t=this.getServiceName(),n=new(e||(e=r("URI")))("https://"+t+"/"+this.consumer+"/"+this.sessionKey);return this.contentKey&&this.contentValue&&(n=n.addQueryData(this.contentKey,this.contentValue)),n},o.getServiceName=function(){return this.serviceName+"."+this.serviceDomain},n})(r("EventEmitter"));l.default=c}),98);
__d("VideoUploadConnectionMonitor",["Network","VideoUploadFeatureDetector","cr:909282","debounce","mixin","setTimeout"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(){var t;return t=e.call(this)||this,t.$VideoUploadConnectionMonitor$p_1=!1,t.$VideoUploadConnectionMonitor$p_2=[],t.$VideoUploadConnectionMonitor$p_3=!1,t.$VideoUploadConnectionMonitor$p_4=!0,t.$VideoUploadConnectionMonitor$p_5=n("debounce")(function(){t.$VideoUploadConnectionMonitor$p_6(!1)},2e3),t}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.notifyStart=function(){var e=this;this.$VideoUploadConnectionMonitor$p_3||(this.$VideoUploadConnectionMonitor$p_2.length===0&&(this.$VideoUploadConnectionMonitor$p_2.push(n("Network").addListener("online",function(){e.$VideoUploadConnectionMonitor$p_6(!0)})),this.$VideoUploadConnectionMonitor$p_2.push(n("Network").addListener("offline",function(){e.$VideoUploadConnectionMonitor$p_1?e.$VideoUploadConnectionMonitor$p_5():(e.$VideoUploadConnectionMonitor$p_5.reset(),n("setTimeout")(e.$VideoUploadConnectionMonitor$p_5,2e3))}))),this.$VideoUploadConnectionMonitor$p_3=!0)},r.notifyProgress=function(t){this.$VideoUploadConnectionMonitor$p_3&&t&&n("VideoUploadFeatureDetector").supportsFullProgress()&&(this.$VideoUploadConnectionMonitor$p_1=!0,t.total&&t.loaded===t.total?this.$VideoUploadConnectionMonitor$p_5.reset():this.$VideoUploadConnectionMonitor$p_5())},r.notifySuccess=function(){this.$VideoUploadConnectionMonitor$p_3&&(this.reset(),this.$VideoUploadConnectionMonitor$p_6(!0))},r.notifyTransportError=function(){this.$VideoUploadConnectionMonitor$p_3&&(this.$VideoUploadConnectionMonitor$p_3=!1,this.$VideoUploadConnectionMonitor$p_6(!1))},r.notifyError=function(){this.$VideoUploadConnectionMonitor$p_3&&(this.reset(),this.$VideoUploadConnectionMonitor$p_6(!0))},r.isOnline=function(){return this.$VideoUploadConnectionMonitor$p_4},r.reset=function(){for(;this.$VideoUploadConnectionMonitor$p_2.length;)this.$VideoUploadConnectionMonitor$p_2.pop().remove();this.$VideoUploadConnectionMonitor$p_5.reset(),this.$VideoUploadConnectionMonitor$p_3=!1},r.$VideoUploadConnectionMonitor$p_6=function(t){this.$VideoUploadConnectionMonitor$p_5.reset(),this.$VideoUploadConnectionMonitor$p_4!==t&&(this.$VideoUploadConnectionMonitor$p_4=t,this.$VideoUploadConnectionMonitor$p_4?this.inform("online"):this.inform("offline"))},t})(n("mixin")(n("cr:909282")));a.exports=e}),null);
__d("VideoUploadReceiveRequestManager",["fbt","ODS","ResumableUploadAsyncService","ResumableUploadService","ResumableUploadServiceState.enum","VideoUploadConnectionMonitor","VideoUploadRequest","clearTimeout","cr:909282","err","isEmpty","md5","mixin","setTimeout","uuidv4"],(function(t,n,r,o,a,i,l,s){var e,u,c=1363037,d={INITIAL:"initial",NEXT_CHUNK:"next chunk",INVALID_OFFSET_RETRY:"invalid offset retry",SERVER_FAILURE_RETRY:"server failure retry",TRANSPORT_FAILURE_RETRY:"transport failure retry",TIMEOUT_RETRY:"timeout retry",BACK_ONLINE:"back online"},m=(function(t){function n(e,n,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L){var E;return m===void 0&&(m=""),p===void 0&&(p=!1),_===void 0&&(_=!1),f===void 0&&(f=null),g===void 0&&(g=null),h===void 0&&(h=null),y===void 0&&(y=0),C===void 0&&(C=!1),b===void 0&&(b=!1),v===void 0&&(v=!1),S===void 0&&(S=!1),R===void 0&&(R=!1),L===void 0&&(L=0),E=t.call(this)||this,E.$VideoUploadReceiveRequestManager$p_1=e,E.$VideoUploadReceiveRequestManager$p_2=n,E.$VideoUploadReceiveRequestManager$p_3=o!=null?o:0,E.$VideoUploadReceiveRequestManager$p_4=a,E.$VideoUploadReceiveRequestManager$p_5=i,E.$VideoUploadReceiveRequestManager$p_6=l,E.$VideoUploadReceiveRequestManager$p_7=s,E.$VideoUploadReceiveRequestManager$p_8=u,E.$VideoUploadReceiveRequestManager$p_9=c,E.$VideoUploadReceiveRequestManager$p_10=d,E.$VideoUploadReceiveRequestManager$p_11=0,E.$VideoUploadReceiveRequestManager$p_14=0,E.$VideoUploadReceiveRequestManager$p_15=0,E.$VideoUploadReceiveRequestManager$p_16=null,E.$VideoUploadReceiveRequestManager$p_17=null,E.$VideoUploadReceiveRequestManager$p_18=0,E.$VideoUploadReceiveRequestManager$p_19="constructed",E.$VideoUploadReceiveRequestManager$p_13=null,E.$VideoUploadReceiveRequestManager$p_20=null,E.$VideoUploadReceiveRequestManager$p_21=null,E.$VideoUploadReceiveRequestManager$p_22=m,E.$VideoUploadReceiveRequestManager$p_24=_,E.$VideoUploadReceiveRequestManager$p_23=p,E.$VideoUploadReceiveRequestManager$p_25=f,E.$VideoUploadReceiveRequestManager$p_26=!1,E.$VideoUploadReceiveRequestManager$p_27=g,E.$VideoUploadReceiveRequestManager$p_30=C,E.$VideoUploadReceiveRequestManager$p_31=b,E.$VideoUploadReceiveRequestManager$p_32=v,E.$VideoUploadReceiveRequestManager$p_29=y,E.$VideoUploadReceiveRequestManager$p_33=S,E.$VideoUploadReceiveRequestManager$p_28=h,E.$VideoUploadReceiveRequestManager$p_12=r("uuidv4")(),E.$VideoUploadReceiveRequestManager$p_34=R,E.$VideoUploadReceiveRequestManager$p_35=L,E.$VideoUploadReceiveRequestManager$p_40=null,E.$VideoUploadReceiveRequestManager$p_41=null,E.$VideoUploadReceiveRequestManager$p_39=!1,E.$VideoUploadReceiveRequestManager$p_38=null,E.$VideoUploadReceiveRequestManager$p_36=new(r("VideoUploadConnectionMonitor")),E.$VideoUploadReceiveRequestManager$p_36.subscribe("online",function(){return E.$VideoUploadReceiveRequestManager$p_49()}),E.$VideoUploadReceiveRequestManager$p_36.subscribe("offline",function(){return E.$VideoUploadReceiveRequestManager$p_50()}),E}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.updateVideoID=function(t){this.$VideoUploadReceiveRequestManager$p_37.getVideoID()||(this.$VideoUploadReceiveRequestManager$p_37.setVideoID(t),this.$VideoUploadReceiveRequestManager$p_44&&this.$VideoUploadReceiveRequestManager$p_44.setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager$p_37)),this.$VideoUploadReceiveRequestManager$p_51())},a.isResumabilityEnabled=function(){return this.$VideoUploadReceiveRequestManager$p_23},a.isResumableServiceProxyReceiveEnabled=function(){return this.$VideoUploadReceiveRequestManager$p_30},a.sendRequest=function(t){if(this.$VideoUploadReceiveRequestManager$p_19="sending request",this.$VideoUploadReceiveRequestManager$p_44){this.$VideoUploadReceiveRequestManager$p_19="request already in progress";return}this.$VideoUploadReceiveRequestManager$p_18=t.getEndOffset()-t.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_37=t,this.$VideoUploadReceiveRequestManager$p_52(d.INITIAL)},a.cancelRequest=function(){this.$VideoUploadReceiveRequestManager$p_44&&(this.$VideoUploadReceiveRequestManager$p_44.abort(),this.$VideoUploadReceiveRequestManager$p_21!=null&&this.$VideoUploadReceiveRequestManager$p_21.cancel(),this.$VideoUploadReceiveRequestManager$p_53(),this.inform("request-canceled"))},a.appendStateLogData=function(t,n){t[n+"request_manager_state"]=this.$VideoUploadReceiveRequestManager$p_19,t[n+"upload_speed"]=this.$VideoUploadReceiveRequestManager$p_17,t[n+"transport_retries"]=this.$VideoUploadReceiveRequestManager$p_11,t[n+"server_retries"]=this.$VideoUploadReceiveRequestManager$p_14,t[n+"timeout_retries"]=this.$VideoUploadReceiveRequestManager$p_15,t[n+"last_timeout_value"]=this.$VideoUploadReceiveRequestManager$p_42,t[n+"last_request_start_time"]=this.$VideoUploadReceiveRequestManager$p_16,t[n+"pending_request"]=this.$VideoUploadReceiveRequestManager$p_44!=null,t[n+"pending_timer"]=this.$VideoUploadReceiveRequestManager$p_45!=null,t[n+"cached_chunk"]=this.$VideoUploadReceiveRequestManager$p_43!=null,t[n+"early_receive_start"]=this.$VideoUploadReceiveRequestManager$p_39,this.$VideoUploadReceiveRequestManager$p_37!=null&&(t[n+"start_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),t[n+"end_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),t[n+"partition_start_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getPartitionStartOffset(),t[n+"partition_end_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()),this.$VideoUploadReceiveRequestManager$p_36!=null&&(t[n+"connection_monitor_online"]=this.$VideoUploadReceiveRequestManager$p_36.isOnline())},a.getHostName=function(t){try{return new URL(t).hostname}catch(e){return null}},a.$VideoUploadReceiveRequestManager$p_53=function(){this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_43=null,this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_14=0,this.$VideoUploadReceiveRequestManager$p_12=r("uuidv4")(),this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_16=null,this.$VideoUploadReceiveRequestManager$p_17=null,this.$VideoUploadReceiveRequestManager$p_18=0,this.$VideoUploadReceiveRequestManager$p_40=null,this.$VideoUploadReceiveRequestManager$p_41=null,this.$VideoUploadReceiveRequestManager$p_39=!1,this.$VideoUploadReceiveRequestManager$p_26=!1,this.$VideoUploadReceiveRequestManager$p_38=null,this.$VideoUploadReceiveRequestManager$p_37.reset(),this.$VideoUploadReceiveRequestManager$p_36.reset(),r("clearTimeout")(this.$VideoUploadReceiveRequestManager$p_45),this.$VideoUploadReceiveRequestManager$p_45=null},a.$VideoUploadReceiveRequestManager$p_52=function(t,n){var e=this;if(r("clearTimeout")(this.$VideoUploadReceiveRequestManager$p_45),this.$VideoUploadReceiveRequestManager$p_45=null,this.$VideoUploadReceiveRequestManager$p_20=t,this.$VideoUploadReceiveRequestManager$p_13=r("uuidv4")(),this.$VideoUploadReceiveRequestManager$p_37.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager$p_37.getStartOffset()>=this.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()){n?this.$VideoUploadReceiveRequestManager$p_19="request finished - not notified":(this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{request_reason:this.$VideoUploadReceiveRequestManager$p_20,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}}),this.$VideoUploadReceiveRequestManager$p_19="request finished - notified");return}this.$VideoUploadReceiveRequestManager$p_44=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager$p_1).setAllowCrossOrigin(!0).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager$p_37)).setWaterfallID(this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID()).setSuccessHandler(function(t){return e.__handleSuccessResponse(t)}).setErrorHandler(function(t){return e.__handleServerFailureResponse(t)}).setTransportErrorHandler(function(t){return e.$VideoUploadReceiveRequestManager$p_54(t)}),this.$VideoUploadReceiveRequestManager$p_23||this.$VideoUploadReceiveRequestManager$p_44.setUploadProgressHandler(function(t){return e.$VideoUploadReceiveRequestManager$p_55(t)}),this.$VideoUploadReceiveRequestManager$p_16=Date.now(),this.$VideoUploadReceiveRequestManager$p_38=this.getHostName(this.$VideoUploadReceiveRequestManager$p_1);var o=!1;if(this.$VideoUploadReceiveRequestManager$p_37.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager$p_5){var a=this.$VideoUploadReceiveRequestManager$p_56(this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_17);this.$VideoUploadReceiveRequestManager$p_44.setTimeoutHandler(a,function(t){return e.__handleResponseTimeout(t)}),this.$VideoUploadReceiveRequestManager$p_19="sending chunk with timeout = "+a,this.$VideoUploadReceiveRequestManager$p_42=a}else this.$VideoUploadReceiveRequestManager$p_19="sending chunk without timeout";var i=this.$VideoUploadReceiveRequestManager$p_57();if(i==null){var l="Provided chunk is null.",s=r("err")(l);s.is_js_error=!0,this.$VideoUploadReceiveRequestManager$p_58({error_description:l,error_is_transient:!1,error:s});return}else this.$VideoUploadReceiveRequestManager$p_23&&this.$VideoUploadReceiveRequestManager$p_29<this.$VideoUploadReceiveRequestManager$p_37.getFile().getSize()?(o=!0,this.$VideoUploadReceiveRequestManager$p_59(i)):this.$VideoUploadReceiveRequestManager$p_44.sendChunk(i)}else this.$VideoUploadReceiveRequestManager$p_19="sending file",this.$VideoUploadReceiveRequestManager$p_44.sendFile(this.$VideoUploadReceiveRequestManager$p_37.getFile().getFileInput());this.$VideoUploadReceiveRequestManager$p_60(o),this.$VideoUploadReceiveRequestManager$p_36.notifyStart(),this.inform("request-started",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{request_reason:this.$VideoUploadReceiveRequestManager$p_20,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}})},a.$VideoUploadReceiveRequestManager$p_60=function(t){(this.$VideoUploadReceiveRequestManager$p_37.getSource()==="create_flow"||this.$VideoUploadReceiveRequestManager$p_37.getSource()==="ads_interfaces")&&(u||(u=o("ODS"))).bumpEntityKey(2966,"video_ads_upload",t?"upload_service":"graph_api")},a.$VideoUploadReceiveRequestManager$p_61=function(t,n,r){this.$VideoUploadReceiveRequestManager$p_37.getVideoID()?t(n,r):(this.$VideoUploadReceiveRequestManager$p_40=t,this.$VideoUploadReceiveRequestManager$p_41=n)},a.$VideoUploadReceiveRequestManager$p_51=function(){this.$VideoUploadReceiveRequestManager$p_40&&(this.$VideoUploadReceiveRequestManager$p_40(this.$VideoUploadReceiveRequestManager$p_41),this.$VideoUploadReceiveRequestManager$p_40=null,this.$VideoUploadReceiveRequestManager$p_41=null)},a.$VideoUploadReceiveRequestManager$p_59=function(t){var e,n=this.$VideoUploadReceiveRequestManager$p_37.getFile(),o=n.getFile().lastModified+n.getFile().name+n.getFile().type+this.$VideoUploadReceiveRequestManager$p_62(),a=String(r("md5")(o))+"-"+this.$VideoUploadReceiveRequestManager$p_37.getStartOffset()+"-"+this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),i=((e=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:e.getRetryState())==null?this.$VideoUploadReceiveRequestManager$p_14+this.$VideoUploadReceiveRequestManager$p_11+this.$VideoUploadReceiveRequestManager$p_15:this.$VideoUploadReceiveRequestManager$p_37.getRetryState().getTotalRetryCount(),l=this.$VideoUploadReceiveRequestManager$p_34&&this.$VideoUploadReceiveRequestManager$p_35<n.getSize()?["video_upload_www",[this.$VideoUploadReceiveRequestManager$p_12,String(i)].join("_"),[String(this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID()),String(this.$VideoUploadReceiveRequestManager$p_37.getVideoID())].join("_")].join(":"):null;this.isResumabilityEnabled()&&this.$VideoUploadReceiveRequestManager$p_25!=null&&this.$VideoUploadReceiveRequestManager$p_25!==""&&this.$VideoUploadReceiveRequestManager$p_11>this.$VideoUploadReceiveRequestManager$p_2/3&&(this.$VideoUploadReceiveRequestManager$p_26=!0);var s="fb_video";this.$VideoUploadReceiveRequestManager$p_30&&(s="fb_video2");var u=null;if(this.$VideoUploadReceiveRequestManager$p_30||this.$VideoUploadReceiveRequestManager$p_31){var c={};c.start_offset=this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),c.end_offset=this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),c.composer_session_id=this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID(),c.upload_session_id=this.$VideoUploadReceiveRequestManager$p_37.getUploadSessionID(),c.product_media_id=this.$VideoUploadReceiveRequestManager$p_37.getVideoID(),c.xpv_asset_id=this.$VideoUploadReceiveRequestManager$p_37.getXPVAssetID(),c.is_xpv_single_prod=this.$VideoUploadReceiveRequestManager$p_37.getIsXPVSingleProd(),c.fb_region=this.$VideoUploadReceiveRequestManager$p_37.getFbRegion(),this.$VideoUploadReceiveRequestManager$p_32&&(c.total_file_size=this.$VideoUploadReceiveRequestManager$p_37.getFile().getSize()),u=c}var d={};d.consumer=s,d.sessionKey=a,d.serviceName=this.$VideoUploadReceiveRequestManager$p_26?null:this.$VideoUploadReceiveRequestManager$p_25,d.serviceDomain=this.$VideoUploadReceiveRequestManager$p_27,d.receiveParameters=u,d.tracingHeaderValue=l;var m;this.$VideoUploadReceiveRequestManager$p_24?m=r("ResumableUploadAsyncService").create(d):m=r("ResumableUploadService").create(d),this.$VideoUploadReceiveRequestManager$p_21=m,this.$VideoUploadReceiveRequestManager$p_38=m.getServiceName(),this.$VideoUploadReceiveRequestManager$p_63(),m.resume(t),this.inform("resumable-called",{debug:{single_request_id:this.$VideoUploadReceiveRequestManager$p_13,authority:this.$VideoUploadReceiveRequestManager$p_38}})},a.$VideoUploadReceiveRequestManager$p_63=function(){var e=this;this.$VideoUploadReceiveRequestManager$p_37.getVideoID()||(this.$VideoUploadReceiveRequestManager$p_39=!0);var t=this.$VideoUploadReceiveRequestManager$p_21;t!=null&&(t.addListener(r("ResumableUploadServiceState.enum").START,function(t){e.inform("resumable-started",{resume_from_offset:t.offset,debug:{single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),authority:e.$VideoUploadReceiveRequestManager$p_38}})}),this.$VideoUploadReceiveRequestManager$p_46=function(t){e.inform("resumable-failed",{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient(),debug:{error_source:"service",single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),authority:e.$VideoUploadReceiveRequestManager$p_38}}),e.__handleServerFailureResponse(t)},t.addListener(r("ResumableUploadServiceState.enum").FAIL,function(t){e.$VideoUploadReceiveRequestManager$p_61(e.$VideoUploadReceiveRequestManager$p_46,t)}),this.$VideoUploadReceiveRequestManager$p_47=function(t){e.$VideoUploadReceiveRequestManager$p_30?e.__handleSuccessResponsePayload({start_offset:e.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),end_offset:e.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()}):(e.$VideoUploadReceiveRequestManager$p_44.setHandle(t),e.$VideoUploadReceiveRequestManager$p_44.sendChunk(null)),e.inform("resumable-success",{everstore_handle:t,debug:{single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),authority:e.$VideoUploadReceiveRequestManager$p_38}})},t.addListener(r("ResumableUploadServiceState.enum").SUCCESS,function(t){e.$VideoUploadReceiveRequestManager$p_61(e.$VideoUploadReceiveRequestManager$p_47,t)}),this.$VideoUploadReceiveRequestManager$p_48=function(t,n){e.inform("resumable-failed",{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient(),resume_from_offset:n.offset,debug:{error_source:"transport",single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),method:n.method,authority:e.$VideoUploadReceiveRequestManager$p_38}}),e.$VideoUploadReceiveRequestManager$p_54(t)},t.addListener(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,function(t,n){e.$VideoUploadReceiveRequestManager$p_61(e.$VideoUploadReceiveRequestManager$p_48,t,n)}),t.addListener(r("ResumableUploadServiceState.enum").PROGRESS,function(t){e.$VideoUploadReceiveRequestManager$p_33&&(e.$VideoUploadReceiveRequestManager$p_11=0),e.$VideoUploadReceiveRequestManager$p_55(t)}))},a.__getVideoUploadRequest=function(t){return new(r("VideoUploadRequest"))(t)},a.$VideoUploadReceiveRequestManager$p_64=function(t,n){var e=this;this.$VideoUploadReceiveRequestManager$p_19="setting request to send after"+n,r("clearTimeout")(this.$VideoUploadReceiveRequestManager$p_45),this.$VideoUploadReceiveRequestManager$p_45=r("setTimeout")(function(){return e.$VideoUploadReceiveRequestManager$p_52(t)},n)},a.$VideoUploadReceiveRequestManager$p_57=function(){if(this.$VideoUploadReceiveRequestManager$p_43)return this.$VideoUploadReceiveRequestManager$p_43;var e=this.$VideoUploadReceiveRequestManager$p_37.getFile();if(this.$VideoUploadReceiveRequestManager$p_23){var t=e.getFile();this.$VideoUploadReceiveRequestManager$p_43=t?t.slice(this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),"application/octet-stream"):null}else this.$VideoUploadReceiveRequestManager$p_43=e.getChunk(this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_37.getEndOffset());return this.$VideoUploadReceiveRequestManager$p_43},a.__createRequestData=function(t){return{composer_session_id:t.getComposerSessionID(),video_id:t.getVideoID(),start_offset:t.getStartOffset(),end_offset:t.getEndOffset(),source:t.getSource(),target_id:t.getTargetID(),waterfall_id:t.getWaterfallID(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_work_shared_draft_mode:t.getComposerWorkSharedDraftMode(),composer_dialog_version:t.getComposerDialogVersion(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager$p_17,partition_start_offset:t.getPartitionStartOffset(),partition_end_offset:t.getPartitionEndOffset()}},a.__handleSuccessResponse=function(t){var e=t.getPayload();this.__handleSuccessResponsePayload(e)},a.__handleSuccessResponsePayload=function(t){this.$VideoUploadReceiveRequestManager$p_19="success response received";var e=Date.now()-(this.$VideoUploadReceiveRequestManager$p_16||0);if(e=e===0?1:e,t.start_offset===this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()){var n=this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-this.$VideoUploadReceiveRequestManager$p_37.getStartOffset();this.$VideoUploadReceiveRequestManager$p_17=Math.floor(n/e)}else this.$VideoUploadReceiveRequestManager$p_17=null;this.$VideoUploadReceiveRequestManager$p_36.notifySuccess(),this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{request_reason:this.$VideoUploadReceiveRequestManager$p_20,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}}),this.$VideoUploadReceiveRequestManager$p_37.setStartOffset(t.start_offset);var o=t.end_offset;this.$VideoUploadReceiveRequestManager$p_37.getClientChunkSize()&&(o=t.start_offset+Math.min(this.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()-t.start_offset,this.$VideoUploadReceiveRequestManager$p_37.getClientChunkSize())),this.$VideoUploadReceiveRequestManager$p_37.setEndOffset(o),this.$VideoUploadReceiveRequestManager$p_37.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager$p_17),this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_43=null,this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_14=0,this.$VideoUploadReceiveRequestManager$p_12=r("uuidv4")(),this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_37.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager$p_52(d.NEXT_CHUNK,!0)},a.$VideoUploadReceiveRequestManager$p_65=function(t){var e,n=this,r=t.getPayload();this.$VideoUploadReceiveRequestManager$p_19="invalid offset response received start="+r.start_offset+" end="+r.end_offset,(this.$VideoUploadReceiveRequestManager$p_37.getStartOffset()!=r.start_offset||this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()!=r.end_offset)&&(this.$VideoUploadReceiveRequestManager$p_37.setStartOffset(r.start_offset),this.$VideoUploadReceiveRequestManager$p_37.setEndOffset(r.end_offset),this.$VideoUploadReceiveRequestManager$p_43=null),((e=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:e.getRetryState())==null?(this.$VideoUploadReceiveRequestManager$p_14++,this.$VideoUploadReceiveRequestManager$p_52(d.INVALID_OFFSET_RETRY)):this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-invalid_offset"},retryHandler:function(t){return n.$VideoUploadReceiveRequestManager$p_64(d.INVALID_OFFSET_RETRY,t)},failureHandler:function(){return n.$VideoUploadReceiveRequestManager$p_66(t)}})},a.__handleServerFailureResponse=function(t){var e=this;if(this.$VideoUploadReceiveRequestManager$p_19="failure response received",this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_17=null,this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_36.notifyError(),this.__hasInvalidStartOffsetAndHasRetries(t.getError()))this.$VideoUploadReceiveRequestManager$p_65(t);else{var n;((n=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:n.getRetryState())==null?(t.isTransient()||this.$VideoUploadReceiveRequestManager$p_10)&&this.$VideoUploadReceiveRequestManager$p_14<this.$VideoUploadReceiveRequestManager$p_4?(this.$VideoUploadReceiveRequestManager$p_19="transient server error",this.$VideoUploadReceiveRequestManager$p_14++,this.$VideoUploadReceiveRequestManager$p_64(d.SERVER_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager$p_67(this.$VideoUploadReceiveRequestManager$p_9,this.$VideoUploadReceiveRequestManager$p_14,0))):this.$VideoUploadReceiveRequestManager$p_66(t):this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-server_issue",error_code:t.getError()},predicate:function(){return t.isTransient()},retryHandler:function(n){e.$VideoUploadReceiveRequestManager$p_19="transient server error",e.$VideoUploadReceiveRequestManager$p_64(d.SERVER_FAILURE_RETRY,n)},failureHandler:function(){return e.$VideoUploadReceiveRequestManager$p_66(t)}})}},a.__handleResponseTimeout=function(t){var e=this,n;this.inform("request-timeout",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,timeout_retries:this.$VideoUploadReceiveRequestManager$p_15,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,debug:{upload_domain:this.$VideoUploadReceiveRequestManager$p_38,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}}),this.$VideoUploadReceiveRequestManager$p_44.abort(),this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_17=null,this.$VideoUploadReceiveRequestManager$p_36.notifyTransportError();var r=function(){var t=e.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-e.$VideoUploadReceiveRequestManager$p_37.getStartOffset();t=Math.floor(t/2),t=Math.max(t,e.$VideoUploadReceiveRequestManager$p_18);var n=e.$VideoUploadReceiveRequestManager$p_37.getEndOffset();n=Math.min(n,e.$VideoUploadReceiveRequestManager$p_37.getStartOffset()+t),e.$VideoUploadReceiveRequestManager$p_37.setEndOffset(n),e.$VideoUploadReceiveRequestManager$p_43=null,e.$VideoUploadReceiveRequestManager$p_19="resending after timeout with chunksize="+t,e.$VideoUploadReceiveRequestManager$p_52(d.TIMEOUT_RETRY)},o=function(){e.$VideoUploadReceiveRequestManager$p_58({error_code:1006,error_description:s._(/*BTDS*/"Your browser appears to be offline. Please check your internet connection and try again."),error_summary:s._(/*BTDS*/"No Network Connection"),error_is_transient:!0,opes_mids:["fake_mid_network_connection"]})};((n=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:n.getRetryState())==null?++this.$VideoUploadReceiveRequestManager$p_15<=this.$VideoUploadReceiveRequestManager$p_6?r():o():this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-timeout",error_code:1006},retryHandler:function(t){return r()},failureHandler:function(){return o()}})},a.__hasInvalidStartOffsetAndHasRetries=function(t){return t===c&&this.$VideoUploadReceiveRequestManager$p_14<this.$VideoUploadReceiveRequestManager$p_4},a.$VideoUploadReceiveRequestManager$p_54=function(t){var e,n=this;this.$VideoUploadReceiveRequestManager$p_36.notifyTransportError(),this.$VideoUploadReceiveRequestManager$p_17=null,((e=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:e.getRetryState())==null?(this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_11<this.$VideoUploadReceiveRequestManager$p_2?(this.$VideoUploadReceiveRequestManager$p_19="resending after transport failure",this.$VideoUploadReceiveRequestManager$p_11++,this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_64(d.TRANSPORT_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager$p_67(this.$VideoUploadReceiveRequestManager$p_8,this.$VideoUploadReceiveRequestManager$p_11,this.$VideoUploadReceiveRequestManager$p_3))):this.$VideoUploadReceiveRequestManager$p_66(t)):this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-transport_issue",error_code:t.getError()},retryHandler:function(t){n.$VideoUploadReceiveRequestManager$p_44=null,n.$VideoUploadReceiveRequestManager$p_19="resending after transport failure",n.$VideoUploadReceiveRequestManager$p_64(d.TRANSPORT_FAILURE_RETRY,t)},failureHandler:function(){return n.$VideoUploadReceiveRequestManager$p_66(t)}})},a.$VideoUploadReceiveRequestManager$p_66=function(n){var t,o,a=[].concat(n==null||(t=n.getPayload())==null||(t=t.error)==null?void 0:t.opes_mids,[n==null?void 0:n.errorMid]).filter(Boolean);this.$VideoUploadReceiveRequestManager$p_58({error_code:n.getError(),error_description:n.getErrorDescription(),error_summary:n.getErrorSummary(),error_is_transient:n.isTransient(),upload_domain:this.uploadDomain,www_request_id:(o=n.getPayload())==null?void 0:o.__www_request_id__,opes_mids:(e||(e=r("isEmpty")))(a)?null:a})},a.$VideoUploadReceiveRequestManager$p_58=function(t){this.$VideoUploadReceiveRequestManager$p_19="handling failure error",t.debug=babelHelpers.extends({},t.debug,{single_request_id:this.$VideoUploadReceiveRequestManager$p_13}),this.inform("request-failed",t),this.$VideoUploadReceiveRequestManager$p_53()},a.$VideoUploadReceiveRequestManager$p_55=function(t){this.$VideoUploadReceiveRequestManager$p_36.notifyProgress(t),this.$VideoUploadReceiveRequestManager$p_37&&this.$VideoUploadReceiveRequestManager$p_37.getFile()&&this.inform("request-progressed",{file_size:this.$VideoUploadReceiveRequestManager$p_37.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),sent_bytes:t.loaded,transport_retries:this.$VideoUploadReceiveRequestManager$p_11,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{single_request_id:this.$VideoUploadReceiveRequestManager$p_13}})},a.$VideoUploadReceiveRequestManager$p_49=function(){var e;this.inform("online"),this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_15=0,(e=this.$VideoUploadReceiveRequestManager$p_37)==null||(e=e.getRetryState())==null||e.resetDelay(),this.$VideoUploadReceiveRequestManager$p_45&&this.$VideoUploadReceiveRequestManager$p_52(d.BACK_ONLINE)},a.$VideoUploadReceiveRequestManager$p_50=function(){this.inform("offline")},a.$VideoUploadReceiveRequestManager$p_67=function(t,n,r){var e=0;return this.$VideoUploadReceiveRequestManager$p_23?e=Math.min(Math.pow(t,n),8)*1e3:e=Math.pow(t,n)*1e3,r>0&&(e=Math.min(e,r)),e},a.$VideoUploadReceiveRequestManager$p_56=function(t,n){var e;n!=null&&n>0?e=n:e=10;var r=Math.floor(t/e*this.$VideoUploadReceiveRequestManager$p_7/100);return Math.max(r,3e4)},a.$VideoUploadReceiveRequestManager$p_62=function(){return this.$VideoUploadReceiveRequestManager$p_28!=null&&this.$VideoUploadReceiveRequestManager$p_28!==""?this.$VideoUploadReceiveRequestManager$p_28:this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID()},n})(r("mixin")(n("cr:909282")));l.default=m}),226);
__d("FileHasher",["FileHashWorkerResource","WebWorker","emptyFunction","fileSliceName"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(){var e=this,t=n("FileHashWorkerResource");n("WebWorker").prepareResource(t),this.$1=new(n("WebWorker"))(t).setMessageHandler(function(t){e.$2(t)}).execute()}e.isSupported=function(){return n("WebWorker").isSupported()};var t=e.prototype;return t.hash=function(t,r){return this.$2=r,this.$1.postMessage({file:t,fileSliceName:n("fileSliceName")}),this},t.destroy=function(){this.$2=n("emptyFunction"),this.$1.terminate()},e})();a.exports=e}),null);
__d("VideoUploadStartRequestManager",["Assert","FileHasher","VideoUploadRequest","clearTimeout","cr:909282","isEmpty","mixin","performanceNow","setTimeout"],(function(t,n,r,o,a,i,l){var e,s,u=(function(t){function n(e,n,r,o,a,i,l,s){var u;return u=t.call(this)||this,u.$VideoUploadStartRequestManager1=e,u.$VideoUploadStartRequestManager2=n,u.$VideoUploadStartRequestManager3=r,u.$VideoUploadStartRequestManager4=o,u.$VideoUploadStartRequestManager5=0,u.$VideoUploadStartRequestManager6=a,u.$VideoUploadStartRequestManager7=i,u.$VideoUploadStartRequestManager8=l,u.$VideoUploadStartRequestManager9=s,u.$VideoUploadStartRequestManager10=0,u}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getRequest=function(){return this.$VideoUploadStartRequestManager11},o.sendRequest=function(n){var t=this;this.$VideoUploadStartRequestManager12||this.$VideoUploadStartRequestManager11||(this.$VideoUploadStartRequestManager13=n,this.$VideoUploadStartRequestManager6&&this.$VideoUploadStartRequestManager13.getFile().getFile()&&this.$VideoUploadStartRequestManager13.getFile().getFile().size<this.$VideoUploadStartRequestManager7&&r("FileHasher").isSupported()?(this.$VideoUploadStartRequestManager14=(e||(e=r("performanceNow")))(),this.$VideoUploadStartRequestManager12=new(r("FileHasher")),this.$VideoUploadStartRequestManager12.hash(this.$VideoUploadStartRequestManager13.getFile().getFile(),function(n){t.$VideoUploadStartRequestManager14=(e||(e=r("performanceNow")))()-t.$VideoUploadStartRequestManager14,t.$VideoUploadStartRequestManager15=n.hash,t.$VideoUploadStartRequestManager12.destroy(),t.$VideoUploadStartRequestManager12=null,n.hash||(t.$VideoUploadStartRequestManager16=n.exception),t.$VideoUploadStartRequestManager17()})):this.$VideoUploadStartRequestManager17())},o.$VideoUploadStartRequestManager17=function(){this.$VideoUploadStartRequestManager18(),this.inform("request-started",{hash_time:this.$VideoUploadStartRequestManager14,hash_exception:this.$VideoUploadStartRequestManager16})},o.$VideoUploadStartRequestManager18=function(){r("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null,this.$VideoUploadStartRequestManager11=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(!0).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager13,this.$VideoUploadStartRequestManager15)).setWaterfallID(this.$VideoUploadStartRequestManager13.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager20.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager21.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager22.bind(this)),this.$VideoUploadStartRequestManager11.send()},o.__getVideoUploadRequest=function(t){return new(r("VideoUploadRequest"))(t)},o.__getDataToSend=function(t,n){var e={file_size:t.getFile().getSize(),file_extension:t.getFile().getExtension(),target_id:t.getTargetID(),source:t.getSource(),composer_dialog_version:t.getComposerDialogVersion(),waterfall_id:t.getWaterfallID(),composer_session_id:t.getComposerSessionID(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_work_shared_draft_mode:t.getComposerWorkSharedDraftMode(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking(),supports_file_api:t.getSupportsFileAPI(),partition_start_offset:t.getPartitionStartOffset(),partition_end_offset:t.getPartitionEndOffset(),creator_product:t.getCreatorProduct(),original_file_hash:n,spherical:t.getIsSphericalVideo(),spherical_metadata:t.getSphericalMetadata(),video_publisher_action_source:t.getVideoPublisherActionSource()};return t.getCreativeTools()!=null&&(e.creative_tools=t.getCreativeTools()),e},o.cancelRequest=function(){this.$VideoUploadStartRequestManager23(),this.inform("request-canceled")},o.$VideoUploadStartRequestManager24=function(t){r("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=r("setTimeout")(this.$VideoUploadStartRequestManager18.bind(this),t)},o.$VideoUploadStartRequestManager23=function(){this.$VideoUploadStartRequestManager12&&(this.$VideoUploadStartRequestManager12.destroy(),this.$VideoUploadStartRequestManager12=null),this.$VideoUploadStartRequestManager11&&(this.$VideoUploadStartRequestManager11.abort(),this.$VideoUploadStartRequestManager11=null),this.$VideoUploadStartRequestManager10=0,this.$VideoUploadStartRequestManager5=0,this.$VideoUploadStartRequestManager13=null,r("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null},o.$VideoUploadStartRequestManager25=function(t,n,r){var e=Math.pow(t,n)*1e3;return r>0&&(e=Math.min(e,r)),e},o.$VideoUploadStartRequestManager20=function(t){var e;(e=this.$VideoUploadStartRequestManager13)==null||(e=e.getRetryState())==null||e.resetDelay();var n=t.getPayload();this.inform("request-finished",this.__getSuccessInformData(n)),this.$VideoUploadStartRequestManager11=null,r("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")},o.__getSuccessInformData=function(t){return{video_id:t.video_id,xpv_asset_id:t.xpv_asset_id,is_xpv_single_prod:t.is_xpv_single_prod,upload_session_id:t.upload_session_id,fb_region:t.region_hint,start_offset:t.start_offset,end_offset:t.end_offset,transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,skip_upload:t.skip_upload,hash_time:this.$VideoUploadStartRequestManager14}},o.$VideoUploadStartRequestManager26=function(t){this.inform("request-failed",this.$VideoUploadStartRequestManager27(t)),this.$VideoUploadStartRequestManager11=null,r("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")},o.$VideoUploadStartRequestManager21=function(t){var e,n=this;this.$VideoUploadStartRequestManager11=null;var r=(e=this.$VideoUploadStartRequestManager13)==null?void 0:e.getRetryState();r==null?(this.$VideoUploadStartRequestManager5=0,t.isTransient()&&this.$VideoUploadStartRequestManager10<this.$VideoUploadStartRequestManager8?(this.$VideoUploadStartRequestManager10++,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager9,this.$VideoUploadStartRequestManager10))):this.$VideoUploadStartRequestManager26(t)):r.handleRetry({context:{location:"start-server_issue",error_code:t.getError()},predicate:function(){return t.isTransient()},retryHandler:function(t){n.$VideoUploadStartRequestManager10=r.getTotalRetryCount(),n.$VideoUploadStartRequestManager24(t)},failureHandler:function(){return n.$VideoUploadStartRequestManager26(t)}})},o.$VideoUploadStartRequestManager22=function(t){var e,n=this;((e=this.$VideoUploadStartRequestManager13)==null?void 0:e.getRetryState())==null?this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager5>=this.$VideoUploadStartRequestManager2?this.$VideoUploadStartRequestManager26(t):(this.$VideoUploadStartRequestManager5++,this.$VideoUploadStartRequestManager11=null,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager5,this.$VideoUploadStartRequestManager4))):this.$VideoUploadStartRequestManager13.getRetryState().handleRetry({context:{location:"start-transport_issue",error_code:t.getError()},retryHandler:function(t){n.$VideoUploadStartRequestManager11=null,n.$VideoUploadStartRequestManager24(t)},failureHandler:function(){return n.$VideoUploadStartRequestManager26(t)}})},o.$VideoUploadStartRequestManager27=function(t){var e,n,o=[].concat(t==null||(e=t.getPayload())==null||(e=e.error)==null?void 0:e.opes_mids,[t==null?void 0:t.errorMid]).filter(Boolean);return{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,error_is_transient:t.isTransient(),www_request_id:(n=t.getPayload())==null?void 0:n.__www_request_id__,opes_mids:(s||(s=r("isEmpty")))(o)?null:o}},n})(r("mixin")(n("cr:909282"))),c=u;l.default=c}),98);
__d("VideoUploadSession",["AsyncRequest","GraphQLVideoPublishUtils","SubscriptionsHandler","VideoUploadCrashMonitor","VideoUploadFeatureDetector","VideoUploadFileValidator","VideoUploadGraphQLPostRequestManager","VideoUploadLogger","VideoUploadMetadataParser","VideoUploadPostRequestManager","VideoUploadReceiveRequestManager","VideoUploadRequestContext","VideoUploadStartRequestManager","WaterfallIDGenerator","cr:909282","err","getByPath","mixin"],(function(t,n,r,o,a,i){var e={CANCELED:"canceled",ABANDONED:"abandoned",SHUTDOWN:"shutdown"},l=(function(t){"use strict";function r(e){var r;if(r=t.call(this)||this,r.$VideoUploadSession2=e.source,r.$VideoUploadSession3=e.composer_dialog_version,r.$VideoUploadSession4=e.target_id,r.$VideoUploadSession5=e.logging_delay,r.$VideoUploadSession6=e.silent_file_validation,r.$VideoUploadSession7=e.background_upload,r.$VideoUploadSession8=e.actor_id,r.$VideoUploadSession9=e.composer_entry_point_ref,r.$VideoUploadSession10=e.composer_work_shared_draft_mode,r.$VideoUploadSession11=e.video_publisher_action_source,r.$VideoUploadSession12=e.monitor_crashes,r.$VideoUploadSession13=e.isMultiMediaPost,r.$VideoUploadSession14=e.container_type,r.$VideoUploadSession15=e.number_of_partitions,r.$VideoUploadSession16=e.multi_partitioning_enabled,r.$VideoUploadSession17=e.change_default_chunk_size,r.$VideoUploadSession18=e.has_file_been_replaced?e.has_file_been_replaced:!1,r.$VideoUploadSession17&&(r.$VideoUploadSession19=e.client_chunk_size),r.$VideoUploadSession20=e.early_receive,r.$VideoUploadSession21=!1,r.$VideoUploadSession22=e.accept_dimensions_from_player,r.$VideoUploadSession23=e.ad_account_id,r.$VideoUploadSession24=e.waterfall_id,r.$VideoUploadSession25=null,r.$VideoUploadSession26=new(n("VideoUploadFileValidator"))({minSize:e.min_size,maxSize:e.max_size,minLength:e.min_length,maxLength:e.max_length,minWidth:e.min_width,minHeight:e.min_height,extensions:e.extensions,source:e.source,require16to9AspectRatio:e.require_16to9_aspect_ratio,minAspectRatio:e.min_aspect_ratio,maxAspectRatio:e.max_aspect_ratio,acceptDimensionsFromPlayer:e.accept_dimensions_from_player}),r.$VideoUploadSession27=n("VideoUploadFeatureDetector").supportsChunking(),r.$VideoUploadSession28=n("VideoUploadFeatureDetector").supportsFileAPI(),r.$VideoUploadSession27?(r.$VideoUploadSession29=e.parallel_chunk_uploads,r.$VideoUploadSession29&&(r.$VideoUploadSession30=e.parallel_chunk_upload_filesize,r.$VideoUploadSession31=e.default_chunk_size)):r.$VideoUploadSession29=!1,r.$VideoUploadSession32=e.shutdown_logging_enabled,r.$VideoUploadSession33=r.$VideoUploadSession$p_34(e),r.$VideoUploadSession35=r.$VideoUploadSession$p_36(e),r.$VideoUploadSession29)if(r.$VideoUploadSession16){var o=0;for(r.$VideoUploadSession37=[],o=0;o<r.$VideoUploadSession15-1;o++)r.$VideoUploadSession37[o]=r.$VideoUploadSession$p_36(e)}else r.$VideoUploadSession37=r.$VideoUploadSession$p_36(e);return r.$VideoUploadSession38=r.$VideoUploadSession$p_39(e),r.$VideoUploadSession40=r.$VideoUploadSession$p_41(e),r.$VideoUploadSession42=e.log_free_local_storage,r.$VideoUploadSession43=null,r}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o.$VideoUploadSession$p_44=function(){this.$VideoUploadSession45=[],this.$VideoUploadSession46=[],this.$VideoUploadSession47=[],this.$VideoUploadSession48=[],this.$VideoUploadSession49=[];var e=0;for(e=0;e<this.$VideoUploadSession1-1;e++)this.$VideoUploadSession45.push(!1)},o.$VideoUploadSession$p_50=function(){var e;this.$VideoUploadSession24==null&&(this.$VideoUploadSession24=n("WaterfallIDGenerator").generate()),this.$VideoUploadSession51=new(n("VideoUploadLogger"))({actor_id:this.$VideoUploadSession8,ad_account_id:this.$VideoUploadSession23,source:this.$VideoUploadSession2,composer_dialog_version:this.$VideoUploadSession3,waterfall_id:this.$VideoUploadSession24,target_id:this.$VideoUploadSession4,delay:this.$VideoUploadSession5,is_chunked_upload:this.$VideoUploadSession27,composer_entry_point_ref:this.$VideoUploadSession9,composer_work_shared_draft_mode:this.$VideoUploadSession10,container_type:this.$VideoUploadSession14,has_file_been_replaced:this.$VideoUploadSession18,composer_session_id:this.$VideoUploadSession52,asset_id:(e=this.$VideoUploadSession53)==null?void 0:e.getStableAssetID(),creative_tools:this.$VideoUploadSession54}),this.inform("set-waterfall-id",{waterfallID:this.$VideoUploadSession24})},o.createTestLogger=function(){this.$VideoUploadSession$p_50()},o.$VideoUploadSession$p_55=function(){return this.$VideoUploadSession51||this.$VideoUploadSession$p_50(),this.$VideoUploadSession51},o.getLogger=function(){return this.$VideoUploadSession51?this.$VideoUploadSession51:null},o.$VideoUploadSession$p_56=function(){return null},o.start=function(t){var e=this;this.$VideoUploadSession57=null,this.$VideoUploadSession58=null,this.$VideoUploadSession59=null,this.$VideoUploadSession60=!1,this.$VideoUploadSession61=!1,this.$VideoUploadSession62=null,this.$VideoUploadSession53=t,this.$VideoUploadSession63=0,this.$VideoUploadSession64=!1,this.$VideoUploadSession65={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},this.$VideoUploadSession66=!1,this.$VideoUploadSession43=this.$VideoUploadSession$p_56(),this.$VideoUploadSession$p_50(),this.$VideoUploadSession16&&(this.$VideoUploadSession1=Math.min(this.$VideoUploadSession15,Math.ceil(this.$VideoUploadSession53.getSize()/this.$VideoUploadSession30))),this.__logEvent(n("VideoUploadLogger").EVENT_REQUESTED_UPLOADING),this.inform("upload-requested");var r=new(n("VideoUploadMetadataParser"))(this.$VideoUploadSession53,function(t){return e.$VideoUploadSession$p_67(t)},this.$VideoUploadSession22);r.parse(),this.$VideoUploadSession42&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota(function(t,r){e.__logEvent(n("VideoUploadLogger").EVENT_MEASURE_FREE_LOCAL_STORAGE,{free_space_in_device:r})})},o.setTargetID=function(t){this.$VideoUploadSession4=t},o.setComposerSessionID=function(t){this.$VideoUploadSession52=t},o.setCreativeTools=function(t){this.$VideoUploadSession54=t},o.post=function(t){this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_POST_REQUEST,this.$VideoUploadSession25),this.inform("post-started",t);var e=this.__createPostRequestContext(t);if(n("GraphQLVideoPublishUtils").isGraphQLPublish(this.$VideoUploadSession2,this.$VideoUploadSession9)&&this.$VideoUploadSession40.hasAPISupport(t)){this.$VideoUploadSession40.sendRequest(e),this.$VideoUploadSession68=t;return}this.$VideoUploadSession38.sendRequest(e),this.$VideoUploadSession68=t},o.__createPostRequestContext=function(t){var e=new(n("VideoUploadRequestContext"));return this.__setupPostRequestContext(e,t),e},o.__setupPostRequestContext=function(t,n){t.setMetadata(n).setVideoID(this.$VideoUploadSession57).setTargetID(this.$VideoUploadSession4).setSource(this.$VideoUploadSession2).setComposerDialogVersion(this.$VideoUploadSession3).setComposerWorkSharedDraftMode(this.$VideoUploadSession10).setWaterfallID(this.$VideoUploadSession24).setComposerSessionID(this.$VideoUploadSession52).setSupportsChunking(this.$VideoUploadSession27).setCreatorProduct(this.$VideoUploadSession53.getCreatorProduct()).setFile(this.$VideoUploadSession53).setHasFileBeenReplaced(this.$VideoUploadSession18),n&&(n.spherical&&(this.$VideoUploadSession64=!0,t.setIsSphericalVideo(this.$VideoUploadSession64)),n.enable_omnistab&&(this.$VideoUploadSession66=!0,t.setEnableOmnistab(this.$VideoUploadSession66))),t.setComposerEntryPointRef==null||t.setComposerEntryPointRef(this.$VideoUploadSession9)},o.$VideoUploadSession$p_69=function(o,a){if(this.$VideoUploadSession60){var t={event_reason:a,debug:babelHelpers.extends({},this.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:this.$VideoUploadSession7})},i=a===e.CANCELED?n("VideoUploadLogger").EVENT_CANCELED_UPLOADING:n("VideoUploadLogger").EVENT_ABANDONED_UPLOADING;this.$VideoUploadSession$p_70(),this.$VideoUploadSession7?(this.$VideoUploadSession61||this.__logEvent(i),this.$VideoUploadSession71&&(this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,t),this.$VideoUploadSession71=!1)):(this.__logEvent(i),this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,t)),this.inform("upload-canceled")}else o&&this.$VideoUploadSession57&&r.deleteVideo(this.$VideoUploadSession57)},o.cancel=function(n){n===void 0&&(n=!1),this.$VideoUploadSession$p_69(n,e.CANCELED)},o.abandon=function(n){n===void 0&&(n=!1),this.$VideoUploadSession$p_69(n,e.ABANDONED)},o.isPostInProgress=function(){return this.$VideoUploadSession38.isInProgress()},o.isInProgress=function(){return this.$VideoUploadSession60},o.getHasUploadFinished=function(){return this.$VideoUploadSession61},o.getVideoID=function(){return this.$VideoUploadSession57},o.getUploadTime=function(){return this.$VideoUploadSession72},o.getExPartitionNumber=function(t){var e=0;for(e=0;e<this.$VideoUploadSession1-1&&!(t>=this.$VideoUploadSession46[e]&&t<this.$VideoUploadSession47[e]);e++);return e===this.$VideoUploadSession1?-1:e},o.getIsSphericalVideo=function(){return this.$VideoUploadSession64||!1},o.getVideoMetadata=function(){return this.$VideoUploadSession25||null},o.startFlow=function(){!this.$VideoUploadSession7||this.$VideoUploadSession71||(this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null}),this.$VideoUploadSession71=!0,this.$VideoUploadSession73&&this.$VideoUploadSession73.flowStarted())},o.__extractVideoMetadata=function(t){var e,r=(e=n("getByPath"))(t,["streams","primaryVideo"]),o={source_height:e(r,["height"]),source_width:e(r,["width"]),duration:e(r,["duration"])*1e3};return o.original_video_duration=o.duration,o},o.$VideoUploadSession$p_67=function(t){var e,r;if(this.$VideoUploadSession6){var o=this.$VideoUploadSession26.getValidationErrorMessage(this.$VideoUploadSession53,t);if(o){var a=n("err")(o.summary);a.is_js_error=!0,r={error_summary:o.summary,error_description:o.description,error:a},e=!1}else e=!0}else e=this.$VideoUploadSession26.validate(this.$VideoUploadSession53,t);if(!e){this.__logEvent(n("VideoUploadLogger").EVENT_INVALIDATED_UPLOADING),this.inform("upload-failed",r);return}if(this.$VideoUploadSession25=this.__extractVideoMetadata(t),t&&t.format&&(this.$VideoUploadSession64=t.format.isSpherical,t.metadata&&(this.$VideoUploadSession65.sphericalMetadataXml=t.metadata.sphericalMetadataXml,this.$VideoUploadSession65.fbSpatialAudioMetadataXml=t.metadata.fbSpatialAudioMetadataXml,this.$VideoUploadSession65.ytSa3dMetadataJson=t.metadata.ytSa3dMetadataJson)),this.$VideoUploadSession7||this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null}),this.$VideoUploadSession74=this.$VideoUploadSession29&&this.$VideoUploadSession53.getSize()>=this.$VideoUploadSession30,this.$VideoUploadSession75=!1,this.$VideoUploadSession76=0,this.$VideoUploadSession77=this.$VideoUploadSession76,this.$VideoUploadSession78=0,this.$VideoUploadSession16?this.$VideoUploadSession$p_44():this.$VideoUploadSession45=!1,this.$VideoUploadSession74)if(this.$VideoUploadSession16){var i=0;this.$VideoUploadSession79=Math.ceil(this.$VideoUploadSession53.getSize()/this.$VideoUploadSession1);var l=this.$VideoUploadSession79,s=this.$VideoUploadSession79;for(i=0;i<this.$VideoUploadSession1-1;i++)this.$VideoUploadSession46[i]=l,l=Math.min(this.$VideoUploadSession46[i]+s,this.$VideoUploadSession53.getSize()),this.$VideoUploadSession47[i]=l,this.$VideoUploadSession48[i]=this.$VideoUploadSession46[i],this.$VideoUploadSession49[i]=0}else this.$VideoUploadSession79=Math.floor(this.$VideoUploadSession53.getSize()/2),this.$VideoUploadSession46=this.$VideoUploadSession79,this.$VideoUploadSession48=this.$VideoUploadSession46,this.$VideoUploadSession49=0,this.$VideoUploadSession47=this.$VideoUploadSession53.getSize();else this.$VideoUploadSession79=this.$VideoUploadSession53.getSize();var u=new(n("VideoUploadRequestContext"))().setFile(this.$VideoUploadSession53).setTargetID(this.$VideoUploadSession4).setSource(this.$VideoUploadSession2).setComposerDialogVersion(this.$VideoUploadSession3).setComposerWorkSharedDraftMode(this.$VideoUploadSession10).setWaterfallID(this.$VideoUploadSession24).setComposerSessionID(this.$VideoUploadSession52).setHasFileBeenReplaced(this.$VideoUploadSession18).setSupportsChunking(this.$VideoUploadSession27).setSupportsFileAPI(this.$VideoUploadSession28).setCreatorProduct(this.$VideoUploadSession53.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession76).setPartitionEndOffset(this.$VideoUploadSession79).setRetryState(this.$VideoUploadSession43).setCreativeTools(this.$VideoUploadSession54);this.$VideoUploadSession29&&u.setUseParallelChunks(this.$VideoUploadSession29),this.$VideoUploadSession64&&(u.setIsSphericalVideo(this.$VideoUploadSession64),u.setSphericalMetadata(this.$VideoUploadSession65)),u.setComposerEntryPointRef==null||u.setComposerEntryPointRef(this.$VideoUploadSession9),u.setVideoPublisherActionSource(this.$VideoUploadSession11),this.$VideoUploadSession$p_80(),this.$VideoUploadSession33.sendRequest(u),this.$VideoUploadSession20&&this.$VideoUploadSession17&&this.$VideoUploadSession35.isResumabilityEnabled()&&!this.$VideoUploadSession35.isResumableServiceProxyReceiveEnabled()&&this.$VideoUploadSession$p_81(),this.inform("metadata-parsed",t)},o.$VideoUploadSession$p_34=function(t){var e=this,n=this.$VideoUploadSession27?t.chunk_start_uri:t.start_uri,r=this.__getVideoUploadStartRequestManager(n,t.start_max_transport_retries,t.start_transport_retry_interval_base,t.start_max_transport_retry_timeout,t.skip_upload_enabled,t.skip_upload_file_size_limit,t.start_max_server_retries,t.start_server_retry_interval_base);return r.subscribe("request-started",function(t,n){return e.$VideoUploadSession$p_82(t,n)}),r.subscribe("request-finished",function(t,n){return e.$VideoUploadSession$p_83(t,n)}),r.subscribe("request-failed",function(t,n){return e.$VideoUploadSession$p_84(t,n)}),r.subscribe("request-canceled",function(t){return e.$VideoUploadSession$p_85(t)}),r},o.$VideoUploadSession$p_36=function(t){var e=this,n=this.$VideoUploadSession27?t.chunk_receive_uri:t.receive_uri,r=this.__getVideoUploadReceiveRequestManager(n,t);return r.subscribe("request-started",function(t,n){return e.$VideoUploadSession$p_86(t,n)}),r.subscribe("request-progressed",function(t,n){return e.$VideoUploadSession$p_87(t,n)}),r.subscribe("request-finished",function(t,n){return e.$VideoUploadSession$p_88(t,n)}),r.subscribe("request-failed",function(t,n){return e.$VideoUploadSession$p_89(t,n)}),r.subscribe("request-canceled",function(t){return e.$VideoUploadSession$p_90(t)}),r.subscribe("request-timeout",function(t,n){return e.$VideoUploadSession$p_91(t,n)}),r.subscribe("online",function(t,n){return e.$VideoUploadSession$p_92(t,n)}),r.subscribe("offline",function(t,n){return e.$VideoUploadSession$p_93(t,n)}),r.subscribe("resumable-called",function(t,n){return e.$VideoUploadSession$p_94(t,n)}),r.subscribe("resumable-started",function(t,n){return e.$VideoUploadSession$p_95(t,n)}),r.subscribe("resumable-success",function(t,n){return e.$VideoUploadSession$p_96(t,n)}),r.subscribe("resumable-failed",function(t,n){return e.$VideoUploadSession$p_97(t,n)}),r},o.$VideoUploadSession$p_39=function(t){var e=this,n=this.$VideoUploadSession27?t.chunk_post_uri:t.post_uri,r=this.__getVideoUploadPostRequestManager(n,t);return r.subscribe("request-finished",function(t,n){return e.__handlePostRequestFinished(t,n)}),r.subscribe("request-failed",function(t,n){return e.$VideoUploadSession$p_98(t,n)}),r},o.$VideoUploadSession$p_41=function(t){var e=this,r=new(n("VideoUploadGraphQLPostRequestManager"))(isNaN(t.post_max_transport_retries)?0:t.post_max_transport_retries,isNaN(t.post_transport_retry_interval_base)?0:t.post_transport_retry_interval_base,isNaN(t.post_max_server_retries)?0:t.post_max_server_retries,isNaN(t.post_server_retry_interval_base)?0:t.post_server_retry_interval_base);return r.subscribe("request-finished",function(t,n){return e.__handlePostRequestFinished(t,n)}),r.subscribe("request-failed",function(t,n){return e.$VideoUploadSession$p_98(t,n)}),r},o.$VideoUploadSession$p_82=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_UPLOADING,babelHelpers.extends({hash_time:r.hash_time,hash_exception:r.hash_exception},this.$VideoUploadSession25)),this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_START_REQUEST,this.$VideoUploadSession25),this.$VideoUploadSession99=Date.now(),this.inform("upload-started")},o.$VideoUploadSession$p_81=function(t){if(this.$VideoUploadSession21)this.$VideoUploadSession$p_100();else{this.$VideoUploadSession21=!0,t||(t={video_id:null});var e=this.__createReceiveRequestContext(t,!1);if(this.$VideoUploadSession35.sendRequest(e),this.$VideoUploadSession74)if(this.$VideoUploadSession16){var n=0;for(n=0;n<this.$VideoUploadSession1-1;n++)e=this.__createReceiveRequestContext(t,!0,n),this.$VideoUploadSession37[n].sendRequest(e)}else e=this.__createReceiveRequestContext(t,!0),this.$VideoUploadSession37.sendRequest(e)}},o.$VideoUploadSession$p_100=function(){if(this.$VideoUploadSession35.updateVideoID(this.$VideoUploadSession57),this.$VideoUploadSession74)if(this.$VideoUploadSession16){var e=0;for(e=0;e<this.$VideoUploadSession1-1;e++)this.$VideoUploadSession37[e].updateVideoID(this.$VideoUploadSession57)}else this.$VideoUploadSession37.updateVideoID(this.$VideoUploadSession57)},o.$VideoUploadSession$p_101=function(t){return this.$VideoUploadSession43==null?((t==null?void 0:t.transport_retries)||0)+((t==null?void 0:t.server_retries)||0)+((t==null?void 0:t.timeout_retries)||0):this.$VideoUploadSession43.getTotalRetryCount()},o.$VideoUploadSession$p_83=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_PROGRESS_UPLOADING_START_REQUEST,{retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,hash_time:r.hash_time,skip_upload:r.skip_upload?1:null}),this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_START_REQUEST,babelHelpers.extends({video_id:r.video_id},this.$VideoUploadSession25)),this.$VideoUploadSession57=r.video_id,this.$VideoUploadSession58=r.upload_session_id,this.$VideoUploadSession59=r.fb_region,this.$VideoUploadSession102=r.skip_upload,r.skip_upload?(this.$VideoUploadSession$p_103(),this.inform("upload-progressed",{start_offset:0,end_offset:this.$VideoUploadSession53.getSize(),file_size:this.$VideoUploadSession53.getSize(),sent_bytes:this.$VideoUploadSession53.getSize(),video_id:r.video_id,skip_upload:r.skip_upload}),this.$VideoUploadSession7&&this.__logFinishedUploading(),this.inform("upload-finished",{start_offset:0,end_offset:this.$VideoUploadSession53.getSize(),video_id:r.video_id,is_spherical_video:this.$VideoUploadSession64})):this.$VideoUploadSession$p_81(r)},o.__fetchReceiveRequestManagerStateLogData=function(){var e={};if(this.$VideoUploadSession35!=null&&(this.$VideoUploadSession35.appendStateLogData(e,"requestManager_"),e.request_manager_state=e.requestManager_last_log_state),this.$VideoUploadSession16){var t=0;for(t=0;t<this.$VideoUploadSession1-1;t++)this.$VideoUploadSession37[t]!=null&&this.$VideoUploadSession37[t].appendStateLogData(e,"requestManagerEx_"+t.toString())}else this.$VideoUploadSession37!=null&&this.$VideoUploadSession37.appendStateLogData(e,"requestManagerEx_");return e},o.__createReceiveRequestContext=function(t,r,o){r||(r=!1);var e=new(n("VideoUploadRequestContext"));return this.$VideoUploadSession16?this.__setupReceiveRequestContext(e,t,r,o):this.__setupReceiveRequestContext(e,t,r),e},o.__setupReceiveRequestContext=function(t,n,r,o){var e,a,i,l;r?this.$VideoUploadSession16?(this.$VideoUploadSession17&&(this.$VideoUploadSession31=this.$VideoUploadSession47[o]-this.$VideoUploadSession46[o],this.$VideoUploadSession31=this.$VideoUploadSession19?Math.min(this.$VideoUploadSession19,this.$VideoUploadSession31):this.$VideoUploadSession31),e=this.$VideoUploadSession46[o],a=this.$VideoUploadSession47[o],i=this.$VideoUploadSession46[o],l=this.$VideoUploadSession46[o]+this.$VideoUploadSession31>=this.$VideoUploadSession47[o]?this.$VideoUploadSession47[o]:this.$VideoUploadSession46[o]+this.$VideoUploadSession31):(this.$VideoUploadSession17&&(this.$VideoUploadSession31=this.$VideoUploadSession47-this.$VideoUploadSession46,this.$VideoUploadSession31=this.$VideoUploadSession19?Math.min(this.$VideoUploadSession19,this.$VideoUploadSession31):this.$VideoUploadSession31),e=this.$VideoUploadSession46,a=this.$VideoUploadSession47,i=this.$VideoUploadSession46,l=this.$VideoUploadSession46+this.$VideoUploadSession31>=this.$VideoUploadSession47?this.$VideoUploadSession47:this.$VideoUploadSession46+this.$VideoUploadSession31):(e=this.$VideoUploadSession76,a=this.$VideoUploadSession79,this.$VideoUploadSession17?(i=this.$VideoUploadSession76,l=this.$VideoUploadSession19?Math.min(this.$VideoUploadSession19,this.$VideoUploadSession79):this.$VideoUploadSession79):(i=n.start_offset,l=n.end_offset)),t.setFile(this.$VideoUploadSession53).setVideoID(n.video_id).setXPVAssetID(n.xpv_asset_id).setIsXPVSingleProd(n.is_xpv_single_prod).setUploadSessionID(n.upload_session_id).setFbRegion(n.fb_region).setStartOffset(i).setEndOffset(l).setPartitionStartOffset(e).setPartitionEndOffset(a).setPartitionNo(o).setTargetID(this.$VideoUploadSession4).setSource(this.$VideoUploadSession2).setComposerDialogVersion(this.$VideoUploadSession3).setComposerWorkSharedDraftMode(this.$VideoUploadSession10).setWaterfallID(this.$VideoUploadSession24).setComposerSessionID(this.$VideoUploadSession52).setSupportsChunking(this.$VideoUploadSession27).setHasFileBeenReplaced(this.$VideoUploadSession18).setRetryState(this.$VideoUploadSession43),this.$VideoUploadSession29&&t.setUseParallelChunks(this.$VideoUploadSession29),t.setComposerEntryPointRef==null||t.setComposerEntryPointRef(this.$VideoUploadSession9),this.$VideoUploadSession19&&t.setClientChunkSize(this.$VideoUploadSession19)},o.$VideoUploadSession$p_84=function(t,r){var e=this.__getLogErrorData(r);this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_START_REQUEST,e),this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,e);var o=r.error_is_transient?n("VideoUploadLogger").EVENT_RESIGNED_FLOW:n("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession7?this.$VideoUploadSession71&&(this.__logEvent(o),this.$VideoUploadSession71=!1):this.__logEvent(o),this.$VideoUploadSession$p_103(),this.$VideoUploadSession$p_104(),this.inform("upload-failed",r)},o.$VideoUploadSession$p_85=function(t){this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_START_REQUEST)},o.$VideoUploadSession$p_86=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_RECEIVE_REQUEST,{debug:r.debug}),!r.start_offset&&!r.transport_retries&&!r.server_retries&&this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession53.getSize(),upload_domain:r.upload_domain,debug:r.debug}),this.$VideoUploadSession27&&this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:r.start_offset,total_bytes:r.end_offset-r.start_offset,retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,server_retries:r.server_retries,upload_speed:r.upload_speed,request_manager_state:r.request_manager_state,upload_domain:r.upload_domain,debug:r.debug})},o.$VideoUploadSession$p_87=function(t,n){if(n.start_offset<this.$VideoUploadSession79)this.$VideoUploadSession77=n.start_offset,this.$VideoUploadSession78=n.sent_bytes;else if(this.$VideoUploadSession16){var e=0;e=this.getExPartitionNumber(n.start_offset),e>-1&&(this.$VideoUploadSession48[e]=n.start_offset,this.$VideoUploadSession49[e]=n.sent_bytes)}else this.$VideoUploadSession48=n.start_offset,this.$VideoUploadSession49=n.sent_bytes;if(n.start_offset=this.$VideoUploadSession77,n.sent_bytes=this.$VideoUploadSession78,this.$VideoUploadSession74)if(this.$VideoUploadSession16)for(e=0;e<this.$VideoUploadSession1-1;e++)n.start_offset+=this.$VideoUploadSession48[e]-this.$VideoUploadSession46[e],n.sent_bytes+=this.$VideoUploadSession49[e];else n.start_offset+=this.$VideoUploadSession48-this.$VideoUploadSession46,n.sent_bytes+=this.$VideoUploadSession49;var r=Math.min(n.start_offset+n.sent_bytes,n.file_size);r>this.$VideoUploadSession63&&(this.$VideoUploadSession63=r,this.inform("upload-progressed",n))},o.$VideoUploadSession$p_88=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_RECEIVE_REQUEST,{debug:r.debug}),this.$VideoUploadSession27&&this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:r.start_offset,sent_bytes:r.end_offset-r.start_offset,retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,server_retries:r.server_retries,upload_speed:r.upload_speed,request_manager_state:r.request_manager_state,upload_domain:r.upload_domain,debug:r.debug});var e=!1;if(r.start_offset<this.$VideoUploadSession79)this.$VideoUploadSession75=r.end_offset>=this.$VideoUploadSession79;else if(this.$VideoUploadSession16){var o=0;if(o=this.getExPartitionNumber(r.start_offset),o===-1){var a="Invalid offset",i=n("err")(a);i.is_js_error=!0;var l={error_summary:a,error_description:"Offset doesn't fall in any exPartition range.",error:i};this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING),this.inform("upload-failed",l);return}this.$VideoUploadSession45[o]=r.end_offset>=this.$VideoUploadSession47[o]}else this.$VideoUploadSession45=r.end_offset>=this.$VideoUploadSession47;if(this.$VideoUploadSession16)for(o=0;o<this.$VideoUploadSession1-1;o++)if(this.$VideoUploadSession45[o]===!1){e=!1;break}else e=!0;else e=this.$VideoUploadSession45;(!this.$VideoUploadSession28||this.$VideoUploadSession75&&(!this.$VideoUploadSession74||e))&&(this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession53.getSize(),upload_domain:r.upload_domain,debug:r.debug}),this.$VideoUploadSession72=Date.now()-this.$VideoUploadSession99,this.$VideoUploadSession7&&this.__logFinishedUploading(),r.video_id=this.$VideoUploadSession57,r.is_spherical_video=this.$VideoUploadSession64,this.inform("upload-finished",r),this.$VideoUploadSession13&&(this.$VideoUploadSession7||this.__logFinishedUploading(),this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_FLOW,r),this.$VideoUploadSession71=!1,this.$VideoUploadSession$p_104(),this.inform("multimedia-upload-finished",r)))},o.$VideoUploadSession$p_89=function(t,r){var e=this.__getLogErrorData(r);if(this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_RECEIVE_REQUEST,e),this.$VideoUploadSession27&&this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_SENDING_CHUNK_BYTES,e),this.$VideoUploadSession60){this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_SENDING_BYTES,e),this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,e);var o=r.error_is_transient?n("VideoUploadLogger").EVENT_RESIGNED_FLOW:n("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession7?this.$VideoUploadSession71&&(this.__logEvent(o,e),this.$VideoUploadSession71=!1):this.__logEvent(o,e)}this.$VideoUploadSession$p_104(),this.inform("upload-failed",r)},o.$VideoUploadSession$p_90=function(t){this.$VideoUploadSession27?this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_SENDING_CHUNK_BYTES):this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_SENDING_BYTES)},o.$VideoUploadSession$p_91=function(t,r){var e={start_offset:r.start_offset,sent_bytes:r.end_offset-r.start_offset,retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,server_retries:r.server_retries,timeout_retries:r.timeout_retries,upload_speed:r.upload_speed,request_manager_state:r.request_manager_state,debug:r.debug};this.__logEvent(n("VideoUploadLogger").EVENT_TIMEOUT_SENDING_CHUNK_BYTES,e)},o.$VideoUploadSession$p_92=function(t,n){this.inform("online",n)},o.$VideoUploadSession$p_93=function(t,n){this.inform("offline",n)},o.$VideoUploadSession$p_94=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_CALLED,r)},o.$VideoUploadSession$p_95=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_STARTED,r)},o.$VideoUploadSession$p_96=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_SUCCESS,r)},o.$VideoUploadSession$p_97=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_FAILED,r)},o.__handlePostRequestFinished=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_POST_REQUEST,babelHelpers.extends({video_id:this.$VideoUploadSession57},this.$VideoUploadSession25)),r.video_id||(r.video_id=this.$VideoUploadSession57),this.$VideoUploadSession7||this.__logFinishedUploading(),this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_FLOW),this.$VideoUploadSession71=!1,this.$VideoUploadSession$p_104();var e=babelHelpers.extends({},r,this.$VideoUploadSession68);this.inform("post-finished",e)},o.__logFinishedUploading=function(){this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_UPLOADING,babelHelpers.extends({elapsed_time:this.$VideoUploadSession72,skip_upload:this.$VideoUploadSession102?1:null,video_id:this.$VideoUploadSession57},this.$VideoUploadSession25)),this.$VideoUploadSession61=!0},o.$VideoUploadSession$p_98=function(t,r){var e=this.__getLogErrorData(r);if(this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_POST_REQUEST,e),this.$VideoUploadSession60){this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,e);var o=r.error_is_transient?n("VideoUploadLogger").EVENT_RESIGNED_FLOW:n("VideoUploadLogger").EVENT_FAILED_FLOW;this.__logEvent(o,e)}this.$VideoUploadSession$p_104(),this.inform("post-failed",r)},o.$VideoUploadSession$p_103=function(){if(this.$VideoUploadSession35.cancelRequest(),this.$VideoUploadSession74)if(this.$VideoUploadSession16){var e=0;for(e=0;e<this.$VideoUploadSession1-1;e++)this.$VideoUploadSession37[e].cancelRequest()}else this.$VideoUploadSession37.cancelRequest();this.$VideoUploadSession21=!1},o.$VideoUploadSession$p_70=function(){this.$VideoUploadSession33.cancelRequest(),this.$VideoUploadSession$p_103(),this.$VideoUploadSession$p_104(),this.$VideoUploadSession57&&(r.deleteVideo(this.$VideoUploadSession57),this.$VideoUploadSession57=null,this.$VideoUploadSession58=null,this.$VideoUploadSession59=null)},o.$VideoUploadSession$p_80=function(){var t=this;this.$VideoUploadSession60=!0,this.$VideoUploadSession32&&(this.$VideoUploadSession62=new(n("SubscriptionsHandler")),this.$VideoUploadSession62.addSubscriptions(this.$VideoUploadSession$p_55().postOnShutdown(function(){if(t.$VideoUploadSession60){var r={event_reason:e.SHUTDOWN,debug:babelHelpers.extends({},t.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:t.$VideoUploadSession7})};t.$VideoUploadSession7?t.$VideoUploadSession71&&t.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,r):t.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,r),t.inform("upload-canceled")}}))),this.$VideoUploadSession12&&(this.$VideoUploadSession73=new(n("VideoUploadCrashMonitor"))(this.$VideoUploadSession24,this.$VideoUploadSession8,this.$VideoUploadSession2,this.$VideoUploadSession4,this.$VideoUploadSession5,this.$VideoUploadSession27,this.$VideoUploadSession9,!this.$VideoUploadSession7||this.$VideoUploadSession71),this.$VideoUploadSession73.startSession())},o.$VideoUploadSession$p_104=function(){this.$VideoUploadSession60=!1,this.$VideoUploadSession62&&(this.$VideoUploadSession62.release(),this.$VideoUploadSession62=null),this.$VideoUploadSession73&&(this.$VideoUploadSession73.endSession(),this.$VideoUploadSession73=null)},o.__getLogErrorData=function(t){return{error:t.error_summary,error_code:t.error_code,error_description:t.error_description,retries:this.$VideoUploadSession$p_101(t),transport_retries:t.transport_retries,server_retries:t.server_retries,request_manager_state:t.request_manager_state,debug:t.debug}},o.__logEvent=function(t,n){n=n||{},this.$VideoUploadSession53&&(n.file_size=this.$VideoUploadSession53.getSize(),n.file_extension=this.$VideoUploadSession53.getExtension(),n.sent_bytes=this.$VideoUploadSession63),this.$VideoUploadSession$p_55().logEvent(t,n)},o.__getVideoUploadStartRequestManager=function(t,r,o,a,i,l,s,u){return new(n("VideoUploadStartRequestManager"))(t,r,o,a,i,l,s,u)},o.__getVideoUploadReceiveRequestManager=function(t,r){return new(n("VideoUploadReceiveRequestManager"))(t,r.max_transport_retries,r.max_transport_retry_timeout,r.max_server_retries,r.response_timeout_enabled,r.max_response_timeout_retries,r.response_timeout_speed_variation_factor_ppt,r.transport_retry_interval_base,r.server_retry_interval_base,r.receive_errors_force_retry,r.access_token,r.resumability_enabled,r.resumability_async_enabled,r.resumable_service_name,r.resumable_service_domain,r.datr,r.resumability_min_file_size,r.resumable_service_proxy_receive,r.resumable_service_send_media_info,r.resumable_service_send_file_size,r.resumable_reset_transport_retries_on_progress,r.traffic_tracing_enabled,r.traffic_tracing_min_file_size)},o.__getVideoUploadPostRequestManager=function(t,r){return new(n("VideoUploadPostRequestManager"))(t,r.post_max_transport_retries,r.post_transport_retry_interval_base,r.post_max_server_retries,r.post_server_retry_interval_base)},r.deleteVideo=function(t){var e=new(n("AsyncRequest"))("/ajax/video/actions/delete").setData({fbid:t,redirect:!1});e.setErrorHandler(function(){}),e.send()},r})(n("mixin")(n("cr:909282")));a.exports=l}),null);
__d("VideoUploader",["FBLogger","MediaUploadVUShim","VideoUploadCrashMonitor","VideoUploadSession","cr:909282","getErrorSafe","mixin"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.abandon=function(e){e===void 0&&(e=!1);var t=n.getVideoID();n.$VideoUploader2?n.$VideoUploader2.abandon(e):e&&t&&r("VideoUploadSession").deleteVideo(t),n.reset()},n.$VideoUploader1=t,n.$VideoUploader2=null,n.$VideoUploader3=null,n.$VideoUploader4=t.waterfall_id==null?null:t.waterfall_id,n.$VideoUploader5=n.$VideoUploader1.ad_account_id,t.monitor_crashes&&(n.$VideoUploader6=new(r("VideoUploadCrashMonitor")),n.$VideoUploader6.logKnownCrashes()),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setComposerSessionID=function(t){this.$VideoUploader7=t,this.$VideoUploader2&&this.$VideoUploader2.setComposerSessionID(t)},n.getLogger=function(){if(this.$VideoUploader2&&this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger()},n.upload=function(t,n){var e=this;if(!this.$VideoUploader2){var r=this.__getVideoUploadSession(this.$VideoUploader1);r.setComposerSessionID(this.$VideoUploader7),(n==null?void 0:n.creativeTools)!=null&&r.setCreativeTools(JSON.stringify(n==null?void 0:n.creativeTools)),r.subscribe(this.__getEventsWhichShouldListenFromSession(),function(t,n){return e.$VideoUploader8(t,n)}),this.$VideoUploader2=r,r.start(t)}},n.__getVideoUploadSession=function(t){try{var e=r("MediaUploadVUShim").createSession(t);return e==null?new(r("VideoUploadSession"))(t):e}catch(e){return r("FBLogger")("media_upload").catching(r("getErrorSafe")(e)).warn("Failed to create shim video upload session"),new(r("VideoUploadSession"))(t)}},n.__getEventsWhichShouldListenFromSession=function(){return["upload-requested","upload-started","upload-progressed","upload-finished","upload-failed","upload-canceled","post-started","post-finished","post-failed","online","offline","metadata-parsed","set-waterfall-id"]},n.postUserRequest=function(){this.$VideoUploader2&&this.$VideoUploader2.startFlow&&this.$VideoUploader2.startFlow()},n.setTargetID=function(t){this.$VideoUploader2!=null&&this.$VideoUploader2.setTargetID(t)},n.setHasFileBeenReplaced=function(t){this.$VideoUploader1.has_file_been_replaced=t},n.post=function(t){this.$VideoUploader2&&this.$VideoUploader2.post(t)},n.getVideoID=function(){return this.$VideoUploader2&&(this.$VideoUploader3=this.$VideoUploader2.getVideoID()),this.$VideoUploader3},n.getVideoMetadataFromSession=function(){if(this.$VideoUploader2)return this.$VideoUploader2.getVideoMetadata()},n.cancel=function(t){t===void 0&&(t=!1);var e=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.cancel(t):t&&e&&r("VideoUploadSession").deleteVideo(e),this.reset()},n.reset=function(){this.$VideoUploader2&&(this.$VideoUploader3=this.getVideoID()),this.$VideoUploader2=null},n.getUploadSession=function(){return this.$VideoUploader2},n.getLoggerData=function(){return{waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader4:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}},n.isPostInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()},n.isSessionInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()},n.isSessionExist=function(){return!!this.$VideoUploader2},n.getUploadParameters=function(){return this.$VideoUploader1},n.__getSession=function(){return this.$VideoUploader2},n.__getEventsForWhichSessionShouldBeSetToNull=function(){return["upload-failed","post-finished","multimedia-upload-finished"]},n.$VideoUploader8=function(t,n){this.__getEventsForWhichSessionShouldBeSetToNull().includes(t)&&this.reset(),this.__delegateEvent(t,n)},n.__delegateEvent=function(t,n){this.inform(t,n)},t})(r("mixin")(n("cr:909282")));l.default=e}),98);
__d("CometComposerDraftingUtils",["fbt","ComposerMediaFileUploader","FBLogger","LexicalText","MWPActor.react","ReactDOM","err","getErrorSafe","qex"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["abTestData","attachmentArea","copyrightPreCheckMetadata","editorRef","editorState","featureDefinitionsGating","lexicalEditor","mediaUploadStatuses","onCloseReelsComposer","onCloseUnderlyingDialog","placeholderTextOverride","submitText","videoComposerData"],u=["currentSelectedVideoFrame","generatedThumbnails","thumbnailFile"],c=["onRemove"],d="comet_composer_drafts",m="reel_draft",p="post_draft",_=1,f="draft_content",g=12096e5;function h(){var e;return o("MWPActor.react").isAPPlus()||o("MWPActor.react").isPromode()?!1:(e=r("qex")._("1295"))!=null?e:!1}function y(){var e;return o("MWPActor.react").isAPPlus()||o("MWPActor.react").isPromode()?!1:(e=r("qex")._("1805"))!=null?e:!1}function C(){var e;return(e=r("qex")._("4296"))!=null?e:!0}function b(e){r("FBLogger")("comet_composer").mustfix("Experienced error during post draft retrieval: "+e.toString())}function v(e){r("FBLogger")("comet_composer").mustfix("Experienced error during post draft save: "+e.toString())}function S(e){r("FBLogger")("comet_composer").mustfix("Experienced error during post draft deletion: "+e.toString())}function R(e,t,n){return new Promise(function(o,a){if(indexedDB==null){a(r("err")("IndexedDB is not available"));return}var i=indexedDB.open(d,_);i.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore(m,{keyPath:"id"});n.createIndex(f,[f],{unique:!1});var r=t.createObjectStore(p,{keyPath:"id"});r.createIndex(f,[f],{unique:!1})},i.onerror=function(){v(i.error),a(i.error)},i.onsuccess=function(i){var l=i.target.result;try{var s=l.transaction(n,"readwrite"),u=s.objectStore(n);u.put({draftViewState:e,id:t,timestamp:Date.now()}),s.oncomplete=function(){l.close(),o(!0)},s.onerror=function(e){l.close(),a(e)}}catch(e){l.close();var c=r("getErrorSafe")(e);v(c),a(c)}}})}function L(e,t){return new Promise(function(n,o){if(indexedDB==null){o(r("err")("IndexedDB is not available"));return}var a=indexedDB.open(d,_);a.onerror=function(e){o(e)},a.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore(m,{keyPath:"id"});n.createIndex(f,[f],{unique:!1});var r=t.createObjectStore(p,{keyPath:"id"});r.createIndex(f,[f],{unique:!1})},a.onsuccess=function(r){var a=r.target.result;try{var i=a.transaction(t,"readonly"),l=i.objectStore(t),s=l.get(e);i.oncomplete=function(){a.close();var r=s.result,o=typeof r=="object"&&r!=null&&"timestamp"in r&&typeof r.timestamp=="number"?r.timestamp:null;if(o!=null&&Date.now()-o>g)E(e,t).then(function(){return n(null)}).catch(function(e){S(e)});else{var i=null;typeof r=="object"&&r!=null&&"draftViewState"in r&&(i=r.draftViewState),n(i)}},i.onerror=function(e){a.close(),o(e)}}catch(e){a.close(),e instanceof Error&&e.name==="NotFoundError"?(b(e),k().then(function(){return n(null)}).catch(function(e){o(e)})):o(e)}}})}function E(e,t){return new Promise(function(n,o){if(indexedDB==null){o(r("err")("IndexedDB is not available"));return}var a=indexedDB.open(d,_);a.onsuccess=function(i){var l=i.target.result;try{var s=l.transaction(t,"readwrite"),u=s.objectStore(t).delete(e);s.oncomplete=function(){l.close(),n(!0)},s.onerror=function(){l.close(),S(a.error),o(u.error)}}catch(e){l.close();var c=r("getErrorSafe")(e);S(c),o(c)}},a.onerror=function(){S(a.error),o(a.error)}})}function k(){return new Promise(function(e,t){if(indexedDB==null){t(r("err")("IndexedDB is not available"));return}var n=indexedDB.deleteDatabase(d);n.onsuccess=function(){e(!0)},n.onerror=function(){t(n.error)}})}function I(e,t,n,a){var i=r("ComposerMediaFileUploader").getInstance(t);a==null||a();var l=[];if(e.mediaUploadStatuses)for(var s in e.mediaUploadStatuses)l.push(e.mediaUploadStatuses[s].onFileComplete);else return Promise.resolve();if(l.length>0&&i!=null){var u=function(t){o("ReactDOM").flushSync(function(){return n({draftState:"PREEXISTING",entID:t.entID,imageURL:t.attachmentType==="PHOTO"?t.imageURL:void 0,takenTime:t.attachmentType==="PHOTO"?t.takenTime:void 0,type:"MEDIA_UPLOAD_SUCCESSFUL",uploadID:t.uploadID})})};return i.successObserver.subscribe(u),Promise.all(l).then(function(){return Promise.resolve()}).catch(function(e){var t;return r("FBLogger")("comet_composer").mustfix("Media upload failed during draft save","Error: "+((t=e==null?void 0:e.message)!=null?t:"Unknown error")),Promise.reject(e)}).finally(function(){i.successObserver.unsubscribe(u)})}else return Promise.resolve()}async function T(e){if(e==null)return null;if(e instanceof File||e instanceof Blob)return e;if(typeof e=="object"&&e!=null&&"getData"in e&&typeof e.getData=="function")try{var t=await e.getData();return t}catch(e){return r("FBLogger")("comet_composer").warn("Failed to serialize thumbnail file",e),null}return null}async function D(t,n,a,i,l,d){var m,p,_=(m=t.lexicalEditor)==null?void 0:m.getEditorState(),f=_==null?void 0:_.toJSON(),g=t.abTestData,h=t.attachmentArea,y=t.copyrightPreCheckMetadata,C=t.editorRef,b=t.editorState,v=t.featureDefinitionsGating,S=t.lexicalEditor,L=t.mediaUploadStatuses,E=t.onCloseReelsComposer,k=t.onCloseUnderlyingDialog,I=t.placeholderTextOverride,D=t.submitText,x=t.videoComposerData,$=babelHelpers.objectWithoutPropertiesLoose(t,e),P=S==null||(p=S.getEditorState())==null?void 0:p.read(o("LexicalText").$rootTextContent),N=null;t.mediaAttachments!=null&&(N=await Promise.all(t.mediaAttachments.map(async function(e){if(e.fileType==="VIDEO"){var t=e.videoAttachmentMetadata;if(t!=null){var n=t.currentSelectedVideoFrame,r=t.generatedThumbnails,o=t.thumbnailFile,a=babelHelpers.objectWithoutPropertiesLoose(t,u),i=await T(o);return babelHelpers.extends({},e,{videoAttachmentMetadata:babelHelpers.extends({},a,{thumbnailFile:i})})}}return e})));var M;t.byoaAudioTracks!=null&&(M=t.byoaAudioTracks.map(function(e){var t=e.description.getEditorState(),n=t.toJSON();return{file:e.file,handle:e.handle,key:e.key,langCode:e.langCode,serializedDescription:n}}));var w=h!=null?h:{},A=w.onRemove,F=babelHelpers.objectWithoutPropertiesLoose(w,c),O=babelHelpers.extends({},$,{attachmentArea:F,draftedPostText:P},N!=null&&{mediaAttachments:N},{serializedAudioTracks:M,serializedLexicalEditorState:f});R(O,l,d).then(function(){n!=null&&n(),i==null||i(),a==null||a({ignoreIsSavingFlag:!0})}).catch(function(e){r("FBLogger")("comet_composer").mustfix(e),i==null||i(r("err")(s._(/*BTDS*/"Sorry, something went wrong. Try again later.").toString()))})}function x(e){return e.map(function(e){var t=e;e.fileType==="VIDEO"&&e.file!=null&&(t=babelHelpers.extends({},e,{fileObjectURL:URL.createObjectURL(e.file)}));var n=t.videoAttachmentMetadata;if(n!=null){var r=babelHelpers.extends({},n);if(n.thumbnailPreviewURL!=null&&n.thumbnailFile!=null&&n.thumbnailFile instanceof File){var o=URL.createObjectURL(n.thumbnailFile);r.thumbnailPreviewURL=o,r.customURL=o}t=babelHelpers.extends({},t,{videoAttachmentMetadata:r})}return t})}l.canFriendsAndFamilyUsersDraftPostsSilentExposure=h,l.canFriendsAndFamilyUsersDraftPostsWithExposure=y,l.shouldShowDraftsInline=C,l.logDraftRetrievalError=b,l.logDraftSaveError=v,l.logDraftDeleteError=S,l.addDraftToIndexedDB=R,l.getDraftFromIndexedDB=L,l.deleteDraftFromIndexedDB=E,l.clearAllDraftsFromIndexedDB=k,l.processMediaUpload=I,l.createSerializedDraft=D,l.createNewObjectURLsForVideosAndThumbnails=x}),226);
/**
 * License: https://www.facebook.com/legal/license/BDuAztjQnAL/
 */
__d("CryptoJS",[],(function(t,n,r,o,a,i){(function(e,t){typeof i=="object"?a.exports=i=t():typeof define=="function"&&define.amd?define([],t):e.CryptoJS=t()})(this,function(){var e=e||(function(e,t){var n=Object.create||(function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}})(),r={},o=r.lib={},a=o.Base=(function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),i=o.WordArray=a.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<o;a++){var i=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=i<<24-(r+a)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var o=(n<<16)+t&r;return o/=4294967296,o+=.5,o*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var l=o(4294967296*(n||e.random()));n=987654071*l(),r.push(4294967296*l()|0)}return new i.init(r,t)}}),l=r.enc={},s=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},u=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},c=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){typeof e=="string"&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,l=4*a,s=o/l;s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);var u=s*a,c=e.min(4*u,o);if(u){for(var d=0;d<u;d+=a)this._doProcessBlock(r,d);var m=r.splice(0,u);n.sigBytes-=c}return new i.init(m,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(o.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r})(Math);return(function(){function t(e,t,n){for(var r=[],a=0,i=0;i<t;i++)if(i%4){var l=n[e.charCodeAt(i-1)]<<i%4*2,s=n[e.charCodeAt(i)]>>>6-i%4*2;r[a>>>2]|=(l|s)<<24-a%4*8,a++}return o.create(r,a)}var n=e,r=n.lib,o=r.WordArray,a=n.enc;a.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],a=0;a<n;a+=3)for(var i=t[a>>>2]>>>24-a%4*8&255,l=t[a+1>>>2]>>>24-(a+1)%4*8&255,s=t[a+2>>>2]>>>24-(a+2)%4*8&255,u=i<<16|l<<8|s,c=0;c<4&&a+.75*c<n;c++)o.push(r.charAt(u>>>6*(3-c)&63));var d=r.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var n=e.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<r.length;a++)o[r.charCodeAt(a)]=a}var i=r.charAt(64);if(i){var l=e.indexOf(i);l!==-1&&(n=l)}return t(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),(function(t){function n(e,t,n,r,o,a,i){var l=e+(t&n|~t&r)+o+i;return(l<<a|l>>>32-a)+t}function r(e,t,n,r,o,a,i){var l=e+(t&r|n&~r)+o+i;return(l<<a|l>>>32-a)+t}function o(e,t,n,r,o,a,i){var l=e+(t^n^r)+o+i;return(l<<a|l>>>32-a)+t}function a(e,t,n,r,o,a,i){var l=e+(n^(t|~r))+o+i;return(l<<a|l>>>32-a)+t}var i=e,l=i.lib,s=l.WordArray,u=l.Hasher,c=i.algo,d=[];(function(){for(var e=0;e<64;e++)d[e]=4294967296*t.abs(t.sin(e+1))|0})();var m=c.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var l=t+i,s=e[l];e[l]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var u=this._hash.words,c=e[t+0],m=e[t+1],p=e[t+2],_=e[t+3],f=e[t+4],g=e[t+5],h=e[t+6],y=e[t+7],C=e[t+8],b=e[t+9],v=e[t+10],S=e[t+11],R=e[t+12],L=e[t+13],E=e[t+14],k=e[t+15],I=u[0],T=u[1],D=u[2],x=u[3];I=n(I,T,D,x,c,7,d[0]),x=n(x,I,T,D,m,12,d[1]),D=n(D,x,I,T,p,17,d[2]),T=n(T,D,x,I,_,22,d[3]),I=n(I,T,D,x,f,7,d[4]),x=n(x,I,T,D,g,12,d[5]),D=n(D,x,I,T,h,17,d[6]),T=n(T,D,x,I,y,22,d[7]),I=n(I,T,D,x,C,7,d[8]),x=n(x,I,T,D,b,12,d[9]),D=n(D,x,I,T,v,17,d[10]),T=n(T,D,x,I,S,22,d[11]),I=n(I,T,D,x,R,7,d[12]),x=n(x,I,T,D,L,12,d[13]),D=n(D,x,I,T,E,17,d[14]),T=n(T,D,x,I,k,22,d[15]),I=r(I,T,D,x,m,5,d[16]),x=r(x,I,T,D,h,9,d[17]),D=r(D,x,I,T,S,14,d[18]),T=r(T,D,x,I,c,20,d[19]),I=r(I,T,D,x,g,5,d[20]),x=r(x,I,T,D,v,9,d[21]),D=r(D,x,I,T,k,14,d[22]),T=r(T,D,x,I,f,20,d[23]),I=r(I,T,D,x,b,5,d[24]),x=r(x,I,T,D,E,9,d[25]),D=r(D,x,I,T,_,14,d[26]),T=r(T,D,x,I,C,20,d[27]),I=r(I,T,D,x,L,5,d[28]),x=r(x,I,T,D,p,9,d[29]),D=r(D,x,I,T,y,14,d[30]),T=r(T,D,x,I,R,20,d[31]),I=o(I,T,D,x,g,4,d[32]),x=o(x,I,T,D,C,11,d[33]),D=o(D,x,I,T,S,16,d[34]),T=o(T,D,x,I,E,23,d[35]),I=o(I,T,D,x,m,4,d[36]),x=o(x,I,T,D,f,11,d[37]),D=o(D,x,I,T,y,16,d[38]),T=o(T,D,x,I,v,23,d[39]),I=o(I,T,D,x,L,4,d[40]),x=o(x,I,T,D,c,11,d[41]),D=o(D,x,I,T,_,16,d[42]),T=o(T,D,x,I,h,23,d[43]),I=o(I,T,D,x,b,4,d[44]),x=o(x,I,T,D,R,11,d[45]),D=o(D,x,I,T,k,16,d[46]),T=o(T,D,x,I,p,23,d[47]),I=a(I,T,D,x,c,6,d[48]),x=a(x,I,T,D,y,10,d[49]),D=a(D,x,I,T,E,15,d[50]),T=a(T,D,x,I,g,21,d[51]),I=a(I,T,D,x,R,6,d[52]),x=a(x,I,T,D,_,10,d[53]),D=a(D,x,I,T,v,15,d[54]),T=a(T,D,x,I,m,21,d[55]),I=a(I,T,D,x,C,6,d[56]),x=a(x,I,T,D,k,10,d[57]),D=a(D,x,I,T,h,15,d[58]),T=a(T,D,x,I,L,21,d[59]),I=a(I,T,D,x,f,6,d[60]),x=a(x,I,T,D,S,10,d[61]),D=a(D,x,I,T,p,15,d[62]),T=a(T,D,x,I,b,21,d[63]),u[0]=u[0]+I|0,u[1]=u[1]+T|0,u[2]=u[2]+D|0,u[3]=u[3]+x|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var a=t.floor(r/4294967296),i=r;n[(o+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process();for(var l=this._hash,s=l.words,u=0;u<4;u++){var c=s[u];s[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return l},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}});i.MD5=u._createHelper(m),i.HmacMD5=u._createHmacHelper(m)})(Math),(function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,i=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],l=n[3],s=n[4],u=0;u<80;u++){if(u<16)i[u]=0|e[t+u];else{var c=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=c<<1|c>>>31}var d=(r<<5|r>>>27)+s+i[u];d+=u<20?(o&a|~o&l)+1518500249:u<40?(o^a^l)+1859775393:u<60?(o&a|o&l|a&l)-1894007588:(o^a^l)-899497514,s=l,l=a,a=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+l|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(l),t.HmacSHA1=o._createHmacHelper(l)})(),(function(t){var n=e,r=n.lib,o=r.WordArray,a=r.Hasher,i=n.algo,l=[],s=[];(function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(l[o]=n(t.pow(r,.5))),s[o]=n(t.pow(r,1/3)),o++),r++})();var u=[],c=i.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],i=n[3],l=n[4],c=n[5],d=n[6],m=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var _=u[p-15],f=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,g=u[p-2],h=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[p]=f+u[p-7]+h+u[p-16]}var y=l&c^~l&d,C=r&o^r&a^o&a,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),S=m+v+y+s[p]+u[p],R=b+C;m=d,d=c,c=l,l=i+S|0,i=a,a=o,o=r,r=S+R|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+d|0,n[7]=n[7]+m|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=a._createHelper(c),n.HmacSHA256=a._createHmacHelper(c)})(Math),(function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var n=e,r=n.lib,o=r.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},a.Utf16LE={stringify:function(e){for(var n=e.words,r=e.sigBytes,o=[],a=0;a<r;a+=2){var i=t(n[a>>>2]>>>16-a%4*8&65535);o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var n=e.length,r=[],a=0;a<n;a++)r[a>>>1]|=t(e.charCodeAt(a)<<16-a%2*16);return o.create(r,2*n)}}})(),(function(){if(typeof ArrayBuffer=="function"){var t=e,n=t.lib,r=n.WordArray,o=r.init,a=r.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||typeof Uint8ClampedArray!="undefined"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)};a.prototype=r}})(),(function(t){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function o(e,t,n){return(e|~t)^n}function a(e,t,n){return e&n|t&~n}function i(e,t,n){return e^(t|~n)}function l(e,t){return e<<t|e>>>32-t}var s=e,u=s.lib,c=u.WordArray,d=u.Hasher,m=s.algo,p=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=c.create([0,1518500249,1859775393,2400959708,2840853838]),y=c.create([1352829926,1548603684,1836072691,2053994217,0]),C=m.RIPEMD160=d.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var u=t+s,c=e[u];e[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var d,m,C,b,v,S,R,L,E,k,I=this._hash.words,T=h.words,D=y.words,x=p.words,$=_.words,P=f.words,N=g.words;S=d=I[0],R=m=I[1],L=C=I[2],E=b=I[3],k=v=I[4];for(var M,s=0;s<80;s+=1)M=d+e[t+x[s]]|0,M+=s<16?n(m,C,b)+T[0]:s<32?r(m,C,b)+T[1]:s<48?o(m,C,b)+T[2]:s<64?a(m,C,b)+T[3]:i(m,C,b)+T[4],M|=0,M=l(M,P[s]),M=M+v|0,d=v,v=b,b=l(C,10),C=m,m=M,M=S+e[t+$[s]]|0,M+=s<16?i(R,L,E)+D[0]:s<32?a(R,L,E)+D[1]:s<48?o(R,L,E)+D[2]:s<64?r(R,L,E)+D[3]:n(R,L,E)+D[4],M|=0,M=l(M,N[s]),M=M+k|0,S=k,k=E,E=l(L,10),L=R,R=M;M=I[1]+C+E|0,I[1]=I[2]+b+k|0,I[2]=I[3]+v+S|0,I[3]=I[4]+d+R|0,I[4]=I[0]+m+L|0,I[0]=M},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,a=o.words,i=0;i<5;i++){var l=a[i];a[i]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return o},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}});s.RIPEMD160=d._createHelper(C),s.HmacRIPEMD160=d._createHmacHelper(C)})(Math),(function(){var t=e,n=t.lib,r=n.Base,o=t.enc,a=o.Utf8,i=t.algo;i.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,typeof t=="string"&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),l=o.words,s=i.words,u=0;u<n;u++)l[u]^=1549556828,s[u]^=909522486;o.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})})(),(function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,a=t.algo,i=a.SHA1,l=a.HMAC,s=a.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=l.create(n.hasher,e),a=o.create(),i=o.create([1]),s=a.words,u=i.words,c=n.keySize,d=n.iterations;s.length<c;){var m=r.update(t).finalize(i);r.reset();for(var p=m.words,_=p.length,f=m,g=1;g<d;g++){f=r.finalize(f),r.reset();for(var h=f.words,y=0;y<_;y++)p[y]^=h[y]}a.concat(m),u[0]++}return a.sigBytes=4*c,a}});t.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}})(),(function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,a=t.algo,i=a.MD5,l=a.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),a=o.create(),i=a.words,l=n.keySize,s=n.iterations;i.length<l;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var c=1;c<s;c++)u=r.finalize(u),r.reset();a.concat(u)}return a.sigBytes=4*l,a}});t.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)}})(),(function(){var t=e,n=t.lib,r=n.WordArray,o=t.algo,a=o.SHA256,i=o.SHA224=a.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=a._createHelper(i),t.HmacSHA224=a._createHmacHelper(i)})(),(function(t){var n=e,r=n.lib,o=r.Base,a=r.WordArray,i=n.x64={};i.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})})(),(function(t){var n=e,r=n.lib,o=r.WordArray,a=r.Hasher,i=n.x64,l=i.Word,s=n.algo,u=[],c=[],d=[];(function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,o=(2*e+3*t)%5;e=r,t=o}for(var e=0;e<5;e++)for(var t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,i=0;i<24;i++){for(var s=0,m=0,p=0;p<7;p++){if(1&a){var _=(1<<p)-1;_<32?m^=1<<_:s^=1<<_-32}128&a?a=a<<1^113:a<<=1}d[i]=l.create(s,m)}})();var m=[];(function(){for(var e=0;e<25;e++)m[e]=l.create()})();var p=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var a=e[t+2*o],i=e[t+2*o+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);var l=n[o];l.high^=i,l.low^=a}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var _=0,f=0,g=0;g<5;g++){var l=n[p+5*g];_^=l.high,f^=l.low}var h=m[p];h.high=_,h.low=f}for(var p=0;p<5;p++)for(var y=m[(p+4)%5],C=m[(p+1)%5],b=C.high,v=C.low,_=y.high^(b<<1|v>>>31),f=y.low^(v<<1|b>>>31),g=0;g<5;g++){var l=n[p+5*g];l.high^=_,l.low^=f}for(var S=1;S<25;S++){var l=n[S],R=l.high,L=l.low,E=u[S];if(E<32)var _=R<<E|L>>>32-E,f=L<<E|R>>>32-E;else var _=L<<E-32|R>>>64-E,f=R<<E-32|L>>>64-E;var k=m[c[S]];k.high=_,k.low=f}var I=m[0],T=n[0];I.high=T.high,I.low=T.low;for(var p=0;p<5;p++)for(var g=0;g<5;g++){var S=p+5*g,l=n[S],D=m[S],x=m[(p+1)%5+5*g],$=m[(p+2)%5+5*g];l.high=D.high^~x.high&$.high,l.low=D.low^~x.low&$.low}var l=n[0],P=d[s];l.high^=P.high,l.low^=P.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(8*this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var i=this._state,l=this.cfg.outputLength/8,s=l/8,u=[],c=0;c<s;c++){var d=i[c],m=d.high,p=d.low;m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u.push(p),u.push(m)}return new o.init(u,l)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=a._createHelper(p),n.HmacSHA3=a._createHmacHelper(p)})(Math),(function(){function t(){return i.create.apply(i,arguments)}var n=e,r=n.lib,o=r.Hasher,a=n.x64,i=a.Word,l=a.WordArray,s=n.algo,u=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],c=[];(function(){for(var e=0;e<80;e++)c[e]=t()})();var d=s.SHA512=o.extend({_doReset:function(){this._hash=new l.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],i=n[3],l=n[4],s=n[5],d=n[6],m=n[7],p=r.high,_=r.low,f=o.high,g=o.low,h=a.high,y=a.low,C=i.high,b=i.low,v=l.high,S=l.low,R=s.high,L=s.low,E=d.high,k=d.low,I=m.high,T=m.low,D=p,x=_,$=f,P=g,N=h,M=y,w=C,A=b,F=v,O=S,B=R,W=L,q=E,U=k,V=I,H=T,G=0;G<80;G++){var z=c[G];if(G<16)var j=z.high=0|e[t+2*G],K=z.low=0|e[t+2*G+1];else{var Q=c[G-15],X=Q.high,Y=Q.low,J=(X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7,Z=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25),ee=c[G-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ae=c[G-7],ie=ae.high,le=ae.low,se=c[G-16],ue=se.high,ce=se.low,K=Z+le,j=J+ie+(K>>>0<Z>>>0?1:0),K=K+oe,j=j+re+(K>>>0<oe>>>0?1:0),K=K+ce,j=j+ue+(K>>>0<ce>>>0?1:0);z.high=j,z.low=K}var de=F&B^~F&q,me=O&W^~O&U,pe=D&$^D&N^$&N,_e=x&P^x&M^P&M,fe=(D>>>28|x<<4)^(D<<30|x>>>2)^(D<<25|x>>>7),ge=(x>>>28|D<<4)^(x<<30|D>>>2)^(x<<25|D>>>7),he=(F>>>14|O<<18)^(F>>>18|O<<14)^(F<<23|O>>>9),ye=(O>>>14|F<<18)^(O>>>18|F<<14)^(O<<23|F>>>9),Ce=u[G],be=Ce.high,ve=Ce.low,Se=H+ye,Re=V+he+(Se>>>0<H>>>0?1:0),Se=Se+me,Re=Re+de+(Se>>>0<me>>>0?1:0),Se=Se+ve,Re=Re+be+(Se>>>0<ve>>>0?1:0),Se=Se+K,Re=Re+j+(Se>>>0<K>>>0?1:0),Le=ge+_e,Ee=fe+pe+(Le>>>0<ge>>>0?1:0);V=q,H=U,q=B,U=W,B=F,W=O,O=A+Se|0,F=w+Re+(O>>>0<A>>>0?1:0)|0,w=N,A=M,N=$,M=P,$=D,P=x,x=Se+Le|0,D=Re+Ee+(x>>>0<Se>>>0?1:0)|0}_=r.low=_+x,r.high=p+D+(_>>>0<x>>>0?1:0),g=o.low=g+P,o.high=f+$+(g>>>0<P>>>0?1:0),y=a.low=y+M,a.high=h+N+(y>>>0<M>>>0?1:0),b=i.low=b+A,i.high=C+w+(b>>>0<A>>>0?1:0),S=l.low=S+O,l.high=v+F+(S>>>0<O>>>0?1:0),L=s.low=L+W,s.high=R+B+(L>>>0<W>>>0?1:0),k=d.low=k+U,d.high=E+q+(k>>>0<U>>>0?1:0),T=m.low=T+H,m.high=I+V+(T>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),t[(r+128>>>10<<5)+31]=n,e.sigBytes=4*t.length,this._process();var o=this._hash.toX32();return o},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});n.SHA512=o._createHelper(d),n.HmacSHA512=o._createHmacHelper(d)})(),(function(){var t=e,n=t.x64,r=n.Word,o=n.WordArray,a=t.algo,i=a.SHA512,l=a.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=i._createHelper(l),t.HmacSHA384=i._createHmacHelper(l)})(),e.lib.Cipher||(function(t){var n=e,r=n.lib,o=r.Base,a=r.WordArray,i=r.BufferedBlockAlgorithm,l=n.enc,s=(l.Utf8,l.Base64),u=n.algo,c=u.EvpKDF,d=r.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function e(e){return typeof e=="string"?R:b}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}})()}),m=(r.StreamCipher=d.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),n.mode={}),p=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),_=m.CBC=(function(){function e(e,n,r){var o=this._iv;if(o){var a=o;this._iv=t}else var a=this._prevBlock;for(var i=0;i<r;i++)e[n+i]^=a[i]}var n=p.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize;e.call(this,t,n,o),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize,a=t.slice(n,n+o);r.decryptBlock(t,n),e.call(this,t,n,o),this._prevBlock=a}}),n})(),f=n.pad={},g=f.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],l=0;l<r;l+=4)i.push(o);var s=a.create(i,r);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h=(r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:_,padding:g}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=n.format={},C=y.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=a.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(s)},parse:function(e){var t=s.parse(e),n=t.words;if(n[0]==1398893684&&n[1]==1701076831){var r=a.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:r})}},b=r.SerializableCipher=o.extend({cfg:o.extend({format:C}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),a=o.finalize(t),i=o.cfg;return h.create({ciphertext:a,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=e.createDecryptor(n,r).finalize(t.ciphertext);return o},_parse:function(e,t){return typeof e=="string"?t.parse(e,this):e}}),v=n.kdf={},S=v.OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var o=c.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,h.create({key:o,iv:i,salt:r})}},R=r.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:S}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=o.iv;var a=b.encrypt.call(this,e,t,o.key,r);return a.mixIn(o),a},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=o.iv;var a=b.decrypt.call(this,e,t,o.key,r);return a}})})(),e.mode.CFB=(function(){function t(e,t,n,r){var o=this._iv;if(o){var a=o.slice(0);this._iv=void 0}else var a=this._prevBlock;r.encryptBlock(a,0);for(var i=0;i<n;i++)e[t+i]^=a[i]}var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o,r),this._prevBlock=e.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,a=e.slice(n,n+o);t.call(this,e,n,o,r),this._prevBlock=a}}),n})(),e.mode.ECB=(function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t})(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,n){var r=4*n,o=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=(function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._keystream;o&&(a=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var i=0;i<r;i++)e[t+i]^=a[i]}});return t.Decryptor=n,t})(),e.pad.NoPadding={pad:function(){},unpad:function(){}},(function(t){var n=e,r=n.lib,o=r.CipherParams,a=n.enc,i=a.Hex,l=n.format;l.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return o.create({ciphertext:t})}}})(),(function(){var t=e,n=t.lib,r=n.BlockCipher,o=t.algo,a=[],i=[],l=[],s=[],u=[],c=[],d=[],m=[],p=[],_=[];(function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var n=0,r=0,t=0;t<256;t++){var o=r^r<<1^r<<2^r<<3^r<<4;o=o>>>8^255&o^99,a[n]=o,i[o]=n;var f=e[n],g=e[f],h=e[g],y=257*e[o]^16843008*o;l[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,c[n]=y;var y=16843009*h^65537*g^257*f^16843008*n;d[o]=y<<24|y>>>8,m[o]=y<<16|y>>>16,p[o]=y<<8|y>>>24,_[o]=y,n?(n=f^e[e[e[h^f]]],r^=e[e[r]]):n=r=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,o=4*(r+1),i=this._keySchedule=[],l=0;l<o;l++)if(l<n)i[l]=t[l];else{var s=i[l-1];l%n?n>6&&l%n==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=s<<8|s>>>24,s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=f[l/n|0]<<24),i[l]=i[l-n]^s}for(var u=this._invKeySchedule=[],c=0;c<o;c++){var l=o-c;if(c%4)var s=i[l];else var s=i[l-4];c<4||l<=4?u[c]=s:u[c]=d[a[s>>>24]]^m[a[s>>>16&255]]^p[a[s>>>8&255]]^_[a[255&s]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,l,s,u,c,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,m,p,_,i);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,a,i,l){for(var s=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],m=e[t+3]^n[3],p=4,_=1;_<s;_++){var f=r[u>>>24]^o[c>>>16&255]^a[d>>>8&255]^i[255&m]^n[p++],g=r[c>>>24]^o[d>>>16&255]^a[m>>>8&255]^i[255&u]^n[p++],h=r[d>>>24]^o[m>>>16&255]^a[u>>>8&255]^i[255&c]^n[p++],y=r[m>>>24]^o[u>>>16&255]^a[c>>>8&255]^i[255&d]^n[p++];u=f,c=g,d=h,m=y}var f=(l[u>>>24]<<24|l[c>>>16&255]<<16|l[d>>>8&255]<<8|l[255&m])^n[p++],g=(l[c>>>24]<<24|l[d>>>16&255]<<16|l[m>>>8&255]<<8|l[255&u])^n[p++],h=(l[d>>>24]<<24|l[m>>>16&255]<<16|l[u>>>8&255]<<8|l[255&c])^n[p++],y=(l[m>>>24]<<24|l[u>>>16&255]<<16|l[c>>>8&255]<<8|l[255&d])^n[p++];e[t]=f,e[t+1]=g,e[t+2]=h,e[t+3]=y},keySize:8});t.AES=r._createHelper(g)})(),(function(){function t(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function n(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var r=e,o=r.lib,a=o.WordArray,i=o.BlockCipher,l=r.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=l.DES=i.extend({_doReset:function(){for(var e=this._key,t=e.words,n=[],r=0;r<56;r++){var o=s[r]-1;n[r]=t[o>>>5]>>>31-o%32&1}for(var a=this._subKeys=[],i=0;i<16;i++){for(var l=a[i]=[],d=c[i],r=0;r<24;r++)l[r/6|0]|=n[(u[r]-1+d)%28]<<31-r%6,l[4+(r/6|0)]|=n[28+(u[r+24]-1+d)%28]<<31-r%6;l[0]=l[0]<<1|l[0]>>>31;for(var r=1;r<7;r++)l[r]=l[r]>>>4*(r-1)+3;l[7]=l[7]<<5|l[7]>>>27}for(var m=this._invSubKeys=[],r=0;r<16;r++)m[r]=a[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,r,o){this._lBlock=e[r],this._rBlock=e[r+1],t.call(this,4,252645135),t.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),t.call(this,1,1431655765);for(var a=0;a<16;a++){for(var i=o[a],l=this._lBlock,s=this._rBlock,u=0,c=0;c<8;c++)u|=d[c][((s^i[c])&m[c])>>>0];this._lBlock=s,this._rBlock=l^u}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,t.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[r]=this._lBlock,e[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=i._createHelper(p);var _=l.TripleDES=i.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=p.createEncryptor(a.create(t.slice(0,2))),this._des2=p.createEncryptor(a.create(t.slice(2,4))),this._des3=p.createEncryptor(a.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});r.TripleDES=i._createHelper(_)})(),(function(){function t(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){t=(t+1)%256,n=(n+e[t])%256;var a=e[t];e[t]=e[n],e[n]=a,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}var n=e,r=n.lib,o=r.StreamCipher,a=n.algo,i=a.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;for(var o=0,a=0;o<256;o++){var i=o%n,l=t[i>>>2]>>>24-i%4*8&255;a=(a+r[o]+l)%256;var s=r[o];r[o]=r[a],r[a]=s}this._i=this._j=0},_doProcessBlock:function(e,n){e[n]^=t.call(this)},keySize:8,ivSize:0});n.RC4=o._createHelper(i);var l=a.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});n.RC4Drop=o._createHelper(l)})(),e.mode.CTRGladman=(function(){function t(e){if((e>>24&255)===255){var t=e>>16&255,n=e>>8&255,r=255&e;t===255?(t=0,n===255?(n=0,r===255?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return(e[0]=t(e[0]))===0&&(e[1]=t(e[1])),e}var r=e.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0),n(i);var l=i.slice(0);r.encryptBlock(l,0);for(var s=0;s<o;s++)e[t+s]^=l[s]}});return r.Decryptor=o,r})(),(function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)l[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16,i=((o*o>>>17)+o*a>>>15)+a*a,u=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=i^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n=e,r=n.lib,o=r.StreamCipher,a=n.algo,i=[],l=[],s=[],u=a.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,n=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)t.call(this);for(var r=0;r<8;r++)a[r]^=o[r+4&7];if(n){var i=n.words,l=i[0],s=i[1],u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=u>>>16|4294901760&c,m=c<<16|65535&u;a[0]^=u,a[1]^=d,a[2]^=c,a[3]^=m,a[4]^=u,a[5]^=d,a[6]^=c,a[7]^=m;for(var r=0;r<4;r++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var o=0;o<4;o++)i[o]=16711935&(i[o]<<8|i[o]>>>24)|4278255360&(i[o]<<24|i[o]>>>8),e[n+o]^=i[o]},blockSize:4,ivSize:2});n.Rabbit=o._createHelper(u)})(),e.mode.CTR=(function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0);var i=a.slice(0);n.encryptBlock(i,0),a[r-1]=a[r-1]+1|0;for(var l=0;l<r;l++)e[t+l]^=i[l]}});return t.Decryptor=n,t})(),(function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)l[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16,i=((o*o>>>17)+o*a>>>15)+a*a,u=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=i^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n=e,r=n.lib,o=r.StreamCipher,a=n.algo,i=[],l=[],s=[],u=a.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,n=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)t.call(this);for(var a=0;a<8;a++)o[a]^=r[a+4&7];if(n){var i=n.words,l=i[0],s=i[1],u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=u>>>16|4294901760&c,m=c<<16|65535&u;o[0]^=u,o[1]^=d,o[2]^=c,o[3]^=m,o[4]^=u,o[5]^=d,o[6]^=c,o[7]^=m;for(var a=0;a<4;a++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var o=0;o<4;o++)i[o]=16711935&(i[o]<<8|i[o]>>>24)|4278255360&(i[o]<<24|i[o]>>>8),e[n+o]^=i[o]},blockSize:4,ivSize:2});n.RabbitLegacy=o._createHelper(u)})(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e})}),null);
__d("MediaUploadFBCryptoJSHasher",["CryptoJS","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}var s=(function(){function e(e,t){var n=t.currentTimeProvider;this.$2=e,this.$1=n}var t=e.prototype;return t.$3=function(){switch(this.$2.hashingAlgorithm){case"sha256":return r("CryptoJS").algo.SHA256;case"md5":return r("CryptoJS").algo.MD5;default:return null}},t.$4=function(){switch(this.$2.outputEncoding){case"base64":return r("CryptoJS").enc.Base64;case"hex":return r("CryptoJS").enc.Hex;default:return null}},t.$5=function(t,n,r){return new Promise(function(e){var o=new FileReader;o.onload=function(){o.result instanceof ArrayBuffer?e({isSuccess:!0,data:o.result}):e({isSuccess:!1,rawErrorCode:"INVALID_TYPE_FILE_READER"})},o.onerror=function(){var t;e({isSuccess:!1,rawErrorCode:(t=o.error)==null?void 0:t.name})},o.readAsArrayBuffer(t.slice(n,n+r))})},t.$6=async function(t,n){for(var e=this.$2.takeFirstBytes==null?t.size:Math.min(this.$2.takeFirstBytes,t.size),o=0;o<e;){var a=Math.min(this.$2.maxChunkSize,e-o),i=await this.$5(t,o,a);if(i.isSuccess)n.update(r("CryptoJS").lib.WordArray.create(i.data));else return i;o+=a}return null},t.hash=async function(t){if(this.$2.maxFileSize!=null&&t.size>this.$2.maxFileSize)return{outcome:"FILE_TOO_LARGE"};var e=this.$3();if(e==null)return{outcome:"FAILURE",rawErrorCode:"INVALID_ALGORITHM"};var n=this.$4();if(n==null)return{outcome:"FAILURE",rawErrorCode:"UNSUPPORTED_OUTPUT_ENCODING"};var r=this.$1(),a=e.create();try{var i=await this.$6(t,a);if(i==null||i.isSuccess)return{outcome:"SUCCESS",value:{algorithm:this.$2.hashingAlgorithm,hashValue:a.finalize().toString(n),encoding:this.$2.outputEncoding,calculationTimeCost:o("MediaUploadTime").subtractTime(this.$1(),r)}};var l;return{outcome:"FAILURE",rawErrorCode:(l=i==null?void 0:i.rawErrorCode)!=null?l:"INTERNAL_ERROR",rawErrorObject:i==null?void 0:i.rawErrorObject}}catch(e){return{outcome:"FAILURE",rawErrorCode:"INTERNAL_ERROR",rawErrorObject:e}}},e})();l.default=s}),98);
__d("ResumableUploadServiceComet",["CometAsyncFetchError","ConstUriUtils","EventEmitter","Promise","ResumableUploadServiceState.enum","cometAsyncFetch","isStringNullOrEmpty","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rupload",u="facebook.com",c=(function(t){function a(e,n,o,a,i,l,c,d,m,p,_,f,g){var h;return h=t.call(this)||this,h.returnFullResponseToClient=!1,h.$ResumableUploadServiceComet$p_1=!1,h.consumer=e,h.accessToken=n,h.sessionKey=r("isStringNullOrEmpty")(o)?r("uuidv4")():o,h.contentKey=a||"",h.contentValue=i||"",h.serviceName=r("isStringNullOrEmpty")(l)?s:l,h.serviceDomain=r("isStringNullOrEmpty")(c)?u:c,h.receiveParameters=d,h.skipOffsetFetching=m,h.thriftParams=p!=null?p:new Map,h.tracingHeaderValue=_,h.customHttpHeaders=f!=null?f:new Map,h.returnFullResponseToClient=g!=null?g:!1,h.$ResumableUploadServiceComet$p_1=!1,h}babelHelpers.inheritsLoose(a,t),a.create=function(t){return new a(t.consumer,null,t.sessionKey||"",t.contentKey,t.contentValue,t.serviceName,t.serviceDomain,t.receiveParameters,t.skipOffsetFetching,t.thriftParams,t.tracingHeaderValue,t.customHttpHeaders,t.returnFullResponseToClient)};var i=a.prototype;return i.$ResumableUploadServiceComet$p_2=function(){var e,t,n={};if(((e=this.receiveParameters)==null?void 0:e.xpv_asset_id)!=null){var r;n.xpv_asset_id=String((r=this.receiveParameters)==null?void 0:r.xpv_asset_id)}if(((t=this.receiveParameters)==null?void 0:t.is_xpv_single_prod)!=null){var o;n.is_xpv_single_prod=String((o=this.receiveParameters)==null?void 0:o.is_xpv_single_prod)}return n},i.resume=function(a){var t=this;this.$ResumableUploadServiceComet$p_1=!1;var i=this.getServiceName(),l=o("ConstUriUtils").getUri("https://"+i+"/"+this.consumer+"/"+this.sessionKey);if(l!=null&&this.contentKey&&this.contentValue&&(l=l.addQueryParam(this.contentKey,this.contentValue)),l==null){var s=new Error("ResumableUploadService: Invalid uploadURI");throw s.stack,s}var u=l.toString(),c=function(){return r("cometAsyncFetch")(u,{data:{},getFullPayload:!0,method:"GET",requestHeaders:t.$ResumableUploadServiceComet$p_2(),withCredentials:!0})},d=function(n){var e=0;typeof n=="object"&&n!=null&&typeof n.offset=="number"&&(e=n.offset),t.emit(r("ResumableUploadServiceState.enum").START,{offset:e,sessionKey:t.sessionKey});var o=t.$ResumableUploadServiceComet$p_2();if(o["X-Entity-Name"]=encodeURIComponent(a.name),o["X-Entity-Type"]=a.type,o["X-Entity-Length"]=String(a.size),o.Offset=String(e),t.receiveParameters){var i=t.receiveParameters;o.start_offset=String(i.start_offset),o.end_offset=String(i.end_offset),o.composer_session_id=String(i.composer_session_id),o.id=String(i.upload_session_id),o.product_media_id=String(i.product_media_id),i.fb_region!=null&&(o["X-FB-Region"]=String(i.fb_region)),i.total_file_size!=null&&(o["X-Total-Asset-Size"]=String(i.total_file_size))}if(t.thriftParams.size>0&&(o["X-Thrift-Params"]=JSON.stringify(Object.fromEntries(t.thriftParams.entries()))),t.tracingHeaderValue!=null&&(o["x-fb-product-log"]=t.tracingHeaderValue),t.customHttpHeaders.size>0)for(var l of t.customHttpHeaders){var s=l[0],c=l[1];o[s]=c}var d=new AbortController;t.abortController=d;var m=function(o){var n=new ProgressEvent("upload-service",{loaded:o.loadedBytes+Number(e),total:a.size});t.emit(r("ResumableUploadServiceState.enum").PROGRESS,n)};return r("cometAsyncFetch")(u,{abortSignal:d.signal,data:{},formData:a.slice(e),getFullPayload:!0,method:"POST",onUploadProgress:m,requestHeaders:o,withCredentials:!0})},m=function(n){if(n==null){t.emit(r("ResumableUploadServiceState.enum").FAIL,"uploading failed");return}t.returnFullResponseToClient||n.h==null?t.emit(r("ResumableUploadServiceState.enum").SUCCESS,n):t.emit(r("ResumableUploadServiceState.enum").SUCCESS,n.h)},p=function(n){if(t.$ResumableUploadServiceComet$p_1!==!0)if(n instanceof r("CometAsyncFetchError")){var e={getError:function(){return n.errorCode},getErrorDescription:function(){return n.errorMsg},getErrorDescriptionString:function(){return n.errorMsg},getErrorIsWarning:function(){return!1},getErrorSummary:function(){return n.errorType},getPayload:function(){return null},getRequest:function(){return null},getResponseHeader:function(){return n.errorRawResponseHeaders},isBlockedAction:function(){return!1},isSilent:function(){return!1},isTransient:function(){return!0},toError:function(){return n}};t.emit(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,e,{method:"POST",offset:0})}else t.emit(r("ResumableUploadServiceState.enum").FAIL,n)},_=this.skipOffsetFetching==!0?(e||(e=n("Promise"))).resolve():c();return _.then(d,p).then(m,p)},i.getServiceName=function(){return this.serviceName+"."+this.serviceDomain},i.cancel=function(){this.$ResumableUploadServiceComet$p_1=!0,this.abortController&&this.abortController.abort(),this.emit(r("ResumableUploadServiceState.enum").CANCEL)},i.emitFileSizeWarning=function(t){this.emit(r("ResumableUploadServiceState.enum").FILE_TOO_LARGE,t)},a})(r("EventEmitter"));l.default=c}),98);
__d("VideoUploadCallbacksMixin",[],(function(t,n,r,o,a,i){"use strict";function e(e){return Array.isArray(e)?e:[e]}var l={inform:function(n,r){var t=this.__callbacksByType;if(t!=null){var o=e(n);o.forEach(function(e){var n=t[e];n!=null&&n.forEach(function(t){try{t(e,r)}catch(e){}})})}},subscribe:function(n,r){var t,o=this.__callbacksByType=(t=this.__callbacksByType)!=null?t:{},a=e(n);a.forEach(function(e){var t,n=o[e]=(t=o[e])!=null?t:[];n.push(r)});var i=!1;return{remove:function(){i!==!0&&(i=!0,a.forEach(function(e){var t=o[e];if(t!=null){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length===0&&delete o[e]}}))}}}};a.exports=l}),null);
__d("VideoUploadLoggingConfigJSModuleWrapper",["VideoUploadLoggingConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoUploadLoggingConfig")}),98);
__d("getComposerUnsavedChangesAlert",["fbt","CometComposerDirtyTracker"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return{primaryAction:function(n,r){o("CometComposerDirtyTracker").setIsComposerDirty(e.creationSessionID,!1),r()},primaryButtonLabel:s._(/*BTDS*/"Leave"),secondaryButtonLabel:s._(/*BTDS*/"Keep editing"),title:s._(/*BTDS*/"Leave Page?"),warnMessage:s._(/*BTDS*/"You haven't finished your post yet. Do you want to leave without finishing?")}}l.default=e}),226);
__d("useComposerTerminalEventLog",["RunComet","cometComposerLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(6),a;n[0]!==t||n[1]!==e?(a=function(){if(e()){var n=t();n!=null&&r("cometComposerLogger")({fields:{terminalReason:"shutdown"},type:"COMPOSER_POST_TERMINAL"},n)}},n[0]=t,n[1]=e,n[2]=a):a=n[2];var i=a,l,s;n[3]!==i?(l=function(){var e=o("RunComet").onUnload(i);return(function(){e&&e.remove()})},s=[i],n[3]=i,n[4]=l,n[5]=s):(l=n[4],s=n[5]),c(l,s)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("CometComposerNodes",["CometLexicalDelightNode","CometLexicalEmojiNode","CometLexicalGenericEntityNode","LexicalHashtag","LexicalLink","LexicalOverflow"],(function(t,n,r,o,a,i,l){"use strict";var e=[o("CometLexicalGenericEntityNode").CometLexicalGenericEntityNode,o("CometLexicalEmojiNode").EmojiNode,o("LexicalLink").LinkNode,o("LexicalLink").AutoLinkNode,o("LexicalHashtag").HashtagNode,o("LexicalOverflow").OverflowNode,o("CometLexicalDelightNode").CometLexicalDelightNode];l.COMET_NODES=e}),98);
__d("FeedComposerCometTextStyleContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({color:"primary-text",fontSize:24});l.default=u}),98);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<d308009578de695364cdebcc5b10f166>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("Lexical.prod",[],(function $module_Lexical_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _P,_L;function t(t){var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",t);for(var _len=arguments.length,e=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){e[_key-1]=arguments[_key];}for(var _t2 of e)r.append("v",_t2);throw n.search=r.toString(),Error("Minified Lexical error #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function e(t){for(var _len2=arguments.length,e=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){e[_key2-1]=arguments[_key2];}var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",t);for(var _t3 of e)r.append("v",_t3);n.search=r.toString(),console.warn("Minified Lexical warning #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,r=n&&"documentMode"in document?document.documentMode:null,o=n&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),i=n&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),s=!(!n||!("InputEvent"in window)||r)&&"getTargetRanges"in new window.InputEvent("input"),l=n&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),c=n&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=n&&/Android/.test(navigator.userAgent),u=n&&/^(?=.*Chrome).*/i.test(navigator.userAgent),f=n&&a&&u,d=n&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&o&&!u,h=0,g=1,_=2,p=128,y=1,m=2,x=3,C=4,S=5,N=6,T=l||c||d?"":"",v="\n\n",k=i?"":T,E="---",O="A-Za-z--------",b=new RegExp("^[^"+O+"]*["+E+"]"),M=new RegExp("^[^"+E+"]*["+O+"]"),A={bold:1,capitalize:1024,code:16,highlight:p,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},w={directionless:1,unmergeable:2},D={center:2,end:6,justify:4,left:1,right:3,start:5},P=(_P={},_P[m]="center",_P[N]="end",_P[C]="justify",_P[y]="left",_P[x]="right",_P[S]="start",_P),I={normal:0,segmented:2,token:1},L=(_L={},_L[h]="normal",_L[_]="segmented",_L[g]="token",_L),F="$config";function R(t,e,n,r,o,i){var s=t.getFirstChild();for(;null!==s;){var _t4=s.__key;s.__parent===e&&(lo(s)&&R(s,_t4,n,r,o,i),n.has(_t4)||i["delete"](_t4),o.push(_t4)),s=s.getNextSibling();}}var K=!1,B=0;function z(t){B=t.timeStamp;}function W(t,e,n){var r="BR"===t.nodeName,o=e.__lexicalLineBreak;return o&&(t===o||r&&t.previousSibling===o)||r&&void 0!==Qo(t,n);}function $(t,e,n){var r=$i(Pi(n));var o=null,i=null;null!==r&&r.anchorNode===t&&(o=r.anchorOffset,i=r.focusOffset);var s=t.nodeValue;null!==s&&fi(e,s,o,i,!1);}function U(t,e,n){if(cr(t)){var _e2=t.anchor.getNode();if(_e2.is(n)&&t.format!==_e2.getFormat())return!1;}return Wo(e)&&n.isAttached();}function J(t,e,n,r){for(var _o2=t;_o2&&!ns(_o2);_o2=Oi(_o2)){var _t5=Qo(_o2,e);if(void 0!==_t5){var _e3=qo(_t5,n);if(_e3)return uo(_e3)||!Ji(_o2)?void 0:[_o2,_e3];}else if(_o2===r)return[r,ri(n)];}}function Y(t,e,n){K=!0;var r=performance.now()-B>100;try{ro(t,function(){var o=vr()||function(t){return t.getEditorState().read(function(){var t=vr();return null!==t?t.clone():null;});}(t),s=new Map(),l=t.getRootElement(),c=t._editorState,a=t._blockCursorElement;var u=!1,f="";for(var _n2=0;_n2<e.length;_n2++){var _d=e[_n2],_h=_d.type,_g=_d.target,_2=J(_g,t,c,l);if(!_2)continue;var _p=_2[0],_y=_2[1];if("characterData"===_h)r&&Qn(_y)&&Wo(_g)&&U(o,_g,_y)&&$(_g,_y,t);else if("childList"===_h){u=!0;var _e4=_d.addedNodes;for(var _n3=0;_n3<_e4.length;_n3++){var _r2=_e4[_n3],_o3=Xo(_r2),_s2=_r2.parentNode;if(null!=_s2&&_r2!==a&&null===_o3&&!W(_r2,_s2,t)){if(i){var _t6=(Ji(_r2)?_r2.innerText:null)||_r2.nodeValue;_t6&&(f+=_t6);}_s2.removeChild(_r2);}}var _n4=_d.removedNodes,_r3=_n4.length;if(_r3>0){var _e5=0;for(var _o4=0;_o4<_r3;_o4++){var _r4=_n4[_o4];(W(_r4,_g,t)||a===_r4)&&(_g.appendChild(_r4),_e5++);}_r3!==_e5&&s.set(_p,_y);}}}if(s.size>0)for(var _ref2 of s){var _e6=_ref2[0];var _n5=_ref2[1];_n5.reconcileObservedMutation(_e6,t);}var d=n.takeRecords();if(d.length>0){for(var _e7=0;_e7<d.length;_e7++){var _n6=d[_e7],_r5=_n6.addedNodes,_o5=_n6.target;for(var _e8=0;_e8<_r5.length;_e8++){var _n7=_r5[_e8],_i2=_n7.parentNode;null==_i2||"BR"!==_n7.nodeName||W(_n7,_o5,t)||_i2.removeChild(_n7);}}n.takeRecords();}null!==o&&(u&&oi(o),i&&vi(t)&&o.insertRawText(f));});}finally{K=!1;}}function j(t){var e=t._observer;if(null!==e){Y(t,e.takeRecords(),e);}}function H(t){!function(t){0===B&&Pi(t).addEventListener("textInput",z,!0);}(t),t._observer=new MutationObserver(function(e,n){Y(t,e,n);});}var V=function V(t,e){this.key=t,this.parse=e.parse.bind(e),this.unparse=(e.unparse||et).bind(e),this.isEqual=(e.isEqual||Object.is).bind(e),this.defaultValue=this.parse(void 0);};function G(t,e,n){if(n===void 0){n="latest";}var r=("latest"===n?t.getLatest():t).__state;return r?r.getValue(e):e.defaultValue;}function q(t){var e=new Map(),n=new Set();for(var _r6="function"==typeof t?t:t.replace;_r6.prototype&&void 0!==_r6.prototype.getType;_r6=Object.getPrototypeOf(_r6)){var _os=os(_r6),_t7=_os.ownNodeConfig;if(_t7&&_t7.stateConfigs)for(var _r7 of _t7.stateConfigs){var _t8=void 0;"stateConfig"in _r7?(_t8=_r7.stateConfig,_r7.flat&&n.add(_t8.key)):_t8=_r7,e.set(_t8.key,_t8);}}return{flatKeys:n,sharedConfigMap:e};}var _X=function(){function X(t,e,n,r,o){if(n===void 0){n=void 0;}if(r===void 0){r=new Map();}if(o===void 0){o=void 0;}this.node=t,this.sharedNodeState=e,this.unknownState=n,this.knownState=r;var i=this.sharedNodeState.sharedConfigMap,s=void 0!==o?o:function(t,e,n){var r=n.size;if(e)for(var _o6 in e){var _e9=t.get(_o6);_e9&&n.has(_e9)||r++;}return r;}(i,n,r);this.size=s;}var _proto=X.prototype;_proto.getValue=function getValue(t){var e=this.knownState.get(t);if(void 0!==e)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);var n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){var _e0=this.unknownState[t.key];void 0!==_e0&&(n=t.parse(_e0)),this.updateFromKnown(t,n);}return n;};_proto.getInternalState=function getInternalState(){return[this.unknownState,this.knownState];};_proto.toJSON=function toJSON(){var t=babelHelpers["extends"]({},this.unknownState),e={};for(var _ref4 of this.knownState){var _e1=_ref4[0];var _n8=_ref4[1];_e1.isEqual(_n8,_e1.defaultValue)?delete t[_e1.key]:t[_e1.key]=_e1.unparse(_n8);}for(var _n9 of this.sharedNodeState.flatKeys)_n9 in t&&(e[_n9]=t[_n9],delete t[_n9]);return tt(t)&&(e.$=t),e;};_proto.getWritable=function getWritable(t){if(this.node===t)return this;var e=this.sharedNodeState,n=this.unknownState,r=new Map(this.knownState);return new X(t,e,function(t,e,n){var r;if(n)for(var _ref6 of Object.entries(n)){var _o7=_ref6[0];var _i3=_ref6[1];{var _n0=t.get(_o7);_n0?e.has(_n0)||e.set(_n0,_n0.parse(_i3)):(r=r||{},r[_o7]=_i3);}}return r;}(e.sharedConfigMap,r,n),r,this.size);};_proto.updateFromKnown=function updateFromKnown(t,e){var n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);var r=this.knownState,o=this.unknownState;r.has(t)||o&&n in o||(o&&(delete o[n],this.unknownState=tt(o)),this.size++),r.set(t,e);};_proto.updateFromUnknown=function updateFromUnknown(t,e){var n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e);};_proto.updateFromJSON=function updateFromJSON(t){var e=this.knownState;for(var _t9 of e.keys())e.set(_t9,_t9.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(var _ref8 of Object.entries(t)){var _e10=_ref8[0];var _n1=_ref8[1];this.updateFromUnknown(_e10,_n1);}};return X;}();function Q(t){var e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new _X(e,Z(e));return e.__state=n,n;}function Z(t){return t.__state?t.__state.sharedNodeState:Ao(qi(),t.getType()).sharedNodeState;}function tt(t){if(t)for(var _e11 in t)return t;}function et(t){return t;}function nt(t,e,n){for(var _ref0 of e.knownState){var _r8=_ref0[0];var _o8=_ref0[1];{if(t.has(_r8.key))continue;t.add(_r8.key);var _e12=n?n.getValue(_r8):_r8.defaultValue;if(_e12!==_o8&&!_r8.isEqual(_e12,_o8))return!0;}}return!1;}function rt(t,e,n){var r=e.unknownState,o=n?n.unknownState:void 0;if(r)for(var _ref10 of Object.entries(r)){var _e13=_ref10[0];var _n10=_ref10[1];if(t.has(_e13))continue;t.add(_e13);if(_n10!==(o?o[_e13]:void 0))return!0;}return!1;}function ot(t,e){var n=t.__state;return n&&n.node===t?n.getWritable(e):n;}function it(t,e){var n=t.__mode,r=t.__format,o=t.__style,i=e.__mode,s=e.__format,l=e.__style,c=t.__state,a=e.__state;return(null===n||n===i)&&(null===r||r===s)&&(null===o||o===l)&&(null===t.__state||c===a||function(t,e){if(t===e)return!0;if(t&&e&&t.size!==e.size)return!1;var n=new Set();return!(t&&nt(n,t,e)||e&&nt(n,e,t)||t&&rt(n,t,e)||e&&rt(n,e,t));}(c,a));}function st(t,e){var n=t.mergeWithSibling(e),r=Yr()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n;}function lt(t){var e,n,r=t;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(e=r.getPreviousSibling())&&Qn(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(""!==e.__text){if(it(e,r)){r=st(e,r);break;}break;}e.remove();}for(;null!==(n=r.getNextSibling())&&Qn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(it(r,n)){r=st(r,n);break;}break;}n.remove();}}else r.remove();}function ct(t){return at(t.anchor),at(t.focus),t;}function at(t){for(;"element"===t.type;){var _e14=t.getNode(),_n11=t.offset;var _r9=void 0,_o9=void 0;if(_n11===_e14.getChildrenSize()?(_r9=_e14.getChildAtIndex(_n11-1),_o9=!0):(_r9=_e14.getChildAtIndex(_n11),_o9=!1),Qn(_r9)){t.set(_r9.__key,_o9?_r9.getTextContentSize():0,"text",!0);break;}if(!lo(_r9))break;t.set(_r9.__key,_o9?_r9.getChildrenSize():0,"element",!0);}}var ut,ft,dt,ht,gt,_t,pt,yt,mt,xt,Ct="",St=null,Nt=null,Tt=!1,vt=!1;function kt(t,e){var n=pt.get(t);if(null!==e){var _n12=Ut(t);_n12.parentNode===e&&e.removeChild(_n12);}if(yt.has(t)||ft._keyToDOMMap["delete"](t),lo(n)){var _t0=Rt(n,pt);Et(_t0,0,_t0.length-1,null);}void 0!==n&&Si(xt,dt,ht,n,"destroyed");}function Et(t,e,n,r){for(var _o0=e;_o0<=n;++_o0){var _e15=t[_o0];void 0!==_e15&&kt(_e15,r);}}function Ot(t,e){t.setProperty("text-align",e);}var bt="40px";function Mt(t,e){var n=ut.theme.indent;if("string"==typeof n){var _r0=t.classList.contains(n);e>0&&!_r0?t.classList.add(n):e<1&&_r0&&t.classList.remove(n);}if(0===e)return void t.style.setProperty("padding-inline-start","");var r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||bt;t.style.setProperty("padding-inline-start","calc("+e+" * "+r+")");}function At(t,e){var n=t.style;0===e?Ot(n,""):1===e?Ot(n,"left"):2===e?Ot(n,"center"):3===e?Ot(n,"right"):4===e?Ot(n,"justify"):5===e?Ot(n,"start"):6===e&&Ot(n,"end");}function wt(t,e){var n=function(t){var e=t.__dir;if(null!==e)return e;if(ho(t))return null;var n=t.getParentOrThrow();return ho(n)&&null===n.__dir?"auto":null;}(e);null!==n?t.dir=n:t.removeAttribute("dir");}function Dt(e,n){var r=yt.get(e);void 0===r&&t(60);var o=r.createDOM(ut,ft);if(function(t,e,n){var r=n._keyToDOMMap;(function(t,e,n){var r="__lexicalKey_"+e._key;t[r]=n;})(e,n,t),r.set(t,e);}(e,o,ft),Qn(r)?o.setAttribute("data-lexical-text","true"):uo(r)&&o.setAttribute("data-lexical-decorator","true"),lo(r)){var _t1=r.__indent,_e16=r.__size;if(wt(o,r),0!==_t1&&Mt(o,_t1),0!==_e16){var _t10=_e16-1;Pt(Rt(r,yt),r,0,_t10,r.getDOMSlot(o));}var _n13=r.__format;0!==_n13&&At(o,_n13),r.isInline()||Lt(null,r,o);}else{var _t11=r.getTextContent();if(uo(r)){var _t12=r.decorate(ft,ut);null!==_t12&&Bt(e,_t12),o.contentEditable="false";}Ct+=_t11;}return null!==n&&n.insertChild(o),Si(xt,dt,ht,r,"created"),o;}function Pt(t,e,n,r,o){var i=Ct;Ct="";var s=n;for(;s<=r;++s){Dt(t[s],o);var _e17=yt.get(t[s]);null!==_e17&&Qn(_e17)?null===St&&(St=_e17.getFormat(),Nt=_e17.getStyle()):lo(_e17)&&s<r&&!_e17.isInline()&&(Ct+=v);}o.element.__lexicalTextContent=Ct,Ct=i+Ct;}function It(t,e){if(t){var _n14=t.__last;if(_n14){var _t13=e.get(_n14);if(_t13)return In(_t13)?"line-break":uo(_t13)&&_t13.isInline()?"decorator":null;}return"empty";}return null;}function Lt(t,e,n){var r=It(t,pt),o=It(e,yt);r!==o&&e.getDOMSlot(n).setManagedLineBreak(o);}function Ft(e,n,r){var o;St=null,Nt=null,function(e,n,r){var o=Ct,i=e.__size,s=n.__size;Ct="";var l=r.element;if(1===i&&1===s){var _t14=e.__first,_r1=n.__first;if(_t14===_r1)Kt(_t14,l);else{var _e18=Ut(_t14),_n15=Dt(_r1,null);try{l.replaceChild(_n15,_e18);}catch(o){if("object"==typeof o&&null!=o){var _i4=o.toString()+" Parent: "+l.tagName+", new child: {tag: "+_n15.tagName+" key: "+_r1+"}, old child: {tag: "+_e18.tagName+", key: "+_t14+"}.";throw new Error(_i4);}throw o;}kt(_t14,null);}var _o1=yt.get(_r1);Qn(_o1)&&null===St&&(St=_o1.getFormat(),Nt=_o1.getStyle());}else{var _o10=Rt(e,pt),_c=Rt(n,yt);if(_o10.length!==i&&t(227),_c.length!==s&&t(228),0===i)0!==s&&Pt(_c,0,0,s-1,r);else if(0===s){if(0!==i){var _t15=null==r.after&&null==r.before&&null==r.element.__lexicalLineBreak;Et(_o10,0,i-1,_t15?null:l),_t15&&(l.textContent="");}}else!function(t,e,n,r,o,i){var s=r-1,l=o-1;var c,a,u=i.getFirstChild(),f=0,d=0;for(;f<=s&&d<=l;){var _t16=e[f],_r10=n[d];if(_t16===_r10)u=zt(Kt(_r10,i.element)),f++,d++;else{if(void 0===a&&(a=Wt(n,d)),void 0===c)c=Wt(e,f);else if(!c.has(_t16)){f++;continue;}if(!a.has(_t16)){u=zt(Ut(_t16)),kt(_t16,i.element),f++,c["delete"](_t16);continue;}if(c.has(_r10)){var _t17=Ei(ft,_r10);_t17!==u&&i.withBefore(u).insertChild(_t17),u=zt(Kt(_r10,i.element)),f++,d++;}else Dt(_r10,i.withBefore(u)),d++;}var _o11=yt.get(_r10);null!==_o11&&Qn(_o11)?null===St&&(St=_o11.getFormat(),Nt=_o11.getStyle()):lo(_o11)&&d<=l&&!_o11.isInline()&&(Ct+=v);}var h=f>s,g=d>l;if(h&&!g){var _t18=n[l+1],_e19=void 0===_t18?null:ft.getElementByKey(_t18);Pt(n,0,d,l,i.withBefore(_e19));}else g&&!h&&Et(e,f,s,i.element);}(0,_o10,_c,i,s,r);}l.__lexicalTextContent=Ct,Ct=o+Ct;}(e,n,n.getDOMSlot(r)),o=n,null==St||St===o.__textFormat||vt||o.setTextFormat(St),function(t){null==Nt||Nt===t.__textStyle||vt||t.setTextStyle(Nt);}(n);}function Rt(e,n){var r=[];var o=e.__first;for(;null!==o;){var _e20=n.get(o);void 0===_e20&&t(101),r.push(o),o=_e20.__next;}return r;}function Kt(e,n){var r=pt.get(e);var o=yt.get(e);void 0!==r&&void 0!==o||t(61);var i=Tt||_t.has(e)||gt.has(e),s=Ei(ft,e);if(r===o&&!i){var _t19;if(lo(r)){var _e21=s.__lexicalTextContent;"string"==typeof _e21?_t19=_e21:(_t19=r.getTextContent(),s.__lexicalTextContent=_t19);}else _t19=r.getTextContent();return Ct+=_t19,s;}if(r!==o&&i&&Si(xt,dt,ht,o,"updated"),o.updateDOM(r,s,ut)){var _r11=Dt(e,null);return null===n&&t(62),n.replaceChild(_r11,s),kt(e,null),_r11;}if(lo(r)){lo(o)||t(334,e);var _n16=o.__indent;(Tt||_n16!==r.__indent)&&Mt(s,_n16);var _l=o.__format;if((Tt||_l!==r.__format)&&At(s,_l),i)Ft(r,o,s),ho(o)||o.isInline()||Lt(r,o,s);else{var _t20=s.__lexicalTextContent;var _e22;"string"==typeof _t20?_e22=_t20:(_e22=r.getTextContent(),s.__lexicalTextContent=_e22),Ct+=_e22;}if((Tt||o.__dir!==r.__dir)&&(wt(s,o),ho(o)&&!Tt))for(var _t21 of o.getChildren())if(lo(_t21)){wt(Ei(ft,_t21.getKey()),_t21);}}else{var _t22=o.getTextContent();if(uo(o)){var _t23=o.decorate(ft,ut);null!==_t23&&Bt(e,_t23);}Ct+=_t22;}if(!vt&&ho(o)&&o.__cachedText!==Ct){var _t24=o.getWritable();_t24.__cachedText=Ct,o=_t24;}return s;}function Bt(t,e){var n=ft._pendingDecorators;var r=ft._decorators;if(null===n){if(r[t]===e)return;n=ti(ft);}n[t]=e;}function zt(t){var e=t.nextSibling;return null!==e&&e===ft._blockCursorElement&&(e=e.nextSibling),e;}function Wt(t,e){var n=new Set();for(var _r12=e;_r12<t.length;_r12++)n.add(t[_r12]);return n;}function $t(t,e,n,r,o,i){Ct="",Tt=2===r,ft=n,ut=n._config,dt=n._nodes,ht=ft._listeners.mutation,gt=o,_t=i,pt=t._nodeMap,yt=e._nodeMap,vt=e._readOnly,mt=new Map(n._keyToDOMMap);var s=new Map();return xt=s,Kt("root",null),ft=void 0,dt=void 0,gt=void 0,_t=void 0,pt=void 0,yt=void 0,ut=void 0,mt=void 0,xt=void 0,s;}function Ut(e){var n=mt.get(e);return void 0===n&&t(75,e),n;}function Jt(t){return{type:t};}var Yt=Jt("SELECTION_CHANGE_COMMAND"),jt=Jt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Ht=Jt("CLICK_COMMAND"),Vt=Jt("BEFORE_INPUT_COMMAND"),Gt=Jt("INPUT_COMMAND"),qt=Jt("COMPOSITION_START_COMMAND"),Xt=Jt("COMPOSITION_END_COMMAND"),Qt=Jt("DELETE_CHARACTER_COMMAND"),Zt=Jt("INSERT_LINE_BREAK_COMMAND"),te=Jt("INSERT_PARAGRAPH_COMMAND"),ee=Jt("CONTROLLED_TEXT_INSERTION_COMMAND"),ne=Jt("PASTE_COMMAND"),re=Jt("REMOVE_TEXT_COMMAND"),oe=Jt("DELETE_WORD_COMMAND"),ie=Jt("DELETE_LINE_COMMAND"),se=Jt("FORMAT_TEXT_COMMAND"),le=Jt("UNDO_COMMAND"),ce=Jt("REDO_COMMAND"),ae=Jt("KEYDOWN_COMMAND"),ue=Jt("KEY_ARROW_RIGHT_COMMAND"),fe=Jt("MOVE_TO_END"),de=Jt("KEY_ARROW_LEFT_COMMAND"),he=Jt("MOVE_TO_START"),ge=Jt("KEY_ARROW_UP_COMMAND"),_e=Jt("KEY_ARROW_DOWN_COMMAND"),pe=Jt("KEY_ENTER_COMMAND"),ye=Jt("KEY_SPACE_COMMAND"),me=Jt("KEY_BACKSPACE_COMMAND"),xe=Jt("KEY_ESCAPE_COMMAND"),Ce=Jt("KEY_DELETE_COMMAND"),Se=Jt("KEY_TAB_COMMAND"),Ne=Jt("INSERT_TAB_COMMAND"),Te=Jt("INDENT_CONTENT_COMMAND"),ve=Jt("OUTDENT_CONTENT_COMMAND"),ke=Jt("DROP_COMMAND"),Ee=Jt("FORMAT_ELEMENT_COMMAND"),Oe=Jt("DRAGSTART_COMMAND"),be=Jt("DRAGOVER_COMMAND"),Me=Jt("DRAGEND_COMMAND"),Ae=Jt("COPY_COMMAND"),we=Jt("CUT_COMMAND"),De=Jt("SELECT_ALL_COMMAND"),Pe=Jt("CLEAR_EDITOR_COMMAND"),Ie=Jt("CLEAR_HISTORY_COMMAND"),Le=Jt("CAN_REDO_COMMAND"),Fe=Jt("CAN_UNDO_COMMAND"),Re=Jt("FOCUS_COMMAND"),Ke=Jt("BLUR_COMMAND"),Be=Jt("KEY_MODIFIER_COMMAND"),ze=Object.freeze({}),We=[["keydown",function(t,e){if($e=t.timeStamp,Ue=t.key,e.isComposing())return;ki(e,ae,t);}],["pointerdown",function(t,e){var n=t.target,r=t.pointerType;Yi(n)&&"touch"!==r&&"pen"!==r&&0===t.button&&ro(e,function(){Po(n)||(Ge=!0);});}],["compositionstart",function(t,e){ki(e,qt,t);}],["compositionend",function(t,e){i?Xe=!0:c||!l&&!d?ki(e,Xt,t):(Qe=!0,Ze=t.data);}],["input",function(t,e){t.stopPropagation(),ro(e,function(){e.dispatchCommand(Gt,t);},{event:t}),Ye=null;}],["click",function(t,e){ro(e,function(){var n=vr(),r=$i(Pi(e)),o=kr();if(r)if(cr(n)){var _e23=n.anchor,_i5=_e23.getNode();if("element"===_e23.type&&0===_e23.offset&&n.isCollapsed()&&!ho(_i5)&&1===ni().getChildrenSize()&&_i5.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o))r.removeAllRanges(),n.dirty=!0;else if(3===t.detail&&!n.isCollapsed()){if(_i5!==n.focus.getNode()){var _t25=is(_i5,function(t){return lo(t)&&!t.isInline();});lo(_t25)&&_t25.select(0);}}}else if("touch"===t.pointerType||"pen"===t.pointerType){var _n17=r.anchorNode;if(Ji(_n17)||Wo(_n17)){oi(Tr(o,r,e,t));}}ki(e,Ht,t);});}],["cut",ze],["copy",ze],["dragstart",ze],["dragover",ze],["dragend",ze],["paste",ze],["focus",ze],["blur",ze],["drop",ze]];s&&We.push(["beforeinput",function(t,e){return function(t,e){var n=t.inputType;if("deleteCompositionText"===n||i&&vi(e))return;if("insertCompositionText"===n)return;ki(e,Vt,t);}(t,e);}]);var $e=0,Ue=null,Je=0,Ye=null;var je=new WeakMap(),He=new WeakMap();var Ve=!1,Ge=!1,qe=!1,Xe=!1,Qe=!1,Ze="",tn=null,en=[0,"",0,"root",0];function nn(t,e,n,r,o){var i=t.anchor,l=t.focus,c=i.getNode(),a=Yr(),u=$i(Pi(a)),f=null!==u?u.anchorNode:null,d=i.key,h=a.getElementByKey(d),g=n.length;return d!==l.key||!Qn(c)||(!o&&(!s||Je<r+50)||c.isDirty()&&g<2||si(n))&&i.offset!==l.offset&&!c.isComposing()||zo(c)||c.isDirty()&&g>1||(o||!s)&&null!==h&&!c.isComposing()&&f!==Uo(h)||null!==u&&null!==e&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||c.getFormat()!==t.format||c.getStyle()!==t.style||function(t,e){if(e.isSegmented())return!0;if(!t.isCollapsed())return!1;var n=t.anchor.offset,r=e.getParentOrThrow(),o=Bo(e);return 0===n?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||o||function(t){var e=t.getPreviousSibling();return(Qn(e)||lo(e)&&e.isInline())&&!e.canInsertTextAfter();}(e):n===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||o);}(t,c);}function rn(t,e){return Wo(t)&&null!==t.nodeValue&&0!==e&&e!==t.nodeValue.length;}function on(e,n,r){var o=e.anchorNode,i=e.anchorOffset,s=e.focusNode,l=e.focusOffset;Ve&&(Ve=!1,rn(o,i)&&rn(s,l)&&!tn)||ro(n,function(){if(!r)return void oi(null);if(!Lo(n,o,s))return;var c=vr();if(tn&&cr(c)&&c.isCollapsed()){var _t26=c.anchor,_e24=tn.anchor;(_t26.key===_e24.key&&_t26.offset===_e24.offset+1||1===_t26.offset&&_e24.getNode().is(_t26.getNode().getPreviousSibling()))&&(c=tn.clone(),oi(c));}if(tn=null,cr(c)){var _r13=c.anchor,_o12=_r13.getNode();if(c.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(c.dirty=!0);var _i6=Pi(n).event,_s3=_i6?_i6.timeStamp:performance.now(),_en=en,_l2=_en[0],_a=_en[1],_u=_en[2],_f=_en[3],_d2=_en[4],_h2=ni(),_g2=!1===n.isComposing()&&""===_h2.getTextContent();if(_s3<_d2+200&&_r13.offset===_u&&_r13.key===_f)sn(c,_l2,_a);else if("text"===_r13.type)Qn(_o12)||t(141),ln(c,_o12);else if("element"===_r13.type&&!_g2){lo(_o12)||t(259);var _e25=_r13.getNode();_e25.isEmpty()?function(t,e){var n=e.getTextFormat(),r=e.getTextStyle();sn(t,n,r);}(c,_e25):sn(c,0,"");}}else{var _t27=_r13.key,_e26=c.focus.key,_n18=c.getNodes(),_o13=_n18.length,_s4=c.isBackward(),_a2=_s4?l:i,_u2=_s4?i:l,_f2=_s4?_e26:_t27,_d3=_s4?_t27:_e26;var _h3=2047,_g3=!1;for(var _t28=0;_t28<_o13;_t28++){var _e27=_n18[_t28],_r14=_e27.getTextContentSize();if(Qn(_e27)&&0!==_r14&&!(0===_t28&&_e27.__key===_f2&&_a2===_r14||_t28===_o13-1&&_e27.__key===_d3&&0===_u2)&&(_g3=!0,_h3&=_e27.getFormat(),0===_h3))break;}c.format=_g3?_h3:0;}}ki(n,Yt,void 0);});}function sn(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0);}function ln(t,e){sn(t,e.getFormat(),e.getStyle());}function cn(t){if(!t.getTargetRanges)return null;var e=t.getTargetRanges();return 0===e.length?null:e[0];}function an(e){var n=e.inputType,r=cn(e),o=Yr(),i=vr();if("deleteContentBackward"===n){if(null===i){var _t29=kr();if(!cr(_t29))return!0;oi(_t29.clone());}if(cr(i)){var _n19=i.anchor.key===i.focus.key;if(s=e.timeStamp,"MediaLast"===Ue&&s<$e+30&&o.isComposing()&&_n19){if(Vo(null),$e=0,setTimeout(function(){ro(o,function(){Vo(null);});},30),cr(i)){var _e28=i.anchor.getNode();_e28.markDirty(),Qn(_e28)||t(142),ln(i,_e28);}}else{Vo(null),e.preventDefault();var _t30=i.anchor.getNode(),_r15=_t30.getTextContent(),_s5=_t30.canInsertTextAfter(),_l3=0===i.anchor.offset&&i.focus.offset===_r15.length;var _c2=f&&_n19&&!_l3&&_s5;if(_c2&&i.isCollapsed()&&(_c2=!uo(Ti(i.anchor,!0))),!_c2){ki(o,Qt,!0);var _t31=vr();f&&cr(_t31)&&_t31.isCollapsed()&&(tn=_t31,setTimeout(function(){return tn=null;}));}}return!0;}}var s;if(!cr(i))return!0;var l=e.data;null!==Ye&&ui(!1,o,Ye),i.dirty&&null===Ye||!i.isCollapsed()||ho(i.anchor.getNode())||null===r||i.applyDOMRange(r),Ye=null;var a=i.anchor,u=i.focus,d=a.getNode(),h=u.getNode();if("insertText"===n||"insertTranspose"===n){if("\n"===l)e.preventDefault(),ki(o,Zt,!1);else if(l===v)e.preventDefault(),ki(o,te,void 0);else if(null==l&&e.dataTransfer){var _t32=e.dataTransfer.getData("text/plain");e.preventDefault(),i.insertRawText(_t32);}else null!=l&&nn(i,r,l,e.timeStamp,!0)?(e.preventDefault(),ki(o,ee,l)):Ye=l;return Je=e.timeStamp,!0;}switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ki(o,ee,e);break;case"insertFromComposition":Vo(null),ki(o,ee,e);break;case"insertLineBreak":Vo(null),ki(o,Zt,!1);break;case"insertParagraph":Vo(null),qe&&!c?(qe=!1,ki(o,Zt,!1)):ki(o,te,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ki(o,ne,e);break;case"deleteByComposition":(function(t,e){return t!==e||lo(t)||lo(e)||!Bo(t)||!Bo(e);})(d,h)&&ki(o,re,e);break;case"deleteByDrag":case"deleteByCut":ki(o,re,e);break;case"deleteContent":ki(o,Qt,!1);break;case"deleteWordBackward":ki(o,oe,!0);break;case"deleteWordForward":ki(o,oe,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ki(o,ie,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ki(o,ie,!1);break;case"formatStrikeThrough":ki(o,se,"strikethrough");break;case"formatBold":ki(o,se,"bold");break;case"formatItalic":ki(o,se,"italic");break;case"formatUnderline":ki(o,se,"underline");break;case"historyUndo":ki(o,le,void 0);break;case"historyRedo":ki(o,ce,void 0);}return!0;}function un(t){if(Ji(t.target)&&Po(t.target))return!0;var e=Yr(),n=vr(),r=t.data,o=cn(t);if(null!=r&&cr(n)&&nn(n,o,r,t.timeStamp,!1)){Xe&&(hn(e,r),Xe=!1);var _o14=n.anchor.getNode(),_a3=$i(Pi(e));if(null===_a3)return!0;var _u3=n.isBackward(),_f3=_u3?n.anchor.offset:n.focus.offset,_h4=_u3?n.focus.offset:n.anchor.offset;s&&!n.isCollapsed()&&Qn(_o14)&&null!==_a3.anchorNode&&_o14.getTextContent().slice(0,_f3)+r+_o14.getTextContent().slice(_f3+_h4)===ai(_a3.anchorNode)||ki(e,ee,r);var _g4=r.length;i&&_g4>1&&"insertCompositionText"===t.inputType&&!e.isComposing()&&(n.anchor.offset-=_g4),l||c||d||!e.isComposing()||($e=0,Vo(null));}else{ui(!1,e,null!==r?r:void 0),Xe&&(hn(e,r||void 0),Xe=!1);}return function(){$r();var t=Yr();j(t);}(),!0;}function fn(t){var e=Yr(),n=vr();if(cr(n)&&!e.isComposing()){var _r16=n.anchor,_o15=n.anchor.getNode();Vo(_r16.key),(t.timeStamp<$e+30||"element"===_r16.type||!n.isCollapsed()||_o15.getFormat()!==n.format||Qn(_o15)&&_o15.getStyle()!==n.style)&&ki(e,ee,k);}return!0;}function dn(t){return hn(Yr(),t.data),!0;}function hn(t,e){var n=t._compositionKey;if(Vo(null),null!==n&&null!=e){if(""===e){var _e29=qo(n),_r17=Uo(t.getElementByKey(n));return void(null!==_r17&&null!==_r17.nodeValue&&Qn(_e29)&&fi(_e29,_r17.nodeValue,null,null,!0));}if("\n"===e[e.length-1]){var _e30=vr();if(cr(_e30)){var _n20=_e30.focus;return _e30.anchor.set(_n20.key,_n20.offset,_n20.type),void ki(t,pe,null);}}}ui(!0,t,e);}function gn(t){var e=Yr();if(null==t.key)return!0;if(Qe&&mi(t))return ro(e,function(){hn(e,Ze);}),Qe=!1,Ze="",!0;if(function(t){return _i(t,"ArrowRight",{shiftKey:"any"});}(t))ki(e,ue,t);else if(function(t){return _i(t,"ArrowRight",pi);}(t))ki(e,fe,t);else if(function(t){return _i(t,"ArrowLeft",{shiftKey:"any"});}(t))ki(e,de,t);else if(function(t){return _i(t,"ArrowLeft",pi);}(t))ki(e,he,t);else if(function(t){return _i(t,"ArrowUp",{altKey:"any",shiftKey:"any"});}(t))ki(e,ge,t);else if(function(t){return _i(t,"ArrowDown",{altKey:"any",shiftKey:"any"});}(t))ki(e,_e,t);else if(function(t){return _i(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0});}(t))qe=!0,ki(e,pe,t);else if(function(t){return" "===t.key;}(t))ki(e,ye,t);else if(function(t){return o&&_i(t,"o",{ctrlKey:!0});}(t))t.preventDefault(),qe=!0,ki(e,Zt,!0);else if(function(t){return _i(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"});}(t))qe=!1,ki(e,pe,t);else if(function(t){return _i(t,"Backspace",{shiftKey:"any"})||o&&_i(t,"h",{ctrlKey:!0});}(t))mi(t)?ki(e,me,t):(t.preventDefault(),ki(e,Qt,!0));else if(function(t){return"Escape"===t.key;}(t))ki(e,xe,t);else if(function(t){return _i(t,"Delete",{})||o&&_i(t,"d",{ctrlKey:!0});}(t))!function(t){return"Delete"===t.key;}(t)?(t.preventDefault(),ki(e,Qt,!1)):ki(e,Ce,t);else if(function(t){return _i(t,"Backspace",yi);}(t))t.preventDefault(),ki(e,oe,!0);else if(function(t){return _i(t,"Delete",yi);}(t))t.preventDefault(),ki(e,oe,!1);else if(function(t){return o&&_i(t,"Backspace",{metaKey:!0});}(t))t.preventDefault(),ki(e,ie,!0);else if(function(t){return o&&(_i(t,"Delete",{metaKey:!0})||_i(t,"k",{ctrlKey:!0}));}(t))t.preventDefault(),ki(e,ie,!1);else if(function(t){return _i(t,"b",pi);}(t))t.preventDefault(),ki(e,se,"bold");else if(function(t){return _i(t,"u",pi);}(t))t.preventDefault(),ki(e,se,"underline");else if(function(t){return _i(t,"i",pi);}(t))t.preventDefault(),ki(e,se,"italic");else if(function(t){return _i(t,"Tab",{shiftKey:"any"});}(t))ki(e,Se,t);else if(function(t){return _i(t,"z",pi);}(t))t.preventDefault(),ki(e,le,void 0);else if(function(t){if(o)return _i(t,"z",{metaKey:!0,shiftKey:!0});return _i(t,"y",{ctrlKey:!0})||_i(t,"z",{ctrlKey:!0,shiftKey:!0});}(t))t.preventDefault(),ki(e,ce,void 0);else{var _n21=e._editorState._selection;null===_n21||cr(_n21)?xi(t)&&(t.preventDefault(),ki(e,De,t)):!function(t){return _i(t,"c",pi);}(t)?!function(t){return _i(t,"x",pi);}(t)?xi(t)&&(t.preventDefault(),ki(e,De,t)):(t.preventDefault(),ki(e,we,t)):(t.preventDefault(),ki(e,Ae,t));}return function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey;}(t)&&e.dispatchCommand(Be,t),!0;}function _n(t){var e=t.__lexicalEventHandles;return void 0===e&&(e=[],t.__lexicalEventHandles=e),e;}var pn=new Map();function yn(t){var e=Ui(t.target);if(null===e)return;var n=Ro(e.anchorNode);if(null===n)return;Ge&&(Ge=!1,ro(n,function(){var r=kr(),o=e.anchorNode;if(Ji(o)||Wo(o)){oi(Tr(r,e,n,t));}}));var r=li(n),o=r[r.length-1],i=o._key,s=pn.get(i),l=s||o;l!==n&&on(e,l,!1),on(e,n,!0),n!==o?pn.set(i,n):s&&pn["delete"](i);}function mn(t){t._lexicalHandled=!0;}function xn(t){return!0===t._lexicalHandled;}var Cn=function Cn(){};function Sn(e){var n=je.get(e);if(void 0===n)return void Cn();var r=He.get(n);if(void 0===r)return void Cn();var o=r-1;o>=0||t(164),je["delete"](e),He.set(n,o),0===o&&n.removeEventListener("selectionchange",yn);var i=Ko(e);Fo(i)?(!function(t){if(null!==t._parentEditor){var _e31=li(t),_n22=_e31[_e31.length-1]._key;pn.get(_n22)===t&&pn["delete"](_n22);}else pn["delete"](t._key);}(i),e.__lexicalEditor=null):i&&t(198);var s=_n(e);for(var _t33=0;_t33<s.length;_t33++)s[_t33]();e.__lexicalEventHandles=[];}function Nn(t,e,n){$r();var r=t.__key,o=t.getParent();if(null===o)return;var i=function(t){var e=vr();if(!cr(e)||!lo(t))return e;var n=e.anchor,r=e.focus,o=n.getNode(),i=r.getNode();wi(o,t)&&n.set(t.__key,0,"element");wi(i,t)&&r.set(t.__key,0,"element");return e;}(t);var s=!1;if(cr(i)&&e){var _e32=i.anchor,_n23=i.focus;_e32.key===r&&(br(_e32,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0),_n23.key===r&&(br(_n23,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0);}else ur(i)&&e&&t.isSelected()&&t.selectPrevious();if(cr(i)&&e&&!s){var _e33=t.getIndexWithinParent();jo(t),Er(i,o,_e33,-1);}else jo(t);n||Li(o)||o.canBeEmpty()||!o.isEmpty()||Nn(o,e),e&&i&&ho(o)&&o.isEmpty()&&o.selectEnd();}var Tn=Symbol["for"]("ephemeral");function vn(t){return t[Tn]||!1;}var _kn5=function(){function kn(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Yo(this,t);}kn.getType=function getType(){var _os2=os(this),e=_os2.ownNodeType;return void 0===e&&t(64,this.name),e;};kn.clone=function clone(e){t(65,this.name);};var _proto2=kn.prototype;_proto2.$config=function $config(){return{};};_proto2.config=function config(t,e){var _ref11;var n=e["extends"]||Object.getPrototypeOf(this.constructor);return Object.assign(e,{"extends":n,type:t}),_ref11={},_ref11[t]=e,_ref11;};_proto2.afterCloneFrom=function afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this));};_proto2.getType=function getType(){return this.__type;};_proto2.isInline=function isInline(){t(137,this.constructor.name);};_proto2.isAttached=function isAttached(){var t=this.__key;for(;null!==t;){if("root"===t)return!0;var _e34=qo(t);if(null===_e34)break;t=_e34.__parent;}return!1;};_proto2.isSelected=function isSelected(t){var _this12=this;var e=t||vr();if(null==e)return!1;var n=e.getNodes().some(function(t){return t.__key===_this12.__key;});if(Qn(this))return n;if(cr(e)&&"element"===e.anchor.type&&"element"===e.focus.type){if(e.isCollapsed())return!1;var _t34=this.getParent();if(uo(this)&&this.isInline()&&_t34){var _n24=e.isBackward()?e.focus:e.anchor;if(_t34.is(_n24.getNode())&&_n24.offset===_t34.getChildrenSize()&&this.is(_t34.getLastChild()))return!1;}}return n;};_proto2.getKey=function getKey(){return this.__key;};_proto2.getIndexWithinParent=function getIndexWithinParent(){var t=this.getParent();if(null===t)return-1;var e=t.getFirstChild(),n=0;for(;null!==e;){if(this.is(e))return n;n++,e=e.getNextSibling();}return-1;};_proto2.getParent=function getParent(){var t=this.getLatest().__parent;return null===t?null:qo(t);};_proto2.getParentOrThrow=function getParentOrThrow(){var e=this.getParent();return null===e&&t(66,this.__key),e;};_proto2.getTopLevelElement=function getTopLevelElement(){var e=this;for(;null!==e;){var _n25=e.getParent();if(Li(_n25))return lo(e)||e===this&&uo(e)||t(194),e;e=_n25;}return null;};_proto2.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){var e=this.getTopLevelElement();return null===e&&t(67,this.__key),e;};_proto2.getParents=function getParents(){var t=[];var e=this.getParent();for(;null!==e;)t.push(e),e=e.getParent();return t;};_proto2.getParentKeys=function getParentKeys(){var t=[];var e=this.getParent();for(;null!==e;)t.push(e.__key),e=e.getParent();return t;};_proto2.getPreviousSibling=function getPreviousSibling(){var t=this.getLatest().__prev;return null===t?null:qo(t);};_proto2.getPreviousSiblings=function getPreviousSiblings(){var t=[],e=this.getParent();if(null===e)return t;var n=e.getFirstChild();for(;null!==n&&!n.is(this);)t.push(n),n=n.getNextSibling();return t;};_proto2.getNextSibling=function getNextSibling(){var t=this.getLatest().__next;return null===t?null:qo(t);};_proto2.getNextSiblings=function getNextSiblings(){var t=[];var e=this.getNextSibling();for(;null!==e;)t.push(e),e=e.getNextSibling();return t;};_proto2.getCommonAncestor=function getCommonAncestor(t){var e=lo(this)?this:this.getParent(),n=lo(t)?t:t.getParent(),r=e&&n?Rs(e,n):null;return r?r.commonAncestor:null;};_proto2.is=function is(t){return null!=t&&this.__key===t.__key;};_proto2.isBefore=function isBefore(e){var n=Rs(this,e);return null!==n&&("descendant"===n.type||("branch"===n.type?-1===Is(n):("same"!==n.type&&"ancestor"!==n.type&&t(279),!1)));};_proto2.isParentOf=function isParentOf(t){var e=Rs(this,t);return null!==e&&"ancestor"===e.type;};_proto2.getNodesBetween=function getNodesBetween(e){var n=this.isBefore(e),r=[],o=new Set();var i=this;for(;null!==i;){var _s6=i.__key;if(o.has(_s6)||(o.add(_s6),r.push(i)),i===e)break;var _l4=lo(i)?n?i.getFirstChild():i.getLastChild():null;if(null!==_l4){i=_l4;continue;}var _c3=n?i.getNextSibling():i.getPreviousSibling();if(null!==_c3){i=_c3;continue;}var _a4=i.getParentOrThrow();if(o.has(_a4.__key)||r.push(_a4),_a4===e)break;var _u4=null,_f4=_a4;do{if(null===_f4&&t(68),_u4=n?_f4.getNextSibling():_f4.getPreviousSibling(),_f4=_f4.getParent(),null===_f4)break;null!==_u4||o.has(_f4.__key)||r.push(_f4);}while(null===_u4);i=_u4;}return n||r.reverse(),r;};_proto2.isDirty=function isDirty(){var t=Yr()._dirtyLeaves;return null!==t&&t.has(this.__key);};_proto2.getLatest=function getLatest(){if(vn(this))return this;var e=qo(this.__key);return null===e&&t(113),e;};_proto2.getWritable=function getWritable(){if(vn(this))return this;$r();var t=Jr(),e=Yr(),n=t._nodeMap,r=this.__key,o=this.getLatest(),i=e._cloneNotNeeded,s=vr();if(null!==s&&s.setCachedNodes(null),i.has(r))return Ho(o),o;var l=ts(o);return i.add(r),Ho(l),n.set(r,l),l;};_proto2.getTextContent=function getTextContent(){return"";};_proto2.getTextContentSize=function getTextContentSize(){return this.getTextContent().length;};_proto2.createDOM=function createDOM(e,n){t(70);};_proto2.updateDOM=function updateDOM(e,n,r){t(71);};_proto2.exportDOM=function exportDOM(t){return{element:this.createDOM(t._config,t)};};_proto2.exportJSON=function exportJSON(){var t=this.__state?this.__state.toJSON():void 0;return babelHelpers["extends"]({type:this.__type,version:1},t);};kn.importJSON=function importJSON(e){t(18,this.name);};_proto2.updateFromJSON=function updateFromJSON(t){return function(t,e){var n=t.getWritable(),r=e.$;var o=r;for(var _t35 of Z(n).flatKeys)_t35 in e&&(void 0!==o&&o!==r||(o=babelHelpers["extends"]({},r)),o[_t35]=e[_t35]);return(n.__state||o)&&Q(t).updateFromJSON(o),n;}(this,t);};kn.transform=function transform(){return null;};_proto2.remove=function remove(t){Nn(this,!0,t);};_proto2.replace=function replace(e,n){$r();var r=vr();null!==r&&(r=r.clone()),Ki(this,e);var o=this.getLatest(),i=this.__key,s=e.__key,l=e.getWritable(),c=this.getParentOrThrow().getWritable(),a=c.__size;jo(l);var u=o.getPreviousSibling(),f=o.getNextSibling(),d=o.__prev,h=o.__next,g=o.__parent;if(Nn(o,!1,!0),null===u)c.__first=s;else{u.getWritable().__next=s;}if(l.__prev=d,null===f)c.__last=s;else{f.getWritable().__prev=s;}if(l.__next=h,l.__parent=g,c.__size=a,n&&(lo(this)&&lo(l)||t(139),this.getChildren().forEach(function(t){l.append(t);})),cr(r)){oi(r);var _t36=r.anchor,_e35=r.focus;_t36.key===i&&sr(_t36,l),_e35.key===i&&sr(_e35,l);}return Go()===i&&Vo(s),l;};_proto2.insertAfter=function insertAfter(t,e){if(e===void 0){e=!0;}$r(),Ki(this,t);var n=this.getWritable(),r=t.getWritable(),o=r.getParent(),i=vr();var s=!1,l=!1;if(null!==o){var _e36=t.getIndexWithinParent();if(jo(r),cr(i)){var _t37=o.__key,_n26=i.anchor,_r18=i.focus;s="element"===_n26.type&&_n26.key===_t37&&_n26.offset===_e36+1,l="element"===_r18.type&&_r18.key===_t37&&_r18.offset===_e36+1;}}var c=this.getNextSibling(),a=this.getParentOrThrow().getWritable(),u=r.__key,f=n.__next;if(null===c)a.__last=u;else{c.getWritable().__prev=u;}if(a.__size++,n.__next=u,r.__next=f,r.__prev=n.__key,r.__parent=n.__parent,e&&cr(i)){var _t38=this.getIndexWithinParent();Er(i,a,_t38+1);var _e37=a.__key;s&&i.anchor.set(_e37,_t38+2,"element"),l&&i.focus.set(_e37,_t38+2,"element");}return t;};_proto2.insertBefore=function insertBefore(t,e){if(e===void 0){e=!0;}$r(),Ki(this,t);var n=this.getWritable(),r=t.getWritable(),o=r.__key;jo(r);var i=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();if(null===i)s.__first=o;else{i.getWritable().__next=o;}s.__size++,n.__prev=o,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;var a=vr();if(e&&cr(a)){Er(a,this.getParentOrThrow(),c);}return t;};_proto2.isParentRequired=function isParentRequired(){return!1;};_proto2.createParentElementNode=function createParentElementNode(){return So();};_proto2.selectStart=function selectStart(){return this.selectPrevious();};_proto2.selectEnd=function selectEnd(){return this.selectNext(0,0);};_proto2.selectPrevious=function selectPrevious(t,e){$r();var n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(lo(n))return n.select();if(!Qn(n)){var _t39=n.getIndexWithinParent()+1;return r.select(_t39,_t39);}return n.select(t,e);};_proto2.selectNext=function selectNext(t,e){$r();var n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(lo(n))return n.select(0,0);if(!Qn(n)){var _t40=n.getIndexWithinParent();return r.select(_t40,_t40);}return n.select(t,e);};_proto2.markDirty=function markDirty(){this.getWritable();};_proto2.reconcileObservedMutation=function reconcileObservedMutation(t,e){this.markDirty();};return kn;}();var En="history-merge",On="collaboration",bn="skip-scroll-into-view",Mn="skip-dom-selection",An="skip-selection-focus";var _wn=function(_kn){function wn(t){return _kn.call(this,t)||this;}babelHelpers.inheritsLoose(wn,_kn);wn.getType=function getType(){return"linebreak";};wn.clone=function clone(t){return new wn(t.__key);};var _proto3=wn.prototype;_proto3.getTextContent=function getTextContent(){return"\n";};_proto3.createDOM=function createDOM(){return document.createElement("br");};_proto3.updateDOM=function updateDOM(){return!1;};_proto3.isInline=function isInline(){return!0;};wn.importDOM=function importDOM(){return{br:function br(t){return function(t){var e=t.parentElement;if(null!==e&&Vi(e)){var _n27=e.firstChild;if(_n27===t||_n27.nextSibling===t&&Ln(_n27)){var _n28=e.lastChild;if(_n28===t||_n28.previousSibling===t&&Ln(_n28))return!0;}}return!1;}(t)||function(t){var e=t.parentElement;if(null!==e&&Vi(e)){var _n29=e.firstChild;if(_n29===t||_n29.nextSibling===t&&Ln(_n29))return!1;var _r19=e.lastChild;if(_r19===t||_r19.previousSibling===t&&Ln(_r19))return!0;}return!1;}(t)?null:{conversion:Dn,priority:0};}};};wn.importJSON=function importJSON(t){return Pn().updateFromJSON(t);};return wn;}(_kn5);function Dn(t){return{node:Pn()};}function Pn(){return Ri(new _wn());}function In(t){return t instanceof _wn;}function Ln(t){return Wo(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"");}function Fn(t,e){return 16&e?"code":e&p?"mark":32&e?"sub":64&e?"sup":null;}function Rn(t,e){return 1&e?"strong":2&e?"em":"span";}function Kn(t,e,n,r,o){var i=r.classList;var s=Ci(o,"base");void 0!==s&&i.add.apply(i,s),s=Ci(o,"underlineStrikethrough");var l=!1;var c=8&e&&4&e;void 0!==s&&(8&n&&4&n?(l=!0,c||i.add.apply(i,s)):c&&i.remove.apply(i,s));for(var _t41 in A){var _r20=A[_t41];if(s=Ci(o,_t41),void 0!==s)if(n&_r20){if(l&&("underline"===_t41||"strikethrough"===_t41)){e&_r20&&i.remove.apply(i,s);continue;}(0===(e&_r20)||c&&"underline"===_t41||"strikethrough"===_t41)&&i.add.apply(i,s);}else e&_r20&&i.remove.apply(i,s);}}function Bn(t,e,n){var r=e.firstChild,o=n.isComposing(),s=t+(o?T:"");if(null==r)e.textContent=s;else{var _t42=r.nodeValue;if(_t42!==s)if(o||i){var _ref12=function(t,e){var n=t.length,r=e.length;var o=0,i=0;for(;o<n&&o<r&&t[o]===e[o];)o++;for(;i+o<n&&i+o<r&&t[n-i-1]===e[r-i-1];)i++;return[o,n-o-i,e.slice(o,r-i)];}(_t42,s),_e38=_ref12[0],_n30=_ref12[1],_o16=_ref12[2];0!==_n30&&r.deleteData(_e38,_n30),r.insertData(_e38,_o16);}else r.nodeValue=s;}}function zn(t,e,n,r,o,i){Bn(o,t,e);var s=i.theme.text;void 0!==s&&Kn(0,0,r,t,s);}function Wn(t,e){var n=document.createElement(e);return n.appendChild(t),n;}var _$n2=function(_kn2){function $n(t,e){var _this;if(t===void 0){t="";}_this=_kn2.call(this,e)||this,_this.__text=t,_this.__format=0,_this.__style="",_this.__mode=0,_this.__detail=0;return _this;}babelHelpers.inheritsLoose($n,_kn2);$n.getType=function getType(){return"text";};$n.clone=function clone(t){return new $n(t.__text,t.__key);};var _proto4=$n.prototype;_proto4.afterCloneFrom=function afterCloneFrom(t){_kn2.prototype.afterCloneFrom.call(this,t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail;};_proto4.getFormat=function getFormat(){return this.getLatest().__format;};_proto4.getDetail=function getDetail(){return this.getLatest().__detail;};_proto4.getMode=function getMode(){var t=this.getLatest();return L[t.__mode];};_proto4.getStyle=function getStyle(){return this.getLatest().__style;};_proto4.isToken=function isToken(){return 1===this.getLatest().__mode;};_proto4.isComposing=function isComposing(){return this.__key===Go();};_proto4.isSegmented=function isSegmented(){return 2===this.getLatest().__mode;};_proto4.isDirectionless=function isDirectionless(){return!!(1&this.getLatest().__detail);};_proto4.isUnmergeable=function isUnmergeable(){return!!(2&this.getLatest().__detail);};_proto4.hasFormat=function hasFormat(t){var e=A[t];return 0!==(this.getFormat()&e);};_proto4.isSimpleText=function isSimpleText(){return"text"===this.__type&&0===this.__mode;};_proto4.getTextContent=function getTextContent(){return this.getLatest().__text;};_proto4.getFormatFlags=function getFormatFlags(t,e){return Jo(this.getLatest().__format,t,e);};_proto4.canHaveFormat=function canHaveFormat(){return!0;};_proto4.isInline=function isInline(){return!0;};_proto4.createDOM=function createDOM(t,e){var n=this.__format,r=Fn(0,n),o=Rn(0,n),i=null===r?o:r,s=document.createElement(i);var l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(o),s.appendChild(l));zn(l,this,0,n,this.__text,t);var c=this.__style;return""!==c&&(s.style.cssText=c),s;};_proto4.updateDOM=function updateDOM(e,n,r){var o=this.__text,i=e.__format,s=this.__format,l=Fn(0,i),c=Fn(0,s),a=Rn(0,i),u=Rn(0,s);if((null===l?a:l)!==(null===c?u:c))return!0;if(l===c&&a!==u){var _e39=n.firstChild;null==_e39&&t(48);var _i7=document.createElement(u);return zn(_i7,this,0,s,o,r),n.replaceChild(_i7,_e39),!1;}var f=n;null!==c&&null!==l&&(f=n.firstChild,null==f&&t(49)),Bn(o,f,this);var d=r.theme.text;void 0!==d&&i!==s&&Kn(0,i,s,f,d);var h=e.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1;};$n.importDOM=function importDOM(){return{"#text":function text(){return{conversion:Hn,priority:0};},b:function b(){return{conversion:Jn,priority:0};},code:function code(){return{conversion:qn,priority:0};},em:function em(){return{conversion:qn,priority:0};},i:function i(){return{conversion:qn,priority:0};},mark:function mark(){return{conversion:qn,priority:0};},s:function s(){return{conversion:qn,priority:0};},span:function span(){return{conversion:Un,priority:0};},strong:function strong(){return{conversion:qn,priority:0};},sub:function sub(){return{conversion:qn,priority:0};},sup:function sup(){return{conversion:qn,priority:0};},u:function u(){return{conversion:qn,priority:0};}};};$n.importJSON=function importJSON(t){return Xn().updateFromJSON(t);};_proto4.updateFromJSON=function updateFromJSON(t){return _kn2.prototype.updateFromJSON.call(this,t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style);};_proto4.exportDOM=function exportDOM(e){var _kn2$prototype$export=_kn2.prototype.exportDOM.call(this,e),n=_kn2$prototype$export.element;return Ji(n)||t(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=Wn(n,"b")),this.hasFormat("italic")&&(n=Wn(n,"i")),this.hasFormat("strikethrough")&&(n=Wn(n,"s")),this.hasFormat("underline")&&(n=Wn(n,"u")),{element:n};};_proto4.exportJSON=function exportJSON(){return babelHelpers["extends"]({detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent()},_kn2.prototype.exportJSON.call(this));};_proto4.selectionTransform=function selectionTransform(t,e){};_proto4.setFormat=function setFormat(t){var e=this.getWritable();return e.__format="string"==typeof t?A[t]:t,e;};_proto4.setDetail=function setDetail(t){var e=this.getWritable();return e.__detail="string"==typeof t?w[t]:t,e;};_proto4.setStyle=function setStyle(t){var e=this.getWritable();return e.__style=t,e;};_proto4.toggleFormat=function toggleFormat(t){var e=Jo(this.getFormat(),t,null);return this.setFormat(e);};_proto4.toggleDirectionless=function toggleDirectionless(){var t=this.getWritable();return t.__detail^=1,t;};_proto4.toggleUnmergeable=function toggleUnmergeable(){var t=this.getWritable();return t.__detail^=2,t;};_proto4.setMode=function setMode(t){var e=I[t];if(this.__mode===e)return this;var n=this.getWritable();return n.__mode=e,n;};_proto4.setTextContent=function setTextContent(t){if(this.__text===t)return this;var e=this.getWritable();return e.__text=t,e;};_proto4.select=function select(t,e){$r();var n=t,r=e;var o=vr(),i=this.getTextContent(),s=this.__key;if("string"==typeof i){var _t43=i.length;void 0===n&&(n=_t43),void 0===r&&(r=_t43);}else n=0,r=0;if(!cr(o))return Cr(s,n,s,r,"text","text");{var _t44=Go();_t44!==o.anchor.key&&_t44!==o.focus.key||Vo(s),o.setTextNodeRange(this,n,this,r);}return o;};_proto4.selectStart=function selectStart(){return this.select(0,0);};_proto4.selectEnd=function selectEnd(){var t=this.getTextContentSize();return this.select(t,t);};_proto4.spliceText=function spliceText(t,e,n,r){var o=this.getWritable(),i=o.__text,s=n.length;var l=t;l<0&&(l=s+l,l<0&&(l=0));var c=vr();if(r&&cr(c)){var _e40=t+s;c.setTextNodeRange(o,_e40,o,_e40);}var a=i.slice(0,l)+n+i.slice(l+e);return o.__text=a,o;};_proto4.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto4.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto4.splitText=function splitText(){$r();var e=this.getLatest(),n=e.getTextContent();if(""===n)return[];var r=e.__key,o=Go(),i=n.length;for(var _len3=arguments.length,t=new Array(_len3),_key3=0;_key3<_len3;_key3++){t[_key3]=arguments[_key3];}t.sort(function(t,e){return t-e;}),t.push(i);var s=[],l=t.length;for(var _e41=0,_r21=0;_e41<i&&_r21<=l;_r21++){var _o17=t[_r21];_o17>_e41&&(s.push(n.slice(_e41,_o17)),_e41=_o17);}var c=s.length;if(1===c)return[e];var a=s[0],u=e.getParent();var f;var d=e.getFormat(),h=e.getStyle(),g=e.__detail;var _=!1,p=null,y=null;var m=vr();if(cr(m)){var _ref13=m.isBackward()?[m.focus,m.anchor]:[m.anchor,m.focus],_t45=_ref13[0],_e42=_ref13[1];"text"===_t45.type&&_t45.key===r&&(p=_t45),"text"===_e42.type&&_e42.key===r&&(y=_e42);}e.isSegmented()?(f=Xn(a),f.__format=d,f.__style=h,f.__detail=g,f.__state=ot(e,f),_=!0):f=e.setTextContent(a);var x=[f];for(var _t46=1;_t46<c;_t46++){var _n31=Xn(s[_t46]);_n31.__format=d,_n31.__style=h,_n31.__detail=g,_n31.__state=ot(e,_n31);var _i8=_n31.__key;o===r&&Vo(_i8),x.push(_n31);}var C=p?p.offset:null,S=y?y.offset:null;var N=0;for(var _t47 of x){if(!p&&!y)break;var _e43=N+_t47.getTextContentSize();if(null!==p&&null!==C&&C<=_e43&&C>=N&&(p.set(_t47.getKey(),C-N,"text"),C<_e43&&(p=null)),null!==y&&null!==S&&S<=_e43&&S>=N){y.set(_t47.getKey(),S-N,"text");break;}N=_e43;}if(null!==u){!function(t){var e=t.getPreviousSibling(),n=t.getNextSibling();null!==e&&Ho(e);null!==n&&Ho(n);}(this);var _t48=u.getWritable(),_e44=this.getIndexWithinParent();_?(_t48.splice(_e44,0,x),this.remove()):_t48.splice(_e44,1,x),cr(m)&&Er(m,u,_e44,c-1);}return x;};_proto4.mergeWithSibling=function mergeWithSibling(e){var n=e===this.getPreviousSibling();n||e===this.getNextSibling()||t(50);var r=this.__key,o=e.__key,i=this.__text,s=i.length;Go()===o&&Vo(r);var l=vr();if(cr(l)){var _t49=l.anchor,_i9=l.focus;null!==_t49&&_t49.key===o&&Mr(_t49,n,r,e,s),null!==_i9&&_i9.key===o&&Mr(_i9,n,r,e,s);}var c=e.__text,a=n?c+i:i+c;this.setTextContent(a);var u=this.getWritable();return e.remove(),u;};_proto4.isTextEntity=function isTextEntity(){return!1;};return $n;}(_kn5);function Un(t){return{forChild:Zn(t.style),node:null};}function Jn(t){var e=t,n="normal"===e.style.fontWeight;return{forChild:Zn(e.style,n?void 0:"bold"),node:null};}var Yn=new WeakMap();function jn(t){if(!Ji(t))return!1;if("PRE"===t.nodeName)return!0;var e=t.style.whiteSpace;return"string"==typeof e&&e.startsWith("pre");}function Hn(e){var n=e;null===e.parentElement&&t(129);var r=n.textContent||"";if(null!==function(t){var e,n=t.parentNode;var r=[t];for(;null!==n&&void 0===(e=Yn.get(n))&&!jn(n);)r.push(n),n=n.parentNode;var o=void 0===e?n:e;for(var _t50=0;_t50<r.length;_t50++)Yn.set(r[_t50],o);return o;}(n)){var _t51=r.split(/(\r?\n|\t)/),_e45=[],_n32=_t51.length;for(var _r22=0;_r22<_n32;_r22++){var _n33=_t51[_r22];"\n"===_n33||"\r\n"===_n33?_e45.push(Pn()):"\t"===_n33?_e45.push(er()):""!==_n33&&_e45.push(Xn(_n33));}return{node:_e45};}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===r)return{node:null};if(" "===r[0]){var _t52=n,_e46=!0;for(;null!==_t52&&null!==(_t52=Vn(_t52,!1));){var _n34=_t52.textContent||"";if(_n34.length>0){/[ \t\n]$/.test(_n34)&&(r=r.slice(1)),_e46=!1;break;}}_e46&&(r=r.slice(1));}if(" "===r[r.length-1]){var _t53=n,_e47=!0;for(;null!==_t53&&null!==(_t53=Vn(_t53,!0));){if((_t53.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){_e47=!1;break;}}_e47&&(r=r.slice(0,r.length-1));}return""===r?{node:null}:{node:Xn(r)};}function Vn(t,e){var n=t;for(;;){var _t54=void 0;for(;null===(_t54=e?n.nextSibling:n.previousSibling);){var _t55=n.parentElement;if(null===_t55)return null;n=_t55;}if(n=_t54,Ji(n)){var _t56=n.style.display;if(""===_t56&&!Hi(n)||""!==_t56&&!_t56.startsWith("inline"))return null;}var _r23=n;for(;null!==(_r23=e?n.firstChild:n.lastChild);)n=_r23;if(Wo(n))return n;if("BR"===n.nodeName)return null;}}var Gn={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function qn(t){var e=Gn[t.nodeName.toLowerCase()];return void 0===e?{node:null}:{forChild:Zn(t.style,e),node:null};}function Xn(t){if(t===void 0){t="";}return Ri(new _$n2(t));}function Qn(t){return t instanceof _$n2;}function Zn(t,e){var n=t.fontWeight,r=t.textDecoration.split(" "),o="700"===n||"bold"===n,i=r.includes("line-through"),s="italic"===t.fontStyle,l=r.includes("underline"),c=t.verticalAlign;return function(t){return Qn(t)?(o&&!t.hasFormat("bold")&&t.toggleFormat("bold"),i&&!t.hasFormat("strikethrough")&&t.toggleFormat("strikethrough"),s&&!t.hasFormat("italic")&&t.toggleFormat("italic"),l&&!t.hasFormat("underline")&&t.toggleFormat("underline"),"sub"!==c||t.hasFormat("subscript")||t.toggleFormat("subscript"),"super"!==c||t.hasFormat("superscript")||t.toggleFormat("superscript"),e&&!t.hasFormat(e)&&t.toggleFormat(e),t):t;};}var _tr=function(_$n){function tr(t){var _this2;_this2=_$n.call(this,"\t",t)||this,_this2.__detail=2;return _this2;}babelHelpers.inheritsLoose(tr,_$n);tr.getType=function getType(){return"tab";};tr.clone=function clone(t){return new tr(t.__key);};tr.importDOM=function importDOM(){return null;};var _proto5=tr.prototype;_proto5.createDOM=function createDOM(t){var e=_$n.prototype.createDOM.call(this,t),n=Ci(t.theme,"tab");if(void 0!==n){var _e$classList;(_e$classList=e.classList).add.apply(_e$classList,n);}return e;};tr.importJSON=function importJSON(t){return er().updateFromJSON(t);};_proto5.setTextContent=function setTextContent(t){return"\t"!==t&&""!==t&&e(126),_$n.prototype.setTextContent.call(this,"\t");};_proto5.spliceText=function spliceText(e,n,r,o){return""===r&&0===n||"\t"===r&&1===n||t(286),this;};_proto5.setDetail=function setDetail(e){return 2!==e&&t(127),this;};_proto5.setMode=function setMode(e){return"normal"!==e&&t(128),this;};_proto5.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto5.canInsertTextAfter=function canInsertTextAfter(){return!1;};return tr;}(_$n2);function er(){return Ri(new _tr());}function nr(t){return t instanceof _tr;}var _rr=function(){function rr(t,e,n){this._selection=null,this.key=t,this.offset=e,this.type=n;}var _proto6=rr.prototype;_proto6.is=function is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type;};_proto6.isBefore=function isBefore(t){if(this.key===t.key)return this.offset<t.offset;return Ps(Hs(Ks(this,"next")),Hs(Ks(t,"next")))<0;};_proto6.getNode=function getNode(){var e=qo(this.key);return null===e&&t(20),e;};_proto6.set=function set(t,e,n,r){var o=this._selection,i=this.key;r&&this.key===t&&this.offset===e&&this.type===n||(this.key=t,this.offset=e,this.type=n,Wr()||(Go()===i&&Vo(t),null!==o&&(o.setCachedNodes(null),o.dirty=!0)));};return rr;}();function or(t,e,n){return new _rr(t,e,n);}function ir(t,e){var n=e.__key,r=t.offset,o="element";if(Qn(e)){o="text";var _t57=e.getTextContentSize();r>_t57&&(r=_t57);}else if(!lo(e)){var _t58=e.getNextSibling();if(Qn(_t58))n=_t58.__key,r=0,o="text";else{var _t59=e.getParent();_t59&&(n=_t59.__key,r=e.getIndexWithinParent()+1);}}t.set(n,r,o);}function sr(t,e){if(lo(e)){var _n35=e.getLastDescendant();lo(_n35)||Qn(_n35)?ir(t,_n35):ir(t,e);}else ir(t,e);}var _lr=function(){function lr(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1;}var _proto7=lr.prototype;_proto7.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto7.setCachedNodes=function setCachedNodes(t){this._cachedNodes=t;};_proto7.is=function is(t){if(!ur(t))return!1;var e=this._nodes,n=t._nodes;return e.size===n.size&&Array.from(e).every(function(t){return n.has(t);});};_proto7.isCollapsed=function isCollapsed(){return!1;};_proto7.isBackward=function isBackward(){return!1;};_proto7.getStartEndPoints=function getStartEndPoints(){return null;};_proto7.add=function add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null;};_proto7["delete"]=function _delete(t){this.dirty=!0,this._nodes["delete"](t),this._cachedNodes=null;};_proto7.clear=function clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null;};_proto7.has=function has(t){return this._nodes.has(t);};_proto7.clone=function clone(){return new lr(new Set(this._nodes));};_proto7.extract=function extract(){return this.getNodes();};_proto7.insertRawText=function insertRawText(t){};_proto7.insertText=function insertText(){};_proto7.insertNodes=function insertNodes(t){var e=this.getNodes(),n=e.length,r=e[n-1];var o;if(Qn(r))o=r.select();else{var _t60=r.getIndexWithinParent()+1;o=r.getParentOrThrow().select(_t60,_t60);}o.insertNodes(t);for(var _t61=0;_t61<n;_t61++)e[_t61].remove();};_proto7.getNodes=function getNodes(){var t=this._cachedNodes;if(null!==t)return t;var e=this._nodes,n=[];for(var _t62 of e){var _e48=qo(_t62);null!==_e48&&n.push(_e48);}return Wr()||(this._cachedNodes=n),n;};_proto7.getTextContent=function getTextContent(){var t=this.getNodes();var e="";for(var _n36=0;_n36<t.length;_n36++)e+=t[_n36].getTextContent();return e;};_proto7.deleteNodes=function deleteNodes(){var t=this.getNodes();if((vr()||kr())===this&&t[0]){var _e49=Cs(t[0],"next");zs(ws(_e49,_e49));}for(var _e50 of t)_e50.remove();};return lr;}();function cr(t){return t instanceof _ar;}var _ar=function(){function ar(t,e,n,r){this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1;}var _proto8=ar.prototype;_proto8.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto8.setCachedNodes=function setCachedNodes(t){this._cachedNodes=t;};_proto8.is=function is(t){return!!cr(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style;};_proto8.isCollapsed=function isCollapsed(){return this.anchor.is(this.focus);};_proto8.getNodes=function getNodes(){var t=this._cachedNodes;if(null!==t)return t;var e=function(t){var e=[],_t$getTextSlices=t.getTextSlices(),n=_t$getTextSlices[0],r=_t$getTextSlices[1];n&&e.push(n.caret.origin);var o=new Set(),i=new Set();for(var _n37 of t)if(ps(_n37)){var _t63=_n37.origin;0===e.length?o.add(_t63):(i.add(_t63),e.push(_t63));}else{var _t64=_n37.origin;lo(_t64)&&i.has(_t64)||e.push(_t64);}r&&e.push(r.caret.origin);if(_s(t.focus)&&lo(t.focus.origin)&&null===t.focus.getNodeAtCaret())for(var _n38=vs(t.focus.origin,"previous");ps(_n38)&&o.has(_n38.origin)&&!_n38.origin.isEmpty()&&_n38.origin.is(e[e.length-1]);_n38=Es(_n38))o["delete"](_n38.origin),e.pop();for(;e.length>1;){var _t65=e[e.length-1];if(!lo(_t65)||i.has(_t65)||_t65.isEmpty()||o.has(_t65))break;e.pop();}if(0===e.length&&t.isCollapsed()){var _n39=Hs(t.anchor),_r24=Hs(t.anchor.getFlipped()),_o18=function _o18(t){return gs(t)?t.origin:t.getNodeAtCaret();},_i0=_o18(_n39)||_o18(_r24)||(t.anchor.getNodeAtCaret()?_n39.origin:_r24.origin);e.push(_i0);}return e;}(qs($s(this),"next"));return Wr()||(this._cachedNodes=e),e;};_proto8.setTextNodeRange=function setTextNodeRange(t,e,n,r){this.anchor.set(t.__key,e,"text"),this.focus.set(n.__key,r,"text");};_proto8.getTextContent=function getTextContent(){var t=this.getNodes();if(0===t.length)return"";var e=t[0],n=t[t.length-1],r=this.anchor,o=this.focus,i=r.isBefore(o),_dr=dr(this),s=_dr[0],l=_dr[1];var c="",a=!0;for(var _u5=0;_u5<t.length;_u5++){var _f5=t[_u5];if(lo(_f5)&&!_f5.isInline())a||(c+="\n"),a=!_f5.isEmpty();else if(a=!1,Qn(_f5)){var _t66=_f5.getTextContent();_f5===e?_f5===n?"element"===r.type&&"element"===o.type&&o.offset!==r.offset||(_t66=s<l?_t66.slice(s,l):_t66.slice(l,s)):_t66=i?_t66.slice(s):_t66.slice(l):_f5===n&&(_t66=i?_t66.slice(0,l):_t66.slice(0,s)),c+=_t66;}else!uo(_f5)&&!In(_f5)||_f5===n&&this.isCollapsed()||(c+=_f5.getTextContent());}return c;};_proto8.applyDOMRange=function applyDOMRange(t){var e=Yr(),n=e.getEditorState()._selection,r=xr(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,n);if(null===r)return;var o=r[0],i=r[1];this.anchor.set(o.key,o.offset,o.type,!0),this.focus.set(i.key,i.offset,i.type,!0),ct(this);};_proto8.clone=function clone(){var t=this.anchor,e=this.focus;return new ar(or(t.key,t.offset,t.type),or(e.key,e.offset,e.type),this.format,this.style);};_proto8.toggleFormat=function toggleFormat(t){this.format=Jo(this.format,t,null),this.dirty=!0;};_proto8.setFormat=function setFormat(t){this.format=t,this.dirty=!0;};_proto8.setStyle=function setStyle(t){this.style=t,this.dirty=!0;};_proto8.hasFormat=function hasFormat(t){var e=A[t];return 0!==(this.format&e);};_proto8.insertRawText=function insertRawText(t){var e=t.split(/(\r?\n|\t)/),n=[],r=e.length;for(var _t67=0;_t67<r;_t67++){var _r25=e[_t67];"\n"===_r25||"\r\n"===_r25?n.push(Pn()):"\t"===_r25?n.push(er()):n.push(Xn(_r25));}this.insertNodes(n);};_proto8.insertText=function insertText(e){var n=this.anchor,r=this.focus,o=this.format,i=this.style;var s=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(s=r,l=n),"element"===s.type&&function(t,e,n,r){var o=t.getNode(),i=o.getChildAtIndex(t.offset),s=Xn();if(s.setFormat(n),s.setStyle(r),No(i))i.splice(0,0,[s]);else{var _t68=ho(o)?So().append(s):s;null===i?o.append(_t68):i.insertBefore(_t68);}t.is(e)&&e.set(s.__key,0,"text"),t.set(s.__key,0,"text");}(s,l,o,i),"element"===l.type&&Bs(l,Hs(Ks(l,"next")));var c=s.offset;var a=l.offset;var u=this.getNodes(),f=u.length;var d=u[0];Qn(d)||t(26);var h=d.getTextContent().length,g=d.getParentOrThrow();var _=u[f-1];if(1===f&&"element"===l.type&&(a=h,l.set(s.key,a,"text")),this.isCollapsed()&&c===h&&(zo(d)||!d.canInsertTextAfter()||!g.canInsertTextAfter()&&null===d.getNextSibling())){var _t69=d.getNextSibling();if(Qn(_t69)&&_t69.canInsertTextBefore()&&!zo(_t69)||(_t69=Xn(),_t69.setFormat(o),_t69.setStyle(i),g.canInsertTextAfter()?d.insertAfter(_t69):g.insertAfter(_t69)),_t69.select(0,0),d=_t69,""!==e)return void this.insertText(e);}else if(this.isCollapsed()&&0===c&&(zo(d)||!d.canInsertTextBefore()||!g.canInsertTextBefore()&&null===d.getPreviousSibling())){var _t70=d.getPreviousSibling();if(Qn(_t70)&&!zo(_t70)||(_t70=Xn(),_t70.setFormat(o),g.canInsertTextBefore()?d.insertBefore(_t70):g.insertBefore(_t70)),_t70.select(),d=_t70,""!==e)return void this.insertText(e);}else if(d.isSegmented()&&c!==h){var _t71=Xn(d.getTextContent());_t71.setFormat(o),d.replace(_t71),d=_t71;}else if(!this.isCollapsed()&&""!==e){var _t72=_.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||lo(_t72)&&(!_t72.canInsertTextBefore()||!_t72.canInsertTextAfter()))return this.insertText(""),mr(this.anchor,this.focus,null),void this.insertText(e);}if(1===f){if(Bo(d)){var _t73=Xn(e);return _t73.select(),void d.replace(_t73);}var _t74=d.getFormat(),_n40=d.getStyle();if(c!==a||_t74===o&&_n40===i){if(nr(d)){var _t75=Xn(e);return _t75.setFormat(o),_t75.setStyle(i),_t75.select(),void d.replace(_t75);}}else{if(""!==d.getTextContent()){var _t76=Xn(e);if(_t76.setFormat(o),_t76.setStyle(i),_t76.select(),0===c)d.insertBefore(_t76,!1);else{var _d$splitText=d.splitText(c),_e51=_d$splitText[0];_e51.insertAfter(_t76,!1);}return void(_t76.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length));}d.setFormat(o),d.setStyle(i);}var _r26=a-c;d=d.spliceText(c,_r26,e,!0),""===d.getTextContent()?d.remove():"text"===this.anchor.type&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=_t74,this.style=_n40));}else{var _t77=new Set([].concat(d.getParentKeys(),_.getParentKeys())),_n41=lo(d)?d:d.getParentOrThrow();var _r27=lo(_)?_:_.getParentOrThrow(),_o19=_;if(!_n41.is(_r27)&&_r27.isInline())do{_o19=_r27,_r27=_r27.getParentOrThrow();}while(_r27.isInline());if("text"===l.type&&(0!==a||""===_.getTextContent())||"element"===l.type&&_.getIndexWithinParent()<a){if(Qn(_)&&!Bo(_)&&a!==_.getTextContentSize()){if(_.isSegmented()){var _t78=Xn(_.getTextContent());_.replace(_t78),_=_t78;}ho(l.getNode())||"text"!==l.type||(_=_.spliceText(0,a,"")),_t77.add(_.__key);}else{var _t79=_.getParentOrThrow();_t79.canBeEmpty()||1!==_t79.getChildrenSize()?_.remove():_t79.remove();}}else _t77.add(_.__key);var _i1=_r27.getChildren(),_s7=new Set(u),_g5=_n41.is(_r27),_p2=_n41.isInline()&&null===d.getNextSibling()?_n41:d;for(var _t80=_i1.length-1;_t80>=0;_t80--){var _e52=_i1[_t80];if(_e52.is(d)||lo(_e52)&&_e52.isParentOf(d))break;_e52.isAttached()&&(!_s7.has(_e52)||_e52.is(_o19)?_g5||_p2.insertAfter(_e52,!1):_e52.remove());}if(!_g5){var _e53=_r27,_n42=null;for(;null!==_e53;){var _r28=_e53.getChildren(),_o20=_r28.length;(0===_o20||_r28[_o20-1].is(_n42))&&(_t77["delete"](_e53.__key),_n42=_e53),_e53=_e53.getParent();}}if(Bo(d)){if(c===h)d.select();else{var _t81=Xn(e);_t81.select(),d.replace(_t81);}}else d=d.spliceText(c,h-c,e,!0),""===d.getTextContent()?d.remove():"text"===this.anchor.type&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=d.getFormat(),this.style=d.getStyle()));for(var _e54=1;_e54<f;_e54++){var _n43=u[_e54],_r29=_n43.__key;_t77.has(_r29)||_n43.remove();}}};_proto8.removeText=function removeText(){var t=vr()===this;Ws(this,js($s(this))),t&&vr()!==this&&oi(this);};_proto8.formatText=function formatText(t,e){var _d$splitText2,_p$splitText;if(e===void 0){e=null;}if(this.isCollapsed())return this.toggleFormat(t),void Vo(null);var n=this.getNodes(),r=[];for(var _t82 of n)Qn(_t82)&&r.push(_t82);var o=function o(e){n.forEach(function(n){if(lo(n)){var _r30=n.getFormatFlags(t,e);n.setTextFormat(_r30);}});},i=r.length;if(0===i)return this.toggleFormat(t),Vo(null),void o(e);var s=this.anchor,l=this.focus,c=this.isBackward(),a=c?l:s,u=c?s:l;var f=0,d=r[0],h="element"===a.type?0:a.offset;if("text"===a.type&&h===d.getTextContentSize()&&(f=1,d=r[1],h=0),null==d)return;var g=d.getFormatFlags(t,e);o(g);var _=i-1;var p=r[_];var y="text"===u.type?u.offset:p.getTextContentSize();if(d.is(p)){if(h===y)return;if(zo(d)||0===h&&y===d.getTextContentSize())d.setFormat(g);else{var _t83=d.splitText(h,y),_e55=0===h?_t83[0]:_t83[1];_e55.setFormat(g),"text"===a.type&&a.set(_e55.__key,0,"text"),"text"===u.type&&u.set(_e55.__key,y-h,"text");}return void(this.format=g);}0===h||zo(d)||(_d$splitText2=d.splitText(h),d=_d$splitText2[1],h=0),d.setFormat(g);var m=p.getFormatFlags(t,g);y>0&&(y===p.getTextContentSize()||zo(p)||(_p$splitText=p.splitText(y),p=_p$splitText[0],_p$splitText),p.setFormat(m));for(var _e56=f+1;_e56<_;_e56++){var _n44=r[_e56],_o21=_n44.getFormatFlags(t,m);_n44.setFormat(_o21);}"text"===a.type&&a.set(d.__key,h,"text"),"text"===u.type&&u.set(p.__key,y,"text"),this.format=g|m;};_proto8.insertNodes=function insertNodes(e){if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();var _n45=vr();return cr(_n45)||t(134),_n45.insertNodes(e);}var n=(this.isBackward()?this.focus:this.anchor).getNode(),r=is(n,Gi),o=e[e.length-1];if(lo(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{var _t84=Dr(this);r.splice(_t84,0,e),o.selectEnd();}return;}if(!e.some(function(t){return(lo(t)||uo(t))&&!t.isInline();})){lo(r)||t(211,n.constructor.name,n.getType());var _i10=Dr(this);return r.splice(_i10,0,e),void o.selectEnd();}var i=function(t){var e=So();var n=null;for(var _r31=0;_r31<t.length;_r31++){var _o22=t[_r31],_i11=In(_o22);if(_i11||uo(_o22)&&_o22.isInline()||lo(_o22)&&_o22.isInline()||Qn(_o22)||_o22.isParentRequired()){if(null===n&&(n=_o22.createParentElementNode(),e.append(n),_i11))continue;null!==n&&n.append(_o22);}else e.append(_o22),n=null;}return e;}(e),s=i.getLastDescendant(),l=i.getChildren(),c=!lo(r)||!r.isEmpty()?this.insertParagraph():null,a=l[l.length-1];var u=l[0];var f;lo(f=u)&&Gi(f)&&!f.isEmpty()&&lo(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(lo(r)||t(211,n.constructor.name,n.getType()),r.append.apply(r,u.getChildren()),u=l[1]),u&&(null===r&&t(212,n.constructor.name,n.getType()),function(e,n){var r=n.getParentOrThrow().getLastChild();var o=n;var i=[n];for(;o!==r;)o.getNextSibling()||t(140),o=o.getNextSibling(),i.push(o);var s=e;for(var _t85 of i)s=s.insertAfter(_t85);}(r,u));var d=is(s,Gi);c&&lo(d)&&(c.canMergeWhenEmpty()||Gi(a))&&(d.append.apply(d,c.getChildren()),c.remove()),lo(r)&&r.isEmpty()&&r.remove(),s.selectEnd();var h=lo(r)?r.getLastChild():null;In(h)&&d!==r&&h.remove();};_proto8.insertParagraph=function insertParagraph(){if("root"===this.anchor.key){var _t86=So();return ni().splice(this.anchor.offset,0,[_t86]),_t86.select(),_t86;}var e=Dr(this),n=is(this.anchor.getNode(),Gi);lo(n)||t(213);var r=n.getChildAtIndex(e),o=r?[r].concat(r.getNextSiblings()):[],i=n.insertNewAfter(this,!1);return i?(i.append.apply(i,o),i.selectStart(),i):null;};_proto8.insertLineBreak=function insertLineBreak(t){var e=Pn();if(this.insertNodes([e]),t){var _t87=e.getParentOrThrow(),_n46=e.getIndexWithinParent();_t87.select(_n46,_n46);}};_proto8.extract=function extract(){var _n$splitText;var t=[].concat(this.getNodes()),e=t.length;var n=t[0],r=t[e-1];var _dr2=dr(this),o=_dr2[0],i=_dr2[1],s=this.isBackward(),_ref14=s?[this.focus,this.anchor]:[this.anchor,this.focus],l=_ref14[0],c=_ref14[1],_ref15=s?[i,o]:[o,i],a=_ref15[0],u=_ref15[1];if(0===e)return[];if(1===e){if(Qn(n)&&!this.isCollapsed()){var _t88=n.splitText(a,u),_e57=0===a?_t88[0]:_t88[1];return _e57?(l.set(_e57.getKey(),0,"text"),c.set(_e57.getKey(),_e57.getTextContentSize(),"text"),[_e57]):[];}return[n];}if(Qn(n)&&(a===n.getTextContentSize()?t.shift():0!==a&&(_n$splitText=n.splitText(a),n=_n$splitText[1],t[0]=n,l.set(n.getKey(),0,"text"))),Qn(r)){var _r$splitText;var _e58=r.getTextContent().length;0===u?t.pop():u!==_e58&&(_r$splitText=r.splitText(u),r=_r$splitText[0],t[t.length-1]=r,c.set(r.getKey(),r.getTextContentSize(),"text"));}return t;};_proto8.modify=function modify(t,e,n){if(Ir(this,t,e,n))return;var r="move"===t,o=Yr(),i=$i(Pi(o));if(!i)return;var s=o._blockCursorElement,l=o._rootElement,c=this.focus.getNode();if(null===l||null===s||!lo(c)||c.isInline()||c.canBeEmpty()||Wi(s,o,l),this.dirty){var _t89=Ei(o,this.anchor.key),_e59=Ei(o,this.focus.key);"text"===this.anchor.type&&(_t89=Uo(_t89)),"text"===this.focus.type&&(_e59=Uo(_e59)),_t89&&_e59&&Ar(i,_t89,this.anchor.offset,_e59,this.focus.offset);}if(function(t,e,n,r){t.modify(e,n,r);}(i,t,e?"backward":"forward",n),i.rangeCount>0){var _t90=i.getRangeAt(0),_n47=this.anchor.getNode(),_o23=ho(_n47)?_n47:Ii(_n47);if(this.applyDOMRange(_t90),this.dirty=!0,!r){var _n48=this.getNodes(),_r32=[];var _s8=!1;for(var _t91=0;_t91<_n48.length;_t91++){var _e60=_n48[_t91];wi(_e60,_o23)?_r32.push(_e60):_s8=!0;}if(_s8&&_r32.length>0)if(e){var _t92=_r32[0];lo(_t92)?_t92.selectStart():_t92.getParentOrThrow().selectStart();}else{var _t93=_r32[_r32.length-1];lo(_t93)?_t93.selectEnd():_t93.getParentOrThrow().selectEnd();}i.anchorNode===_t90.startContainer&&i.anchorOffset===_t90.startOffset||function(t){var e=t.focus,n=t.anchor,r=n.key,o=n.offset,i=n.type;n.set(e.key,e.offset,e.type,!0),e.set(r,o,i,!0);}(this);}}"lineboundary"===n&&Ir(this,t,e,n,"decorators");};_proto8.forwardDeletion=function forwardDeletion(t,e,n){if(!n&&("element"===t.type&&lo(e)&&t.offset===e.getChildrenSize()||"text"===t.type&&t.offset===e.getTextContentSize())){var _t94=e.getParent(),_n49=e.getNextSibling()||(null===_t94?null:_t94.getNextSibling());if(lo(_n49)&&_n49.isShadowRoot())return!0;}return!1;};_proto8.deleteCharacter=function deleteCharacter(t){var e=this.isCollapsed();if(this.isCollapsed()){var _e61=this.anchor;var _n50=_e61.getNode();if(this.forwardDeletion(_e61,_n50,t))return;var _r33=Ms(Ks(_e61,t?"previous":"next"));if(_r33.getTextSlices().every(function(t){return null===t||0===t.distance;})){var _t95={type:"initial"};for(var _e62 of _r33.iterNodeCarets("shadowRoot"))if(ps(_e62)){if(_e62.origin.isInline());else{if(_e62.origin.isShadowRoot()){if("merge-block"===_t95.type)break;if(lo(_r33.anchor.origin)&&_r33.anchor.origin.isEmpty()){var _t96=Hs(_e62);Ws(this,ws(_t96,_t96)),_r33.anchor.origin.remove();}return;}"merge-next-block"!==_t95.type&&"merge-block"!==_t95.type||(_t95={block:_t95.block,caret:_e62,type:"merge-block"});}}else{if("merge-block"===_t95.type)break;if(_s(_e62)){if(lo(_e62.origin)){if(_e62.origin.isInline()){if(!_e62.origin.isParentOf(_r33.anchor.origin))break;}else _t95={block:_e62.origin,type:"merge-next-block"};continue;}if(uo(_e62.origin)){if(_e62.origin.isIsolated());else if("merge-next-block"===_t95.type&&(_e62.origin.isKeyboardSelectable()||!_e62.origin.isInline())&&lo(_r33.anchor.origin)&&_r33.anchor.origin.isEmpty()){_r33.anchor.origin.remove();var _t97=Nr();_t97.add(_e62.origin.getKey()),oi(_t97);}else _e62.origin.remove();return;}break;}}if("merge-block"===_t95.type){var _t98=_t95,_e63=_t98.caret,_n51=_t98.block;return Ws(this,ws(!_e63.origin.isEmpty()&&_n51.isEmpty()?Us(Cs(_n51,_e63.direction)):_r33.anchor,_e63)),this.removeText();}}var _o24=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&0===_e61.offset&&hr(this,_e61.getNode()))return;}else{var _r34="text"===_o24.type?_o24.getNode():null;if(_n50="text"===_e61.type?_e61.getNode():null,null!==_r34&&_r34.isSegmented()){var _e64=_o24.offset,_i12=_r34.getTextContentSize();if(_r34.is(_n50)||t&&_e64!==_i12||!t&&0!==_e64)return void _r(_r34,t,_e64);}else if(null!==_n50&&_n50.isSegmented()){var _o25=_e61.offset,_i13=_n50.getTextContentSize();if(_n50.is(_r34)||t&&0!==_o25||!t&&_o25!==_i13)return void _r(_n50,t,_o25);}!function(t,e){var n=t.anchor,r=t.focus,o=n.getNode(),i=r.getNode();if(o===i&&"text"===n.type&&"text"===r.type){var _t99=n.offset,_i14=r.offset,_s9=_t99<_i14,_l5=_s9?_t99:_i14,_c4=_s9?_i14:_t99,_a5=_c4-1;if(_l5!==_a5){(function(t){return!(si(t)||gr(t));})(o.getTextContent().slice(_l5,_c4))&&(e?r.set(r.key,_a5,r.type):n.set(n.key,_a5,n.type));}}}(this,t);}}if(this.removeText(),t&&!e&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){var _t100=this.anchor.getNode();_t100.isEmpty()&&ho(_t100.getParent())&&null===_t100.getPreviousSibling()&&hr(this,_t100);}};_proto8.deleteLine=function deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText();};_proto8.deleteWord=function deleteWord(t){if(this.isCollapsed()){var _e65=this.anchor,_n52=_e65.getNode();if(this.forwardDeletion(_e65,_n52,t))return;this.modify("extend",t,"word");}this.removeText();};_proto8.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto8.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};return ar;}();function ur(t){return t instanceof _lr;}function fr(t){var e=t.offset;if("text"===t.type)return e;var n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0;}function dr(t){var e=t.getStartEndPoints();if(null===e)return[0,0];var n=e[0],r=e[1];return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[fr(n),fr(r)];}function hr(t,e){for(var _n53=e;_n53;_n53=_n53.getParent()){if(lo(_n53)){if(_n53.collapseAtStart(t))return!0;if(Li(_n53))break;}if(_n53.getPreviousSibling())break;}return!1;}var gr=function(){try{var _t101=new RegExp("\\p{Emoji}","u"),_e66=_t101.test.bind(_t101);if(_e66("")&&_e66("#")&&_e66(""))return _e66;}catch(t){}return function(){return!1;};}();function _r(t,e,n){var r=t,o=r.getTextContent().split(/(?=\s)/g),i=o.length;var s=0,l=0;for(var _t102=0;_t102<i;_t102++){var _r35=_t102===i-1;if(l=s,s+=o[_t102].length,e&&s===n||s>n||_r35){o.splice(_t102,1),_r35&&(l=void 0);break;}}var c=o.join("").trim();""===c?r.remove():(r.setTextContent(c),r.select(l,l));}function pr(e,n,r,o){var i,s=n;if(Ji(e)){var _l6=!1;var _c5=e.childNodes,_a6=_c5.length,_u6=o._blockCursorElement;s===_a6&&(_l6=!0,s=_a6-1);var _f6=_c5[s],_d4=!1;if(_f6===_u6)_f6=_c5[s+1],_d4=!0;else if(null!==_u6){var _t103=_u6.parentNode;if(e===_t103){n>Array.prototype.indexOf.call(_t103.children,_u6)&&s--;}}if(i=ii(_f6),Qn(i))s=Ns(i,_l6?"next":"previous");else{var _c6=ii(e);if(null===_c6)return null;if(lo(_c6)){var _u7$resolveChildIndex;var _a7=o.getElementByKey(_c6.getKey());null===_a7&&t(214);var _u7=_c6.getDOMSlot(_a7);_u7$resolveChildIndex=_u7.resolveChildIndex(_c6,_a7,e,n),_c6=_u7$resolveChildIndex[0],s=_u7$resolveChildIndex[1],lo(_c6)||t(215),_l6&&s>=_c6.getChildrenSize()&&(s=Math.max(0,_c6.getChildrenSize()-1));var _f7=_c6.getChildAtIndex(s);if(lo(_f7)&&function(t,e,n){var r=t.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode();}(_f7,0,r)){var _t104=_l6?_f7.getLastDescendant():_f7.getFirstDescendant();null===_t104?_c6=_f7:(_f7=_t104,_c6=lo(_f7)?_f7:_f7.getParentOrThrow()),s=0;}Qn(_f7)?(i=_f7,_c6=null,s=Ns(_f7,_l6?"next":"previous")):_f7!==_c6&&_l6&&!_d4&&(lo(_c6)||t(216),s=Math.min(_c6.getChildrenSize(),s+1));}else{var _t105=_c6.getIndexWithinParent();s=0===n&&uo(_c6)&&ii(e)===_c6?_t105:_t105+1,_c6=_c6.getParentOrThrow();}if(lo(_c6))return or(_c6.__key,s,"element");}}else i=ii(e);return Qn(i)?or(i.__key,Ns(i,s,"clamp"),"text"):null;}function yr(t,e,n){var r=t.offset,o=t.getNode();if(0===r){var _r36=o.getPreviousSibling(),_i15=o.getParent();if(e){if((n||!e)&&null===_r36&&lo(_i15)&&_i15.isInline()){var _e67=_i15.getPreviousSibling();Qn(_e67)&&t.set(_e67.__key,_e67.getTextContent().length,"text");}}else lo(_r36)&&!n&&_r36.isInline()?t.set(_r36.__key,_r36.getChildrenSize(),"element"):Qn(_r36)&&t.set(_r36.__key,_r36.getTextContent().length,"text");}else if(r===o.getTextContent().length){var _r37=o.getNextSibling(),_i16=o.getParent();if(e&&lo(_r37)&&_r37.isInline())t.set(_r37.__key,0,"element");else if((n||e)&&null===_r37&&lo(_i16)&&_i16.isInline()&&!_i16.canInsertTextAfter()){var _e68=_i16.getNextSibling();Qn(_e68)&&t.set(_e68.__key,0,"text");}}}function mr(t,e,n){if("text"===t.type&&"text"===e.type){var _r38=t.isBefore(e),_o26=t.is(e);yr(t,_r38,_o26),yr(e,!_r38,_o26),_o26&&e.set(t.key,t.offset,t.type);var _i17=Yr();if(_i17.isComposing()&&_i17._compositionKey!==t.key&&cr(n)){var _r39=n.anchor,_o27=n.focus;t.set(_r39.key,_r39.offset,_r39.type,!0),e.set(_o27.key,_o27.offset,_o27.type,!0);}}}function xr(t,e,n,r,o,i){if(null===t||null===n||!Lo(o,t,n))return null;var s=pr(t,e,cr(i)?i.anchor:null,o);if(null===s)return null;var l=pr(n,r,cr(i)?i.focus:null,o);if(null===l)return null;if("element"===s.type&&"element"===l.type){var _e69=ii(t),_r40=ii(n);if(uo(_e69)&&uo(_r40))return null;}return mr(s,l,i),[s,l];}function Cr(t,e,n,r,o,i){var s=Jr(),l=new _ar(or(t,e,o),or(n,r,i),0,"");return l.dirty=!0,s._selection=l,l;}function Sr(){var t=or("root",0,"element"),e=or("root",0,"element");return new _ar(t,e,0,"");}function Nr(){return new _lr(new Set());}function Tr(t,e,n,r){var o=n._window;if(null===o)return null;var i=r||o.event,s=i?i.type:void 0,l="selectionchange"===s,c=!K&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||"drop"===s||void 0===s);var a,u,f,d;if(cr(t)&&!c)return t.clone();if(null===e)return null;if(a=e.anchorNode,u=e.focusNode,f=e.anchorOffset,d=e.focusOffset,(l||void 0===s)&&cr(t)&&!Lo(n,a,u))return t.clone();var h=xr(a,f,u,d,n,t);if(null===h)return null;var g=h[0],_=h[1];return new _ar(g,_,cr(t)?t.format:0,cr(t)?t.style:"");}function vr(){return Jr()._selection;}function kr(){return Yr()._editorState._selection;}function Er(t,e,n,r){if(r===void 0){r=1;}var o=t.anchor,i=t.focus,s=o.getNode(),l=i.getNode();if(!e.is(s)&&!e.is(l))return;var c=e.__key;if(t.isCollapsed()){var _e70=o.offset;if(n<=_e70&&r>0||n<_e70&&r<0){var _n54=Math.max(0,_e70+r);o.set(c,_n54,"element"),i.set(c,_n54,"element"),Or(t);}}else{var _s0=t.isBackward(),_l7=_s0?i:o,_a8=_l7.getNode(),_u8=_s0?o:i,_f8=_u8.getNode();if(e.is(_a8)){var _t106=_l7.offset;(n<=_t106&&r>0||n<_t106&&r<0)&&_l7.set(c,Math.max(0,_t106+r),"element");}if(e.is(_f8)){var _t107=_u8.offset;(n<=_t107&&r>0||n<_t107&&r<0)&&_u8.set(c,Math.max(0,_t107+r),"element");}}Or(t);}function Or(t){var e=t.anchor,n=e.offset,r=t.focus,o=r.offset,i=e.getNode(),s=r.getNode();if(t.isCollapsed()){if(!lo(i))return;var _t108=i.getChildrenSize(),_o28=n>=_t108,_s1=_o28?i.getChildAtIndex(_t108-1):i.getChildAtIndex(n);if(Qn(_s1)){var _t109=0;_o28&&(_t109=_s1.getTextContentSize()),e.set(_s1.__key,_t109,"text"),r.set(_s1.__key,_t109,"text");}return;}if(lo(i)){var _t110=i.getChildrenSize(),_r41=n>=_t110,_o29=_r41?i.getChildAtIndex(_t110-1):i.getChildAtIndex(n);if(Qn(_o29)){var _t111=0;_r41&&(_t111=_o29.getTextContentSize()),e.set(_o29.__key,_t111,"text");}}if(lo(s)){var _t112=s.getChildrenSize(),_e71=o>=_t112,_n55=_e71?s.getChildAtIndex(_t112-1):s.getChildAtIndex(o);if(Qn(_n55)){var _t113=0;_e71&&(_t113=_n55.getTextContentSize()),r.set(_n55.__key,_t113,"text");}}}function br(t,e,n,r,o){var i=null,s=0,l=null;null!==r?(i=r.__key,Qn(r)?(s=r.getTextContentSize(),l="text"):lo(r)&&(s=r.getChildrenSize(),l="element")):null!==o&&(i=o.__key,Qn(o)?l="text":lo(o)&&(l="element")),null!==i&&null!==l?t.set(i,s,l):(s=e.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),t.set(n.__key,s,"element"));}function Mr(t,e,n,r,o){"text"===t.type?t.set(n,t.offset+(e?0:o),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element");}function Ar(t,e,n,r,o){try{t.setBaseAndExtent(e,n,r,o);}catch(t){}}function wr(t,e,n,r,o,s,l){var c=r.anchorNode,a=r.focusNode,u=r.anchorOffset,f=r.focusOffset,d=document.activeElement;if(o.has(On)&&d!==s||null!==d&&Io(d))return;if(!cr(e))return void(null!==t&&Lo(n,c,a)&&r.removeAllRanges());var h=e.anchor,g=e.focus,_=h.key,p=g.key,y=Ei(n,_),m=Ei(n,p),x=h.offset,C=g.offset,S=e.format,N=e.style,T=e.isCollapsed();var v=y,k=m,E=!1;if("text"===h.type){v=Uo(y);var _t114=h.getNode();E=_t114.getFormat()!==S||_t114.getStyle()!==N;}else cr(t)&&"text"===t.anchor.type&&(E=!0);var O,b,M,A,w;if(("text"===g.type&&(k=Uo(m)),null!==v&&null!==k)&&(T&&(null===t||E||cr(t)&&(t.format!==S||t.style!==N))&&(O=S,b=N,M=x,A=_,w=performance.now(),en=[O,b,M,A,w]),u!==x||f!==C||c!==v||a!==k||"Range"===r.type&&T||(null!==d&&s.contains(d)||o.has(An)||s.focus({preventScroll:!0}),"element"===h.type))){if(Ar(r,v,x,k,C),!i||!e.isCollapsed()||null===s||o.has(An)||null!==document.activeElement&&s.contains(document.activeElement)||s.focus({preventScroll:!0}),!o.has(bn)&&e.isCollapsed()&&null!==s&&s===document.activeElement){var _t115=cr(e)&&"element"===e.anchor.type?v.childNodes[x]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==_t115){var _e72;if(_t115 instanceof Text){var _n56=document.createRange();_n56.selectNode(_t115),_e72=_n56.getBoundingClientRect();}else _e72=_t115.getBoundingClientRect();!function(t,e,n){var r=bi(n),o=Di(r);if(null===r||null===o)return;var i=e.top,s=e.bottom,l=0,c=0,a=n;for(;null!==a;){var _e73=a===r.body;if(_e73)l=0,c=Pi(t).innerHeight;else{var _t116=a.getBoundingClientRect();l=_t116.top,c=_t116.bottom;}var _n57=0;if(i<l?_n57=-(l-i):s>c&&(_n57=s-c),0!==_n57)if(_e73)o.scrollBy(0,_n57);else{var _t117=a.scrollTop;a.scrollTop+=_n57;var _e74=a.scrollTop-_t117;i-=_e74,s-=_e74;}if(_e73)break;a=Oi(a);}}(n,_e72,s);}}Ve=!0;}}function Dr(e){var n=e;e.isCollapsed()||n.removeText();var r=vr();cr(r)&&(n=r),cr(n)||t(161);var o=n.anchor;var i=o.getNode(),s=o.offset;for(;!Gi(i);){var _Pr;var _t118=i;if(_Pr=Pr(i,s),i=_Pr[0],s=_Pr[1],_t118.is(i))break;}return s;}function Pr(t,e){var n=t.getParent();if(!n){var _t119=So();return ni().append(_t119),_t119.select(),[ni(),0];}if(Qn(t)){var _r42=t.splitText(e);if(0===_r42.length)return[n,t.getIndexWithinParent()];var _o30=0===e?0:1;return[n,_r42[0].getIndexWithinParent()+_o30];}if(!lo(t)||0===e)return[n,t.getIndexWithinParent()];var r=t.getChildAtIndex(e);if(r){var _n58=new _ar(or(t.__key,e,"element"),or(t.__key,e,"element"),0,""),_o31=t.insertNewAfter(_n58);_o31&&_o31.append.apply(_o31,[r].concat(r.getNextSiblings()));}return[n,t.getIndexWithinParent()+1];}function Ir(t,e,n,r,o){if(o===void 0){o="decorators-and-blocks";}if("move"===e&&"character"===r&&!t.isCollapsed()){var _ref16=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus],_e75=_ref16[0],_r43=_ref16[1];return _r43.set(_e75.key,_e75.offset,_e75.type),!0;}var i=Ks(t.focus,n?"previous":"next"),s="lineboundary"===r,l="move"===e;var c=i,a="decorators-and-blocks"===o;if(!Vs(c)){for(var _t120 of c){a=!1;var _e76=_t120.origin;if(!uo(_e76)||_e76.isIsolated()||(c=_t120,!s||!_e76.isInline()))break;}if(a)for(var _t121 of Ms(i).iterNodeCarets("extend"===e?"shadowRoot":"root")){if(ps(_t121))_t121.origin.isInline()||(c=_t121);else{if(lo(_t121.origin))continue;uo(_t121.origin)&&!_t121.origin.isInline()&&(c=_t121);}break;}}if(c===i)return!1;if(l&&!s&&uo(c.origin)&&c.origin.isKeyboardSelectable()){var _t122=Nr();return _t122.add(c.origin.getKey()),oi(_t122),!0;}return c=Hs(c),l&&Bs(t.anchor,c),Bs(t.focus,c),a||!s;}var Lr=null,Fr=null,Rr=!1,Kr=!1,Br=0;var zr={characterData:!0,childList:!0,subtree:!0};function Wr(){return Rr||null!==Lr&&Lr._readOnly;}function $r(){Rr&&t(13);}function Ur(){Br>99&&t(14);}function Jr(){return null===Lr&&t(195,jr()),Lr;}function Yr(){return null===Fr&&t(196,jr()),Fr;}function jr(){var t=0;var e=new Set(),n=_Eo.version;if("undefined"!=typeof window)for(var _r44 of document.querySelectorAll("[contenteditable]")){var _o32=Ko(_r44);if(Fo(_o32))t++;else if(_o32){var _t123=String(_o32.constructor.version||"<0.17.1");_t123===n&&(_t123+=" (separately built, likely a bundler configuration issue)"),e.add(_t123);}}var r=" Detected on the page: "+t+" compatible editor(s) with version "+n;return e.size&&(r+=" and incompatible editors with versions "+Array.from(e).join(", ")),r;}function Hr(){return Fr;}function Vr(t,e,n){var r=e.__type,o=Ao(t,r);var i=n.get(r);void 0===i&&(i=Array.from(o.transforms),n.set(r,i));var s=i.length;for(var _t124=0;_t124<s&&(i[_t124](e),e.isAttached());_t124++);}function Gr(t,e){return void 0!==t&&t.__key!==e&&t.isAttached();}function qr(t,e){if(!e)return;var n=t._updateTags;var r=e;Array.isArray(e)||(r=[e]);for(var _t125 of r)n.add(_t125);}function Xr(e,n){var r=e.type,o=n.get(r);void 0===o&&t(17,r);var i=o.klass;e.type!==i.getType()&&t(18,i.name);var s=i.importJSON(e),l=e.children;if(lo(s)&&Array.isArray(l))for(var _t126=0;_t126<l.length;_t126++){var _e77=Xr(l[_t126],n);s.append(_e77);}return s;}function Qr(t,e,n){var r=Lr,o=Rr,i=Fr;Lr=e,Rr=!0,Fr=t;try{return n();}finally{Lr=r,Rr=o,Fr=i;}}function Zr(t,e){var n=t._pendingEditorState,r=t._rootElement,o=t._headless||null===r;if(null===n)return;var i=t._editorState,s=i._selection,l=n._selection,c=0!==t._dirtyType,a=Lr,u=Rr,f=Fr,d=t._updating,h=t._observer;var g=null;if(t._pendingEditorState=null,t._editorState=n,!o&&c&&null!==h){Fr=t,Lr=n,Rr=!1,t._updating=!0;try{var _e78=t._dirtyType,_r45=t._dirtyElements,_o33=t._dirtyLeaves;h.disconnect(),g=$t(i,n,t,_e78,_r45,_o33);}catch(e){if(e instanceof Error&&t._onError(e),Kr)throw e;return vo(t,null,r,n),H(t),t._dirtyType=2,Kr=!0,Zr(t,i),void(Kr=!1);}finally{h.observe(r,zr),t._updating=d,Lr=a,Rr=u,Fr=f;}}n._readOnly||(n._readOnly=!0);var _=t._dirtyLeaves,p=t._dirtyElements,y=t._normalizedNodes,m=t._updateTags,x=t._deferred;c&&(t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set(),t._dirtyElements=new Map(),t._normalizedNodes=new Set(),t._updateTags=new Set()),function(t,e){var n=t._decorators;var r=t._pendingDecorators||n;var o=e._nodeMap;var i;for(i in r)o.has(i)||(r===n&&(r=ti(t)),delete r[i]);}(t,n);var C=o?null:$i(Pi(t));if(t._editable&&null!==C&&(c||null===l||l.dirty||!l.is(s))&&null!==r&&!m.has(Mn)){Fr=t,Lr=n;try{if(null!==h&&h.disconnect(),c||null===l||l.dirty){var _e79=t._blockCursorElement;null!==_e79&&Wi(_e79,t,r),wr(s,l,t,C,m,r);}!function(t,e,n){var r=t._blockCursorElement;if(cr(n)&&n.isCollapsed()&&"element"===n.anchor.type&&e.contains(document.activeElement)){var _o34=n.anchor,_i18=_o34.getNode(),_s10=_o34.offset;var _l8=!1,_c7=null;if(_s10===_i18.getChildrenSize()){zi(_i18.getChildAtIndex(_s10-1))&&(_l8=!0);}else{var _e80=_i18.getChildAtIndex(_s10);if(null!==_e80&&zi(_e80)){var _n59=_e80.getPreviousSibling();(null===_n59||zi(_n59))&&(_l8=!0,_c7=t.getElementByKey(_e80.__key));}}if(_l8){var _n60=t.getElementByKey(_i18.__key);return null===r&&(t._blockCursorElement=r=function(t){var e=t.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");var r=e.blockCursor;if(void 0!==r){var _n$classList;if("string"==typeof r){var _t127=tl(r);r=e.blockCursor=_t127;}void 0!==r&&(_n$classList=n.classList).add.apply(_n$classList,r);}return n;}(t._config)),e.style.caretColor="transparent",void(null===_c7?_n60.appendChild(r):_n60.insertBefore(r,_c7));}}null!==r&&Wi(r,t,e);}(t,r,l);}finally{null!==h&&h.observe(r,zr),Fr=f,Lr=a;}}null!==g&&function(t,e,n,r,o){var i=Array.from(t._listeners.mutation),s=i.length;for(var _t128=0;_t128<s;_t128++){var _i$_t=i[_t128],_s11=_i$_t[0],_l9=_i$_t[1];for(var _t129 of _l9){var _i19=e.get(_t129);void 0!==_i19&&_s11(_i19,{dirtyLeaves:r,prevEditorState:o,updateTags:n});}}}(t,g,m,_,i),cr(l)||null===l||null!==s&&s.is(l)||t.dispatchCommand(Yt,void 0);var S=t._pendingDecorators;null!==S&&(t._decorators=S,t._pendingDecorators=null,to("decorator",t,!0,S)),function(t,e,n){var r=ei(e),o=ei(n);r!==o&&to("textcontent",t,!0,o);}(t,e||i,n),to("update",t,!0,{dirtyElements:p,dirtyLeaves:_,editorState:n,mutatedNodes:g,normalizedNodes:y,prevEditorState:e||i,tags:m}),function(t,e){if(t._deferred=[],0!==e.length){var _n61=t._updating;t._updating=!0;try{for(var _t130=0;_t130<e.length;_t130++)e[_t130]();}finally{t._updating=_n61;}}}(t,x),function(t){var e=t._updates;if(0!==e.length){var _n62=e.shift();if(_n62){var _e81=_n62[0],_r46=_n62[1];no(t,_e81,_r46);}}}(t);}function to(t,e,n){var o=e._updating;e._updating=n;try{var _n63=Array.from(e._listeners[t]);for(var _len4=arguments.length,r=new Array(_len4>3?_len4-3:0),_key4=3;_key4<_len4;_key4++){r[_key4-3]=arguments[_key4];}for(var _t131=0;_t131<_n63.length;_t131++)_n63[_t131].apply(null,r);}finally{e._updating=o;}}function eo(e,n){var r=e._updates;var o=n||!1;for(;0!==r.length;){var _n64=r.shift();if(_n64){var _r47=_n64[0],_i20=_n64[1],_s12=e._pendingEditorState;var _l0=void 0;void 0!==_i20&&(_l0=_i20.onUpdate,_i20.skipTransforms&&(o=!0),_i20.discrete&&(null===_s12&&t(191),_s12._flushSync=!0),_l0&&e._deferred.push(_l0),qr(e,_i20.tag)),null==_s12?no(e,_r47,_i20):_r47();}}return o;}function no(e,n,r){var o=e._updateTags;var i,s=!1,l=!1;void 0!==r&&(i=r.onUpdate,qr(e,r.tag),s=r.skipTransforms||!1,l=r.discrete||!1),i&&e._deferred.push(i);var c=e._editorState;var a=e._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=go(a||c),u=!0),a._flushSync=l;var f=Lr,d=Rr,h=Fr,g=e._updating;Lr=a,Rr=!1,e._updating=!0,Fr=e;var _=e._headless||null===e.getRootElement();bo(null);try{u&&(_?null!==c._selection&&(a._selection=c._selection.clone()):a._selection=function(t,e){var n=t.getEditorState()._selection,r=$i(Pi(t));return cr(n)||null==n?Tr(n,r,t,e):n.clone();}(e,r&&r.event||null));var _o35=e._compositionKey;n(),s=eo(e,s),function(t,e){var n=e.getEditorState()._selection,r=t._selection;if(cr(r)){var _t132=r.anchor,_e82=r.focus;var _o36;if("text"===_t132.type&&(_o36=_t132.getNode(),_o36.selectionTransform(n,r)),"text"===_e82.type){var _t133=_e82.getNode();_o36!==_t133&&_t133.selectionTransform(n,r);}}}(a,e),0!==e._dirtyType&&(s?function(t,e){var n=e._dirtyLeaves,r=t._nodeMap;for(var _t134 of n){var _e83=r.get(_t134);Qn(_e83)&&_e83.isAttached()&&_e83.isSimpleText()&&!_e83.isUnmergeable()&&lt(_e83);}}(a,e):function(t,e){var n=e._dirtyLeaves,r=e._dirtyElements,o=t._nodeMap,i=Go(),s=new Map();var l=n,c=l.size,a=r,u=a.size;for(;c>0||u>0;){if(c>0){e._dirtyLeaves=new Set();for(var _t135 of l){var _r48=o.get(_t135);Qn(_r48)&&_r48.isAttached()&&_r48.isSimpleText()&&!_r48.isUnmergeable()&&lt(_r48),void 0!==_r48&&Gr(_r48,i)&&Vr(e,_r48,s),n.add(_t135);}if(l=e._dirtyLeaves,c=l.size,c>0){Br++;continue;}}e._dirtyLeaves=new Set(),e._dirtyElements=new Map(),a["delete"]("root")&&a.set("root",!0);for(var _t136 of a){var _n65=_t136[0],_l1=_t136[1];if(r.set(_n65,_l1),!_l1)continue;var _c8=o.get(_n65);void 0!==_c8&&Gr(_c8,i)&&Vr(e,_c8,s);}l=e._dirtyLeaves,c=l.size,a=e._dirtyElements,u=a.size,Br++;}e._dirtyLeaves=n,e._dirtyElements=r;}(a,e),eo(e),function(t,e,n,r){var o=t._nodeMap,i=e._nodeMap,s=[];for(var _ref18 of r){var _t137=_ref18[0];{var _e84=i.get(_t137);void 0!==_e84&&(_e84.isAttached()||(lo(_e84)&&R(_e84,_t137,o,i,s,r),o.has(_t137)||r["delete"](_t137),s.push(_t137)));}}for(var _t138 of s)i["delete"](_t138);for(var _t139 of n){var _e85=i.get(_t139);void 0===_e85||_e85.isAttached()||(o.has(_t139)||n["delete"](_t139),i["delete"](_t139));}}(c,a,e._dirtyLeaves,e._dirtyElements));_o35!==e._compositionKey&&(a._flushSync=!0);var _i21=a._selection;if(cr(_i21)){var _e86=a._nodeMap,_n66=_i21.anchor.key,_r49=_i21.focus.key;void 0!==_e86.get(_n66)&&void 0!==_e86.get(_r49)||t(19);}else ur(_i21)&&0===_i21._nodes.size&&(a._selection=null);}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=c,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set(),e._dirtyElements.clear(),void Zr(e);}finally{Lr=f,Rr=d,Fr=h,e._updating=g,Br=0;}var p=0!==e._dirtyType||e._deferred.length>0||function(t,e){var n=e.getEditorState()._selection,r=t._selection;if(null!==r){if(r.dirty||!r.is(n))return!0;}else if(null!==n)return!0;return!1;}(a,e);p?a._flushSync?(a._flushSync=!1,Zr(e)):u&&Do(function(){Zr(e);}):(a._flushSync=!1,u&&(o.clear(),e._deferred=[],e._pendingEditorState=null));}function ro(t,e,n){Fr===t&&void 0===n?e():no(t,e,n);}var _oo=function(){function oo(t,e,n){this.element=t,this.before=e||null,this.after=n||null;}var _proto9=oo.prototype;_proto9.withBefore=function withBefore(t){return new oo(this.element,t,this.after);};_proto9.withAfter=function withAfter(t){return new oo(this.element,this.before,t);};_proto9.withElement=function withElement(t){return this.element===t?this:new oo(t,this.before,this.after);};_proto9.insertChild=function insertChild(e){var n=this.before||this.getManagedLineBreak();return null!==n&&n.parentElement!==this.element&&t(222),this.element.insertBefore(e,n),this;};_proto9.removeChild=function removeChild(e){return e.parentElement!==this.element&&t(223),this.element.removeChild(e),this;};_proto9.replaceChild=function replaceChild(e,n){return n.parentElement!==this.element&&t(224),this.element.replaceChild(e,n),this;};_proto9.getFirstChild=function getFirstChild(){var t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t;};_proto9.getManagedLineBreak=function getManagedLineBreak(){return this.element.__lexicalLineBreak||null;};_proto9.setManagedLineBreak=function setManagedLineBreak(t){if(null===t)this.removeManagedLineBreak();else{var _e87="decorator"===t&&(d||c||l);this.insertManagedLineBreak(_e87);}};_proto9.removeManagedLineBreak=function removeManagedLineBreak(){var t=this.getManagedLineBreak();if(t){var _e88=this.element,_n67="IMG"===t.nodeName?t.nextSibling:null;_n67&&_e88.removeChild(_n67),_e88.removeChild(t),_e88.__lexicalLineBreak=void 0;}};_proto9.insertManagedLineBreak=function insertManagedLineBreak(t){var e=this.getManagedLineBreak();if(e){if(t===("IMG"===e.nodeName))return;this.removeManagedLineBreak();}var n=this.element,r=this.before,o=document.createElement("br");if(n.insertBefore(o,r),t){var _t140=document.createElement("img");_t140.setAttribute("data-lexical-linebreak","true"),_t140.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",_t140.alt="",n.insertBefore(_t140,o),n.__lexicalLineBreak=_t140;}else n.__lexicalLineBreak=o;};_proto9.getFirstChildOffset=function getFirstChildOffset(){var t=0;for(var _e89=this.after;null!==_e89;_e89=_e89.previousSibling)t++;return t;};_proto9.resolveChildIndex=function resolveChildIndex(t,e,n,r){if(n===this.element){var _e90=this.getFirstChildOffset();return[t,Math.min(_e90+t.getChildrenSize(),Math.max(_e90,r))];}var o=io(e,n);o.push(r);var i=io(e,this.element);var s=t.getIndexWithinParent();for(var _t141=0;_t141<i.length;_t141++){var _e91=o[_t141],_n68=i[_t141];if(void 0===_e91||_e91<_n68)break;if(_e91>_n68){s+=1;break;}}return[t.getParentOrThrow(),s];};return oo;}();function io(e,n){var r=[];var o=n;for(;o!==e&&null!==o;o=o.parentNode){var _t142=0;for(var _e92=o.previousSibling;null!==_e92;_e92=_e92.previousSibling)_t142++;r.push(_t142);}return o!==e&&t(225),r.reverse();}var _so4=function(_kn3){function so(t){var _this3;_this3=_kn3.call(this,t)||this,_this3.__first=null,_this3.__last=null,_this3.__size=0,_this3.__format=0,_this3.__style="",_this3.__indent=0,_this3.__dir=null,_this3.__textFormat=0,_this3.__textStyle="";return _this3;}babelHelpers.inheritsLoose(so,_kn3);var _proto0=so.prototype;_proto0.afterCloneFrom=function afterCloneFrom(t){_kn3.prototype.afterCloneFrom.call(this,t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle;};_proto0.getFormat=function getFormat(){return this.getLatest().__format;};_proto0.getFormatType=function getFormatType(){var t=this.getFormat();return P[t]||"";};_proto0.getStyle=function getStyle(){return this.getLatest().__style;};_proto0.getIndent=function getIndent(){return this.getLatest().__indent;};_proto0.getChildren=function getChildren(){var t=[];var e=this.getFirstChild();for(;null!==e;)t.push(e),e=e.getNextSibling();return t;};_proto0.getChildrenKeys=function getChildrenKeys(){var t=[];var e=this.getFirstChild();for(;null!==e;)t.push(e.__key),e=e.getNextSibling();return t;};_proto0.getChildrenSize=function getChildrenSize(){return this.getLatest().__size;};_proto0.isEmpty=function isEmpty(){return 0===this.getChildrenSize();};_proto0.isDirty=function isDirty(){var t=Yr()._dirtyElements;return null!==t&&t.has(this.__key);};_proto0.isLastChild=function isLastChild(){var t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return null!==e&&e.is(t);};_proto0.getAllTextNodes=function getAllTextNodes(){var t=[];var e=this.getFirstChild();for(;null!==e;){if(Qn(e)&&t.push(e),lo(e)){var _n69=e.getAllTextNodes();t.push.apply(t,_n69);}e=e.getNextSibling();}return t;};_proto0.getFirstDescendant=function getFirstDescendant(){var t=this.getFirstChild();for(;lo(t);){var _e93=t.getFirstChild();if(null===_e93)break;t=_e93;}return t;};_proto0.getLastDescendant=function getLastDescendant(){var t=this.getLastChild();for(;lo(t);){var _e94=t.getLastChild();if(null===_e94)break;t=_e94;}return t;};_proto0.getDescendantByIndex=function getDescendantByIndex(t){var e=this.getChildren(),n=e.length;if(t>=n){var _t143=e[n-1];return lo(_t143)&&_t143.getLastDescendant()||_t143||null;}var r=e[t];return lo(r)&&r.getFirstDescendant()||r||null;};_proto0.getFirstChild=function getFirstChild(){var t=this.getLatest().__first;return null===t?null:qo(t);};_proto0.getFirstChildOrThrow=function getFirstChildOrThrow(){var e=this.getFirstChild();return null===e&&t(45,this.__key),e;};_proto0.getLastChild=function getLastChild(){var t=this.getLatest().__last;return null===t?null:qo(t);};_proto0.getLastChildOrThrow=function getLastChildOrThrow(){var e=this.getLastChild();return null===e&&t(96,this.__key),e;};_proto0.getChildAtIndex=function getChildAtIndex(t){var e=this.getChildrenSize();var n,r;if(t<e/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=t;){if(r===t)return n;n=n.getNextSibling(),r++;}return null;}for(n=this.getLastChild(),r=e-1;null!==n&&r>=t;){if(r===t)return n;n=n.getPreviousSibling(),r--;}return null;};_proto0.getTextContent=function getTextContent(){var t="";var e=this.getChildren(),n=e.length;for(var _r50=0;_r50<n;_r50++){var _o37=e[_r50];t+=_o37.getTextContent(),lo(_o37)&&_r50!==n-1&&!_o37.isInline()&&(t+=v);}return t;};_proto0.getTextContentSize=function getTextContentSize(){var t=0;var e=this.getChildren(),n=e.length;for(var _r51=0;_r51<n;_r51++){var _o38=e[_r51];t+=_o38.getTextContentSize(),lo(_o38)&&_r51!==n-1&&!_o38.isInline()&&(t+=2);}return t;};_proto0.getDirection=function getDirection(){return this.getLatest().__dir;};_proto0.getTextFormat=function getTextFormat(){return this.getLatest().__textFormat;};_proto0.hasFormat=function hasFormat(t){if(""!==t){var _e95=D[t];return 0!==(this.getFormat()&_e95);}return!1;};_proto0.hasTextFormat=function hasTextFormat(t){var e=A[t];return 0!==(this.getTextFormat()&e);};_proto0.getFormatFlags=function getFormatFlags(t,e){return Jo(this.getLatest().__textFormat,t,e);};_proto0.getTextStyle=function getTextStyle(){return this.getLatest().__textStyle;};_proto0.select=function select(t,e){$r();var n=vr();var r=t,o=e;var i=this.getChildrenSize();if(!this.canBeEmpty())if(0===t&&0===e){var _t144=this.getFirstChild();if(Qn(_t144)||lo(_t144))return _t144.select(0,0);}else if(!(void 0!==t&&t!==i||void 0!==e&&e!==i)){var _t145=this.getLastChild();if(Qn(_t145)||lo(_t145))return _t145.select();}void 0===r&&(r=i),void 0===o&&(o=i);var s=this.__key;return cr(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,o,"element"),n.dirty=!0,n):Cr(s,r,s,o,"element","element");};_proto0.selectStart=function selectStart(){var t=this.getFirstDescendant();return t?t.selectStart():this.select();};_proto0.selectEnd=function selectEnd(){var t=this.getLastDescendant();return t?t.selectEnd():this.select();};_proto0.clear=function clear(){var t=this.getWritable();return this.getChildren().forEach(function(t){return t.remove();}),t;};_proto0.append=function append(){for(var _len5=arguments.length,t=new Array(_len5),_key5=0;_key5<_len5;_key5++){t[_key5]=arguments[_key5];}return this.splice(this.getChildrenSize(),0,t);};_proto0.setDirection=function setDirection(t){var e=this.getWritable();return e.__dir=t,e;};_proto0.setFormat=function setFormat(t){return this.getWritable().__format=""!==t?D[t]:0,this;};_proto0.setStyle=function setStyle(t){return this.getWritable().__style=t||"",this;};_proto0.setTextFormat=function setTextFormat(t){var e=this.getWritable();return e.__textFormat=t,e;};_proto0.setTextStyle=function setTextStyle(t){var e=this.getWritable();return e.__textStyle=t,e;};_proto0.setIndent=function setIndent(t){return this.getWritable().__indent=t,this;};_proto0.splice=function splice(e,n,r){vn(this)&&t(324,this.__key,this.__type);var o=this.getChildrenSize(),i=this.getWritable();e+n<=o||t(226,String(e),String(n),String(o));var s=i.__key,l=[],c=[],a=this.getChildAtIndex(e+n);var u=null,f=o-n+r.length;if(0!==e)if(e===o)u=this.getLastChild();else{var _t146=this.getChildAtIndex(e);null!==_t146&&(u=_t146.getPreviousSibling());}if(n>0){var _e96=null===u?this.getFirstChild():u.getNextSibling();for(var _r52=0;_r52<n;_r52++){null===_e96&&t(100);var _n70=_e96.getNextSibling(),_r53=_e96.__key;jo(_e96.getWritable()),c.push(_r53),_e96=_n70;}}var d=u;for(var _e97 of r){null!==d&&_e97.is(d)&&(u=d=d.getPreviousSibling());var _n71=_e97.getWritable();_n71.__parent===s&&f--,jo(_n71);var _r54=_e97.__key;if(null===d)i.__first=_r54,_n71.__prev=null;else{var _t147=d.getWritable();_t147.__next=_r54,_n71.__prev=_t147.__key;}_e97.__key===s&&t(76),_n71.__parent=s,l.push(_r54),d=_e97;}if(e+n===o){if(null!==d){d.getWritable().__next=null,i.__last=d.__key;}}else if(null!==a){var _t148=a.getWritable();if(null!==d){var _e98=d.getWritable();_t148.__prev=d.__key,_e98.__next=a.__key;}else _t148.__prev=null;}if(i.__size=f,c.length){var _t149=vr();if(cr(_t149)){var _e99=new Set(c),_n72=new Set(l),_r55=_t149.anchor,_o39=_t149.focus;co(_r55,_e99,_n72)&&br(_r55,_r55.getNode(),this,u,a),co(_o39,_e99,_n72)&&br(_o39,_o39.getNode(),this,u,a),0!==f||this.canBeEmpty()||Li(this)||this.remove();}}return i;};_proto0.getDOMSlot=function getDOMSlot(t){return new _oo(t);};_proto0.exportDOM=function exportDOM(t){var _kn3$prototype$export=_kn3.prototype.exportDOM.call(this,t),e=_kn3$prototype$export.element;if(Ji(e)){var _t150=this.getIndent();_t150>0&&(e.style.paddingInlineStart=40*_t150+"px");var _n73=this.getDirection();_n73&&(e.dir=_n73);}return{element:e};};_proto0.exportJSON=function exportJSON(){var t=babelHelpers["extends"]({children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent()},_kn3.prototype.exportJSON.call(this)),e=this.getTextFormat(),n=this.getTextStyle();return 0===e&&""===n||Li(this)||this.getChildren().some(Qn)||(0!==e&&(t.textFormat=e),""!==n&&(t.textStyle=n)),t;};_proto0.updateFromJSON=function updateFromJSON(t){return _kn3.prototype.updateFromJSON.call(this,t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"");};_proto0.insertNewAfter=function insertNewAfter(t,e){return null;};_proto0.canIndent=function canIndent(){return!0;};_proto0.collapseAtStart=function collapseAtStart(t){return!1;};_proto0.excludeFromCopy=function excludeFromCopy(t){return!1;};_proto0.canReplaceWith=function canReplaceWith(t){return!0;};_proto0.canInsertAfter=function canInsertAfter(t){return!0;};_proto0.canBeEmpty=function canBeEmpty(){return!0;};_proto0.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto0.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto0.isInline=function isInline(){return!1;};_proto0.isShadowRoot=function isShadowRoot(){return!1;};_proto0.canMergeWith=function canMergeWith(t){return!1;};_proto0.extractWithChild=function extractWithChild(t,e,n){return!1;};_proto0.canMergeWhenEmpty=function canMergeWhenEmpty(){return!1;};_proto0.reconcileObservedMutation=function reconcileObservedMutation(t,e){var n=this.getDOMSlot(t);var r=n.getFirstChild();for(var _t151=this.getFirstChild();_t151;_t151=_t151.getNextSibling()){var _o40=e.getElementByKey(_t151.getKey());null!==_o40&&(null==r?(n.insertChild(_o40),r=_o40):r!==_o40&&n.replaceChild(_o40,r),r=r.nextSibling);}};return so;}(_kn5);function lo(t){return t instanceof _so4;}function co(t,e,n){var r=t.getNode();for(;r;){var _t152=r.__key;if(e.has(_t152)&&!n.has(_t152))return!0;r=r.getParent();}return!1;}var _ao=function(_kn4){function ao(){return _kn4.apply(this,arguments)||this;}babelHelpers.inheritsLoose(ao,_kn4);var _proto1=ao.prototype;_proto1.decorate=function decorate(t,e){return null;};_proto1.isIsolated=function isIsolated(){return!1;};_proto1.isInline=function isInline(){return!0;};_proto1.isKeyboardSelectable=function isKeyboardSelectable(){return!0;};return ao;}(_kn5);function uo(t){return t instanceof _ao;}var _fo=function(_so){function fo(){var _this4;_this4=_so.call(this,"root")||this,_this4.__cachedText=null;return _this4;}babelHelpers.inheritsLoose(fo,_so);fo.getType=function getType(){return"root";};fo.clone=function clone(){return new fo();};var _proto10=fo.prototype;_proto10.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){t(51);};_proto10.getTextContent=function getTextContent(){var t=this.__cachedText;return!Wr()&&0!==Yr()._dirtyType||null===t?_so.prototype.getTextContent.call(this):t;};_proto10.remove=function remove(){t(52);};_proto10.replace=function replace(e){t(53);};_proto10.insertBefore=function insertBefore(e){t(54);};_proto10.insertAfter=function insertAfter(e){t(55);};_proto10.updateDOM=function updateDOM(t,e){return!1;};_proto10.splice=function splice(e,n,r){for(var _e100 of r)lo(_e100)||uo(_e100)||t(282);return _so.prototype.splice.call(this,e,n,r);};fo.importJSON=function importJSON(t){return ni().updateFromJSON(t);};_proto10.collapseAtStart=function collapseAtStart(){return!0;};return fo;}(_so4);function ho(t){return t instanceof _fo;}function go(t){return new _yo(new Map(t._nodeMap));}function _o(){return new _yo(new Map([["root",new _fo()]]));}function po(e){var n=e.exportJSON(),r=e.constructor;if(n.type!==r.getType()&&t(130,r.name),lo(e)){var _o41=n.children;Array.isArray(_o41)||t(59,r.name);var _i22=e.getChildren();for(var _t153=0;_t153<_i22.length;_t153++){var _e101=po(_i22[_t153]);_o41.push(_e101);}}return n;}var _yo=function(){function yo(t,e){this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1;}var _proto11=yo.prototype;_proto11.isEmpty=function isEmpty(){return 1===this._nodeMap.size&&null===this._selection;};_proto11.read=function read(t,e){return Qr(e&&e.editor||null,this,t);};_proto11.clone=function clone(t){var e=new yo(this._nodeMap,void 0===t?this._selection:t);return e._readOnly=!0,e;};_proto11.toJSON=function toJSON(){return Qr(null,this,function(){return{root:po(ni())};});};return yo;}();var _mo=function(_so2){function mo(){return _so2.apply(this,arguments)||this;}babelHelpers.inheritsLoose(mo,_so2);mo.getType=function getType(){return"artificial";};var _proto12=mo.prototype;_proto12.createDOM=function createDOM(t){return document.createElement("div");};return mo;}(_so4);var _xo=function(_so3){function xo(){return _so3.apply(this,arguments)||this;}babelHelpers.inheritsLoose(xo,_so3);xo.getType=function getType(){return"paragraph";};xo.clone=function clone(t){return new xo(t.__key);};var _proto13=xo.prototype;_proto13.createDOM=function createDOM(t){var e=document.createElement("p"),n=Ci(t.theme,"paragraph");if(void 0!==n){var _e$classList2;(_e$classList2=e.classList).add.apply(_e$classList2,n);}return e;};_proto13.updateDOM=function updateDOM(t,e,n){return!1;};xo.importDOM=function importDOM(){return{p:function p(t){return{conversion:Co,priority:0};}};};_proto13.exportDOM=function exportDOM(t){var _so3$prototype$export=_so3.prototype.exportDOM.call(this,t),e=_so3$prototype$export.element;if(Ji(e)){this.isEmpty()&&e.append(document.createElement("br"));var _t154=this.getFormatType();_t154&&(e.style.textAlign=_t154);}return{element:e};};xo.importJSON=function importJSON(t){return So().updateFromJSON(t);};_proto13.exportJSON=function exportJSON(){var t=_so3.prototype.exportJSON.call(this);if(void 0===t.textFormat||void 0===t.textStyle){var _e102=this.getChildren().find(Qn);_e102?(t.textFormat=_e102.getFormat(),t.textStyle=_e102.getStyle()):(t.textFormat=this.getTextFormat(),t.textStyle=this.getTextStyle());}return t;};_proto13.insertNewAfter=function insertNewAfter(t,e){var n=So();n.setTextFormat(t.format),n.setTextStyle(t.style);var r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,e),n;};_proto13.collapseAtStart=function collapseAtStart(){var t=this.getChildren();if(0===t.length||Qn(t[0])&&""===t[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0;}return!1;};return xo;}(_so4);function Co(t){var e=So();if(t.style&&(e.setFormat(t.style.textAlign),es(t,e)),""===e.getFormatType()){var _n74=t.getAttribute("align");_n74&&_n74&&_n74 in D&&e.setFormat(_n74);}return{node:e};}function So(){return Ri(new _xo());}function No(t){return t instanceof _xo;}var To=0;function vo(t,e,n,r){var o=t._keyToDOMMap;o.clear(),t._editorState=_o(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set(),t._dirtyElements.clear(),t._normalizedNodes=new Set(),t._updateTags=new Set(),t._updates=[],t._blockCursorElement=null;var i=t._observer;null!==i&&(i.disconnect(),t._observer=null),null!==e&&(e.textContent=""),null!==n&&(n.textContent="",o.set("root",n));}function ko(t){var e=new Set(),n=new Set();var r=t;for(;r;){var _os3=os(r),_t155=_os3.ownNodeConfig,_o42=r.transform;if(!n.has(_o42)){n.add(_o42);var _t156=r.transform();_t156&&e.add(_t156);}if(_t155){var _n75=_t155.$transform;_n75&&e.add(_n75),r=_t155["extends"];}else{var _t157=Object.getPrototypeOf(r);r=_t157.prototype instanceof _kn5&&_t157!==_kn5?_t157:void 0;}}return e;}var _Eo=function(){function Eo(t,e,n,r,o,i,s,l){this._createEditorArgs=l,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map(),this._updates=[],this._updating=!1,this._listeners={decorator:new Set(),editable:new Set(),mutation:new Map(),root:new Set(),textcontent:new Set(),update:new Set()},this._commands=new Map(),this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set(),this._dirtyLeaves=new Set(),this._dirtyElements=new Map(),this._normalizedNodes=new Set(),this._updateTags=new Set(),this._observer=null,this._key=ci(),this._onError=o,this._htmlConversions=i,this._editable=s,this._headless=null!==e&&e._headless,this._window=null,this._blockCursorElement=null;}var _proto14=Eo.prototype;_proto14.isComposing=function isComposing(){return null!=this._compositionKey;};_proto14.registerUpdateListener=function registerUpdateListener(t){var e=this._listeners.update;return e.add(t),function(){e["delete"](t);};};_proto14.registerEditableListener=function registerEditableListener(t){var e=this._listeners.editable;return e.add(t),function(){e["delete"](t);};};_proto14.registerDecoratorListener=function registerDecoratorListener(t){var e=this._listeners.decorator;return e.add(t),function(){e["delete"](t);};};_proto14.registerTextContentListener=function registerTextContentListener(t){var e=this._listeners.textcontent;return e.add(t),function(){e["delete"](t);};};_proto14.registerRootListener=function registerRootListener(t){var _this13=this;var e=this._listeners.root;return t(this._rootElement,null),e.add(t),function(){t(null,_this13._rootElement),e["delete"](t);};};_proto14.registerCommand=function registerCommand(e,n,r){void 0===r&&t(35);var o=this._commands;o.has(e)||o.set(e,[new Set(),new Set(),new Set(),new Set(),new Set()]);var i=o.get(e);void 0===i&&t(36,String(e));var s=i[r];return s.add(n),function(){s["delete"](n),i.every(function(t){return 0===t.size;})&&o["delete"](e);};};_proto14.registerMutationListener=function registerMutationListener(t,e,n){var r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,o=this._listeners.mutation;var i=o.get(e);void 0===i&&(i=new Set(),o.set(e,i)),i.add(r);var s=n&&n.skipInitialization;return void 0!==s&&s||this.initializeMutationListener(e,r),function(){i["delete"](r),0===i.size&&o["delete"](e);};};_proto14.getRegisteredNode=function getRegisteredNode(e){var n=this._nodes.get(e.getType());return void 0===n&&t(37,e.name),n;};_proto14.resolveRegisteredNodeAfterReplacements=function resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t;};_proto14.initializeMutationListener=function initializeMutationListener(t,e){var n=this._editorState,r=Zi(n).get(e.getType());if(!r)return;var o=new Map();for(var _t158 of r.keys())o.set(_t158,"created");o.size>0&&t(o,{dirtyLeaves:new Set(),prevEditorState:n,updateTags:new Set(["registerMutationListener"])});};_proto14.registerNodeTransformToKlass=function registerNodeTransformToKlass(t,e){var n=this.getRegisteredNode(t);return n.transforms.add(e),n;};_proto14.registerNodeTransform=function registerNodeTransform(t,e){var n=this.registerNodeTransformToKlass(t,e),r=[n],o=n.replaceWithKlass;if(null!=o){var _t159=this.registerNodeTransformToKlass(o,e);r.push(_t159);}return function(t,e){var n=Zi(t.getEditorState()),r=[];for(var _t160 of e){var _e103=n.get(_t160);_e103&&r.push(_e103);}if(0===r.length)return;t.update(function(){for(var _t161 of r)for(var _e104 of _t161.keys()){var _t162=qo(_e104);_t162&&_t162.markDirty();}},null===t._pendingEditorState?{tag:En}:void 0);}(this,r.map(function(t){return t.klass.getType();})),function(){r.forEach(function(t){return t.transforms["delete"](e);});};};_proto14.hasNode=function hasNode(t){return this._nodes.has(t.getType());};_proto14.hasNodes=function hasNodes(t){return t.every(this.hasNode.bind(this));};_proto14.dispatchCommand=function dispatchCommand(t,e){return ki(this,t,e);};_proto14.getDecorators=function getDecorators(){return this._decorators;};_proto14.getRootElement=function getRootElement(){return this._rootElement;};_proto14.getKey=function getKey(){return this._key;};_proto14.setRootElement=function setRootElement(t){var e=this._rootElement;if(t!==e){var _e$classList3;var _n76=Ci(this._config.theme,"root"),_r56=this._pendingEditorState||this._editorState;if(this._rootElement=t,vo(this,e,t,_r56),null!==e&&(this._config.disableEvents||Sn(e),null!=_n76&&(_e$classList3=e.classList).remove.apply(_e$classList3,_n76)),null!==t){var _t$classList;var _e105=Di(t),_r57=t.style;_r57.userSelect="text",_r57.whiteSpace="pre-wrap",_r57.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=_e105,this._dirtyType=2,H(this),this._updateTags.add(En),Zr(this),this._config.disableEvents||function(t,e,_He$get){var n=t.ownerDocument;je.set(t,n);var r=(_He$get=He.get(n))!=null?_He$get:0;r<1&&n.addEventListener("selectionchange",yn),He.set(n,r+1),t.__lexicalEditor=e;var o=_n(t);var _loop=function _loop(){var _We$_n=We[_n77],r=_We$_n[0],i=_We$_n[1],s="function"==typeof i?function(t){xn(t)||(mn(t),(e.isEditable()||"click"===r)&&i(t,e));}:function(t){if(xn(t))return;mn(t);var n=e.isEditable();switch(r){case"cut":return n&&ki(e,we,t);case"copy":return ki(e,Ae,t);case"paste":return n&&ki(e,ne,t);case"dragstart":return n&&ki(e,Oe,t);case"dragover":return n&&ki(e,be,t);case"dragend":return n&&ki(e,Me,t);case"focus":return n&&ki(e,Re,t);case"blur":return n&&ki(e,Ke,t);case"drop":return n&&ki(e,ke,t);}};t.addEventListener(r,s),o.push(function(){t.removeEventListener(r,s);});};for(var _n77=0;_n77<We.length;_n77++){_loop();}}(t,this),null!=_n76&&(_t$classList=t.classList).add.apply(_t$classList,_n76);}else this._window=null,this._updateTags.add(En),Zr(this);to("root",this,!1,t,e);}};_proto14.getElementByKey=function getElementByKey(t){return this._keyToDOMMap.get(t)||null;};_proto14.getEditorState=function getEditorState(){return this._editorState;};_proto14.setEditorState=function setEditorState(e,n){e.isEmpty()&&t(38);var r=e;r._readOnly&&(r=go(e),r._selection=e._selection?e._selection.clone():null),j(this);var o=this._pendingEditorState,i=this._updateTags,s=void 0!==n?n.tag:null;null===o||o.isEmpty()||(null!=s&&i.add(s),Zr(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&i.add(s),this._updating||Zr(this);};_proto14.parseEditorState=function parseEditorState(t,e){return function(t,e,n){var r=_o(),o=Lr,i=Rr,s=Fr,l=e._dirtyElements,c=e._dirtyLeaves,a=e._cloneNotNeeded,u=e._dirtyType;e._dirtyElements=new Map(),e._dirtyLeaves=new Set(),e._cloneNotNeeded=new Set(),e._dirtyType=0,Lr=r,Rr=!1,Fr=e,bo(null);try{var _o43=e._nodes;Xr(t.root,_o43),n&&n(),r._readOnly=!0;}catch(t){t instanceof Error&&e._onError(t);}finally{e._dirtyElements=l,e._dirtyLeaves=c,e._cloneNotNeeded=a,e._dirtyType=u,Lr=o,Rr=i,Fr=s;}return r;}("string"==typeof t?JSON.parse(t):t,this,e);};_proto14.read=function read(t){return Zr(this),this.getEditorState().read(t,{editor:this});};_proto14.update=function update(t,e){!function(t,e,n){t._updating?t._updates.push([e,n]):no(t,e,n);}(this,t,e);};_proto14.focus=function focus(t,e){if(e===void 0){e={};}var n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),ro(this,function(){var r=vr(),o=ni();null!==r?r.dirty||oi(r.clone()):0!==o.getChildrenSize()&&("rootStart"===e.defaultSelection?o.selectStart():o.selectEnd()),Mi("focus"),Ai(function(){n.removeAttribute("autocapitalize"),t&&t();});}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"));};_proto14.blur=function blur(){var t=this._rootElement;null!==t&&t.blur();var e=$i(this._window);null!==e&&e.removeAllRanges();};_proto14.isEditable=function isEditable(){return this._editable;};_proto14.setEditable=function setEditable(t){this._editable!==t&&(this._editable=t,to("editable",this,!0,t));};_proto14.toJSON=function toJSON(){return{editorState:this._editorState.toJSON()};};return Eo;}();_Eo.version="0.40.0+prod.cjs";var Oo=null;function bo(t){Oo=t;}var Mo=1;function Ao(e,n){var r=wo(e,n);return void 0===r&&t(30,n),r;}function wo(t,e){return t._nodes.get(e);}var Do="function"==typeof queueMicrotask?queueMicrotask:function(t){Promise.resolve().then(t);};function Po(t){return uo(Zo(t));}function Io(t){var e=document.activeElement;if(!Ji(e))return!1;var n=e.nodeName;return uo(Zo(t))&&("INPUT"===n||"TEXTAREA"===n||"true"===e.contentEditable&&null==Ko(e));}function Lo(t,e,n){var r=t.getRootElement();try{return null!==r&&r.contains(e)&&r.contains(n)&&null!==e&&!Io(e)&&Ro(e)===t;}catch(t){return!1;}}function Fo(t){return t instanceof _Eo;}function Ro(t){var e=t;for(;null!=e;){var _t163=Ko(e);if(Fo(_t163))return _t163;e=Oi(e);}return null;}function Ko(t){return t?t.__lexicalEditor:null;}function Bo(t){return nr(t)||t.isToken();}function zo(t){return Bo(t)||t.isSegmented();}function Wo(t){return Yi(t)&&3===t.nodeType;}function $o(t){return Yi(t)&&9===t.nodeType;}function Uo(t){var e=t;for(;null!=e;){if(Wo(e))return e;e=e.firstChild;}return null;}function Jo(t,e,n){var r=A[e];if(null!==n&&(t&r)===(n&r))return t;var o=t^r;return"subscript"===e?o&=~A.superscript:"superscript"===e?o&=~A.subscript:"lowercase"===e?(o&=~A.uppercase,o&=~A.capitalize):"uppercase"===e?(o&=~A.lowercase,o&=~A.capitalize):"capitalize"===e&&(o&=~A.lowercase,o&=~A.uppercase),o;}function Yo(t,e){var n=function(){var t=Oo;return Oo=null,t;}();if(null!=(e=e||n&&n.__key))return void(t.__key=e);$r(),Ur();var r=Yr(),o=Jr(),i=""+Mo++;o._nodeMap.set(i,t),lo(t)?r._dirtyElements.set(i,!0):r._dirtyLeaves.add(i),r._cloneNotNeeded.add(i),r._dirtyType=1,t.__key=i;}function jo(t){var e=t.getParent();if(null!==e){var _n78=t.getWritable(),_r58=e.getWritable(),_o44=t.getPreviousSibling(),_i23=t.getNextSibling(),_s13=null!==_i23?_i23.__key:null,_l10=null!==_o44?_o44.__key:null,_c9=null!==_o44?_o44.getWritable():null,_a9=null!==_i23?_i23.getWritable():null;null===_o44&&(_r58.__first=_s13),null===_i23&&(_r58.__last=_l10),null!==_c9&&(_c9.__next=_s13),null!==_a9&&(_a9.__prev=_l10),_n78.__prev=null,_n78.__next=null,_n78.__parent=null,_r58.__size--;}}function Ho(e){Ur(),vn(e)&&t(323,e.__key,e.__type);var n=e.getLatest(),r=n.__parent,o=Jr(),i=Yr(),s=o._nodeMap,l=i._dirtyElements;null!==r&&function(t,e,n){var r=t;for(;null!==r;){if(n.has(r))return;var _t164=e.get(r);if(void 0===_t164)break;n.set(r,!1),r=_t164.__parent;}}(r,s,l);var c=n.__key;i._dirtyType=1,lo(e)?l.set(c,!0):i._dirtyLeaves.add(c);}function Vo(t){$r();var e=Yr(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,null!==n){var _t165=qo(n);null!==_t165&&_t165.getWritable();}if(null!==t){var _e106=qo(t);null!==_e106&&_e106.getWritable();}}}function Go(){if(Wr())return null;return Yr()._compositionKey;}function qo(t,e){var n=(e||Jr())._nodeMap.get(t);return void 0===n?null:n;}function Xo(t,e){var n=Qo(t,Yr());return void 0!==n?qo(n,e):null;}function Qo(t,e){return t["__lexicalKey_"+e._key];}function Zo(t,e){var n=t;for(;null!=n;){var _t166=Xo(n,e);if(null!==_t166)return _t166;n=Oi(n);}return null;}function ti(t){var e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n;}function ei(t){return t.read(function(){return ni().getTextContent();});}function ni(){return ri(Jr());}function ri(t){return t._nodeMap.get("root");}function oi(t){$r();var e=Jr();null!==t&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t;}function ii(t){var e=Yr(),n=function(t,e){var n=t;for(;null!=n;){var _t167=Qo(n,e);if(void 0!==_t167)return _t167;n=Oi(n);}return null;}(t,e);if(null===n){return t===e.getRootElement()?qo("root"):null;}return qo(n);}function si(t){return /[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t);}function li(t){var e=[];var n=t;for(;null!==n;)e.push(n),n=n._parentEditor;return e;}function ci(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5);}function ai(t){return Wo(t)?t.nodeValue:null;}function ui(t,e,n){var r=$i(Pi(e));if(null===r)return;var o=r.anchorNode;var i=r.anchorOffset,s=r.focusOffset;if(null!==o){var _e107=ai(o);var _r59=Zo(o);if(null!==_e107&&Qn(_r59)){if(_e107===T&&n){var _t168=n.length;_e107=n,i=_t168,s=_t168;}null!==_e107&&fi(_r59,_e107,i,s,t);}}}function fi(t,e,n,r,o){var i=t;if(i.isAttached()&&(o||!i.isDirty())){var _s14=i.isComposing();var _a0=e;(_s14||o)&&e[e.length-1]===T&&(_a0=e.slice(0,-1));var _u9=i.getTextContent();if(o||_a0!==_u9){if(""===_a0){if(Vo(null),l||c||d)i.remove();else{var _t169=Yr();setTimeout(function(){_t169.update(function(){i.isAttached()&&i.remove();});},20);}return;}var _e108=i.getParent(),_o45=kr(),_u0=i.getTextContentSize(),_f9=Go(),_h5=i.getKey();if(i.isToken()||null!==_f9&&_h5===_f9&&!_s14||cr(_o45)&&(null!==_e108&&!_e108.canInsertTextBefore()&&0===_o45.anchor.offset||_o45.anchor.key===t.__key&&0===_o45.anchor.offset&&!i.canInsertTextBefore()&&!_s14||_o45.focus.key===t.__key&&_o45.focus.offset===_u0&&!i.canInsertTextAfter()&&!_s14))return void i.markDirty();var _g6=vr();if(!cr(_g6)||null===n||null===r)return void di(i,_a0,_g6);if(_g6.setTextNodeRange(i,n,i,r),i.isSegmented()){var _t170=Xn(i.getTextContent());i.replace(_t170),i=_t170;}di(i,_a0,_g6);}}}function di(t,e,n){if(t.setTextContent(e),cr(n)){var _e109=t.getKey();for(var _r60 of["anchor","focus"]){var _o46=n[_r60];"text"===_o46.type&&_o46.key===_e109&&(_o46.offset=Ns(t,_o46.offset,"clamp"));}}}function hi(t,e,n){var r=e[n]||!1;return"any"===r||r===t[n];}function gi(t,e){return hi(t,e,"altKey")&&hi(t,e,"ctrlKey")&&hi(t,e,"shiftKey")&&hi(t,e,"metaKey");}function _i(t,e,n){return gi(t,n)&&t.key.toLowerCase()===e.toLowerCase();}var pi={ctrlKey:!o,metaKey:o},yi={altKey:o,ctrlKey:!o};function mi(t){return"Backspace"===t.key;}function xi(t){return _i(t,"a",pi);}function Ci(t,e){void 0===t.__lexicalClassNameCache&&(t.__lexicalClassNameCache={});var n=t.__lexicalClassNameCache,r=n[e];if(void 0!==r)return r;var o=t[e];if("string"==typeof o){var _t171=tl(o);return n[e]=_t171,_t171;}return o;}function Si(e,n,r,o,i){if(0===r.size)return;var s=o.__type,l=o.__key,c=n.get(s);void 0===c&&t(33,s);var a=c.klass;var u=e.get(a);void 0===u&&(u=new Map(),e.set(a,u));var f=u.get(l),d="destroyed"===f&&"created"===i;(void 0===f||d)&&u.set(l,d?"updated":i);}function Ni(t,e,n){var r=t.getParent();var o=n,i=t;return null!==r&&(e&&0===n?(o=i.getIndexWithinParent(),i=r):e||n!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?o-1:o);}function Ti(t,e){var n=t.offset;if("element"===t.type){return Ni(t.getNode(),e,n);}{var _r61=t.getNode();if(e&&0===n||!e&&n===_r61.getTextContentSize()){var _t172=e?_r61.getPreviousSibling():_r61.getNextSibling();return null===_t172?Ni(_r61.getParentOrThrow(),e,_r61.getIndexWithinParent()+(e?0:1)):_t172;}}return null;}function vi(t){var e=Pi(t).event,n=e&&e.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n;}function ki(t,e,n){return function(t,e,n){var r=li(t);for(var _o47=4;_o47>=0;_o47--){var _loop2=function _loop2(){var s=r[_i24],l=s._commands.get(e);if(void 0!==l){var _e110=l[_o47];if(void 0!==_e110){var _r62=Array.from(_e110),_o48=_r62.length;var _i25=!1;if(ro(s,function(){for(var _e111=0;_e111<_o48;_e111++)if(_r62[_e111](n,t))return void(_i25=!0);}),_i25)return{v:_i25};}}},_ret;for(var _i24=0;_i24<r.length;_i24++){_ret=_loop2();if(_ret)return _ret.v;}}return!1;}(t,e,n);}function Ei(e,n){var r=e._keyToDOMMap.get(n);return void 0===r&&t(75,n),r;}function Oi(t){var e=t.assignedSlot||t.parentElement;return ji(e)?e.host:e;}function bi(t){return $o(t)?t:Ji(t)?t.ownerDocument:null;}function Mi(t){$r();Yr()._updateTags.add(t);}function Ai(t){$r();Yr()._deferred.push(t);}function wi(t,e){var n=t.getParent();for(;null!==n;){if(n.is(e))return!0;n=n.getParent();}return!1;}function Di(t){var e=bi(t);return e?e.defaultView:null;}function Pi(e){var n=e._window;return null===n&&t(78),n;}function Ii(t){var e=t.getParentOrThrow();for(;null!==e;){if(Li(e))return e;e=e.getParentOrThrow();}return e;}function Li(t){return ho(t)||lo(t)&&t.isShadowRoot();}function Fi(t){var e=t.constructor.clone(t);return Yo(e,null),e.afterCloneFrom(t),e;}function Ri(e){var n=Yr(),r=e.getType(),o=wo(n,r);void 0===o&&t(200,e.constructor.name,r);var i=o.replace,s=o.replaceWithKlass;if(null!==i){var _n79=i(e),_o49=_n79.constructor;return null!==s?_n79 instanceof s||t(201,s.name,s.getType(),_o49.name,_o49.getType(),e.constructor.name,r):_n79 instanceof e.constructor&&_o49!==e.constructor||t(202,_o49.name,_o49.getType(),e.constructor.name,r),_n79.__key===e.__key&&t(203,e.constructor.name,r,_o49.name,_o49.getType()),_n79;}return e;}function Ki(e,n){!ho(e.getParent())||lo(n)||uo(n)||t(99);}function Bi(e){var n=qo(e);return null===n&&t(63,e),n;}function zi(t){return(uo(t)||lo(t)&&!t.canBeEmpty())&&!t.isInline();}function Wi(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;var r=t.parentElement;null!==r&&r.removeChild(t);}function $i(t){return n?(t||window).getSelection():null;}function Ui(t){var e=Di(t);return e?e.getSelection():null;}function Ji(t){return Yi(t)&&1===t.nodeType;}function Yi(t){return"object"==typeof t&&null!==t&&"nodeType"in t&&"number"==typeof t.nodeType;}function ji(t){return Yi(t)&&11===t.nodeType;}function Hi(t){var e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==t.nodeName.match(e);}function Vi(t){var e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==t.nodeName.match(e);}function Gi(t){if(uo(t)&&!t.isInline())return!0;if(!lo(t)||Li(t))return!1;var e=t.getFirstChild(),n=null===e||In(e)||Qn(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n;}function qi(){return Yr();}var Xi=new WeakMap(),Qi=new Map();function Zi(e){if(!e._readOnly&&e.isEmpty())return Qi;e._readOnly||t(192);var n=Xi.get(e);return n||(n=function(t){var e=new Map();for(var _ref20 of t._nodeMap){var _n80=_ref20[0];var _r63=_ref20[1];{var _t173=_r63.__type;var _o50=e.get(_t173);_o50||(_o50=new Map(),e.set(_t173,_o50)),_o50.set(_n80,_r63);}}return e;}(e),Xi.set(e,n)),n;}function ts(t){var e=t.constructor.clone(t);return e.afterCloneFrom(t),e;}function es(t,e){var n=parseInt(t.style.paddingInlineStart,10)||0,r=Math.round(n/40);e.setIndent(r);}function ns(t){return!0===t.__lexicalUnmanaged;}function rs(t,e){return function(t,e){return Object.prototype.hasOwnProperty.call(t,e);}(t,e)&&t[e]!==_kn5[e];}function os(e){var n=F in e.prototype?e.prototype[F]():void 0,r=function(e){if(!(e===_kn5||e.prototype instanceof _kn5)){var _n81="<unknown>",_r64="<unknown>";try{_n81=e.getType();}catch(t){}try{_Eo.version&&(_r64=JSON.parse(_Eo.version));}catch(t){}t(290,e.name,_n81,_r64);}return e===_ao||e===_so4||e===_kn5;}(e),o=!r&&rs(e,"getType")?e.getType():void 0;var i,s=o;if(n)if(o)i=n[o];else for(var _ref22 of Object.entries(n)){var _t174=_ref22[0];var _e112=_ref22[1];s=_t174,i=_e112;}if(!r&&s&&(rs(e,"getType")||(e.getType=function(){return s;}),rs(e,"clone")||(e.clone=function(t){return bo(t),new e();}),rs(e,"importJSON")||(e.importJSON=i&&i.$importJSON||function(t){return new e().updateFromJSON(t);}),!rs(e,"importDOM")&&i)){var _i26=i,_t175=_i26.importDOM;_t175&&(e.importDOM=function(){return _t175;});}return{ownNodeConfig:i,ownNodeType:s};}var is=function is(t,e){var n=t;for(;null!=n&&!ho(n);){if(e(n))return n;n=n.getParent();}return null;},ss={next:"previous",previous:"next"};var _ls4=function(){function ls(t){this.origin=t;}var _proto15=ls.prototype;_proto15[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return Ds({hasNext:_s,initial:this.getAdjacentCaret(),map:function map(t){return t;},step:function step(t){return t.getAdjacentCaret();}});};_proto15.getAdjacentCaret=function getAdjacentCaret(){return Cs(this.getNodeAtCaret(),this.direction);};_proto15.getSiblingCaret=function getSiblingCaret(){return Cs(this.origin,this.direction);};_proto15.remove=function remove(){var t=this.getNodeAtCaret();return t&&t.remove(),this;};_proto15.replaceOrInsert=function replaceOrInsert(t,e){var n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(null===n?this.insert(t):n.replace(t,e)),this;};_proto15.splice=function splice(e,n,r){if(r===void 0){r="next";}var o=r===this.direction?n:Array.from(n).reverse();var i=this;var s=this.getParentAtCaret(),l=new Map();for(var _t176=i.getAdjacentCaret();null!==_t176&&l.size<e;_t176=_t176.getAdjacentCaret()){var _e113=_t176.origin.getWritable();l.set(_e113.getKey(),_e113);}for(var _e114 of o){if(l.size>0){var _n82=i.getNodeAtCaret();if(_n82){if(l["delete"](_n82.getKey()),l["delete"](_e114.getKey()),_n82.is(_e114)||i.origin.is(_e114));else{var _t177=_e114.getParent();_t177&&_t177.is(s)&&_e114.remove(),_n82.replace(_e114);}}else null===_n82&&t(263,Array.from(l).join(" "));}else i.insert(_e114);i=Cs(_e114,this.direction);}for(var _t178 of l.values())_t178.remove();return this;};return ls;}();var _cs3=function(_ls){function cs(){var _this5;for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6];}return(_this5=_ls.call.apply(_ls,[this].concat(args))||this,_this5.type="child",babelHelpers.assertThisInitialized(_this5))||babelHelpers.assertThisInitialized(_this5);}babelHelpers.inheritsLoose(cs,_ls);var _proto16=cs.prototype;_proto16.getLatest=function getLatest(){var t=this.origin.getLatest();return t===this.origin?this:vs(t,this.direction);};_proto16.getParentCaret=function getParentCaret(t){if(t===void 0){t="root";}return Cs(fs(this.getParentAtCaret(),t),this.direction);};_proto16.getFlipped=function getFlipped(){var t=us(this.direction);return Cs(this.getNodeAtCaret(),t)||vs(this.origin,t);};_proto16.getParentAtCaret=function getParentAtCaret(){return this.origin;};_proto16.getChildCaret=function getChildCaret(){return this;};_proto16.isSameNodeCaret=function isSameNodeCaret(t){return t instanceof cs&&this.direction===t.direction&&this.origin.is(t.origin);};_proto16.isSamePointCaret=function isSamePointCaret(t){return this.isSameNodeCaret(t);};return cs;}(_ls4);var as={root:ho,shadowRoot:Li};function us(t){return ss[t];}function fs(t,e){if(e===void 0){e="root";}return as[e](t)?null:t;}var _ds3=function(_ls2){function ds(){var _this6;for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++){args[_key7]=arguments[_key7];}return(_this6=_ls2.call.apply(_ls2,[this].concat(args))||this,_this6.type="sibling",babelHelpers.assertThisInitialized(_this6))||babelHelpers.assertThisInitialized(_this6);}babelHelpers.inheritsLoose(ds,_ls2);var _proto17=ds.prototype;_proto17.getLatest=function getLatest(){var t=this.origin.getLatest();return t===this.origin?this:Cs(t,this.direction);};_proto17.getSiblingCaret=function getSiblingCaret(){return this;};_proto17.getParentAtCaret=function getParentAtCaret(){return this.origin.getParent();};_proto17.getChildCaret=function getChildCaret(){return lo(this.origin)?vs(this.origin,this.direction):null;};_proto17.getParentCaret=function getParentCaret(t){if(t===void 0){t="root";}return Cs(fs(this.getParentAtCaret(),t),this.direction);};_proto17.getFlipped=function getFlipped(){var t=us(this.direction);return Cs(this.getNodeAtCaret(),t)||vs(this.origin.getParentOrThrow(),t);};_proto17.isSamePointCaret=function isSamePointCaret(t){return t instanceof ds&&this.direction===t.direction&&this.origin.is(t.origin);};_proto17.isSameNodeCaret=function isSameNodeCaret(t){return(t instanceof ds||t instanceof _hs3)&&this.direction===t.direction&&this.origin.is(t.origin);};return ds;}(_ls4);var _hs3=function(_ls3){function hs(t,e){var _this7;_this7=_ls3.call(this,t)||this,_this7.type="text",_this7.offset=e;return _this7;}babelHelpers.inheritsLoose(hs,_ls3);var _proto18=hs.prototype;_proto18.getLatest=function getLatest(){var t=this.origin.getLatest();return t===this.origin?this:Ss(t,this.direction,this.offset);};_proto18.getParentAtCaret=function getParentAtCaret(){return this.origin.getParent();};_proto18.getChildCaret=function getChildCaret(){return null;};_proto18.getParentCaret=function getParentCaret(t){if(t===void 0){t="root";}return Cs(fs(this.getParentAtCaret(),t),this.direction);};_proto18.getFlipped=function getFlipped(){return Ss(this.origin,us(this.direction),this.offset);};_proto18.isSamePointCaret=function isSamePointCaret(t){return t instanceof hs&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset;};_proto18.isSameNodeCaret=function isSameNodeCaret(t){return(t instanceof _ds3||t instanceof hs)&&this.direction===t.direction&&this.origin.is(t.origin);};_proto18.getSiblingCaret=function getSiblingCaret(){return Cs(this.origin,this.direction);};return hs;}(_ls4);function gs(t){return t instanceof _hs3;}function _s(t){return t instanceof _ds3;}function ps(t){return t instanceof _cs3;}var ys={next:function(_hs){function _class(){var _this8;for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++){args[_key8]=arguments[_key8];}return(_this8=_hs.call.apply(_hs,[this].concat(args))||this,_this8.direction="next",babelHelpers.assertThisInitialized(_this8))||babelHelpers.assertThisInitialized(_this8);}babelHelpers.inheritsLoose(_class,_hs);var _proto19=_class.prototype;_proto19.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getNextSibling();};_proto19.insert=function insert(t){return this.origin.insertAfter(t),this;};return _class;}(_hs3),previous:function(_hs2){function _class3(){var _this9;for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9];}return(_this9=_hs2.call.apply(_hs2,[this].concat(args))||this,_this9.direction="previous",babelHelpers.assertThisInitialized(_this9))||babelHelpers.assertThisInitialized(_this9);}babelHelpers.inheritsLoose(_class3,_hs2);var _proto20=_class3.prototype;_proto20.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getPreviousSibling();};_proto20.insert=function insert(t){return this.origin.insertBefore(t),this;};return _class3;}(_hs3)},ms={next:function(_ds){function _class5(){var _this0;for(var _len0=arguments.length,args=new Array(_len0),_key0=0;_key0<_len0;_key0++){args[_key0]=arguments[_key0];}return(_this0=_ds.call.apply(_ds,[this].concat(args))||this,_this0.direction="next",babelHelpers.assertThisInitialized(_this0))||babelHelpers.assertThisInitialized(_this0);}babelHelpers.inheritsLoose(_class5,_ds);var _proto21=_class5.prototype;_proto21.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getNextSibling();};_proto21.insert=function insert(t){return this.origin.insertAfter(t),this;};return _class5;}(_ds3),previous:function(_ds2){function _class7(){var _this1;for(var _len1=arguments.length,args=new Array(_len1),_key1=0;_key1<_len1;_key1++){args[_key1]=arguments[_key1];}return(_this1=_ds2.call.apply(_ds2,[this].concat(args))||this,_this1.direction="previous",babelHelpers.assertThisInitialized(_this1))||babelHelpers.assertThisInitialized(_this1);}babelHelpers.inheritsLoose(_class7,_ds2);var _proto22=_class7.prototype;_proto22.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getPreviousSibling();};_proto22.insert=function insert(t){return this.origin.insertBefore(t),this;};return _class7;}(_ds3)},xs={next:function(_cs){function _class9(){var _this10;for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++){args[_key10]=arguments[_key10];}return(_this10=_cs.call.apply(_cs,[this].concat(args))||this,_this10.direction="next",babelHelpers.assertThisInitialized(_this10))||babelHelpers.assertThisInitialized(_this10);}babelHelpers.inheritsLoose(_class9,_cs);var _proto23=_class9.prototype;_proto23.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getFirstChild();};_proto23.insert=function insert(t){return this.origin.splice(0,0,[t]),this;};return _class9;}(_cs3),previous:function(_cs2){function _class1(){var _this11;for(var _len11=arguments.length,args=new Array(_len11),_key11=0;_key11<_len11;_key11++){args[_key11]=arguments[_key11];}return(_this11=_cs2.call.apply(_cs2,[this].concat(args))||this,_this11.direction="previous",babelHelpers.assertThisInitialized(_this11))||babelHelpers.assertThisInitialized(_this11);}babelHelpers.inheritsLoose(_class1,_cs2);var _proto24=_class1.prototype;_proto24.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getLastChild();};_proto24.insert=function insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this;};return _class1;}(_cs3)};function Cs(t,e){return t?new ms[e](t):null;}function Ss(t,e,n){return t?new ys[e](t,Ns(t,n)):null;}function Ns(t,n,r){if(r===void 0){r="error";}var o=t.getTextContentSize();var i="next"===n?o:"previous"===n?0:n;return(i<0||i>o)&&("clamp"!==r&&e(284,String(n),String(o),t.getKey()),i=i<0?0:o),i;}function Ts(t,e){return new _bs(t,e);}function vs(t,e){return lo(t)?new xs[e](t):null;}function ks(t){return t&&t.getChildCaret()||t;}function Es(t){return t&&ks(t.getAdjacentCaret());}var _Os=function(){function Os(t,e,n){this.type="node-caret-range";this.anchor=t,this.focus=e,this.direction=n;}var _proto25=Os.prototype;_proto25.getLatest=function getLatest(){var t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new Os(t,e,this.direction);};_proto25.isCollapsed=function isCollapsed(){return this.anchor.isSamePointCaret(this.focus);};_proto25.getTextSlices=function getTextSlices(){var _this14=this;var t=function t(_t179){var e=_this14[_t179].getLatest();return gs(e)?function(t,e){var n=t.direction,r=t.origin,o=Ns(r,"focus"===e?us(n):n);return Ts(t,o-t.offset);}(e,_t179):null;},e=t("anchor"),n=t("focus");if(e&&n){var _t180=e.caret,_r65=n.caret;if(_t180.isSameNodeCaret(_r65))return[Ts(_t180,_r65.offset-_t180.offset),null];}return[e,n];};_proto25.iterNodeCarets=function iterNodeCarets(t){if(t===void 0){t="root";}var e=gs(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),r=gs(n),o=function o(e){return e.isSameNodeCaret(n)?null:Es(e)||e.getParentCaret(t);};return Ds({hasNext:function hasNext(t){return null!==t&&!(r&&n.isSameNodeCaret(t));},initial:e.isSameNodeCaret(n)?null:o(e),map:function map(t){return t;},step:o});};_proto25[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return this.iterNodeCarets("root");};return Os;}();var _bs=function(){function bs(t,e){this.type="slice";this.caret=t,this.distance=e;}var _proto26=bs.prototype;_proto26.getSliceIndices=function getSliceIndices(){var t=this.distance,e=this.caret.offset,n=e+t;return n<e?[n,e]:[e,n];};_proto26.getTextContent=function getTextContent(){var _this$getSliceIndices=this.getSliceIndices(),t=_this$getSliceIndices[0],e=_this$getSliceIndices[1];return this.caret.origin.getTextContent().slice(t,e);};_proto26.getTextContentSize=function getTextContentSize(){return Math.abs(this.distance);};_proto26.removeTextSlice=function removeTextSlice(){var _this$caret=this.caret,t=_this$caret.origin,e=_this$caret.direction,_this$getSliceIndices2=this.getSliceIndices(),n=_this$getSliceIndices2[0],r=_this$getSliceIndices2[1],o=t.getTextContent();return Ss(t.setTextContent(o.slice(0,n)+o.slice(r)),e,n);};return bs;}();function Ms(t){return ws(t,Cs(ni(),t.direction));}function As(t){return ws(t,t);}function ws(e,n){return e.direction!==n.direction&&t(265),new _Os(e,n,e.direction);}function Ds(t){var _ref23;var e=t.initial,n=t.hasNext,r=t.step,o=t.map;var i=e;return _ref23={},_ref23[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return this;},_ref23.next=function next(){if(!n(i))return{done:!0,value:void 0};var t={done:!1,value:o(i)};return i=r(i),t;},_ref23;}function Ps(e,n){var r=Rs(e.origin,n.origin);switch(null===r&&t(275,e.origin.getKey(),n.origin.getKey()),r.type){case"same":{var _t181="text"===e.type,_r66="text"===n.type;return _t181&&_r66?function(t,e){return Math.sign(t-e);}(e.offset,n.offset):e.type===n.type?0:_t181?-1:_r66?1:"child"===e.type?-1:1;}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===n.type?1:-1;case"branch":return Is(r);}}function Is(t){var e=t.a,n=t.b,r=e.__key,o=n.__key;var i=e,s=n;for(;i&&s;i=i.getNextSibling(),s=s.getNextSibling()){if(i.__key===o)return-1;if(s.__key===r)return 1;}return null===i?1:-1;}function Ls(t,e){return e.is(t);}function Fs(t){return lo(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()];}function Rs(e,n){if(e.is(n))return{commonAncestor:e,type:"same"};var r=new Map();for(var _Fs=Fs(e),_t182=_Fs[0],_n83=_Fs[1];_t182;_n83=_t182,_t182=_t182.getParent())r.set(_t182,_n83);for(var _Fs2=Fs(n),_o51=_Fs2[0],_i27=_Fs2[1];_o51;_i27=_o51,_o51=_o51.getParent()){var _s15=r.get(_o51);if(void 0!==_s15)return null===_s15?(Ls(e,_o51)||t(276),{commonAncestor:_o51,type:"ancestor"}):null===_i27?(Ls(n,_o51)||t(277),{commonAncestor:_o51,type:"descendant"}):((lo(_s15)||Ls(e,_s15))&&(lo(_i27)||Ls(n,_i27))&&_o51.is(_s15.getParent())&&_o51.is(_i27.getParent())||t(278),{a:_s15,b:_i27,commonAncestor:_o51,type:"branch"});}return null;}function Ks(e,n){var r=e.type,o=e.key,i=e.offset,s=Bi(e.key);return"text"===r?(Qn(s)||t(266,s.getType(),o),Ss(s,n,i)):(lo(s)||t(267,s.getType(),o),Xs(s,e.offset,n));}function Bs(e,n){var r=n.origin,o=n.direction,i="next"===o;gs(n)?e.set(r.getKey(),n.offset,"text"):_s(n)?Qn(r)?e.set(r.getKey(),Ns(r,o),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(i?1:0),"element"):(ps(n)&&lo(r)||t(268),e.set(r.getKey(),i?0:r.getChildrenSize(),"element"));}function zs(t){var e=vr(),n=cr(e)?e:Sr();return Ws(n,t),oi(n),n;}function Ws(t,e){Bs(t.anchor,e.anchor),Bs(t.focus,e.focus);}function $s(t){var e=t.anchor,n=t.focus,r=Ks(e,"next"),o=Ks(n,"next"),i=Ps(r,o)<=0?"next":"previous";return ws(Gs(r,i),Gs(o,i));}function Us(t){var e=t.direction,n=t.origin,r=Cs(n,us(e)).getNodeAtCaret();return r?Cs(r,e):vs(n.getParentOrThrow(),e);}function Js(t,e){if(e===void 0){e="root";}var n=[t];for(var _r67=ps(t)?t.getParentCaret(e):t.getSiblingCaret();null!==_r67;_r67=_r67.getParentCaret(e))n.push(Us(_r67));return n;}function Ys(t){return!!t&&t.origin.isAttached();}function js(e,n){if(n===void 0){n="removeEmptySlices";}if(e.isCollapsed())return e;var r="root",o="next";var i=n;var s=qs(e,o),l=Js(s.anchor,r),c=Js(s.focus.getFlipped(),r),a=new Set(),u=[];for(var _t183 of s.iterNodeCarets(r))if(ps(_t183))a.add(_t183.origin.getKey());else if(_s(_t183)){var _e115=_t183.origin;lo(_e115)&&!a.has(_e115.getKey())||u.push(_e115);}for(var _t184 of u)_t184.remove();for(var _t185 of s.getTextSlices()){if(!_t185)continue;var _e116=_t185.caret.origin,_n84=_e116.getTextContentSize(),_r68=Us(Cs(_e116,o)),_s16=_e116.getMode();if(Math.abs(_t185.distance)===_n84&&"removeEmptySlices"===i||"token"===_s16&&0!==_t185.distance)_r68.remove();else if(0!==_t185.distance){i="removeEmptySlices";var _e117=_t185.removeTextSlice();var _n85=_t185.caret.origin;if("segmented"===_s16){var _t186=_e117.origin,_n86=Xn(_t186.getTextContent()).setStyle(_t186.getStyle()).setFormat(_t186.getFormat());_r68.replaceOrInsert(_n86),_e117=Ss(_n86,o,_e117.offset);}_n85.is(l[0].origin)&&(l[0]=_e117),_n85.is(c[0].origin)&&(c[0]=_e117.getFlipped());}}var f,d;for(var _t187 of l)if(Ys(_t187)){f=Hs(_t187);break;}for(var _t188 of c)if(Ys(_t188)){d=Hs(_t188);break;}var h=function(t,e,n){if(!t||!e)return null;var r=t.getParentAtCaret(),o=e.getParentAtCaret();if(!r||!o)return null;var i=r.getParents().reverse();i.push(r);var s=o.getParents().reverse();s.push(o);var l=Math.min(i.length,s.length);var c;for(c=0;c<l&&i[c]===s[c];c++);var a=function a(t,e){var n;for(var _r69=c;_r69<t.length;_r69++){var _o52=t[_r69];if(Li(_o52))return;!n&&e(_o52)&&(n=_o52);}return n;},u=a(i,Gi),f=u&&a(s,function(t){return n.has(t.getKey())&&Gi(t);});return u&&f?[u,f]:null;}(f,d,a);if(h){var _t189=h[0],_e118=h[1];vs(_t189,"previous").splice(0,_e118.getChildren());var _n87=_e118.getParent();for(_e118.remove(!0);_n87&&_n87.isEmpty();){var _t190=_n87;_n87=_n87.getParent(),_t190.remove(!0);}}var g=[f,d].concat(l,c).find(Ys);if(g){return As(Gs(Hs(g),e.direction));}t(269,JSON.stringify(l.map(function(t){return t.origin.__key;})));}function Hs(t){var e=function(t){var e=t;for(;ps(e);){var _t191=Es(e);if(!ps(_t191))break;e=_t191;}return e;}(t.getLatest()),n=e.direction;if(Qn(e.origin))return gs(e)?e:Ss(e.origin,n,n);var r=e.getAdjacentCaret();return _s(r)&&Qn(r.origin)?Ss(r.origin,n,us(n)):e;}function Vs(t){return gs(t)&&t.offset!==Ns(t.origin,t.direction);}function Gs(t,e){return t.direction===e?t:t.getFlipped();}function qs(t,e){return t.direction===e?t:ws(Gs(t.focus,e),Gs(t.anchor,e));}function Xs(t,e,n){var r=vs(t,"next");for(var _t192=0;_t192<e;_t192++){var _t193=r.getAdjacentCaret();if(null===_t193)break;r=_t193;}return Gs(r,n);}function Qs(e){var n=e.origin,r=e.offset,o=e.direction;if(r===Ns(n,o))return e.getSiblingCaret();if(r===Ns(n,us(o)))return Us(e.getSiblingCaret());var _n$splitText2=n.splitText(r),i=_n$splitText2[0];return Qn(i)||t(281),Gs(Cs(i,"next"),o);}function Zs(t,e){return!0;}function tl(){var e=[];for(var _len12=arguments.length,t=new Array(_len12),_key12=0;_key12<_len12;_key12++){t[_key12]=arguments[_key12];}for(var _n88 of t)if(_n88&&"string"==typeof _n88)for(var _ref25 of _n88.matchAll(/\S+/g)){var _t194=_ref25[0];e.push(_t194);}return e;}exports.$addUpdateTag=Mi,exports.$applyNodeReplacement=Ri,exports.$caretFromPoint=Ks,exports.$caretRangeFromSelection=$s,exports.$cloneWithProperties=ts,exports.$cloneWithPropertiesEphemeral=function(t){return(e=ts(t))[Tn]=!0,e;var e;},exports.$comparePointCaretNext=Ps,exports.$copyNode=Fi,exports.$create=function(t){var e=qi();return $r(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(t)).klass)();},exports.$createLineBreakNode=Pn,exports.$createNodeSelection=Nr,exports.$createParagraphNode=So,exports.$createPoint=or,exports.$createRangeSelection=Sr,exports.$createRangeSelectionFromDom=function(t,e){return Tr(null,t,e,null);},exports.$createTabNode=er,exports.$createTextNode=Xn,exports.$extendCaretToRange=Ms,exports.$findMatchingParent=is,exports.$getAdjacentChildCaret=Es,exports.$getAdjacentNode=Ti,exports.$getAdjacentSiblingOrParentSiblingCaret=function(t,e){if(e===void 0){e="root";}var n=0,r=t,o=Es(r);for(;null===o;){if(n--,o=r.getParentCaret(e),!o)return null;r=o,o=Es(r);}return o&&[o,n];},exports.$getCaretInDirection=Gs,exports.$getCaretRange=ws,exports.$getCaretRangeInDirection=qs,exports.$getCharacterOffsets=dr,exports.$getChildCaret=vs,exports.$getChildCaretAtIndex=Xs,exports.$getChildCaretOrSelf=ks,exports.$getCollapsedCaretRange=As,exports.$getCommonAncestor=Rs,exports.$getCommonAncestorResultBranchOrder=Is,exports.$getEditor=qi,exports.$getNearestNodeFromDOMNode=Zo,exports.$getNearestRootOrShadowRoot=Ii,exports.$getNodeByKey=qo,exports.$getNodeByKeyOrThrow=Bi,exports.$getNodeFromDOMNode=Xo,exports.$getPreviousSelection=kr,exports.$getRoot=ni,exports.$getSelection=vr,exports.$getSiblingCaret=Cs,exports.$getState=G,exports.$getStateChange=function(t,e,n){var r=G(t,n,"direct"),o=G(e,n,"direct");return n.isEqual(r,o)?null:[r,o];},exports.$getTextContent=function(){var t=vr();return null===t?"":t.getTextContent();},exports.$getTextNodeOffset=Ns,exports.$getTextPointCaret=Ss,exports.$getTextPointCaretSlice=Ts,exports.$getWritableNodeState=Q,exports.$hasAncestor=wi,exports.$hasUpdateTag=function(t){return Yr()._updateTags.has(t);},exports.$insertNodes=function(t){var e=vr()||kr();null===e&&(e=ni().selectEnd()),e.insertNodes(t);},exports.$isBlockElementNode=function(t){return lo(t)&&!t.isInline();},exports.$isChildCaret=ps,exports.$isDecoratorNode=uo,exports.$isEditorState=function(t){return t instanceof _yo;},exports.$isElementNode=lo,exports.$isExtendableTextPointCaret=Vs,exports.$isInlineElementOrDecoratorNode=function(t){return lo(t)&&t.isInline()||uo(t)&&t.isInline();},exports.$isLeafNode=function(t){return Qn(t)||In(t)||uo(t);},exports.$isLineBreakNode=In,exports.$isNodeCaret=function(t){return t instanceof _ls4;},exports.$isNodeSelection=ur,exports.$isParagraphNode=No,exports.$isRangeSelection=cr,exports.$isRootNode=ho,exports.$isRootOrShadowRoot=Li,exports.$isSiblingCaret=_s,exports.$isTabNode=nr,exports.$isTextNode=Qn,exports.$isTextPointCaret=gs,exports.$isTextPointCaretSlice=function(t){return t instanceof _bs;},exports.$isTokenOrSegmented=zo,exports.$isTokenOrTab=Bo,exports.$nodesOfType=function(t){var e=t.getType(),n=Jr();if(n._readOnly){var _t195=Zi(n).get(e);return _t195?Array.from(_t195.values()):[];}var r=n._nodeMap,o=[];for(var _ref27 of r){var _n89=_ref27[1];_n89 instanceof t&&_n89.__type===e&&_n89.isAttached()&&o.push(_n89);}return o;},exports.$normalizeCaret=Hs,exports.$normalizeSelection__EXPERIMENTAL=ct,exports.$onUpdate=Ai,exports.$parseSerializedNode=function(t){return Xr(t,Yr()._nodes);},exports.$removeTextFromCaretRange=js,exports.$rewindSiblingCaret=Us,exports.$selectAll=function(t){var e=ni();if(cr(t)){var _e119=t.anchor,_n90=t.focus,_r70=_e119.getNode().getTopLevelElementOrThrow().getParentOrThrow();return _e119.set(_r70.getKey(),0,"element"),_n90.set(_r70.getKey(),_r70.getChildrenSize(),"element"),ct(t),t;}{var _t196=e.select(0,e.getChildrenSize());return oi(ct(_t196)),_t196;}},exports.$setCompositionKey=Vo,exports.$setPointFromCaret=Bs,exports.$setSelection=oi,exports.$setSelectionFromCaretRange=zs,exports.$setState=function(t,e,n){var r;if($r(),"function"==typeof n){var _o53=t.getLatest(),_i28=G(_o53,e);if(r=n(_i28),e.isEqual(_i28,r))return _o53;}else r=n;var o=t.getWritable();return Q(o).updateFromKnown(e,r),o;},exports.$splitAtPointCaretNext=function(t,_temp){var _ref28=_temp===void 0?{}:_temp,_ref28$$copyElementNo=_ref28.$copyElementNode,e=_ref28$$copyElementNo===void 0?Fi:_ref28$$copyElementNo,_ref28$$splitTextPoin=_ref28.$splitTextPointCaretNext,n=_ref28$$splitTextPoin===void 0?Qs:_ref28$$splitTextPoin,_ref28$rootMode=_ref28.rootMode,r=_ref28$rootMode===void 0?"shadowRoot":_ref28$rootMode,_ref28$$shouldSplit=_ref28.$shouldSplit,o=_ref28$$shouldSplit===void 0?Zs:_ref28$$shouldSplit;if(gs(t))return n(t);var i=t.getParentCaret(r);if(i){var _n91=i.origin;if(ps(t)&&(!_n91.canBeEmpty()||!o(_n91,"first")))return Us(i);var _r71=function(t){var e=[];for(var _n92=t.getAdjacentCaret();_n92;_n92=_n92.getAdjacentCaret())e.push(_n92.origin);return e;}(t);(_r71.length>0||_n91.canBeEmpty()&&o(_n91,"last"))&&i.insert(e(_n91).splice(0,0,_r71));}return i;},exports.$splitNode=function(e,n){var r=e.getChildAtIndex(n);null==r&&(r=e),Li(e)&&t(102);var _o56=function o(e){var n=e.getParentOrThrow(),i=Li(n),s=e!==r||i?Fi(e):e;if(i)return lo(e)&&lo(s)||t(133),e.insertAfter(s),[e,s,s];{var _o55=_o56(n),_t197=_o55[0],_r72=_o55[1],_i29=_o55[2],_l11=e.getNextSiblings();return _i29.append.apply(_i29,[s].concat(_l11)),[_t197,_r72,s];}},_o54=_o56(r),i=_o54[0],s=_o54[1];return[i,s];},exports.$updateRangeSelectionFromCaretRange=Ws,exports.ArtificialNode__DO_NOT_USE=_mo,exports.BEFORE_INPUT_COMMAND=Vt,exports.BLUR_COMMAND=Ke,exports.CAN_REDO_COMMAND=Le,exports.CAN_UNDO_COMMAND=Fe,exports.CLEAR_EDITOR_COMMAND=Pe,exports.CLEAR_HISTORY_COMMAND=Ie,exports.CLICK_COMMAND=Ht,exports.COLLABORATION_TAG=On,exports.COMMAND_PRIORITY_CRITICAL=4,exports.COMMAND_PRIORITY_EDITOR=To,exports.COMMAND_PRIORITY_HIGH=3,exports.COMMAND_PRIORITY_LOW=1,exports.COMMAND_PRIORITY_NORMAL=2,exports.COMPOSITION_END_COMMAND=Xt,exports.COMPOSITION_START_COMMAND=qt,exports.CONTROLLED_TEXT_INSERTION_COMMAND=ee,exports.COPY_COMMAND=Ae,exports.CUT_COMMAND=we,exports.DELETE_CHARACTER_COMMAND=Qt,exports.DELETE_LINE_COMMAND=ie,exports.DELETE_WORD_COMMAND=oe,exports.DRAGEND_COMMAND=Me,exports.DRAGOVER_COMMAND=be,exports.DRAGSTART_COMMAND=Oe,exports.DROP_COMMAND=ke,exports.DecoratorNode=_ao,exports.ElementNode=_so4,exports.FOCUS_COMMAND=Re,exports.FORMAT_ELEMENT_COMMAND=Ee,exports.FORMAT_TEXT_COMMAND=se,exports.HISTORIC_TAG="historic",exports.HISTORY_MERGE_TAG=En,exports.HISTORY_PUSH_TAG="history-push",exports.INDENT_CONTENT_COMMAND=Te,exports.INPUT_COMMAND=Gt,exports.INSERT_LINE_BREAK_COMMAND=Zt,exports.INSERT_PARAGRAPH_COMMAND=te,exports.INSERT_TAB_COMMAND=Ne,exports.INTERNAL_$isBlock=Gi,exports.IS_ALL_FORMATTING=2047,exports.IS_BOLD=1,exports.IS_CODE=16,exports.IS_HIGHLIGHT=p,exports.IS_ITALIC=2,exports.IS_STRIKETHROUGH=4,exports.IS_SUBSCRIPT=32,exports.IS_SUPERSCRIPT=64,exports.IS_UNDERLINE=8,exports.KEY_ARROW_DOWN_COMMAND=_e,exports.KEY_ARROW_LEFT_COMMAND=de,exports.KEY_ARROW_RIGHT_COMMAND=ue,exports.KEY_ARROW_UP_COMMAND=ge,exports.KEY_BACKSPACE_COMMAND=me,exports.KEY_DELETE_COMMAND=Ce,exports.KEY_DOWN_COMMAND=ae,exports.KEY_ENTER_COMMAND=pe,exports.KEY_ESCAPE_COMMAND=xe,exports.KEY_MODIFIER_COMMAND=Be,exports.KEY_SPACE_COMMAND=ye,exports.KEY_TAB_COMMAND=Se,exports.LineBreakNode=_wn,exports.MOVE_TO_END=fe,exports.MOVE_TO_START=he,exports.NODE_STATE_KEY="$",exports.OUTDENT_CONTENT_COMMAND=ve,exports.PASTE_COMMAND=ne,exports.PASTE_TAG="paste",exports.ParagraphNode=_xo,exports.REDO_COMMAND=ce,exports.REMOVE_TEXT_COMMAND=re,exports.RootNode=_fo,exports.SELECTION_CHANGE_COMMAND=Yt,exports.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND=jt,exports.SELECT_ALL_COMMAND=De,exports.SKIP_COLLAB_TAG="skip-collab",exports.SKIP_DOM_SELECTION_TAG=Mn,exports.SKIP_SCROLL_INTO_VIEW_TAG=bn,exports.SKIP_SELECTION_FOCUS_TAG=An,exports.TEXT_TYPE_TO_FORMAT=A,exports.TabNode=_tr,exports.TextNode=_$n2,exports.UNDO_COMMAND=le,exports.addClassNamesToElement=function(t){var _t$classList2;for(var _len13=arguments.length,e=new Array(_len13>1?_len13-1:0),_key13=1;_key13<_len13;_key13++){e[_key13-1]=arguments[_key13];}var n=tl.apply(void 0,e);n.length>0&&(_t$classList2=t.classList).add.apply(_t$classList2,n);},exports.buildImportMap=function(t){return t;},exports.configExtension=function(){for(var _len14=arguments.length,t=new Array(_len14),_key14=0;_key14<_len14;_key14++){t[_key14]=arguments[_key14];}return t;},exports.createCommand=Jt,exports.createEditor=function(t){var e=t||{},n=Hr(),r=e.theme||{},o=void 0===t?n:e.parentEditor||null,i=e.disableEvents||!1,s=_o(),l=e.namespace||(null!==o?o._config.namespace:ci()),c=e.editorState,a=[_fo,_$n2,_wn,_tr,_xo,_mo].concat(e.nodes||[]),u=e.onError,f=e.html,d=void 0===e.editable||e.editable;var h;if(void 0===t&&null!==n)h=n._nodes;else{h=new Map();for(var _t198=0;_t198<a.length;_t198++){var _e120=a[_t198],_n93=null,_r73=null;if("function"!=typeof _e120){var _t199=_e120;_e120=_t199.replace,_n93=_t199["with"],_r73=_t199.withKlass||null;}os(_e120);var _o57=_e120.getType(),_i30=ko(_e120);h.set(_o57,{exportDOM:f&&f["export"]?f["export"].get(_e120):void 0,klass:_e120,replace:_n93,replaceWithKlass:_r73,sharedNodeState:q(a[_t198]),transforms:_i30});}}var g=new _Eo(s,o,h,{disableEvents:i,namespace:l,theme:r},u||console.error,function(t,e){var n=new Map(),r=new Set(),o=function o(t){Object.keys(t).forEach(function(e){var r=n.get(e);void 0===r&&(r=[],n.set(e,r)),r.push(t[e]);});};return t.forEach(function(t){var e=t.klass.importDOM;if(null==e||r.has(e))return;r.add(e);var n=e.call(t.klass);null!==n&&o(n);}),e&&o(e),n;}(h,f?f["import"]:void 0),d,t);return void 0!==c&&(g._pendingEditorState=c,g._dirtyType=2),function(t){t.registerCommand(Vt,an,To),t.registerCommand(Gt,un,To),t.registerCommand(qt,fn,To),t.registerCommand(Xt,dn,To),t.registerCommand(ae,gn,To);}(g),g;},exports.createSharedNodeState=q,exports.createState=function(t,e){return new V(t,e);},exports.declarePeerDependency=function(t,e){return[t,e];},exports.defineExtension=function(t){return t;},exports.flipDirection=us,exports.getDOMOwnerDocument=bi,exports.getDOMSelection=$i,exports.getDOMSelectionFromTarget=Ui,exports.getDOMTextNode=Uo,exports.getEditorPropertyFromDOMNode=Ko,exports.getNearestEditorFromDOMNode=Ro,exports.getRegisteredNode=wo,exports.getRegisteredNodeOrThrow=Ao,exports.getStaticNodeConfig=os,exports.getTextDirection=function(t){return b.test(t)?"rtl":M.test(t)?"ltr":null;},exports.getTransformSetFromKlass=ko,exports.isBlockDomNode=Vi,exports.isCurrentlyReadOnlyMode=Wr,exports.isDOMDocumentNode=$o,exports.isDOMNode=Yi,exports.isDOMTextNode=Wo,exports.isDOMUnmanaged=ns,exports.isDocumentFragment=ji,exports.isExactShortcutMatch=_i,exports.isHTMLAnchorElement=function(t){return Ji(t)&&"A"===t.tagName;},exports.isHTMLElement=Ji,exports.isInlineDomNode=Hi,exports.isLexicalEditor=Fo,exports.isModifierMatch=gi,exports.isSelectionCapturedInDecoratorInput=Io,exports.isSelectionWithinEditor=Lo,exports.makeStepwiseIterator=Ds,exports.mergeRegister=function(){for(var _len15=arguments.length,t=new Array(_len15),_key15=0;_key15<_len15;_key15++){t[_key15]=arguments[_key15];}return function(){for(var _e121=t.length-1;_e121>=0;_e121--)t[_e121]();t.length=0;};},exports.normalizeClassNames=tl,exports.removeClassNamesFromElement=function(t){var _t$classList3;for(var _len16=arguments.length,e=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){e[_key16-1]=arguments[_key16];}var n=tl.apply(void 0,e);n.length>0&&(_t$classList3=t.classList).remove.apply(_t$classList3,n);},exports.removeFromParent=jo,exports.resetRandomKey=function(){Mo=1;},exports.safeCast=function(t){return t;},exports.setDOMUnmanaged=function(t){t.__lexicalUnmanaged=!0;},exports.setNodeIndentFromDOM=es,exports.shallowMergeConfig=function(t,e){if(!e||t===e)return t;for(var _n94 in e)if(t[_n94]!==e[_n94])return babelHelpers["extends"]({},t,e);return t;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<d4f4df497abc7b85a16c829825c1c083>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalComposerContext.prod",["react"],(function $module_LexicalComposerContext_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var e=_require_closure_react||(_require_closure_react=require("react"));var n=e.createContext(null);exports.LexicalComposerContext=n,exports.createLexicalComposerContext=function(e,n){var t=null;return null!=e&&(t=e[1]),{getTheme:function getTheme(){return null!=n?n:null!=t?t.getTheme():null;}};},exports.useLexicalComposerContext=function(){var t=e.useContext(n);return null==t&&function(e){var t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",e);for(var _len=arguments.length,n=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){n[_key-1]=arguments[_key];}for(var _e of n)r.append("v",_e);throw t.search=r.toString(),Error("Minified Lexical error #"+e+"; visit "+t.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}(8),t;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<4ba13524308c1dd46ac5b44adf0aeab2>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalContentEditable.prod",["LexicalComposerContext","LexicalText","LexicalUtils","react"],(function $module_LexicalContentEditable_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _excluded=["editor","ariaActiveDescendant","ariaAutoComplete","ariaControls","ariaDescribedBy","ariaErrorMessage","ariaExpanded","ariaInvalid","ariaLabel","ariaLabelledBy","ariaMultiline","ariaOwns","ariaRequired","autoCapitalize","className","id","role","spellCheck","style","tabIndex","data-testid"],_excluded2=["placeholder"];var _require_closure_react;var t=_require_closure_react||(_require_closure_react=require("react")),a=_require_closure_react;var n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function o(_ref,q){var e=_ref.editor,i=_ref.ariaActiveDescendant,r=_ref.ariaAutoComplete,o=_ref.ariaControls,l=_ref.ariaDescribedBy,s=_ref.ariaErrorMessage,d=_ref.ariaExpanded,u=_ref.ariaInvalid,c=_ref.ariaLabel,f=_ref.ariaLabelledBy,b=_ref.ariaMultiline,m=_ref.ariaOwns,x=_ref.ariaRequired,E=_ref.autoCapitalize,p=_ref.className,C=_ref.id,_ref$role=_ref.role,v=_ref$role===void 0?"textbox":_ref$role,_ref$spellCheck=_ref.spellCheck,w=_ref$spellCheck===void 0?!0:_ref$spellCheck,y=_ref.style,L=_ref.tabIndex,g=_ref["data-testid"],h=babelHelpers.objectWithoutPropertiesLoose(_ref,_excluded);var _t$useState=t.useState(e.isEditable()),R=_t$useState[0],j=_t$useState[1],S=t.useCallback(function(t){t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null);},[e]),D=t.useMemo(function(){return function(){for(var _len=arguments.length,e=new Array(_len),_key=0;_key<_len;_key++){e[_key]=arguments[_key];}return function(t){for(var _a of e)"function"==typeof _a?_a(t):null!=_a&&(_a.current=t);};}(q,S);},[S,q]);return n(function(){return j(e.isEditable()),e.registerEditableListener(function(e){j(e);});},[e]),a.jsx("div",babelHelpers["extends"]({"aria-activedescendant":R?i:void 0,"aria-autocomplete":R?r:"none","aria-controls":R?o:void 0,"aria-describedby":l},null!=s?{"aria-errormessage":s}:{},{"aria-expanded":R&&"combobox"===v?!!d:void 0},null!=u?{"aria-invalid":u}:{},{"aria-label":c,"aria-labelledby":f,"aria-multiline":b,"aria-owns":R?m:void 0,"aria-readonly":!R||void 0,"aria-required":x,autoCapitalize:E,className:p,contentEditable:R,"data-testid":g,id:C,ref:D,role:v,spellCheck:w,style:y,tabIndex:L},h));}var l=t.forwardRef(o);function s(e){return e.getEditorState().read(require("LexicalText").$canShowPlaceholderCurry(e.isComposing()));}var d=t.forwardRef(u);function u(t,i){var r=t.placeholder,n=babelHelpers.objectWithoutPropertiesLoose(t,_excluded2),_e$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),o=_e$useLexicalComposer[0];return a.jsxs(a.Fragment,{children:[a.jsx(l,babelHelpers["extends"]({editor:o},n,{ref:i})),null!=r&&a.jsx(c,{editor:o,content:r})]});}function c(_ref2){var e=_ref2.content,i=_ref2.editor;var o=function(e){var _t$useState3=t.useState(function(){return s(e);}),a=_t$useState3[0],i=_t$useState3[1];return n(function(){function t(){var t=s(e);i(t);}return t(),require("LexicalUtils").mergeRegister(e.registerUpdateListener(function(){t();}),e.registerEditableListener(function(){t();}));},[e]),a;}(i),_t$useState2=t.useState(i.isEditable()),l=_t$useState2[0],d=_t$useState2[1];if(t.useLayoutEffect(function(){return d(i.isEditable()),i.registerEditableListener(function(e){d(e);});},[i]),!o)return null;var u=null;return"function"==typeof e?u=e(l):null!==e&&(u=e),null===u?null:a.jsx("div",{"aria-hidden":!0,children:u});}exports.ContentEditable=d,exports.ContentEditableElement=l;}),null);
__d("LexicalDragon",["cr:2903"],(function(t,n,r,o,a,i){a.exports=n("cr:2903")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<d590ff2ad017346a92057f379cd1818d>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalErrorBoundary.prod",["react"],(function $module_LexicalErrorBoundary_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var r=_require_closure_react||(_require_closure_react=require("react")),e=_require_closure_react;var t=r.createContext(null),o={didCatch:!1,error:null};var _s4=function(_r$Component){function s(r){var _this;_this=_r$Component.call(this,r)||this,_this.resetErrorBoundary=_this.resetErrorBoundary.bind(babelHelpers.assertThisInitialized(_this)),_this.state=o;return _this;}babelHelpers.inheritsLoose(s,_r$Component);s.getDerivedStateFromError=function getDerivedStateFromError(r){return{didCatch:!0,error:r};};var _proto=s.prototype;_proto.resetErrorBoundary=function resetErrorBoundary(){var r=this.state.error;if(null!==r){for(var e,t,_s=arguments.length,n=new Array(_s),i=0;i<_s;i++)n[i]=arguments[i];null===(e=(t=this.props).onReset)||void 0===e||e.call(t,{args:n,reason:"imperative-api"}),this.setState(o);}};_proto.componentDidCatch=function componentDidCatch(r,e){var t,o;null===(t=(o=this.props).onError)||void 0===t||t.call(o,r,e);};_proto.componentDidUpdate=function componentDidUpdate(r,e){var t=this.state.didCatch,_s2=this.props.resetKeys;var n,i;t&&null!==e.error&&function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r.length!==e.length||r.some(function(r,t){return!Object.is(r,e[t]);});}(r.resetKeys,_s2)&&(null===(n=(i=this.props).onReset)||void 0===n||n.call(i,{next:_s2,prev:r.resetKeys,reason:"keys"}),this.setState(o));};_proto.render=function render(){var _this$props=this.props,e=_this$props.children,o=_this$props.fallbackRender,_s3=_this$props.FallbackComponent,n=_this$props.fallback,_this$state=this.state,i=_this$state.didCatch,a=_this$state.error;var l=e;if(i){var _e={error:a,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof o)l=o(_e);else if(_s3)l=r.createElement(_s3,_e);else{if(void 0===n)throw a;l=n;}}return r.createElement(t.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},l);};return s;}(r.Component);exports.LexicalErrorBoundary=function(_ref){var r=_ref.children,t=_ref.onError;return e.jsx(_s4,{fallback:e.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:r});};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<e7f655cbe89eb99649f683ba7274227b>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHashtag.prod",["Lexical","LexicalText","LexicalUtils"],(function $module_LexicalHashtag_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _r=function(_n$TextNode){function r(){return _n$TextNode.apply(this,arguments)||this;}babelHelpers.inheritsLoose(r,_n$TextNode);r.getType=function getType(){return"hashtag";};r.clone=function clone(e){return new r(e.__text,e.__key);};var _proto=r.prototype;_proto.createDOM=function createDOM(e){var n=_n$TextNode.prototype.createDOM.call(this,e);return require("LexicalUtils").addClassNamesToElement(n,e.theme.hashtag),n;};r.importJSON=function importJSON(e){return a().updateFromJSON(e);};_proto.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto.isTextEntity=function isTextEntity(){return!0;};return r;}(require("Lexical").TextNode);function a(e){if(e===void 0){e="";}return require("Lexical").$applyNodeReplacement(new _r(e));}var s=new RegExp(function(){var _ref=function(){var e=String.fromCharCode,t="A-Za-z-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"+e(173824)+"-"+e(177983)+e(177984)+"-"+e(178207)+e(194560)+"-"+e(195103)+"";return{alpha:t,alphanumeric:t+"--------------------------------------------------------------------------------------------0-9--------------------_",hashChars:"#\\uFF03"};}(),e=_ref.alpha,t=_ref.alphanumeric,n=_ref.hashChars,r="["+t+"]";return"("+("^|$|[^&/"+t+"]")+")("+("["+n+"]")+")("+r+"*"+("["+e+"]")+r+"*)";}(),"i");var i={getHashtagMatch:function getHashtagMatch(e){var t=s.exec(e);if(null===t)return null;var n=t[3].length+1,r=t.index+t[1].length;return{end:r+n,start:r};}};function c(n,s){if(s===void 0){s=i;}return require("LexicalUtils").mergeRegister.apply(require("LexicalUtils"),require("LexicalText").registerLexicalTextEntity(n,s.getHashtagMatch,_r,function(e){return a(e.getTextContent());}));}var o=require("Lexical").defineExtension({config:i,name:"@lexical/hashtag/Hashtag",nodes:function nodes(){return[_r];},register:c});exports.$createHashtagNode=a,exports.$isHashtagNode=function(e){return e instanceof _r;},exports.HashtagExtension=o,exports.HashtagNode=_r,exports.registerLexicalHashtag=c;}),null);
__d("LexicalHistory",["cr:2904"],(function(t,n,r,o,a,i){a.exports=n("cr:2904")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<a4e75d98d5c200f319ab621ceecc265d>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHistoryPlugin.prod",["LexicalComposerContext","LexicalHistory","react"],(function $module_LexicalHistoryPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var r=_require_closure_react||(_require_closure_react=require("react"));exports.createEmptyHistoryState=require("LexicalHistory").createEmptyHistoryState,exports.HistoryPlugin=function(_ref){var o=_ref.delay,s=_ref.externalHistoryState;var _e$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),i=_e$useLexicalComposer[0];return function(e,o,s){if(s===void 0){s=1e3;}var i=r.useMemo(function(){return o||require("LexicalHistory").createEmptyHistoryState();},[o]);r.useEffect(function(){return require("LexicalHistory").registerHistory(e,i,s);},[s,e,i]);}(i,s,o),null;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<131c675f957c14e0c76eff1b1e1dc05f>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalLink.prod",["Lexical","LexicalExtension","LexicalUtils"],(function $module_LexicalLink_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _excluded=["url"];var _require_Lexical;var r=new Set(["http:","https:","mailto:","sms:","tel:"]);var _i1=function(_t$ElementNode){function i(e,t,n){var _this;if(e===void 0){e="";}if(t===void 0){t={};}_this=_t$ElementNode.call(this,n)||this;var _t=t,_t$target=_t.target,r=_t$target===void 0?null:_t$target,_t$rel=_t.rel,_i=_t$rel===void 0?null:_t$rel,_t$title=_t.title,s=_t$title===void 0?null:_t$title;_this.__url=e,_this.__target=r,_this.__rel=_i,_this.__title=s;return _this;}babelHelpers.inheritsLoose(i,_t$ElementNode);i.getType=function getType(){return"link";};i.clone=function clone(e){return new i(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key);};var _proto=i.prototype;_proto.createDOM=function createDOM(t){var n=document.createElement("a");return this.updateLinkDOM(null,n,t),require("LexicalUtils").addClassNamesToElement(n,t.theme.link),n;};_proto.updateLinkDOM=function updateLinkDOM(t,n,r){if(require("LexicalUtils").isHTMLAnchorElement(n)){t&&t.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(var _e of["target","rel","title"]){var _r="__"+_e,_i2=this[_r];t&&t[_r]===_i2||(_i2?n[_e]=_i2:n.removeAttribute(_e));}}};_proto.updateDOM=function updateDOM(e,t,n){return this.updateLinkDOM(e,t,n),!1;};i.importDOM=function importDOM(){return{a:function a(e){return{conversion:s,priority:1};}};};i.importJSON=function importJSON(e){return l().updateFromJSON(e);};_proto.updateFromJSON=function updateFromJSON(e){return _t$ElementNode.prototype.updateFromJSON.call(this,e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null);};_proto.sanitizeUrl=function sanitizeUrl(e){e=p(e);try{var _t2=new URL(p(e));if(!r.has(_t2.protocol))return"about:blank";}catch(t){return e;}return e;};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_t$ElementNode.prototype.exportJSON.call(this),{rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()});};_proto.getURL=function getURL(){return this.getLatest().__url;};_proto.setURL=function setURL(e){var t=this.getWritable();return t.__url=e,t;};_proto.getTarget=function getTarget(){return this.getLatest().__target;};_proto.setTarget=function setTarget(e){var t=this.getWritable();return t.__target=e,t;};_proto.getRel=function getRel(){return this.getLatest().__rel;};_proto.setRel=function setRel(e){var t=this.getWritable();return t.__rel=e,t;};_proto.getTitle=function getTitle(){return this.getLatest().__title;};_proto.setTitle=function setTitle(e){var t=this.getWritable();return t.__title=e,t;};_proto.insertNewAfter=function insertNewAfter(e,t){if(t===void 0){t=!0;}var n=l(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n;};_proto.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto.canInsertTextAfter=function canInsertTextAfter(){return!1;};_proto.canBeEmpty=function canBeEmpty(){return!1;};_proto.isInline=function isInline(){return!0;};_proto.extractWithChild=function extractWithChild(e,n,r){if(!require("Lexical").$isRangeSelection(n))return!1;var _i3=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(_i3)&&this.isParentOf(s)&&n.getTextContent().length>0;};_proto.isEmailURI=function isEmailURI(){return this.__url.startsWith("mailto:");};_proto.isWebSiteURI=function isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://");};return i;}((_require_Lexical=require("Lexical")).ElementNode);function s(t){var n=null;if(require("LexicalUtils").isHTMLAnchorElement(t)){var _e2=t.textContent;(null!==_e2&&""!==_e2||t.children.length>0)&&(n=l(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}));}return{node:n};}function l(e,n){if(e===void 0){e="";}return require("Lexical").$applyNodeReplacement(new _i1(e,n));}function o(e){return e instanceof _i1;}var _a4=function(_i4){function a(e,t,n){var _this2;if(e===void 0){e="";}if(t===void 0){t={};}_this2=_i4.call(this,e,t,n)||this,_this2.__isUnlinked=void 0!==t.isUnlinked&&null!==t.isUnlinked&&t.isUnlinked;return _this2;}babelHelpers.inheritsLoose(a,_i4);a.getType=function getType(){return"autolink";};a.clone=function clone(e){return new a(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key);};var _proto2=a.prototype;_proto2.getIsUnlinked=function getIsUnlinked(){return this.__isUnlinked;};_proto2.setIsUnlinked=function setIsUnlinked(e){var t=this.getWritable();return t.__isUnlinked=e,t;};_proto2.createDOM=function createDOM(e){return this.__isUnlinked?document.createElement("span"):_i4.prototype.createDOM.call(this,e);};_proto2.updateDOM=function updateDOM(e,t,n){return _i4.prototype.updateDOM.call(this,e,t,n)||e.__isUnlinked!==this.__isUnlinked;};a.importJSON=function importJSON(e){return u().updateFromJSON(e);};_proto2.updateFromJSON=function updateFromJSON(e){return _i4.prototype.updateFromJSON.call(this,e).setIsUnlinked(e.isUnlinked||!1);};a.importDOM=function importDOM(){return null;};_proto2.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_i4.prototype.exportJSON.call(this),{isUnlinked:this.__isUnlinked});};_proto2.insertNewAfter=function insertNewAfter(e,t){if(t===void 0){t=!0;}var n=u(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n;};return a;}(_i1);function u(e,n){if(e===void 0){e="";}return require("Lexical").$applyNodeReplacement(new _a4(e,n));}function c(e){return e instanceof _a4;}var g=_require_Lexical.createCommand("TOGGLE_LINK_COMMAND");function f(e,n){if("element"===e.type){var _r2=e.getNode();require("Lexical").$isElementNode(_r2)||function(e){var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e3 of t)r.append("v",_e3);throw n.search=r.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}(252);return _r2.getChildren()[e.offset+n]||null;}return null;}function d(n,r){if(r===void 0){r={};}var i;if(n&&"object"==typeof n){var _e4=n.url,_t3=babelHelpers.objectWithoutPropertiesLoose(n,_excluded);i=_e4,r=babelHelpers["extends"]({},_t3,r);}else i=n;var _r3=r,s=_r3.target,a=_r3.title,u=void 0===r.rel?"noreferrer":r.rel,g=require("Lexical").$getSelection();if(null===g||!require("Lexical").$isRangeSelection(g)&&!require("Lexical").$isNodeSelection(g))return;if(require("Lexical").$isNodeSelection(g)){var _t4=g.getNodes();if(0===_t4.length)return;return void _t4.forEach(function(t){if(null===i){var _n=require("LexicalUtils").$findMatchingParent(t,function(e){return!c(e)&&o(e);});_n&&(_n.insertBefore(t),0===_n.getChildren().length&&_n.remove());}else{var _n2=require("LexicalUtils").$findMatchingParent(t,function(e){return!c(e)&&o(e);});if(_n2)_n2.setURL(i),void 0!==s&&_n2.setTarget(s),void 0!==u&&_n2.setRel(u);else{var _e5=l(i,{rel:u,target:s});t.insertBefore(_e5),_e5.append(t);}}});}var d=g.extract();if(null===i){var _n3=new Set();return void d.forEach(function(r){var i=require("LexicalUtils").$findMatchingParent(r,function(e){return!c(e)&&o(e);});if(null!==i){var _e6=i.getKey();if(_n3.has(_e6))return;!function(e,n){var r=new Set(n.filter(function(t){return e.isParentOf(t);}).map(function(e){return e.getKey();})),i=e.getChildren(),s=function s(i){return r.has(i.getKey())||require("Lexical").$isElementNode(i)&&n.some(function(t){return e.isParentOf(t)&&i.isParentOf(t);});},o=i.filter(s);if(o.length===i.length)return i.forEach(function(t){return e.insertBefore(t);}),void e.remove();var a=i.findIndex(s),u=i.findLastIndex(s),c=0===a,g=u===i.length-1;if(c)o.forEach(function(t){return e.insertBefore(t);});else if(g)for(var _t5=o.length-1;_t5>=0;_t5--)e.insertAfter(o[_t5]);else{for(var _t6=o.length-1;_t6>=0;_t6--)e.insertAfter(o[_t6]);var _t7=i.slice(u+1);if(_t7.length>0){var _n4=l(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()});o[o.length-1].insertAfter(_n4),_t7.forEach(function(e){return _n4.append(e);});}}}(i,d),_n3.add(_e6);}});}var h=new Set(),p=function p(e){h.has(e.getKey())||(h.add(e.getKey()),e.setURL(i),void 0!==s&&e.setTarget(s),void 0!==u&&e.setRel(u),void 0!==a&&e.setTitle(a));};if(1===d.length){var _t8=d[0],_n5=require("LexicalUtils").$findMatchingParent(_t8,o);if(null!==_n5)return p(_n5);}!function(e){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return e();var r=require("Lexical").$normalizeSelection__EXPERIMENTAL(n),i=r.isBackward(),s=f(r.anchor,i?-1:0),l=f(r.focus,i?0:-1),o=e();if(s||l){var _e7=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(_e7)){var _n6=_e7.clone();if(s){var _e8=s.getParent();_e8&&_n6.anchor.set(_e8.getKey(),s.getIndexWithinParent()+(i?1:0),"element");}if(l){var _e9=l.getParent();_e9&&_n6.focus.set(_e9.getKey(),l.getIndexWithinParent()+(i?0:1),"element");}require("Lexical").$setSelection(require("Lexical").$normalizeSelection__EXPERIMENTAL(_n6));}}}(function(){var n=null;for(var _r4 of d){if(!_r4.isAttached())continue;var _g=require("LexicalUtils").$findMatchingParent(_r4,o);if(_g){p(_g);continue;}if(require("Lexical").$isElementNode(_r4)){if(!_r4.isInline())continue;if(o(_r4)){if(!(c(_r4)||null!==n&&n.getParentOrThrow().isParentOf(_r4))){p(_r4),n=_r4;continue;}for(var _e0 of _r4.getChildren())_r4.insertBefore(_e0);_r4.remove();continue;}}var _f=_r4.getPreviousSibling();o(_f)&&_f.is(n)?_f.append(_r4):(n=l(i,{rel:u,target:s,title:a}),_r4.insertAfter(n),n.append(_r4));}});}var h=/^\+?[0-9\s()-]{5,}$/;function p(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?"mailto:"+e:h.test(e)?"tel:"+e:"https://"+e;}var _={attributes:void 0,validateUrl:void 0};function m(r,i){return require("LexicalUtils").mergeRegister(require("LexicalExtension").effect(function(){return r.registerCommand(g,function(e){var t=i.validateUrl.peek(),n=i.attributes.peek();if(null===e)return d(null),!0;if("string"==typeof e)return!(void 0!==t&&!t(e))&&(d(e,n),!0);{var _t9=e.url,_r5=e.target,_i5=e.rel,_s=e.title;return d(_t9,babelHelpers["extends"]({},n,{rel:_i5,target:_r5,title:_s})),!0;}},require("Lexical").COMMAND_PRIORITY_LOW);}),require("LexicalExtension").effect(function(){var n=i.validateUrl.value;if(!n)return;var s=i.attributes.value;return r.registerCommand(require("Lexical").PASTE_COMMAND,function(i){var l=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(l)||l.isCollapsed()||!require("LexicalUtils").objectKlassEquals(i,ClipboardEvent))return!1;if(null===i.clipboardData)return!1;var o=i.clipboardData.getData("text");return!!n(o)&&!l.getNodes().some(function(e){return require("Lexical").$isElementNode(e);})&&(r.dispatchCommand(g,babelHelpers["extends"]({},s,{url:o})),i.preventDefault(),!0);},require("Lexical").COMMAND_PRIORITY_LOW);}));}var x=_require_Lexical.defineExtension({build:function build(e,t,r){return require("LexicalExtension").namedSignals(t);},config:_,mergeConfig:function mergeConfig(e,n){var r=require("Lexical").shallowMergeConfig(e,n);return e.attributes&&(r.attributes=require("Lexical").shallowMergeConfig(e.attributes,r.attributes)),r;},name:"@lexical/link/Link",nodes:function nodes(){return[_i1];},register:function register(e,t,n){return m(e,n.getOutput());}});function k(n,r,i){if(i===void 0){i={};}var s=function s(i){var s=i.target;if(!require("Lexical").isDOMNode(s))return;var l=require("Lexical").getNearestEditorFromDOMNode(s);if(null===l)return;var a=null,u=null;if(l.update(function(){var n=require("Lexical").$getNearestNodeFromDOMNode(s);if(null!==n){var _i6=require("LexicalUtils").$findMatchingParent(n,require("Lexical").$isElementNode);if(!r.disabled.peek())if(o(_i6))a=_i6.sanitizeUrl(_i6.getURL()),u=_i6.getTarget();else{var _t0=function(e,t){var n=e;for(;null!=n;){if(t(n))return n;n=n.parentNode;}return null;}(s,require("LexicalUtils").isHTMLAnchorElement);null!==_t0&&(a=_t0.href,u=_t0.target);}}}),null===a||""===a)return;var c=n.getEditorState().read(require("Lexical").$getSelection);if(require("Lexical").$isRangeSelection(c)&&!c.isCollapsed())return void i.preventDefault();var g="auxclick"===i.type&&1===i.button;window.open(a,r.newTab.peek()||g||i.metaKey||i.ctrlKey||"_blank"===u?"_blank":"_self"),i.preventDefault();},l=function l(e){1===e.button&&s(e);};return n.registerRootListener(function(e,t){null!==t&&(t.removeEventListener("click",s),t.removeEventListener("mouseup",l)),null!==e&&(e.addEventListener("click",s,i),e.addEventListener("mouseup",l,i));});}var N=_require_Lexical.defineExtension({build:function build(e,t,r){return require("LexicalExtension").namedSignals(t);},config:_require_Lexical.safeCast({disabled:!1,newTab:!1}),dependencies:[x],name:"@lexical/link/ClickableLink",register:function register(e,t,n){return k(e,n.getOutput());}});function L(e,t){for(var _n7=0;_n7<t.length;_n7++){var _r6=t[_n7](e);if(_r6)return _r6;}return null;}var T=/[.,;\s]/;function S(e){return T.test(e);}function b(e){return S(e[e.length-1]);}function U(e){return S(e[0]);}function $(e){var n=e.getPreviousSibling();return require("Lexical").$isElementNode(n)&&(n=n.getLastDescendant()),null===n||require("Lexical").$isLineBreakNode(n)||require("Lexical").$isTextNode(n)&&b(n.getTextContent());}function R(e){var n=e.getNextSibling();return require("Lexical").$isElementNode(n)&&(n=n.getFirstDescendant()),null===n||require("Lexical").$isLineBreakNode(n)||require("Lexical").$isTextNode(n)&&U(n.getTextContent());}function v(e,t,n,r){if(!(e>0?S(n[e-1]):$(r[0])))return!1;return t<n.length?S(n[t]):R(r[r.length-1]);}function O(e,t,n){var r=[],i=[],s=[];var l=0,o=0;var a=[].concat(e);for(;a.length>0;){var _e1=a[0],_u=_e1.getTextContent().length,_c=o;o+_u<=t?(r.push(_e1),l+=_u):_c>=n?s.push(_e1):i.push(_e1),o+=_u,a.shift();}return[l,r,i,s];}function E(e,n,r,i){var s=u(i.url,i.attributes);if(1===e.length){var _o$splitText,_o$splitText2;var _l,_o=e[0];0===n?(_o$splitText=_o.splitText(r),_l=_o$splitText[0],_o=_o$splitText[1],_o$splitText):(_o$splitText2=_o.splitText(n,r),_l=_o$splitText2[1],_o=_o$splitText2[2],_o$splitText2);var _a=require("Lexical").$createTextNode(i.text);return _a.setFormat(_l.getFormat()),_a.setDetail(_l.getDetail()),_a.setStyle(_l.getStyle()),s.append(_a),_l.replace(s),_o;}if(e.length>1){var _i7$splitText;var _i7=e[0];var _l2,_o2=_i7.getTextContent().length;0===n?_l2=_i7:(_i7$splitText=_i7.splitText(n),_l2=_i7$splitText[1],_i7$splitText);var _a2=[];var _u2;for(var _t1=1;_t1<e.length;_t1++){var _n8=e[_t1],_i8=_n8.getTextContent().length,_s2=_o2;if(_s2<r)if(_o2+_i8<=r)_a2.push(_n8);else{var _n8$splitText=_n8.splitText(r-_s2),_e10=_n8$splitText[0],_t10=_n8$splitText[1];_a2.push(_e10),_u2=_t10;}_o2+=_i8;}var _c2=require("Lexical").$getSelection(),_g2=_c2?_c2.getNodes().find(require("Lexical").$isTextNode):void 0,_f2=require("Lexical").$createTextNode(_l2.getTextContent());return _f2.setFormat(_l2.getFormat()),_f2.setDetail(_l2.getDetail()),_f2.setStyle(_l2.getStyle()),s.append.apply(s,[_f2].concat(_a2)),_g2&&_g2===_l2&&(require("Lexical").$isRangeSelection(_c2)?_f2.select(_c2.anchor.offset,_c2.focus.offset):require("Lexical").$isNodeSelection(_c2)&&_f2.select(0,_f2.getTextContent().length)),_l2.replace(s),_u2;}}function C(e,n,r){var i=e.getChildren(),s=i.length;for(var _n9=0;_n9<s;_n9++){var _s3=i[_n9];if(!require("Lexical").$isTextNode(_s3)||!_s3.isSimpleText())return M(e),void r(null,e.getURL());}var l=e.getTextContent(),o=L(l,n);if(null===o||o.text!==l)return M(e),void r(null,e.getURL());if(!$(e)||!R(e))return M(e),void r(null,e.getURL());var a=e.getURL();if(a!==o.url&&(e.setURL(o.url),r(o.url,a)),o.attributes){var _t11=e.getRel();_t11!==o.attributes.rel&&(e.setRel(o.attributes.rel||null),r(o.attributes.rel||null,_t11));var _n0=e.getTarget();_n0!==o.attributes.target&&(e.setTarget(o.attributes.target||null),r(o.attributes.target||null,_n0));}}function M(e){var t=e.getChildren();for(var _n1=t.length-1;_n1>=0;_n1--)e.insertAfter(t[_n1]);return e.remove(),t.map(function(e){return e.getLatest();});}var P={changeHandlers:[],excludeParents:[],matchers:[]};function A(n,r){if(r===void 0){r=P;}var _r7=r,i=_r7.matchers,s=_r7.changeHandlers,l=_r7.excludeParents,a=function a(e,t){for(var _n10 of s)_n10(e,t);};return require("LexicalUtils").mergeRegister(n.registerNodeTransform(require("Lexical").TextNode,function(e){var n=e.getParentOrThrow(),r=e.getPreviousSibling();if(c(n)&&!n.getIsUnlinked())C(n,i,a);else if(!o(n)&&!l.some(function(e){return e(n);})){if(e.isSimpleText()&&(U(e.getTextContent())||!c(r))){var _n11=function(e){var n=[e];var r=e.getNextSibling();for(;null!==r&&require("Lexical").$isTextNode(r)&&r.isSimpleText()&&(n.push(r),!/[\s]/.test(r.getTextContent()));)r=r.getNextSibling();return n;}(e);!function(e,t,n){for(var _t12 of e){var _e11=_t12.getParent();if(c(_e11)&&!_e11.getIsUnlinked())return;}var r=[].concat(e);var i=r.map(function(e){return e.getTextContent();}).join("");var s,l=i,o=0;for(;(s=L(l,t))&&null!==s;){var _e12=s.index,_t13=_e12+s.length;if(v(o+_e12,o+_t13,i,r)){var _O=O(r,o+_e12,o+_t13),_i9=_O[0],_a3=_O[2],_u3=_O[3];var _g3=!1;for(var _e13 of _a3){var _t14=_e13.getParent();if(c(_t14)&&!_t14.getIsUnlinked()){_g3=!0;break;}}if(_g3){o+=_t13,l=l.substring(_t13);continue;}var _f3=E(_a3,o+_e12-_i9,o+_t13-_i9,s);r=_f3?[_f3].concat(_u3):_u3,n(s.url,null),o=0;}else o+=_t13;l=l.substring(_t13);}}(_n11,i,a);}!function(e,t,n){var r=e.getParent(),i=e.getPreviousSibling(),s=e.getNextSibling(),l=e.getTextContent();if(!c(r)||r.getIsUnlinked()){if(c(i)&&!i.getIsUnlinked()&&i.is(e.getPreviousSibling())&&e.getParent()===i.getParent()){if(!U(l))return M(i),void n(null,i.getURL());if(o=l,i.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(o):/^\.[a-zA-Z0-9]{1,}/.test(o)){var _r8=i.getTextContent()+l,_s4=L(_r8,t);null!==_s4&&_s4.text===_r8&&(i.append(e),C(i,t,n),n(null,i.getURL()));}}var o;!c(s)||s.getIsUnlinked()||b(l)||s.is(e.getNextSibling())&&e.getParent()===s.getParent()&&(M(s),n(null,s.getURL()));}}(e,i,a);}}),n.registerCommand(g,function(e){var n=require("Lexical").$getSelection();if(null!==e||!require("Lexical").$isRangeSelection(n))return!1;return n.extract().forEach(function(e){var t=e.getParent();c(t)&&(t.setIsUnlinked(!t.getIsUnlinked()),t.markDirty());}),!1;},require("Lexical").COMMAND_PRIORITY_LOW));}var D=_require_Lexical.defineExtension({config:P,dependencies:[x],mergeConfig:function mergeConfig(e,n){var r=require("Lexical").shallowMergeConfig(e,n);for(var _t15 of["matchers","changeHandlers","excludeParents"]){var _i0=n[_t15];Array.isArray(_i0)&&(r[_t15]=[].concat(e[_t15],_i0));}return r;},name:"@lexical/link/AutoLink",register:A}),I=d;exports.$createAutoLinkNode=u,exports.$createLinkNode=l,exports.$isAutoLinkNode=c,exports.$isLinkNode=o,exports.$toggleLink=d,exports.AutoLinkExtension=D,exports.AutoLinkNode=_a4,exports.ClickableLinkExtension=N,exports.LinkExtension=x,exports.LinkNode=_i1,exports.TOGGLE_LINK_COMMAND=g,exports.createLinkMatcherWithRegExp=function(e,t){if(t===void 0){t=function t(e){return e;};}return function(n){var r=e.exec(n);return null===r?null:{index:r.index,length:r[0].length,text:r[0],url:t(r[0])};};},exports.formatUrl=p,exports.registerAutoLink=A,exports.registerClickableLink=k,exports.registerLink=m,exports.toggleLink=I;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<111cde4a64dea62e780fcbb1e7938bc1>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalOverflow.prod",["Lexical"],(function $module_LexicalOverflow_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _t4=function(_e$ElementNode){function t(){return _e$ElementNode.apply(this,arguments)||this;}babelHelpers.inheritsLoose(t,_e$ElementNode);var _proto=t.prototype;_proto.$config=function $config(){return this.config("overflow",{$transform:function $transform(e){e.isEmpty()&&e.remove();},"extends":require("Lexical").ElementNode});};_proto.createDOM=function createDOM(e){var _t=document.createElement("span"),r=e.theme.characterLimit;return"string"==typeof r&&(_t.className=r),_t;};_proto.updateDOM=function updateDOM(e,_t2){return!1;};_proto.insertNewAfter=function insertNewAfter(e,_t3){if(_t3===void 0){_t3=!0;}return this.getParentOrThrow().insertNewAfter(e,_t3);};_proto.excludeFromCopy=function excludeFromCopy(){return!0;};return t;}(require("Lexical").ElementNode);var r=require("Lexical").defineExtension({name:"LexicalOverflow",nodes:function nodes(){return[_t4];}});exports.$createOverflowNode=function(){return require("Lexical").$applyNodeReplacement(new _t4());},exports.$isOverflowNode=function(e){return e instanceof _t4;},exports.OverflowExtension=r,exports.OverflowNode=_t4;}),null);
__d("LexicalPlainText",["cr:2909"],(function(t,n,r,o,a,i){a.exports=n("cr:2909")}),null);
__d("LexicalReactProviderExtension",["cr:13740"],(function(t,n,r,o,a,i){a.exports=n("cr:13740")}),null);
__d("useLexicalEditable",["cr:4793"],(function(t,n,r,o,a,i){a.exports=n("cr:4793")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<b71013edf6ac0a7d06f41d04de6a60eb>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalPlainTextPlugin.prod",["LexicalComposerContext","LexicalDragon","LexicalExtension","LexicalPlainText","LexicalReactProviderExtension","LexicalText","LexicalUtils","ReactDOM","react","useLexicalEditable"],(function $module_LexicalPlainTextPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var o=_require_closure_react||(_require_closure_react=require("react")),c=_require_closure_react;function d(e){var t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams();n.append("code",e);for(var _len=arguments.length,r=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){r[_key-1]=arguments[_key];}for(var _e of r)n.append("v",_e);throw t.search=n.toString(),Error("Minified Lexical error #"+e+"; visit "+t.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var x="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;function f(_ref){var e=_ref.editor,r=_ref.ErrorBoundary;return function(e,r){var _o$useState=o.useState(function(){return e.getDecorators();}),t=_o$useState[0],n=_o$useState[1];return x(function(){return e.registerDecoratorListener(function(e){require("ReactDOM").flushSync(function(){n(e);});});},[e]),o.useEffect(function(){n(e.getDecorators());},[e]),o.useMemo(function(){var n=[],a=Object.keys(t);for(var _s=0;_s<a.length;_s++){var _u=a[_s],_l=c.jsx(r,{onError:function onError(r){return e._onError(r);},children:c.jsx(o.Suspense,{fallback:null,children:t[_u]})}),_d=e.getElementByKey(_u);null!==_d&&n.push(require("ReactDOM").createPortal(_l,_d,_u));}return n;},[r,t,e]);}(e,r);}function E(_ref2){var e=_ref2.editor,r=_ref2.ErrorBoundary;return function(e){var r=require("LexicalExtension").LexicalBuilder.maybeFromEditor(e);if(r&&r.hasExtensionByName(require("LexicalReactProviderExtension").ReactProviderExtension.name)){for(var _e2 of["LexicalPlainText","LexicalRichText"])r.hasExtensionByName(_e2)&&d(320,_e2);return!0;}return!1;}(e)?null:c.jsx(f,{editor:e,ErrorBoundary:r});}function g(e){return e.getEditorState().read(require("LexicalText").$canShowPlaceholderCurry(e.isComposing()));}function m(_ref3){var t=_ref3.content;var _e$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),n=_e$useLexicalComposer[0],i=function(e){var _o$useState2=o.useState(function(){return g(e);}),r=_o$useState2[0],t=_o$useState2[1];return x(function(){function r(){var r=g(e);t(r);}return r(),require("LexicalUtils").mergeRegister(e.registerUpdateListener(function(){r();}),e.registerEditableListener(function(){r();}));},[e]),r;}(n),c=require("useLexicalEditable").useLexicalEditable();return i?"function"==typeof t?t(c):t:null;}exports.PlainTextPlugin=function(_ref4){var r=_ref4.contentEditable,_ref4$placeholder=_ref4.placeholder,t=_ref4$placeholder===void 0?null:_ref4$placeholder,n=_ref4.ErrorBoundary;var _e$useLexicalComposer2=require("LexicalComposerContext").useLexicalComposerContext(),o=_e$useLexicalComposer2[0];return function(e){x(function(){return require("LexicalUtils").mergeRegister(require("LexicalPlainText").registerPlainText(e),require("LexicalDragon").registerDragonSupport(e));},[e]);}(o),c.jsxs(c.Fragment,{children:[r,c.jsx(m,{content:t}),c.jsx(E,{editor:o,ErrorBoundary:n})]});};}),null);
__d("LexicalSelection",["cr:2180"],(function(t,n,r,o,a,i){a.exports=n("cr:2180")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<7dcdb223bf348832203cf99dbbd5db05>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalText.prod",["Lexical"],(function $module_LexicalText_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function e(){return require("Lexical").$getRoot().getTextContent();}function n(t,n){if(n===void 0){n=!0;}if(t)return!1;var r=e();return n&&(r=r.trim()),""===r;}function r(e){if(!n(e,!1))return!1;var r=require("Lexical").$getRoot().getChildren(),o=r.length;if(o>1)return!1;for(var _e=0;_e<o;_e++){var _n=r[_e];if(require("Lexical").$isDecoratorNode(_n))return!1;if(require("Lexical").$isElementNode(_n)){if(!require("Lexical").$isParagraphNode(_n))return!1;if(0!==_n.__indent)return!1;var _r=_n.getChildren(),_o=_r.length;for(var _n2=0;_n2<_o;_n2++){var _n3=_r[_e];if(!require("Lexical").$isTextNode(_n3))return!1;}}}return!0;}function o(t){var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",t);for(var _len=arguments.length,e=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){e[_key-1]=arguments[_key];}for(var _t of e)r.append("v",_t);throw n.search=r.toString(),Error("Minified Lexical error #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}exports.$canShowPlaceholder=r,exports.$canShowPlaceholderCurry=function(t){return function(){return r(t);};},exports.$findTextIntersectionFromCharacters=function(e,n){var r=e.getFirstChild(),o=0;t:for(;null!==r;){if(require("Lexical").$isElementNode(r)){var _t2=r.getFirstChild();if(null!==_t2){r=_t2;continue;}}else if(require("Lexical").$isTextNode(r)){var _t3=r.getTextContentSize();if(o+_t3>n)return{node:r,offset:n-o};o+=_t3;}var _e2=r.getNextSibling();if(null!==_e2){r=_e2;continue;}var i=r.getParent();for(;null!==i;){var _t4=i.getNextSibling();if(null!==_t4){r=_t4;continue t;}i=i.getParent();}break;}return null;},exports.$isRootTextContentEmpty=n,exports.$isRootTextContentEmptyCurry=function(t,e){return function(){return n(t,e);};},exports.$rootTextContent=e,exports.registerLexicalTextEntity=function(e,n,r,i){var s=function s(t){return t instanceof r;},l=function l(e){var n=require("Lexical").$createTextNode(e.getTextContent());n.setFormat(e.getFormat()),e.replace(n);};return[e.registerNodeTransform(require("Lexical").TextNode,function(e){if(!e.isSimpleText())return;var r,u=e.getPreviousSibling(),c=e.getTextContent(),f=e;if(require("Lexical").$isTextNode(u)){var _t5=u.getTextContent(),_r2=n(_t5+c);if(s(u)){if(null===_r2||0!==function(t){return t.getLatest().__mode;}(u))return void l(u);{var _n4=_r2.end-_t5.length;if(_n4>0){var _r3=_t5+c.slice(0,_n4);if(u.select(),u.setTextContent(_r3),_n4===c.length)e.remove();else{var _t6=c.slice(_n4);e.setTextContent(_t6);}return;}}}else if(null===_r2||_r2.start<_t5.length)return;}var d=0;for(;;){var _f$splitText,_f$splitText2;r=n(c);var _e3=void 0,a=null===r?"":c.slice(r.end);if(c=a,""===a){var _e4=f.getNextSibling();if(require("Lexical").$isTextNode(_e4)){a=f.getTextContent()+_e4.getTextContent();var _t7=n(a);if(null===_t7)return void(s(_e4)?l(_e4):_e4.markDirty());if(0!==_t7.start)return;}}if(null===r)return;if(0===r.start&&require("Lexical").$isTextNode(u)&&u.isTextEntity()){d+=r.end;continue;}0===r.start?(_f$splitText=f.splitText(r.end),_e3=_f$splitText[0],f=_f$splitText[1],_f$splitText):(_f$splitText2=f.splitText(r.start+d,r.end+d),_e3=_f$splitText2[1],f=_f$splitText2[2],_f$splitText2),void 0===_e3&&o(165,"nodeToReplace");var x=i(_e3);if(x.setFormat(_e3.getFormat()),_e3.replace(x),null==f)return;d=0,u=x;}}),e.registerNodeTransform(r,function(e){var r=e.getTextContent(),o=n(r);if(null===o||0!==o.start)return void l(e);if(r.length>o.end)return void e.splitText(o.end);var i=e.getPreviousSibling();require("Lexical").$isTextNode(i)&&i.isTextEntity()&&(l(i),l(e));var u=e.getNextSibling();require("Lexical").$isTextNode(u)&&u.isTextEntity()&&(l(u),s(e)&&l(e));})];};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<2fcd235ac31b6252736d3be6891ff4ef>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalUtils.prod",["Lexical","LexicalSelection"],(function $module_LexicalUtils_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function n(e){var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e of t)r.append("v",_e);throw n.search=r.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,o=r&&"documentMode"in document?document.documentMode:null,i=r&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),s=r&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),l=!(!r||!("InputEvent"in window)||o)&&"getTargetRanges"in new window.InputEvent("input"),a=r&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),c=r&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u=r&&/Android/.test(navigator.userAgent),d=r&&/^(?=.*Chrome).*/i.test(navigator.userAgent),g=r&&u&&d,f=r&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&i&&!d;function p(e){return e+"px";}var m={attributes:!0,characterData:!0,childList:!0,subtree:!0};function h(r,o,i){var s=null,l=null,a=null,c=[];var u=document.createElement("div");function d(){null===s&&n(182),null===l&&n(183);var _l$getBoundingClientR=l.getBoundingClientRect(),e=_l$getBoundingClientR.left,a=_l$getBoundingClientR.top,d=require("LexicalSelection").createRectsFromDOMRange(r,o);var g,f;u.isConnected||(f=u,(g=l).insertBefore(f,g.firstChild));var m=!1;for(var _t=0;_t<d.length;_t++){var _n=d[_t],_r=c[_t]||document.createElement("div"),_o=_r.style;"absolute"!==_o.position&&(_o.position="absolute",m=!0);var _i=p(_n.left-e);_o.left!==_i&&(_o.left=_i,m=!0);var _s=p(_n.top-a);_o.top!==_s&&(_r.style.top=_s,m=!0);var _l=p(_n.width);_o.width!==_l&&(_r.style.width=_l,m=!0);var _g=p(_n.height);_o.height!==_g&&(_r.style.height=_g,m=!0),_r.parentNode!==u&&(u.append(_r),m=!0),c[_t]=_r;}for(;c.length>d.length;)c.pop();m&&i(c);}function g(){l=null,s=null,null!==a&&a.disconnect(),a=null,u.remove();for(var _e2 of c)_e2.remove();c=[];}u.style.position="relative";var f=r.registerRootListener(function t(){var n=r.getRootElement();if(null===n)return g();var o=n.parentElement;if(!require("Lexical").isHTMLElement(o))return g();g(),s=n,l=o,a=new MutationObserver(function(e){var n=r.getRootElement(),o=n&&n.parentElement;if(n!==s||o!==l)return t();for(var _t2 of e)if(!u.contains(_t2.target))return d();}),a.observe(o,m),d();});return function(){f(),g();};}function $(t,n,r){if("text"!==t.type&&require("Lexical").$isElementNode(n)){var _e3=n.getDOMSlot(r);return[_e3.element,_e3.getFirstChildOffset()+t.offset];}return[require("Lexical").getDOMTextNode(r)||r,t.offset];}function x(t,n){var r=null,o=null,i=null,s=null,l=null,a=null,c=function c(){};function u(u){u.read(function(){var u=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(u))return r=null,i=null,s=null,a=null,c(),void(c=function c(){});var _ref=function(e){var t=e.getStartEndPoints();return e.isBackward()?[t[1],t[0]]:t;}(u),d=_ref[0],g=_ref[1],f=d.getNode(),m=f.getKey(),x=d.offset,S=g.getNode(),C=S.getKey(),E=g.offset,N=t.getElementByKey(m),v=t.getElementByKey(C),w=null===r||N!==o||x!==i||m!==r.getKey(),A=null===s||v!==l||E!==a||C!==s.getKey();if((w||A)&&null!==N&&null!==v){var _e4=function(e,t,n,r,o,i,s){var l=(e._window?e._window.document:document).createRange();return l.setStart.apply(l,$(t,n,r)),l.setEnd.apply(l,$(o,i,s)),l;}(t,d,f,N,g,S,v);c(),c=h(t,_e4,function(e){if(void 0===n)for(var _t3 of e){var _e5=_t3.style;"Highlight"!==_e5.background&&(_e5.background="Highlight"),"HighlightText"!==_e5.color&&(_e5.color="HighlightText"),_e5.marginTop!==p(-1.5)&&(_e5.marginTop=p(-1.5)),_e5.paddingTop!==p(4)&&(_e5.paddingTop=p(4)),_e5.paddingBottom!==p(0)&&(_e5.paddingBottom=p(0));}else n(e);});}r=f,o=N,i=x,s=S,l=v,a=E;});}return u(t.getEditorState()),require("Lexical").mergeRegister(t.registerUpdateListener(function(_ref2){var e=_ref2.editorState;return u(e);}),function(){c();});}var S=l,C=r,E=u,N=g,v=i,w=f,A=d,y=s,b=c,P=a;function R(e,t){for(var _n2 of t)if(e.type.startsWith(_n2))return!0;return!1;}function I(e,t){return M("next",e,t);}function O(t,n){var r=require("Lexical").$getAdjacentSiblingOrParentSiblingCaret(require("Lexical").$getSiblingCaret(t,n));return r&&r[0];}function M(t,n,r){var o=require("Lexical").$getRoot(),i=n||o,s=require("Lexical").$isElementNode(i)?require("Lexical").$getChildCaret(i,t):require("Lexical").$getSiblingCaret(i,t),l=T(i),a=r?require("Lexical").$getAdjacentChildCaret(require("Lexical").$getChildCaretOrSelf(require("Lexical").$getSiblingCaret(r,t)))||O(r,t):O(i,t);var c=l;return require("Lexical").makeStepwiseIterator({hasNext:function hasNext(e){return null!==e;},initial:s,map:function map(e){return{depth:c,node:e.origin};},step:function step(t){if(t.isSameNodeCaret(a))return null;require("Lexical").$isChildCaret(t)&&c++;var n=require("Lexical").$getAdjacentSiblingOrParentSiblingCaret(t);return!n||n[0].isSameNodeCaret(a)?null:(c+=n[1],n[0]);}});}function T(e){var t=-1;for(var _n3=e;null!==_n3;_n3=_n3.getParent())t++;return t;}function L(e,t){return M("previous",e,t);}function _(t,r,o){var i=require("Lexical").$getCaretInDirection(r,"next");for(var _t4=i;_t4;_t4=require("Lexical").$splitAtPointCaretNext(_t4,o))i=_t4;return require("Lexical").$isTextPointCaret(i)&&n(283),i.insert(t.isInline()?require("Lexical").$createParagraphNode().append(t):t),require("Lexical").$getCaretInDirection(require("Lexical").$getSiblingCaret(t.getLatest(),"next"),r.direction);}var D=!(y||!C)&&void 0;function F(t,n,r){var o=!1;var _loop=function _loop(_i2){n(_i2)?null!==r&&r(_i2):(o=!0,require("Lexical").$isElementNode(_i2)&&F(_i2,n,r||function(e){return _i2.insertAfter(e);}),_i2.remove());};for(var _i2 of B(t)){_loop(_i2);}return o;}function B(t){return j(require("Lexical").$getChildCaret(t,"previous"));}function j(t){return require("Lexical").makeStepwiseIterator({hasNext:require("Lexical").$isSiblingCaret,initial:t.getAdjacentCaret(),map:function map(e){return e.origin.getLatest();},step:function step(e){return e.getAdjacentCaret();}});}exports.$findMatchingParent=require("Lexical").$findMatchingParent,exports.$getAdjacentSiblingOrParentSiblingCaret=require("Lexical").$getAdjacentSiblingOrParentSiblingCaret,exports.$splitNode=require("Lexical").$splitNode,exports.addClassNamesToElement=require("Lexical").addClassNamesToElement,exports.isBlockDomNode=require("Lexical").isBlockDomNode,exports.isHTMLAnchorElement=require("Lexical").isHTMLAnchorElement,exports.isHTMLElement=require("Lexical").isHTMLElement,exports.isInlineDomNode=require("Lexical").isInlineDomNode,exports.mergeRegister=require("Lexical").mergeRegister,exports.removeClassNamesFromElement=require("Lexical").removeClassNamesFromElement,exports.$descendantsMatching=function(t,n){var r=[],o=Array.from(t).reverse();for(var _t5=o.pop();void 0!==_t5;_t5=o.pop())if(n(_t5))r.push(_t5);else if(require("Lexical").$isElementNode(_t5))for(var _e6 of B(_t5))o.push(_e6);return r;},exports.$dfs=function(e,t){return Array.from(I(e,t));},exports.$dfsIterator=I,exports.$filter=function(e,t){var n=[];for(var _r2=0;_r2<e.length;_r2++){var _o2=t(e[_r2]);null!==_o2&&n.push(_o2);}return n;},exports.$firstToLastIterator=function(t){return j(require("Lexical").$getChildCaret(t,"next"));},exports.$getAdjacentCaret=function(e){return e?e.getAdjacentCaret():null;},exports.$getDepth=T,exports.$getNearestBlockElementAncestorOrThrow=function(t){var r=require("Lexical").$findMatchingParent(t,function(t){return require("Lexical").$isElementNode(t)&&!t.isInline();});return require("Lexical").$isElementNode(r)||n(4,t.__key),r;},exports.$getNearestNodeOfType=function(e,t){var n=e;for(;null!=n;){if(n instanceof t)return n;n=n.getParent();}return null;},exports.$getNextRightPreorderNode=function(t){var n=require("Lexical").$getChildCaretOrSelf(require("Lexical").$getSiblingCaret(t,"previous")),r=require("Lexical").$getAdjacentSiblingOrParentSiblingCaret(n,"root");return r&&r[0].origin;},exports.$getNextSiblingOrParentSibling=function(t){var n=require("Lexical").$getAdjacentSiblingOrParentSiblingCaret(require("Lexical").$getSiblingCaret(t,"next"));return n&&[n[0].origin,n[1]];},exports.$handleIndentAndOutdent=function(t){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return!1;var r=new Set(),o=n.getNodes();for(var _n4=0;_n4<o.length;_n4++){var _i3=o[_n4],_s2=_i3.getKey();if(r.has(_s2))continue;var _l2=require("Lexical").$findMatchingParent(_i3,function(t){return require("Lexical").$isElementNode(t)&&!t.isInline();});if(null===_l2)continue;var _a=_l2.getKey();_l2.canIndent()&&!r.has(_a)&&(r.add(_a),t(_l2));}return r.size>0;},exports.$insertFirst=function(t,n){require("Lexical").$getChildCaret(t,"next").insert(n);},exports.$insertNodeToNearestRoot=function(t){var n=require("Lexical").$getSelection()||require("Lexical").$getPreviousSelection();var r;if(require("Lexical").$isRangeSelection(n))r=require("Lexical").$caretFromPoint(n.focus,"next");else{if(null!=n){var _t6=n.getNodes(),_o3=_t6[_t6.length-1];_o3&&(r=require("Lexical").$getSiblingCaret(_o3,"next"));}r=r||require("Lexical").$getChildCaret(require("Lexical").$getRoot(),"previous").getFlipped().insert(require("Lexical").$createParagraphNode());}var o=_(t,r),i=require("Lexical").$getAdjacentChildCaret(o),s=require("Lexical").$isChildCaret(i)?require("Lexical").$normalizeCaret(i):o;return require("Lexical").$setSelectionFromCaretRange(require("Lexical").$getCollapsedCaretRange(s)),t.getLatest();},exports.$insertNodeToNearestRootAtCaret=_,exports.$isEditorIsNestedEditor=function(e){return null!==e._parentEditor;},exports.$lastToFirstIterator=B,exports.$restoreEditorState=function(t,n){var r=new Map(),o=t._pendingEditorState;for(var _ref4 of n._nodeMap){var _t7=_ref4[0];var _o4=_ref4[1];r.set(_t7,require("Lexical").$cloneWithProperties(_o4));}o&&(o._nodeMap=r),t._dirtyType=2;var i=n._selection;require("Lexical").$setSelection(null===i?null:i.clone());},exports.$reverseDfs=function(e,t){return Array.from(L(e,t));},exports.$reverseDfsIterator=L,exports.$unwrapAndFilterDescendants=function(e,t){return F(e,t,null);},exports.$unwrapNode=function(t){require("Lexical").$rewindSiblingCaret(require("Lexical").$getSiblingCaret(t,"next")).splice(1,t.getChildren());},exports.$wrapNodeInElement=function(e,t){var n=t();return e.replace(n),n.append(e),n;},exports.CAN_USE_BEFORE_INPUT=S,exports.CAN_USE_DOM=C,exports.IS_ANDROID=E,exports.IS_ANDROID_CHROME=N,exports.IS_APPLE=v,exports.IS_APPLE_WEBKIT=w,exports.IS_CHROME=A,exports.IS_FIREFOX=y,exports.IS_IOS=b,exports.IS_SAFARI=P,exports.calculateZoomLevel=function(e,t){if(t===void 0){t=!1;}var n=1;if(function(){if(void 0===D){var _e7=document.createElement("div");_e7.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(_e7);var _t8=_e7.getBoundingClientRect();_e7.style.setProperty("zoom","2"),D=_e7.getBoundingClientRect().width===_t8.width,document.body.removeChild(_e7);}return D;}()||t)for(;e;)n*=Number(window.getComputedStyle(e).getPropertyValue("zoom")),e=e.parentElement;return n;},exports.isMimeType=R,exports.makeStateWrapper=function(t){var n=function n(_n5){return require("Lexical").$getState(_n5,t);},r=function r(n,_r3){return require("Lexical").$setState(n,t,_r3);};return{$get:n,$set:r,accessors:[n,r],makeGetterMethod:function makeGetterMethod(){return function(){return n(this);};},makeSetterMethod:function makeSetterMethod(){return function(e){return r(this,e);};},stateConfig:t};},exports.markSelection=x,exports.mediaFileReader=function(e,t){var n=e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();return new Promise(function(e,r){var o=[],_i4=function i(){var _n$next=n.next(),s=_n$next.done,l=_n$next.value;if(s)return e(o);var a=new FileReader();a.addEventListener("error",r),a.addEventListener("load",function(){var e=a.result;"string"==typeof e&&o.push({file:l,result:e}),_i4();}),R(l,t)?a.readAsDataURL(l):_i4();};_i4();});},exports.objectKlassEquals=function(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name;},exports.positionNodeOnRange=h,exports.registerNestedElementResolver=function(e,t,n,r){var o=function o(e){return e instanceof t;};return e.registerNodeTransform(t,function(e){var t=function(e){var t=e.getChildren();for(var _e8=0;_e8<t.length;_e8++){var _n6=t[_e8];if(o(_n6))return null;}var n=e,r=e;for(;null!==n;)if(r=n,n=n.getParent(),o(n))return{child:r,parent:n};return null;}(e);if(null!==t){var _o5=t.child,_i5=t.parent;if(_o5.is(e)){r(_i5,e);var _t9=_o5.getNextSiblings(),_s3=_t9.length;if(_i5.insertAfter(_o5),0!==_s3){var _e9=n(_i5);_o5.insertAfter(_e9);for(var _n7=0;_n7<_s3;_n7++)_e9.append(_t9[_n7]);}_i5.canBeEmpty()||0!==_i5.getChildrenSize()||_i5.remove();}}});},exports.selectionAlwaysOnDisplay=function(e,t){var n=null;var r=function r(){var r=getSelection(),o=r&&r.anchorNode,i=e.getRootElement();null!==o&&null!==i&&i.contains(o)?null!==n&&(n(),n=null):null===n&&(n=x(e,t));};return document.addEventListener("selectionchange",r),function(){null!==n&&n(),document.removeEventListener("selectionchange",r);};};}),null);
__d("cometComposerLexicalCreateEditor",["CometComposerNodes","FBLogger","Lexical","cometLexicalBaseTheme","mlcErrorHandler__INTERNAL"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("Lexical").createEditor({namespace:"CometPostComposer",nodes:o("CometComposerNodes").COMET_NODES,onError:function(n){return r("mlcErrorHandler__INTERNAL")(n,e,function(e){r("FBLogger")("CometComposer").catching(n).mustfix("Lexical Error Composer \u2013 "+e)})},theme:babelHelpers.extends({},r("cometLexicalBaseTheme"),{hashtag:"xv78j7m x1sy0etr",link:"x1fey0fg xmper1u x1edh9d7",paragraph:"xdj266r x14z9mp xat24cr x1lziwak x16tdsg8",placeholder:"xi81zsa x6ikm8r x10wlt62 x47corl x10l6tqk xlyipyv x13vifvy x87ps6o xuxw1ft"})});return e}l.default=e}),98);/*FB_PKG_DELIM*/
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t){var n=o("react-compiler-runtime").c(9),r=e.dataSource,a=t===void 0?!1:t,i=m(a),l=i[0],s=i[1],u=d(null),p;n[0]!==r?(p=function(t){var e,n=t.onResolvePayload,o=t.requestParams;(e=u.current)==null||e.unsubscribe(),u.current=r.fetchNetwork(o).subscribe({complete:function(){s(!1)},error:function(t){s(!1)},next:function(t){return n(t)},start:function(t){s(!0)},unsubscribe:function(){s(!1)}})},n[0]=r,n[1]=p):p=n[1];var _=p,f,g;n[2]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return(function(){var e;(e=u.current)==null||e.unsubscribe()})},g=[],n[2]=f,n[3]=g):(f=n[2],g=n[3]),c(f,g);var h;n[4]!==l?(h={isLoading:l},n[4]=l,n[5]=h):h=n[5];var y;return n[6]!==_||n[7]!==h?(y=[h,_],n[6]=_,n[7]=h,n[8]=y):y=n[8],y}l.default=p}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolver",["FBLogger","cometTypeaheadODSLogFetchNetworkEvent","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=o("react-compiler-runtime").c(17),a=e.dataSource,i=e.dataSourceFetchConfigParams,l=e.onResolvePayload,s;n[0]!==i?(s=i===void 0?{}:i,n[0]=i,n[1]=s):s=n[1];var u=s,m=u.requestFlow,p=u.shouldDebounceNetwork,_=p===void 0?!0:p,f;n[2]!==a?(f={dataSource:a},n[2]=a,n[3]=f):f=n[3];var g=r("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")(f),h=g[0],y=g[1],C=h.isLoading,b=r("useDebouncedComet")(y),v;n[4]!==l?(v=function(t,n){var e=n.isTraceComplete,o=n.source;try{l(t,{isTraceComplete:e,source:o})}catch(e){r("FBLogger")("search").mustfix("Failed to resolve fetched payload")}return o},n[4]=l,n[5]=v):v=n[5];var S=v,R=d(m),L;n[6]!==S?(L=function(t){S(t,{isTraceComplete:!0,source:t.entries.length>0?"network":"network-no-results"}),r("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},n[6]=S,n[7]=L):L=n[7];var E=L,k,I;n[8]!==y||n[9]!==b||n[10]!==t||n[11]!==E||n[12]!==_?(k=function(){var e=function(t){var e=t.requestParams,n=e.requestFlow;n!=null&&(R.current=n);var r={onResolvePayload:E,requestParams:babelHelpers.extends({},e,{requestFlow:R.current})};_?b(r):y(r)};t!=null&&e(t)},I=[y,b,t,E,_],n[8]=y,n[9]=b,n[10]=t,n[11]=E,n[12]=_,n[13]=k,n[14]=I):(k=n[13],I=n[14]),c(k,I);var T;return n[15]!==C?(T=[{isLoading:C}],n[15]=C,n[16]=T):T=n[16],T}l.default=m}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetch",["FBLogger","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolver"],(function(t,n,r,o,a,i,l){"use strict";var e=["loggingEventTrace"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useState;function m(t){var n,a=o("react-compiler-runtime").c(9),i=d(null),l=i[0],s=i[1],u=r("useBaseTypeaheadSubscriptionDataSourceFetchResolver")(t,l),c=u[0],m=c.isLoading,p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=function(t,n){var e=n===void 0?"all":n;s({requestParams:t,source:e})},a[0]=p):p=a[0];var _=p,f;a[1]!==l?(f=function(n){var t=n||{},o=t.requestFlow,a=t.source;if(l==null){r("FBLogger")("search").mustfix("Refetch cannot be called with undefined `fetchParams`");return}var i=l.requestParams,s=i.loggingEventTrace,u=babelHelpers.objectWithoutPropertiesLoose(i,e),c=babelHelpers.extends({loggingEventTrace:s!=null?babelHelpers.extends({},s,{sequenceID:String(Date.now())}):void 0,requestFlow:o},u);_(c,a)},a[1]=l,a[2]=f):f=a[2];var g=f,h=(n=l==null?void 0:l.source)!=null?n:"all",y;a[3]!==m||a[4]!==h?(y={isLoading:m,source:h},a[3]=m,a[4]=h,a[5]=y):y=a[5];var C;return a[6]!==g||a[7]!==y?(C=[y,_,g],a[6]=g,a[7]=y,a[8]=C):C=a[8],C}l.default=m}),98);
__d("TypeaheadLoggingFetchRequestFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1880031"),s=o("FalcoLoggerInternal").create("typeahead_logging_fetch_request",e),u=s;l.default=u}),98);
__d("CometTypeaheadVolumeLoggingProvider",["FBLogger","TypeaheadLoggingFetchRequestFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return Math.random().toString()},s=(function(){function t(t){this.$2=null,this.$1=t,this.$2=e()}var n=t.prototype;return n.getContext=function(){return this.$1},n.getSessionID=function(){return this.$2==null&&r("FBLogger")("search").mustfix("Logging sessionID requested from %s surface does not exist.",this.getContext()),this.$2},n.logRequest=function(t){var e={context:this.getContext(),requestType:t,sessionID:this.getSessionID()};r("TypeaheadLoggingFetchRequestFalcoEvent").log(function(){return{fetchRequest:e}})},t})();l.default=s}),98);
__d("useCometTypeaheadVolumeLoggingProvider",["CometTypeaheadVolumeLoggingProvider","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(2),n=e===void 0?"UNKNOWN":e,a;return t[0]!==n?(a=new(r("CometTypeaheadVolumeLoggingProvider"))(n),t[0]=n,t[1]=a):a=t[1],a}l.default=u}),98);
__d("CometInternalTypeaheadSubscriptionProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","useBaseTypeaheadSubscriptionDataSourceFetch","useCometInternalTypeaheadStateDispatcher","useCometTypeaheadVolumeLoggingProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo;function m(e){var t=e.children,n=e.dataSource,o=e.dataSourceFetchConfigParams,a=e.loggingContext,i=e.onFetchEntries_DO_NOT_USE,l=e.traceProvider,u=r("useCometInternalTypeaheadStateDispatcher")(),m=u.dispatchActiveEntries,p=r("useCometTypeaheadVolumeLoggingProvider")(a),_=r("useBaseTypeaheadSubscriptionDataSourceFetch")({dataSource:n,dataSourceFetchConfigParams:o,onResolvePayload:c(function(e,t){var n=e.entries,r=t.isTraceComplete,o=t.source;m(n!=null?n:[]),p.logRequest(h),i&&i(n),l&&!l.isResolved()&&r&&(o==="cache"&&n.length>=l.getEntriesCountForVisualComplete()?l.setEndReason("max_suggestions_reached"):o==="network"?l.setEndReason("all_queries_completed"):o==="network-no-results"&&l.setEndReason("all_queries_completed_no_network_results"),l.resolve())},[m,i,l])}),f=_[0],g=f.isLoading,h=f.source,y=_[1],C=_[2],b=d(function(){return{fetch:y,isLoading:g,refetch:C,source:h}},[y,g,C,h]);return s.jsx(r("CometInternalTypeaheadFetchContext").Provider,{value:b,children:s.jsx(r("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:g,source:h,children:t})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("BaseSubscriptionTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadStateProvider","CometInternalTypeaheadSubscriptionProvider","emptyFunction","react","react-compiler-runtime","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(t,n,r,o,a,i,l){"use strict";var e=["autoOpen","autoFocus","isDisabled","errorMessage","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","inputRef","viewRole","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useId,p=c.useMemo;function _(t){var n=o("react-compiler-runtime").c(77),a,i,l,s,c,d,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F;n[0]!==t?(y=t.autoOpen,T=t.autoFocus,D=t.isDisabled,x=t.errorMessage,a=t.inputStrategyRenderer,l=t.dataSource,s=t.dataSourceFetchConfigParams,$=t.decorators,c=t.emptyEntries_DO_NOT_USE,_=t.id,P=t.label,p=t.loggingContext,N=t.onBackspace,M=t.onBlur,f=t.onChange,w=t.onClose,C=t.onEnter,b=t.onEscape,g=t.onFetchEntries_DO_NOT_USE,v=t.onFocus,S=t.onOpen,h=t.onPressEntry,R=t.placeholder,L=t.shouldQueryStringFollowHighlightedEntry,E=t.shouldQueryStringUpdateFromSelectedEntryOnClick,k=t.testid,A=t.traceProvider,d=t.inputRef,I=t.viewRole,i=t.viewStrategyRenderer,F=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=p,n[8]=_,n[9]=f,n[10]=g,n[11]=h,n[12]=y,n[13]=C,n[14]=b,n[15]=v,n[16]=S,n[17]=R,n[18]=L,n[19]=E,n[20]=k,n[21]=I,n[22]=T,n[23]=D,n[24]=x,n[25]=$,n[26]=P,n[27]=N,n[28]=M,n[29]=w,n[30]=A,n[31]=F):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],p=n[7],_=n[8],f=n[9],g=n[10],h=n[11],y=n[12],C=n[13],b=n[14],v=n[15],S=n[16],R=n[17],L=n[18],E=n[19],k=n[20],I=n[21],T=n[22],D=n[23],x=n[24],$=n[25],P=n[26],N=n[27],M=n[28],w=n[29],A=n[30],F=n[31]);var O=y===void 0?!1:y,B=T===void 0?!1:T,W=D===void 0?!1:D,q=x===void 0?null:x,U;n[32]!==$?(U=$===void 0?[]:$,n[32]=$,n[33]=U):U=n[33];var V=U,H=P===void 0?"":P,G=N===void 0?r("emptyFunction"):N,z=M===void 0?r("emptyFunction"):M,j=w===void 0?r("emptyFunction"):w,K=C===void 0?r("emptyFunction"):C,Q=b===void 0?r("emptyFunction"):b,X=v===void 0?r("emptyFunction"):v,Y=S===void 0?r("emptyFunction"):S,J=R===void 0?"":R,Z=L===void 0?!0:L,ee=E===void 0?!0:E,te=k===void 0?"":k,ne=I===void 0?"listbox":I,re=m(),oe;n[34]!==V?(oe=r("CometInternalTypeahead.react"),V.forEach(function(e){var t=e.decorate,n=e.params;oe=t(oe,n)}),n[34]=V,n[35]=oe):oe=n[35];var ae=oe,ie;n[36]!==f||n[37]!==h||n[38]!==ee?(ie=function(t){ee&&f(t.label),h&&h(t)},n[36]=f,n[37]=h,n[38]=ee,n[39]=ie):ie=n[39];var le=ie,se;n[40]!==a||n[41]!==Z?(se=r("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(a,{shouldQueryStringFollowHighlightedEntry:Z}),n[40]=a,n[41]=Z,n[42]=se):se=n[42];var ue=se,ce=H||J,de=_!=null?_:re,me;if(n[43]!==ue||n[44]!==ae||n[45]!==i||n[46]!==B||n[47]!==q||n[48]!==d||n[49]!==G||n[50]!==z||n[51]!==K||n[52]!==Q||n[53]!==X||n[54]!==le||n[55]!==W||n[56]!==f||n[57]!==J||n[58]!==ce||n[59]!==de||n[60]!==te||n[61]!==F||n[62]!==ne){var pe;me=u.jsx(ae,babelHelpers.extends({},F,{autoFocus:B,errorMessage:q,id:de,inputRef:d,inputStrategyRenderer:ue,isDisabled:W,label:ce,onBackspace:G,onBlur:z,onChange:f,onDownArrow:pe=r("emptyFunction"),onEnter:K,onEscape:Q,onFocus:X,onHighlightEntry:pe,onPressEntry:le,onShiftTab:pe,onTab:pe,onUpArrow:pe,placeholder:J,testid:void 0,viewRole:ne,viewStrategyRenderer:i})),n[43]=ue,n[44]=ae,n[45]=i,n[46]=B,n[47]=q,n[48]=d,n[49]=G,n[50]=z,n[51]=K,n[52]=Q,n[53]=X,n[54]=le,n[55]=W,n[56]=f,n[57]=J,n[58]=ce,n[59]=de,n[60]=te,n[61]=F,n[62]=ne,n[63]=me}else me=n[63];var _e;n[64]!==l||n[65]!==s||n[66]!==p||n[67]!==g||n[68]!==me||n[69]!==A?(_e=u.jsx(r("CometInternalTypeaheadSubscriptionProvider"),{dataSource:l,dataSourceFetchConfigParams:s,loggingContext:p,onFetchEntries_DO_NOT_USE:g,traceProvider:A,children:me}),n[64]=l,n[65]=s,n[66]=p,n[67]=g,n[68]=me,n[69]=A,n[70]=_e):_e=n[70];var fe;return n[71]!==O||n[72]!==c||n[73]!==j||n[74]!==Y||n[75]!==_e?(fe=u.jsx(r("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:u.jsx(r("CometInternalTypeaheadStateProvider"),{autoOpen:O,emptyEntries_DO_NOT_USE:c,onClose:j,onOpen:Y,children:_e})}),n[71]=O,n[72]=c,n[73]=j,n[74]=Y,n[75]=_e,n[76]=fe):fe=n[76],fe}l.default=_}),98);
__d("CancellablePromise",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s="CancellationToken.TokenCancelled";function u(t,o,a){return a.then(function(a){return t.isCancelled()?(e||(e=n("Promise"))).reject(r("err")(s)):o(a)})}function c(t,o){return o.catch(function(o){return o instanceof Error&&o.message===s?(e||(e=n("Promise"))).resolve(t):(e||(e=n("Promise"))).reject(r("err"))})}l.then_=u,l.ignoreFailed=c}),98);
__d("CancellationToken",[],(function(t,n,r,o,a,i){"use strict";function e(){var e={contents:!1};return{cancel:function(){e.contents=!0},isCancelled:function(){return e.contents}}}i.default=e}),66);
__d("CometMessagingJewelDropdownContentGlimmer.react",["FDSListCellGlimmer.react","MWTopNavListDropdownTitle.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.isFullHeight,a=e.title,i=e.withBackButton,l=n===void 0?!1:n,u=i===void 0?!1:i,c;t[0]!==l?(c={0:{},1:{className:"x9f619 x20eyyc xvv7f4i x1cvmir6"}}[!!l<<0],t[0]=l,t[1]=c):c=t[1];var d;t[2]!==a||t[3]!==u?(d=a!=null&&s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:u?r("emptyFunction"):void 0,title:a}),t[2]=a,t[3]=u,t[4]=d):d=t[4];var m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(r("FDSListCellGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:Math.max(Math.ceil((window.innerHeight-72-45)/76),1)}),t[5]=m):m=t[5];var p;return t[6]!==c||t[7]!==d?(p=s.jsxs("div",babelHelpers.extends({},c,{children:[d,m]})),t[6]=c,t[7]=d,t[8]=p):p=t[8],p}l.default=u}),98);
__d("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql",["CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsJewelNuxWrapper_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelDropdownQPBannerContainer_viewer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},e,t],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[t],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null},e],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],storageKey:null},{if:null,kind:"Defer",label:"MWEncryptedBackupsJewelNuxWrapper_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{if:null,kind:"Defer",label:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},e],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],storageKey:null}]}]}]},params:{id:n("CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation"),metadata:{},name:"CometMessagingJewelDropdownEBUpsellContainerQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:n("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownQPBannerContainer_viewer",selections:[{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer.react",["CometMessagingJewelDropdownQPBannerContainer_viewer.graphql","CometMessagingJewelDropdownQPBannerPlaceholder.react","CometPageletWithDiv.react","CometQuickPromotionLoggerContext.react","CometRelay","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a,i,l=o("react-compiler-runtime").c(9),s=t.viewer,c=o("CometRelay").useFragment(e!==void 0?e:e=n("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql"),s),m;l[0]===Symbol.for("react.memo_cache_sentinel")?(m={context_surface_id:8439,context_trigger:"messaging_jewel_open"},l[0]=m):m=l[0];var p=r("useQuickPromotionFalcoEvent")(m),_;if(l[1]!==(c==null||(a=c.jewel_qp)==null?void 0:a.nodes)){var f,g;_=c==null||(f=c.jewel_qp)==null||(f=f.nodes)==null?void 0:f.find(d),l[1]=c==null||(g=c.jewel_qp)==null?void 0:g.nodes,l[2]=_}else _=l[2];var h=_,y=h==null||(i=h.comet_qp_sections)==null?void 0:i.renderer_strategy;if(y==null)return null;var C;l[3]===Symbol.for("react.memo_cache_sentinel")?(C=u.jsx(r("CometMessagingJewelDropdownQPBannerPlaceholder.react"),{}),l[3]=C):C=l[3];var b;l[4]!==y?(b=u.jsx(o("CometRelay").MatchContainer,{match:y}),l[4]=y,l[5]=b):b=l[5];var v;return l[6]!==p||l[7]!==b?(v=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:C,name:"CometMessagingJewelDropdownQPBannerContainer",children:u.jsx(r("CometQuickPromotionLoggerContext.react").Provider,{value:p,children:b})}),l[6]=p,l[7]=b,l[8]=v):v=l[8],v}function d(e){var t;return((t=e.comet_qp_sections)==null?void 0:t.renderer_strategy)!=null}l.default=c}),98);
__d("MWEncryptedBackupsJewelNuxWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWEncryptedBackupsJewelNuxWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapperDeferred.react"));function c(e){return s.jsx(u,babelHelpers.extends({},e))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWInboxQuickPromotionWrapper.react",["CometErrorBoundary.react","CometPageletWithDiv.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MWInboxQuickPromotionWrapper.react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.onError,i;t[0]!==n?(i=s.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWInboxQuickPromotionWrapper",children:s.jsx(u,{children:n})}),t[0]=n,t[1]=i):i=t[1];var l;return t[2]!==a||t[3]!==i?(l=s.jsx(r("CometErrorBoundary.react"),{onError:a,children:i}),t[2]=a,t[3]=i,t[4]=l):l=t[4],l}l.default=c}),98);
__d("CometMessagingJewelDropdownEBUpsellContainer.react",["CometMessagingJewelDropdownEBUpsellContainerQuery.graphql","CometMessagingJewelDropdownQPBannerContainer.react","CometRelay","FBLogger","MWEncryptedBackupsJewelNuxWrapperDeferred.react","MWInboxContextSwitcherUtils","MWInboxQuickPromotionWrapper.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.ebSoftblockUpsell,a=e.ebUpsellContainerQueryRef,i=e.selectedFilterTab,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(i)&&n==null?u.jsx(r("MWInboxQuickPromotionWrapper.react"),{onError:d,children:u.jsx(m,{ebUpsellContainerQueryRef:a})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function d(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}function m(t){var a=o("react-compiler-runtime").c(5),i=t.ebUpsellContainerQueryRef,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql"),i),s;a[0]!==l.viewer?(s=u.jsx(r("CometMessagingJewelDropdownQPBannerContainer.react"),{viewer:l.viewer}),a[0]=l.viewer,a[1]=s):s=a[1];var c;return a[2]!==l||a[3]!==s?(c=u.jsx(r("MWEncryptedBackupsJewelNuxWrapperDeferred.react"),{query:l,children:s}),a[2]=l,a[3]=s,a[4]=c):c=a[4],c}l.default=c}),98);
__d("LSPlatformErrorsCatcher.react",["MetaConfig","cr:7070","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(7),a=e.children,i=e.fallback,l=d(null),s=l[0],u=l[1],m,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=function(){var e=n("cr:7070")&&n("cr:7070").subscribe(function(e){u(e)});return(function(){e&&e()})},p=[],t[0]=m,t[1]=p):(m=t[0],p=t[1]),c(m,p);var _;if(t[2]!==s){var f;_=(f=n("cr:7070")==null?void 0:n("cr:7070").lastError())!=null?f:s,t[2]=s,t[3]=_}else _=t[3];var g=_;if(r("MetaConfig")._("66")&&g!=null&&i!=null){var h;return t[4]!==g||t[5]!==i?(h=i(g),t[4]=g,t[5]=i,t[6]=h):h=t[6],h}else return a}l.default=m}),98);
__d("MWInboxContextSwitcherDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxContextSwitcher.react").__setRef("MWInboxContextSwitcherDeferred.react"));function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(u,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=c}),98);
__d("MWInboxContextSwitcherGlimmer.react",["MDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={tabPlaceholder:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"x78zum5 xu0aao5 x1y1aw1k xwib8y2 xf7dkkf xv54qhq x3bhodz",children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:u.tabPlaceholder})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("useMWJewelSettingsButtonBadge",["cr:4042","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e,t=(e=n("cr:4042")==null?void 0:n("cr:4042")())!=null?e:{},r=t.badge,o=r===void 0?null:r;return{badge:o,onButtonPress:function(){}}}l.default=u}),98);
__d("MWJewelDropdownHeader.react",["fbt","CometHomeChatSettings.entrypoint","FDSCircleButton.react","FDSComposeFilled16Icon","FDSDots3HorizontalFilled20Icon","FDSEntryPointPopoverTrigger.react","FDSTooltip.react","LSThreadAttributionStore","MWJewelDropdownHeaderSeeAllButton.react","MWJewelPopoverDialogContext.react","MWPSearchSystem","MWTopNavListDropdownTitle.react","MessengerWebUXLogger","emptyFunction","react","react-compiler-runtime","useCometPreloader","useMWChatOpenNewTab","useMWJewelSettingsButtonBadge","useMWNewChatTabContainerPreload","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext;function _(e){var t=o("react-compiler-runtime").c(13),n=e.onOpenArchivedChats,a=e.onOpenMessageRequests,i=e.onOpenRestrictedAccountsList,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Options"),t[0]=l):l=t[0];var u=l,d=p(r("MWJewelPopoverDialogContext.react")),m=d.setIsOpenForDialog,_=r("useMWJewelSettingsButtonBadge")(),f=_.badge,g=_.onButtonPress,h;t[1]===Symbol.for("react.memo_cache_sentinel")?(h={},t[1]=h):h=t[1];var y=n!=null?n:void 0,C=a!=null?a:void 0,b=i!=null?i:void 0,v;t[2]!==y||t[3]!==C||t[4]!==b?(v={onOpenArchivedChats:y,onOpenMessageRequests:C,onOpenRestrictedAccountsList:b},t[2]=y,t[3]=C,t[4]=b,t[5]=v):v=t[5];var S;t[6]!==f||t[7]!==g||t[8]!==m?(S=function(t,n,o,a,i,l){return c.jsxs(r("FDSTooltip.react"),{align:"end",tooltip:u,children:[f,c.jsx(r("FDSCircleButton.react"),{"aria-label":u,color_DEPRECATED:"secondary",icon:r("FDSDots3HorizontalFilled20Icon"),onHoverIn:a,onHoverOut:i,onPress:function(){m(!1),n(),g()},onPressIn:l,ref:t,size:32,testid:void 0,type_DEPRECATED:"deemphasized"})]})},t[6]=f,t[7]=g,t[8]=m,t[9]=S):S=t[9];var R;return t[10]!==v||t[11]!==S?(R=c.jsx(r("FDSEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:h,otherProps:v,popoverEntryPoint:r("CometHomeChatSettings.entrypoint"),position:"below",preloadTrigger:"button",children:S}),t[10]=v,t[11]=S,t[12]=R):R=t[12],R}function f(t){var n=o("react-compiler-runtime").c(35),a=t.inboxUrl,i=t.onClose,l=t.onOpenArchivedChats,u=t.onOpenMessageRequests,d=t.onOpenRestrictedAccountsList,m=t.onReturn,p=t.title,f=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g=r("useMWChatOpenNewTab")("jewelNewMessage"),h=r("MessengerWebUXLogger").useInteractionLogger(),y;n[0]!==f||n[1]!==h||n[2]!==i||n[3]!==g?(y=function(){o("LSThreadAttributionStore").setSourceForNewThread("jewelNewMessage"),f&&(g(!1),i()),h==null||h({eventName:"create_thread"})},n[0]=f,n[1]=h,n[2]=i,n[3]=g,n[4]=y):y=n[4];var C=y,b=r("useMWNewChatTabContainerPreload")(),v=b[0],S=b[1],R=(e||(e=r("useReStore")))(),L;n[5]!==R?(L=function(){return o("MWPSearchSystem").makeAll(R)},n[5]=R,n[6]=L):L=n[6];var E=L,k=r("useCometPreloader")("button_aggressive",r("emptyFunction"),E),I=k.onHoverInPreloader,T=k.onHoverMovePreloader,D=k.onHoverOutPreloader,x;n[7]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"New message"),n[7]=x):x=n[7];var $=x,P;n[8]!==l||n[9]!==u||n[10]!==d?(P=c.jsx(_,{onOpenArchivedChats:l,onOpenMessageRequests:u,onOpenRestrictedAccountsList:d},"mw-jewel-settings"),n[8]=l,n[9]=u,n[10]=d,n[11]=P):P=n[11];var N;n[12]!==a||n[13]!==i?(N=c.jsx(r("MWJewelDropdownHeaderSeeAllButton.react"),{onClose:i,testid:void 0,url:a},"mw-jewel-see-all-button"),n[12]=a,n[13]=i,n[14]=N):N=n[14];var M;n[15]!==v||n[16]!==I?(M=function(t){v(t),I(t)},n[15]=v,n[16]=I,n[17]=M):M=n[17];var w;n[18]!==S||n[19]!==D?(w=function(){S(),D()},n[18]=S,n[19]=D,n[20]=w):w=n[20];var A;n[21]!==C||n[22]!==E||n[23]!==T||n[24]!==M||n[25]!==w?(A=c.jsx(r("FDSTooltip.react"),{align:"end",tooltip:$,children:c.jsx(r("FDSCircleButton.react"),{"aria-label":$,color_DEPRECATED:"secondary",icon:r("FDSComposeFilled16Icon"),onFocusIn:E,onHoverIn:M,onHoverMove:T,onHoverOut:w,onPress:C,role:"button",size:32,testid:void 0,type_DEPRECATED:"deemphasized"})},"mw-jewel-new-message"),n[21]=C,n[22]=E,n[23]=T,n[24]=M,n[25]=w,n[26]=A):A=n[26];var F;n[27]!==P||n[28]!==N||n[29]!==A?(F=[P,N,A].filter(Boolean),n[27]=P,n[28]=N,n[29]=A,n[30]=F):F=n[30];var O;return n[31]!==m||n[32]!==F||n[33]!==p?(O=c.jsx(r("MWTopNavListDropdownTitle.react"),{actions:F,onReturn:m,title:p}),n[31]=m,n[32]=F,n[33]=p,n[34]=O):O=n[34],O}l.default=f}),226);
__d("MWJewelNestedFolderThreadListHeader.react",["MWTopNavListDropdownTitle.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.onReturn,a=e.title,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:n,title:a}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWXListCellStrict.react",["cr:1357","cr:2004","cr:321","cr:3296","cr:6221","cr:842","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(22),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:1357")!=null){var l;return r[3]!==a||r[4]!==i?(l=u.jsx(n("cr:1357"),babelHelpers.extends({},a,{ref:i})),r[3]=a,r[4]=i,r[5]=l):l=r[5],l}if(n("cr:321")!=null&&n("cr:6221")!=null&&n("cr:3296")!=null&&n("cr:842")!=null&&n("cr:2004")!=null){var s=a,c=s.addOnStart,d=s.disabled,m=s.headline,p=s.linkProps,_=s.onHoverIn,f=s.onHoverOut,g=s.onPress,h=s.onPressIn,y=s.selected,C=s.testid,b;r[6]!==c||r[7]!==d?(b=c!=null?u.jsx(n("cr:3296"),{addOnStart:c,disabled:d!=null?d:!1}):void 0,r[6]=c,r[7]=d,r[8]=b):b=r[8];var v=b,S;r[9]!==m?(S=u.jsx(n("cr:6221"),{type:"headline4",children:m}),r[9]=m,r[10]=S):S=r[10];var R;return r[11]!==p||r[12]!==_||r[13]!==f||r[14]!==g||r[15]!==h||r[16]!==i||r[17]!==y||r[18]!==S||r[19]!==C||r[20]!==v?(R=u.jsx(n("cr:842"),{paddingHorizontal:8,paddingVertical:0,children:u.jsx(n("cr:2004"),{children:u.jsx(n("cr:321"),{addOnStart:v,content:S,linkProps:p,onHoverIn:_,onHoverOut:f,onPress:g,onPressIn:h,ref:i,selected:y,size:"medium",testid:void 0})})}),r[11]=p,r[12]=_,r[13]=f,r[14]=g,r[15]=h,r[16]=i,r[17]=y,r[18]=S,r[19]=C,r[20]=v,r[21]=R):R=r[21],R}return null}l.default=c}),98);
__d("MWJewelMessageRequestsThread.react",["fbt","FDSChevronLeftFilled16Icon","FDSChevronRightFilled16Icon","FDSIcon.react","FDSMessagesFilled24Icon","I64","LSIntEnum","Locale","MWJewelThreadSnippet.react","MWXListCellStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));function p(){var t=o("react-compiler-runtime").c(5),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.contacts||t[1]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(-1)).filter(_).map(function(e){var t=e.snippetSenderContactId;if(t!=null){var r=o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(t),i.id+":51");return r?r.name:void 0}})},t[0]=n.tables.contacts,t[1]=n.tables.threads,t[2]=a):a=t[2];var l;return t[3]!==n?(l=[n],t[3]=n,t[4]=l):l=t[4],o("ReQLSuspense").useFirst(a,l,i.id+":36")}function _(e){return(c||(c=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function f(e){var t=o("react-compiler-runtime").c(17),n=e.onOpenMessageRequests,a=e.unreadRequestsCount,i;t[0]!==a?(i=s._(/*BTDS*/"_j{\"*\":\"New message requests\",\"_1\":\"New message request\"}",[s._plural(a)]),t[0]=a,t[1]=i):i=t[1];var l=i,u;t[2]!==a?(u=s._(/*BTDS*/"_j{\"someone\":\"From someone you may know\",\"people\":\"From people you may know\"}",[s._enum(a===1?"someone":"people",{someone:"someone",people:"people"})]),t[2]=a,t[3]=u):u=t[3];var c=u,d=p();if(d!=null)if(a===1){var _;t[4]!==d?(_=s._(/*BTDS*/"From {name}",[s._param("name",d)]),t[4]=d,t[5]=_):_=t[5],c=_}else{var f;t[6]!==d||t[7]!==a?(f=s._(/*BTDS*/"From {name} and {count} more",[s._param("name",d),s._param("count",a-1)]),t[6]=d,t[7]=a,t[8]=f):f=t[8],c=f}var g,h;t[9]===Symbol.for("react.memo_cache_sentinel")?(g={addOn:m.jsx(r("FDSIcon.react"),{color:"secondary",icon:o("Locale").isRTL()?r("FDSChevronLeftFilled16Icon"):r("FDSChevronRightFilled16Icon")}),type:"body"},h={icon:r("FDSMessagesFilled24Icon"),size:56,type:"contained-icon"},t[9]=g,t[10]=h):(g=t[9],h=t[10]);var y;t[11]!==c?(y=m.jsx(r("MWJewelThreadSnippet.react"),{isUnread:!0,text:c}),t[11]=c,t[12]=y):y=t[12];var C;return t[13]!==n||t[14]!==y||t[15]!==l?(C=m.jsx(r("MWXListCellStrict.react"),{addOnEnd:g,addOnStart:h,body:y,headline:l,level:4,onPress:n}),t[13]=n,t[14]=y,t[15]=l,t[16]=C):C=t[16],C}l.default=f}),226);
__d("useMWLSLoadThreadFolderIfNotPresent",["CancellablePromise","CancellationToken","I64","Int64Hooks","ReQL","promiseDone","react-compiler-runtime","useMWLSJewelLoadMoreThreads","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(8),a=(s||(s=r("useReStore")))(),i=r("useMWLSJewelLoadMoreThreads")(t),l;n[0]!==a.tables.threads_ranges_v2__generated||n[1]!==i||n[2]!==t?(l=function(){var n=r("CancellationToken")();return r("promiseDone")(o("CancellablePromise").ignoreFailed(void 0,o("CancellablePromise").then_(n,function(e){e==null&&i()},o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads_ranges_v2__generated).filter(function(n){return(e||(e=o("I64"))).equal(n.parentThreadKey,t)}))))),n.cancel},n[0]=a.tables.threads_ranges_v2__generated,n[1]=i,n[2]=t,n[3]=l):l=n[3];var u;n[4]!==a||n[5]!==i||n[6]!==t?(u=[i,a,t],n[4]=a,n[5]=i,n[6]=t,n[7]=u):u=n[7],o("Int64Hooks").useEffectInt64(l,u)}l.default=u}),98);
__d("MWLSJewelMessageRequestsThreadContainer.react",["I64","LSIntEnum","MWJewelMessageRequestsThread.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWLSLoadThreadFolderIfNotPresent","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react"));function m(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(-1)).filter(p)},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var u=o("ReQLSuspense").useArray(a,l,i.id+":26");return u.length}function p(e){return(u||(u=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function _(e){var t=o("react-compiler-runtime").c(4),n=e.onOpenMessageRequests,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(s||(s=o("LSIntEnum"))).ofNumber(-1),t[0]=a):a=t[0],r("useMWLSLoadThreadFolderIfNotPresent")(a);var i=m();if(n==null||i===0)return null;var l;return t[1]!==n||t[2]!==i?(l=d.jsx(r("MWJewelMessageRequestsThread.react"),{onOpenMessageRequests:n,unreadRequestsCount:i}),t[1]=n,t[2]=i,t[3]=l):l=t[3],l}l.default=_}),98);
__d("LSFilteredThreadsRangesQuery",["LSGetCursor","LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.neq(e[10],void 0)?r[0]=e[10]:r[0]=t.i64.cast([0,0]),e[11]!==void 0?r[1]=e[11]:r[1]="",(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)||e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))&&!(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)&&e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))?t.sequence([function(o){return r[3]=e[4]==null?t.i64.cast([-2147483648,0]):e[4],r[4]=e[7]==null?t.i64.cast([0,1]):e[7],r[10]=t.i64.gt(r[4],t.i64.cast([0,1]))&&t.i64.gt(r[3],t.i64.cast([-2147483648,0])),t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,1])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(o){return r[5]=new t.Map,r[5].set("cursor",r[2]),r[5].set("filter",e[1]),r[5].set("is_after",e[3]),r[5].set("parent_thread_key",e[0]),r[5].set("reference_activity_timestamp",e[3]?e[6]:e[7]),r[5].set("reference_thread_key",e[3]?e[5]:e[4]),r[5].set("secondary_filter",r[0]),r[5].set("filter_value",r[1]),r[5].set("sync_group",t.i64.cast([0,1])),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[6]=t.i64.add(r[11],t.i64.cast([0,0]))):r[6]=t.i64.cast([0,0]),r[7]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),"trq",t.i64.cast([0,313]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[8]=t[0],t})},function(n){return t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}).next().then(function(n,o){var a=n.done,i=n.value;return a?t.db.table(247).add({folderName:"",parentThreadKey:e[0],minThreadKey:r[3]==null?t.i64.cast([-2147483648,0]):r[3],minLastActivityTimestampMs:r[4]==null?t.i64.cast([0,1]):r[4],threadRangeFilter:e[1],secondaryThreadRangeFilter:r[0],threadRangeFilterValue:r[1],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1,syncGroup:t.i64.cast([0,1])}):(o=i.item,t.forEach(t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}),function(e){var t=e.update,n=e.item;return t({isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1})}))})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFilteredThreadsRangesQueryStoredProcedure",e.__tables__=["filtered_threads_ranges_v3__generated"],a.exports=e}),null);
__d("LSFilteredThreadsRangesQueryStoredProcedure",["LSFilteredThreadsRangesQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFilteredThreadsRangesQuery"),a.parentThreadKey,a.filter,a.isLoadingBefore,a.isLoadingAfter,a.minThreadKey,a.maxThreadKey,a.maxLastActivityTimestampMs,a.minLastActivityTimestampMs,a.numThreads,a.numMessages,a.secondaryFilter,a.filterValue);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWPBaseThreadListUtils",["I64","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,l,u,c){c===void 0&&(c=!1);var d=(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE));r("promiseDone")((async function(){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(1)));m!=null&&(e||(e=o("I64"))).equal(m.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))&&await t.runInTransaction(function(t){return u==null||u(),d?r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{additionalPagesToFetch:(e||(e=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:e.max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,shouldSkipE2eeThreadsRanges:c}):r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{filter:a,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:(e||(e=o("I64"))).max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,secondaryFilter:l})},"readwrite","ui",void 0,i.id+":56")})())}l.loadMoreThreadsForEmptyRangeDefault=u}),98);
__d("ReQLScrollAnchored.react",["BaseScrollableAreaContext","BaseThemeProvider.react","CometPlaceholder.react","CometSSRSuspendOnServer.react","MWXScrollableAreaStyles","intersectionObserverEntryIsIntersecting","react","react-compiler-runtime","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useImperativeHandle,f=c.useLayoutEffect,g=c.useMemo,h=c.useRef,y=c.useState,C=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.render=function(){return t.props.children},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidUpdate=function(t,n,r){var e=t.children;this.props.componentDidUpdate(e,r)},n.getSnapshotBeforeUpdate=function(t){var e=t.children;return this.props.getSnapshotBeforeUpdate(e)},t})(u.PureComponent),b={hideScrollbar:{MsOverflowStyle:"x1pq812k",scrollbarWidth:"x1rohswg","::-webkit-scrollbar_height":"x1yqm8si","::-webkit-scrollbar_width":"xjx87ck",$$css:!0},overscrollBehaviorContain:{overscrollBehavior:"xish69e",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowAnchor:"x1xzczws",overflowX:"x6ikm8r",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0}},v=typeof ResizeObserver!="undefined";function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e,t){return e-t.scrollTop>t.clientHeight*2}var L=5;function E(t){var n=o("react-compiler-runtime").c(100),a=t.ref,i=t.hasReachedBottom,l=t.hasReachedTop,s=t.isHidden,c=t.setScrollTopInResetForBottomAnchor,d=t.initialAnchor,g=t.initialRenderComplete,E=t.onReachingBottom,k=t.onReachingTop,I=t.onScroll,T=t.onUserScroll,D=t.renderEmptyContent,x=t.renderFooter,$=t.renderHeader,P=t.renderHeaderContentSpacer,N=t.renderLoadingAnimation,M=t.isSufficientContentLoadedAbove,w=t.isSufficientContentLoadedBelow,A=t.headerStyle,F=t.hideScrollbar,O=t.snapThreshold,B=t.xstyle,W=t.shouldOverscrollBehaviourContain,q=t.elements,U=i===void 0?!0:i,V=l===void 0?!0:l,H=s===void 0?!1:s,G=c===void 0?!0:c,z=M===void 0?S:M,j=w===void 0?R:w,K=O===void 0?5:O,Q=m(r("BaseScrollableAreaContext")),X=h(),Y;n[0]===Symbol.for("react.memo_cache_sentinel")?(Y={getDOMNode:function(){return X==null?void 0:X.current}},n[0]=Y):Y=n[0];var J;n[1]!==Q?(J=[].concat(Q,[Y]),n[1]=Q,n[2]=J):J=n[2];var Z=J,ee=h(),te=h(),ne=y(d),re=ne[0],oe=ne[1],ae=h(d),ie=h(null),le;n[3]!==U||n[4]!==V||n[5]!==H||n[6]!==z||n[7]!==j||n[8]!==E||n[9]!==k?(le=function(){var e=X.current,t=te.current;if(!(e==null||t==null||e.offsetParent===null||t.offsetParent===null||H)){var n=j(t.clientHeight,e);if(ie.current=e.scrollTop,!n&&!U&&E!=null){E();return}var r=z(e);ie.current=e.scrollTop,!r&&!V&&k!=null&&k()}},n[3]=U,n[4]=V,n[5]=H,n[6]=z,n[7]=j,n[8]=E,n[9]=k,n[10]=le):le=n[10];var se=le,ue;n[11]!==q.length||n[12]!==se?(ue=[se,q.length],n[11]=q.length,n[12]=se,n[13]=ue):ue=n[13],p(se,ue);var ce;n[14]!==U||n[15]!==K?(ce=function(t){if(t.scrollHeight!==t.clientHeight){var e=t.scrollHeight-t.clientHeight-t.scrollTop<K&&U?"bottom":"top";oe(ae.current=e),ie.current=t.scrollTop}},n[14]=U,n[15]=K,n[16]=ce):ce=n[16];var de=ce,me;n[17]!==I?(me=function(){var e=X.current,t=ie.current;t==null||e==null||e.scrollTop!==t&&(e.scrollTop=t,I&&I(e))},n[17]=I,n[18]=me):me=n[18];var pe=me,_e;n[19]!==U||n[20]!==V||n[21]!==d||n[22]!==I||n[23]!==G||n[24]!==K?(_e=function(){var e=X.current,t=te.current;e==null||t==null||(d==="bottom"?(G&&(e.scrollTop=e.scrollHeight),I&&I(e)):V||(e.scrollTop=t.offsetTop,I&&I(e)),U&&e.scrollHeight-e.clientHeight-e.scrollTop<K?oe(ae.current="bottom"):oe(ae.current=d),ie.current=e.scrollTop)},n[19]=U,n[20]=V,n[21]=d,n[22]=I,n[23]=G,n[24]=K,n[25]=_e):_e=n[25];var fe=_e,ge=h(!1),he,ye;n[26]!==fe?(he=function(){ge.current||(fe(),ge.current=!0)},ye=[fe],n[26]=fe,n[27]=he,n[28]=ye):(he=n[27],ye=n[28]),f(he,ye);var Ce;n[29]!==g||n[30]!==I?(Ce=function(){var e=X.current;e!=null&&(g&&e.scrollHeight>e.clientHeight&&g(),ae.current==="bottom"&&(e.scrollTop=e.scrollHeight,I&&I(e)),ie.current=e.scrollTop)},n[29]=g,n[30]=I,n[31]=Ce):Ce=n[31];var be=Ce,ve;n[32]!==se||n[33]!==I||n[34]!==T||n[35]!==de?(ve=function(){var e=X.current;e!=null&&(I&&I(e),e.scrollTop!==ie.current&&(ie.current=null,se(),de(e),T&&T()))},n[32]=se,n[33]=I,n[34]=T,n[35]=de,n[36]=ve):ve=n[36];var Se=ve,Re;n[37]!==se||n[38]!==be?(Re=function(){be(),se()},n[37]=se,n[38]=be,n[39]=Re):Re=n[39];var Le=Re,Ee;n[40]!==be?(Ee=function(){return be()},n[40]=be,n[41]=Ee):Ee=n[41];var ke=Ee,Ie=r("useResizeObserver")(ke),Te=r("useResizeObserver")(Le),De;n[42]!==Ie?(De=function(t){Ie(t),te.current=t},n[42]=Ie,n[43]=De):De=n[43];var xe=De,$e;n[44]!==Te?($e=function(t){Te(t),X.current=t},n[44]=Te,n[45]=$e):$e=n[45];var Pe=$e,Ne;n[46]!==I?(Ne=function(t,n){if(n!=null){var e=n.element,r=n.height,o=n.scrollAreaElement,a=e.clientHeight;ie.current=o.scrollTop,a!==r&&!(a<=r&&ae.current==="bottom")&&(o.scrollTop=o.scrollTop+(a-r),ie.current=o.scrollTop,I&&I(o))}},n[46]=I,n[47]=Ne):Ne=n[47];var Me=Ne,we;n[48]!==U||n[49]!==I?(we=function(){if(X.current!=null){var e=X.current;e.scrollTop=e.scrollHeight,ie.current=e.scrollTop,I&&I(e)}oe(ae.current=U?"bottom":"top")},n[48]=U,n[49]=I,n[50]=we):we=n[50];var Ae=we,Fe;n[51]===Symbol.for("react.memo_cache_sentinel")?(Fe=function(){if(X.current!=null){var e=X.current,t=e.scrollHeight-e.scrollTop-e.clientHeight<L;return ie.current=e.scrollTop,t}else return!1},n[51]=Fe):Fe=n[51];var Oe=Fe,Be=h(null),We;n[52]===Symbol.for("react.memo_cache_sentinel")?(We=function(t,n){var e=Be.current,o=X.current;if(e!=null&&o!=null){var a=new IntersectionObserver(function(e){var t=e[0];(t.boundingClientRect.height!==0||t.boundingClientRect.width!==0)&&n(r("intersectionObserverEntryIsIntersecting")(t))},{root:o,rootMargin:t+"px"});return a.observe(e),(function(){return a.disconnect()})}},n[52]=We):We=n[52];var qe=We,Ue;n[53]===Symbol.for("react.memo_cache_sentinel")?(Ue=function(){var e=X.current;if(e!=null){var t=e.scrollHeight-e.clientHeight>0;return ie.current=e.scrollTop,t}return!1},n[53]=Ue):Ue=n[53];var Ve=Ue,He;n[54]===Symbol.for("react.memo_cache_sentinel")?(He=function(){var e=X.current;if(e==null)return null;var t={clientHeight:e.clientHeight,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop};return ie.current=e.scrollTop,t},n[54]=He):He=n[54];var Ge=He,ze,je;n[55]!==fe||n[56]!==pe||n[57]!==Ae?(ze=function(){return{doesContentFillScroll:Ve,getScrollAreaElement:function(){return X.current},getScrollerMeasurements:Ge,isAtBottom:Oe,onCloseToBottom:qe,resetScrollPosition:fe,restoreScrollPosition:pe,scrollToBottom:Ae}},je=[Ve,qe,fe,pe,Ae],n[55]=fe,n[56]=pe,n[57]=Ae,n[58]=ze,n[59]=je):(ze=n[58],je=n[59]),_(a,ze,je);var Ke;n[60]!==q[0]||n[61]!==q.length||n[62]!==V?(Ke=function(t){var e=te.current,n=X.current,r=q[0],o=typeof r=="object"&&r!=null?r.key:void 0,a=t[0],i=typeof a=="object"&&a!=null?a.key:void 0;if(e!=null&&n!=null&&!(V&&n.scrollTop===0)&&(!t.length||q.length&&i!==o&&t.length!==q.length)){var l=e.clientHeight;return ie.current=n.scrollTop,{element:e,height:l,scrollAreaElement:n}}return null},n[60]=q[0],n[61]=q.length,n[62]=V,n[63]=Ke):Ke=n[63];var Qe;n[64]!==q||n[65]!==Me||n[66]!==Ke?(Qe=u.jsx(C,{componentDidUpdate:Me,getSnapshotBeforeUpdate:Ke,children:q}),n[64]=q,n[65]=Me,n[66]=Ke,n[67]=Qe):Qe=n[67];var Xe=Qe,Ye;n[68]!==B?(Ye=(e||(e=r("stylex"))).props(B),n[68]=B,n[69]=Ye):Ye=n[69];var Je;n[70]!==re?(Je={0:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6 x1xzczws"}}[(re==="bottom")<<0],n[70]=re,n[71]=Je):Je=n[71];var Ze;n[72]!==xe||n[73]!==q.length||n[74]!==Xe||n[75]!==Me||n[76]!==be||n[77]!==Se||n[78]!==Le||n[79]!==U||n[80]!==V||n[81]!==A||n[82]!==F||n[83]!==D||n[84]!==x||n[85]!==$||n[86]!==P||n[87]!==N||n[88]!==Pe||n[89]!==W?(Ze=u.jsx(r("BaseThemeProvider.react"),{children:function(n,o){return u.jsxs("div",{className:(e||(e=r("stylex")))(b.scrollArea,W===!0&&b.overscrollBehaviorContain,F===!0&&b.hideScrollbar,r("MWXScrollableAreaStyles").themed,n),"data-testid":void 0,onScroll:Se,ref:Pe,style:o,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.ScrollArea",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=Le)}})})}),u.jsxs(C,{componentDidUpdate:Me,getSnapshotBeforeUpdate:function(){var e=ee.current,t=X.current;if(e!=null&&t!=null&&(ie.current=t.scrollTop,ie.current!==0)){var n=e.clientHeight;return{element:e,height:n,scrollAreaElement:t}}return null},children:[u.jsx("div",babelHelpers.extends({},e.props(A),{ref:ee,children:V?$&&$():N&&N("onTop",q.length)})),D!=null?D():null]}),P!=null&&P(),u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x1us19tq"}}[(q.length!==0&&!V&&!U)<<0],{children:u.jsxs("div",{className:"x1n2onr6",ref:xe,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.elementsHOC",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=be)}})})}),Xe,u.jsx("div",{className:"x1ey2m1c xjm9jq1 x1y332i5 x47corl x10l6tqk",ref:Be}),U?x&&x():N&&N("onBottom",q.length)]})}))]})}}),n[72]=xe,n[73]=q.length,n[74]=Xe,n[75]=Me,n[76]=be,n[77]=Se,n[78]=Le,n[79]=U,n[80]=V,n[81]=A,n[82]=F,n[83]=D,n[84]=x,n[85]=$,n[86]=P,n[87]=N,n[88]=Pe,n[89]=W,n[90]=Ze):Ze=n[90];var et;n[91]!==Je||n[92]!==Ze?(et=u.jsx("div",babelHelpers.extends({},Je,{children:Ze})),n[91]=Je,n[92]=Ze,n[93]=et):et=n[93];var tt;n[94]!==Ye||n[95]!==et?(tt=u.jsx("div",babelHelpers.extends({},Ye,{children:et})),n[94]=Ye,n[95]=et,n[96]=tt):tt=n[96];var nt;return n[97]!==Z||n[98]!==tt?(nt=u.jsx(r("BaseScrollableAreaContext").Provider,{value:Z,children:tt}),n[97]=Z,n[98]=tt,n[99]=nt):nt=n[99],nt}l.default=E}),98);
__d("useStableValue",["I64","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useState;function c(e){return d(e,(s||(s=o("I64"))).equal)}function d(e,t){var n=u(e),r=n[0],o=n[1];return t(r,e)?r:(o(e),e)}l.useStableI64=c,l.useStableValue=d}),98);
__d("useStableBounds",["deepEquals","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("useStableValue").useStableValue(e,r("deepEquals"))}l.default=e}),98);
__d("ReQLPaginatedList.react",["FBLogger","I64","PromiseOrValue","ReQL","ReQLScrollAnchored.react","ReQLSuspense","SortedAsyncIterable","deepEquals","getErrorSafe","promiseDone","react","react-compiler-runtime","useMergeRefs","useStableBounds","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useLayoutEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=d.useTransition;function C(e,t){return t==null?e:e.bounds(t)}function b(e){if(e instanceof Promise)throw e;return e}function v(e){return{direction:e.direction,iterator:function(n,r){var t=e.iterator(n,r);return{next:function(n){return(s||(s=o("PromiseOrValue"))).map(t.next(n),function(e){return e.done?e:{done:!1,value:[e.value[0],e.value]}})}}},keyLength:e.keyLength,subscribe:function(n,r){return e.subscribe(async function(e,t,r){t.operation==="delete"?await n(e,t,r):t.operation==="add"?await n(e,{operation:"add",value:[e,t.value]},r):t.operation==="put"&&await n(e,{operation:"put",value:[e,t.value]},r)},r)}}}function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e){var t,n,a,l=o("react-compiler-runtime").c(164),s=e.bounds,u=e.direction,d=e.hasReachedBottom,m=e.hasReachedTop,f=e.imperativeRef,R=e.initialAnchor,T=e.initialRenderComplete,D=e.isHidden,x=e.onDataLoaded,$=e.onPageLoaded,P=e.onReachingBottom,N=e.onReachingTop,M=e.onScroll,w=e.onUserScroll,A=e.pageSize,F=e.renderEmptyContent,O=e.renderFooter,B=e.renderHeader,W=e.renderHeaderContentSpacer,q=e.renderItem,U=e.renderLoadingAnimation,V=e.headerStyle,H=e.isSufficientContentLoadedAbove,G=e.isSufficientContentLoadedBelow,z=e.snapThreshold,j=e.setScrollTopInResetForBottomAnchor,K=e.data,Q=e.xstyle,X=e.isLogDuplicatedItemEnabled,Y=e.shouldOverscrollBehaviourContain,J=u===void 0?"asc":u,Z=d===void 0?!0:d,ee=m===void 0?!0:m,te=A===void 0?15:A,ne=H===void 0?S:H,re=z===void 0?5:z,oe=j===void 0?!0:j,ae=K.ascending,ie=K.descending,le=X===void 0?!1:X,se=y(),ue=se[1],ce=r("useStableBounds")(s),de=R;if(R!=null&&R!=="top"&&R!=="bottom"){var me;l[0]!==ce||l[1]!==ie||l[2]!==R?(me=C(ie,ce).bounds({lt:R}).iterator(new WeakMap).next(),l[0]=ce,l[1]=ie,l[2]=R,l[3]=me):me=l[3];var pe=me;if(pe instanceof Promise)throw pe;de=pe.done?"top":pe.value[0]}var _e=o("useStableValue").useStableValue(de,r("deepEquals")),fe,ge;if(_e==="top"||_e==null){var he;l[4]===Symbol.for("react.memo_cache_sentinel")?(he=o("ReQL").empty(),l[4]=he):he=l[4],fe=he,ge=J==="asc"?ae:ie}else if(_e==="bottom"){fe=J==="asc"?ie:ae;var ye;l[5]===Symbol.for("react.memo_cache_sentinel")?(ye=o("ReQL").empty(),l[5]=ye):ye=l[5],ge=ye}else{var Ce;l[6]!==ae||l[7]!==ie||l[8]!==J||l[9]!==_e?(Ce=J==="asc"?ie.bounds({lt:_e}):ae.bounds({gt:_e}),l[6]=ae,l[7]=ie,l[8]=J,l[9]=_e,l[10]=Ce):Ce=l[10],fe=Ce;var be;l[11]!==ae||l[12]!==ie||l[13]!==J||l[14]!==_e?(be=J==="asc"?ae.bounds({gte:_e}):ie.bounds({lte:_e}),l[11]=ae,l[12]=ie,l[13]=J,l[14]=_e,l[15]=be):be=l[15],ge=be}var ve;l[16]!==ge||l[17]!==fe?(ve={after:ge,before:fe},l[16]=ge,l[17]=fe,l[18]=ve):ve=l[18];var Se=ve,Re=g(!1),Le;l[19]!==ce||l[20]!==_e||l[21]!==Se.before||l[22]!==te?(Le=b(o("SortedAsyncIterable").toArray(C(Se.before,ce).take(_e==="bottom"?te:0),i.id+":204")).reverse(),l[19]=ce,l[20]=_e,l[21]=Se.before,l[22]=te,l[23]=Le):Le=l[23];var Ee=Le,ke;l[24]!==ce||l[25]!==Se.after||l[26]!==te?(ke=b(o("SortedAsyncIterable").toArray(C(Se.after,ce).take(te),i.id+":211")),l[24]=ce,l[25]=Se.after,l[26]=te,l[27]=ke):ke=l[27];var Ie=ke,Te=_e==="bottom"?!0:Ie.length<te,De=_e==="top"||_e==null?!0:_e==="bottom"?Ee.length<te:!1,xe=De?void 0:_e==="bottom"?(t=Ee[0])==null?void 0:t[0]:(n=Ie[0])==null?void 0:n[0],$e=Te||(a=Ie[Ie.length-1])==null?void 0:a[0],Pe;l[28]!==xe||l[29]!==$e?(Pe={firstKey:xe,lastKey:$e},l[28]=xe,l[29]=$e,l[30]=Pe):Pe=l[30];var Ne=Pe,Me;l[31]!==_e||l[32]!==Ne||l[33]!==Se?(Me=function(){return{anchor:_e,iterables:Se,values:Ne}},l[31]=_e,l[32]=Ne,l[33]=Se,l[34]=Me):Me=l[34];var we=h(Me),Ae=we[0],Fe=we[1],Oe=Ae.iterables===Se&&Ae.anchor===_e,Be=Oe?Ae.values:Ne,We=Be.firstKey,qe=Be.lastKey,Ue,Ve;l[35]!==ce||l[36]!==J||l[37]!==We||l[38]!==Se.before||l[39]!==te?(Ue=function(){return v(We==null?C(Se.before,ce).take(te):C(Se.before,ce).bounds(J==="asc"?{gte:We}:{lte:We}))},Ve=[ce,J,We,Se.before,te],l[35]=ce,l[36]=J,l[37]=We,l[38]=Se.before,l[39]=te,l[40]=Ue,l[41]=Ve):(Ue=l[40],Ve=l[41]);var He=o("ReQLSuspense").useArray(Ue,Ve,i.id+":246"),Ge;l[42]!==He?(Ge=[].concat(He).reverse(),l[42]=He,l[43]=Ge):Ge=l[43];var ze=Ge,je;l[44]!==ze[0]||l[45]!==ze.length||l[46]!==We||l[47]!==_e||l[48]!==Se||l[49]!==qe||l[50]!==te?(je=function(){ze.length===te&&We==null&&ue(function(){return Fe({anchor:_e,iterables:Se,values:{firstKey:ze[0][0],lastKey:qe}})})},l[44]=ze[0],l[45]=ze.length,l[46]=We,l[47]=_e,l[48]=Se,l[49]=qe,l[50]=te,l[51]=je):je=l[51];var Ke;l[52]!==ze||l[53]!==We||l[54]!==_e||l[55]!==Se||l[56]!==qe||l[57]!==te?(Ke=[ze,We,_e,Se,qe,te],l[52]=ze,l[53]=We,l[54]=_e,l[55]=Se,l[56]=qe,l[57]=te,l[58]=Ke):Ke=l[58],p(je,Ke);var Qe,Xe;l[59]!==ce||l[60]!==J||l[61]!==Se.after||l[62]!==qe||l[63]!==te?(Qe=function(){return v(qe==null?C(Se.after,ce).take(te):C(Se.after,ce).bounds(J==="asc"?{lte:qe}:{gte:qe}))},Xe=[ce,J,Se.after,qe,te],l[59]=ce,l[60]=J,l[61]=Se.after,l[62]=qe,l[63]=te,l[64]=Qe,l[65]=Xe):(Qe=l[64],Xe=l[65]);var Ye=o("ReQLSuspense").useArray(Qe,Xe,i.id+":273"),Je,Ze;l[66]!==Ye||l[67]!==We||l[68]!==_e||l[69]!==Se||l[70]!==qe||l[71]!==te?(Je=function(){Ye.length===te&&qe==null&&ue(function(){return Fe({anchor:_e,iterables:Se,values:{firstKey:We,lastKey:Ye[Ye.length-1][0]}})})},Ze=[Ye,We,_e,Se,qe,te],l[66]=Ye,l[67]=We,l[68]=_e,l[69]=Se,l[70]=qe,l[71]=te,l[72]=Je,l[73]=Ze):(Je=l[72],Ze=l[73]),p(Je,Ze);var et;l[74]!==Ye||l[75]!==ze?(et=[].concat(ze,Ye),l[74]=Ye,l[75]=ze,l[76]=et):et=l[76];var tt=et,nt,rt;l[77]!==tt||l[78]!==x?(nt=function(){x==null||x(tt)},rt=[tt,x],l[77]=tt,l[78]=x,l[79]=nt,l[80]=rt):(nt=l[79],rt=l[80]),p(nt,rt);var ot;l[81]!==ce||l[82]!==J||l[83]!==tt[0]||l[84]!==tt.length||l[85]!==Se.before?(ot=function(){return tt.length===0?o("ReQL").empty():C(Se.before,ce).bounds(J==="asc"?{lt:tt[0][0]}:{gt:tt[0][0]})},l[81]=ce,l[82]=J,l[83]=tt[0],l[84]=tt.length,l[85]=Se.before,l[86]=ot):ot=l[86];var at;l[87]!==ce||l[88]!==J||l[89]!==tt||l[90]!==Se.before?(at=[tt,ce,J,Se.before],l[87]=ce,l[88]=J,l[89]=tt,l[90]=Se.before,l[91]=at):at=l[91];var it=o("ReQLSuspense").useFirst(ot,at,i.id+":305")==null,lt,st;l[92]!==ce||l[93]!==J||l[94]!==tt||l[95]!==Se.after?(lt=function(){return tt.length===0?o("ReQL").empty():C(Se.after,ce).bounds(J==="asc"?{gt:tt[tt.length-1][0]}:{lt:tt[tt.length-1][0]})},st=[tt,ce,J,Se.after],l[92]=ce,l[93]=J,l[94]=tt,l[95]=Se.after,l[96]=lt,l[97]=st):(lt=l[96],st=l[97]);var ut=o("ReQLSuspense").useFirst(lt,st,i.id+":315")==null,ct=y(),dt=ct[0],mt=ct[1],pt;l[98]!==ae||l[99]!==ce||l[100]!==ie||l[101]!==J||l[102]!==tt||l[103]!==We||l[104]!==ut||l[105]!==Z||l[106]!==_e||l[107]!==dt||l[108]!==Se||l[109]!==$||l[110]!==P||l[111]!==te?(pt=function(){if(!(Re.current||dt))if(ut){if(!Z&&P!=null)return P()}else{Re.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(J==="asc"?ae:ie,ce).bounds(J==="asc"?{gt:tt[tt.length-1][0]}:{lt:tt[tt.length-1][0]}).take(te),i.id+":342")),function(e){Re.current=!1,$!=null&&$("bottom",tt[tt.length-1][1],e.map(k)),mt(function(){var t,n;return Fe({anchor:_e,iterables:Se,values:{firstKey:We,lastKey:(t=(n=e[e.length-1])==null?void 0:n[0])!=null?t:tt[tt.length-1][0]}})})});return}},l[98]=ae,l[99]=ce,l[100]=ie,l[101]=J,l[102]=tt,l[103]=We,l[104]=ut,l[105]=Z,l[106]=_e,l[107]=dt,l[108]=Se,l[109]=$,l[110]=P,l[111]=te,l[112]=pt):pt=l[112];var _t=pt,ft=y(),gt=ft[0],ht=ft[1],yt=g(!0),Ct;l[113]!==ae||l[114]!==ce||l[115]!==ie||l[116]!==J||l[117]!==tt||l[118]!==it||l[119]!==ee||l[120]!==_e||l[121]!==gt||l[122]!==Se||l[123]!==qe||l[124]!==$||l[125]!==N||l[126]!==te?(Ct=function(){if(!(Re.current||gt)){if(it)return ee||N==null?void 0:N();Re.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(J==="asc"?ie:ae,ce).bounds(J==="asc"?{lt:tt[0][0]}:{gt:tt[0][0]}).take(te),i.id+":414")),function(e){Re.current=!1,$!=null&&(yt.current?(yt.current=!1,$("top",null,tt.slice(0,te).map(E).reverse())):$("top",tt[0][1],e.map(L))),e.reverse(),ht(function(){var t,n;return Fe({anchor:_e,iterables:Se,values:{firstKey:(t=(n=e[0])==null?void 0:n[0])!=null?t:tt[0][0],lastKey:qe}})})})}},l[113]=ae,l[114]=ce,l[115]=ie,l[116]=J,l[117]=tt,l[118]=it,l[119]=ee,l[120]=_e,l[121]=gt,l[122]=Se,l[123]=qe,l[124]=$,l[125]=N,l[126]=te,l[127]=Ct):Ct=l[127];var bt=Ct,vt=it&&ee?0:1,St=tt.length-(ut&&Z?0:1),Rt;if(l[128]!==tt||l[129]!==vt||l[130]!==q||l[131]!==St){Rt=new Array(St>vt?St-vt:0);for(var Lt=vt;Lt<St;Lt++){var Et,kt;Rt[Lt-vt]=q(tt[Lt][1],{nextItem:(Et=tt[Lt+1])==null?void 0:Et[1],previousItem:(kt=tt[Lt-1])==null?void 0:kt[1]},St-vt-Lt)}l[128]=tt,l[129]=vt,l[130]=q,l[131]=St,l[132]=Rt}else Rt=l[132];var It=Rt,Tt=g(null),Dt=r("useMergeRefs")(Tt,f),xt;l[133]===Symbol.for("react.memo_cache_sentinel")?(xt=function(){var e;(e=Tt.current)==null||e.resetScrollPosition()},l[133]=xt):xt=l[133];var $t;l[134]!==_e?($t=[_e],l[134]=_e,l[135]=$t):$t=l[135],_(xt,$t);var Pt;l[136]!==tt||l[137]!==O?(Pt=function(){return O==null?void 0:O(tt.length>0?tt[tt.length-1][1]:void 0)},l[136]=tt,l[137]=O,l[138]=Pt):Pt=l[138];var Nt=Pt;I(le,tt);var Mt=ut&&Z,wt=it&&ee,At=_e==="bottom"?"bottom":"top",Ft;return l[139]!==It||l[140]!==V||l[141]!==T||l[142]!==D||l[143]!==ne||l[144]!==G||l[145]!==_t||l[146]!==bt||l[147]!==M||l[148]!==w||l[149]!==te||l[150]!==Dt||l[151]!==F||l[152]!==Nt||l[153]!==B||l[154]!==W||l[155]!==U||l[156]!==oe||l[157]!==Y||l[158]!==re||l[159]!==Mt||l[160]!==wt||l[161]!==At||l[162]!==Q?(Ft=c.jsx(r("ReQLScrollAnchored.react"),{elements:It,hasReachedBottom:Mt,hasReachedTop:wt,headerStyle:V,initialAnchor:At,initialRenderComplete:T,isHidden:D,isSufficientContentLoadedAbove:ne,isSufficientContentLoadedBelow:G,onReachingBottom:_t,onReachingTop:bt,onScroll:M,onUserScroll:w,pageSize:te,ref:Dt,renderEmptyContent:F,renderFooter:Nt,renderHeader:B,renderHeaderContentSpacer:W,renderLoadingAnimation:U,setScrollTopInResetForBottomAnchor:oe,shouldOverscrollBehaviourContain:Y,snapThreshold:re,xstyle:Q}),l[139]=It,l[140]=V,l[141]=T,l[142]=D,l[143]=ne,l[144]=G,l[145]=_t,l[146]=bt,l[147]=M,l[148]=w,l[149]=te,l[150]=Dt,l[151]=F,l[152]=Nt,l[153]=B,l[154]=W,l[155]=U,l[156]=oe,l[157]=Y,l[158]=re,l[159]=Mt,l[160]=wt,l[161]=At,l[162]=Q,l[163]=Ft):Ft=l[163],Ft}function L(e){return e[1]}function E(e){return e[1]}function k(e){return e[1]}function I(e,t){var n=h(!1),a=n[0],i=n[1];p(function(){try{if(e&&!a){var n=new Set,l=[];for(var s of t){var c=s[1];if(typeof c=="object"&&(c==null?void 0:c.threadKey)!=null&&(u||(u=o("I64"))).isI64(c==null?void 0:c.threadKey)){var d=(u||(u=o("I64"))).to_string(c==null?void 0:c.threadKey);n.has(d)&&l.push(d),n.add(d)}}n.size!==t.length&&(i(!0),r("FBLogger")("messenger_web").warn("Duplicated thread item detected in ReQLPaginatedList %s",l.join(",")))}}catch(e){var m=r("getErrorSafe")(e);r("FBLogger")("messenger_web").warn("Duplicated thread item error",m.message)}},[t,a,e])}l.default=R}),98);
__d("useMWCMMarkBumpedThreadsSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWCMMarkBumpedThreadsSeen").__setRef("useMWCMMarkBumpedThreadsSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return(function(e){return n.MWCMMarkBumpedThreadsSeen(t,e)})}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMarkSeenWhenVisible",["CometDebounce","Int64Hooks","ReQL","UserActivity","promiseDone","react","useMWCMMarkBumpedThreadsSeen","useMWPMarkSeen","useMWPWatchFolderFocusChanges","useReStore","useSimpleImpression","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef;function m(t){var n=(e||(e=r("useReStore")))(),a=d(!1),l=r("useMWCMMarkBumpedThreadsSeen")(t),s=r("useVisibilityObserver")({onHidden:function(){a.current=!1},onVisible:function(){a.current=!0}}),u=r("useMWPMarkSeen")(t),m=r("CometDebounce")(c(function(){r("promiseDone")((async function(){var e=await Promise.all([u.load(),l.load()]),t=e[0],r=e[1];await n.runInTransaction(async function(e){await t(e),await r(e)},"readwrite",void 0,void 0,i.id+":56")})())},[u,l,n]),{leading:!0,wait:500});return r("useMWPWatchFolderFocusChanges")(m,a),r("useSimpleImpression")(m),o("Int64Hooks").useEffectInt64(function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),[]).getKeyRange(t).take(1).subscribe(function(){r("UserActivity").isOnTab()&&a.current===!0&&m()})},[n,t,m]),s}l.default=m}),98);
__d("MWPBaseThreadList.react",["Box.react","FBLogger","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","MAWMaybeWithTimeout","MWPBaseThreadListHooks","MWPBaseThreadListUtils","MWThreadListFocusableTable.react","ReQL","ReQLPaginatedList.react","ReQLSuspense","react","react-compiler-runtime","useMarkSeenWhenVisible","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=s,p=m.useCallback,_=m.useEffect,f={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},g=1e4;function h(e,t,n,a){a===void 0&&(a=!1),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var i,l=await(i=e.threads_ranges_v2__generated).get.apply(i,t);if(!(l==null||l.isLoadingBefore))return n&&n(),r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{additionalPagesToFetch:(u||(u=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:l.maxLastActivityTimestampMs,maxThreadKey:l.maxThreadKey,minLastActivityTimestampMs:l.minLastActivityTimestampMs,minThreadKey:l.minThreadKey,parentThreadKey:l.parentThreadKey,shouldSkipE2eeThreadsRanges:a})},"readwrite","ui",void 0,i.id+":91"),g,function(){r("FBLogger")("messenger_web").warn("Paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2]))})}function y(e,t,n,a,l){a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var o,i=await(o=e.filtered_threads_ranges_v3__generated).get.apply(o,t);if(!(i==null||i.isLoadingBefore))return l&&l(),r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{filter:n,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:i.maxLastActivityTimestampMs,maxThreadKey:i.maxThreadKey,minLastActivityTimestampMs:i.minLastActivityTimestampMs,minThreadKey:i.minThreadKey,parentThreadKey:i.parentThreadKey,secondaryFilter:a})},"readwrite","ui",void 0,i.id+":150"),g,function(){r("FBLogger")("messenger_web").warn("Filtered paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2])+`
        thread_range_filter: `+u.to_string(t[3])+`
        secondary_thread_range_filter: `+u.to_string(t[5]))})}function C(e,t,n,a,i,l){if(a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l===void 0&&(l=!1),t!=null)if(t.threadRangeFilter){var u=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs,t.threadRangeFilter,t.folderName,t.secondaryThreadRangeFilter,t.threadRangeFilterValue];y(e,u,n,a,i)}else{var s=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs];h(e,s,i,l)}}function b(e,t,n,a){var l=o("react-compiler-runtime").c(14),s;l[0]!==n?(s=(u||(u=o("I64"))).equal(n,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l[0]=n,l[1]=s):s=l[1];var d=s,m,p;l[2]!==e||l[3]!==d||l[4]!==t?(m=function(){return d?o("ReQL").fromTableDescending(e.tables.threads_ranges_v2__generated).getKeyRange(t):o("ReQL").empty()},p=[e,t,d],l[2]=e,l[3]=d,l[4]=t,l[5]=m,l[6]=p):(m=l[5],p=l[6]);var _=o("ReQLSuspense").useFirst(m,p,i.id+":250"),f,g;l[7]!==e||l[8]!==n||l[9]!==d||l[10]!==t||l[11]!==a?(f=function(){return d?o("ReQL").empty():o("ReQL").fromTableDescending(e.tables.filtered_threads_ranges_v3__generated).getKeyRange(t).filter(function(e){return(u||(u=o("I64"))).equal(e.threadRangeFilter,n)&&(a==null||(u||(u=o("I64"))).equal(e.secondaryThreadRangeFilter,a))})},g=[e,n,t,a,d],l[7]=e,l[8]=n,l[9]=d,l[10]=t,l[11]=a,l[12]=f,l[13]=g):(f=l[12],g=l[13]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":257");return d?_:h}function v(t){var n=o("react-compiler-runtime").c(72),a=t.afterContent,l=t.beforeContent,s=t.containerStyle,m=t.customThreadFilter,p=t.emptyContent,g=t.filter,h=t.gridLabel,y=t.imperativeRef,v=t.isHidden,S=t.isSufficientContentLoadedBelow,R=t.loadMoreThreads,L=t.loadMoreThreadsForEmptyRange,E=t.onDataLoaded,k=t.onLoadMoreThreads,I=t.onReachingTop,T=t.onScroll,D=t.onThreadsLoaded,x=t.pageSize,$=t.parentThreadKey,P=t.renderItem,N=t.renderLoadingAnimation,M=t.role,w=t.secondaryFilter,A=t.setIsEmptyInbox,F=t.shouldSkipE2eeThreadsRanges,O;n[0]!==g?(O=g===void 0?(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE):g,n[0]=g,n[1]=O):O=n[1];var B=O,W=R===void 0?C:R,q=L===void 0?o("MWPBaseThreadListUtils").loadMoreThreadsForEmptyRangeDefault:L,U=M===void 0?"grid":M,V=F===void 0?!1:F,H=(e||(e=r("useReStore")))(),G=b(H,$,B,w);G!=null&&!G.isLoadingBefore&&D&&D();var z=o("MWPBaseThreadListHooks").useMWPBaseThreadListBounds(G),j;n[2]!==m||n[3]!==H||n[4]!==$?(j={customThreadFilter:m,db:H,parentThreadKey:$},n[2]=m,n[3]=H,n[4]=$,n[5]=j):j=n[5];var K=o("MWPBaseThreadListHooks").useMWPBaseThreadListFilteredData(j),Q;n[6]!==z||n[7]!==K.descending?(Q=function(){return K.descending.bounds(z)},n[6]=z,n[7]=K.descending,n[8]=Q):Q=n[8];var X;n[9]!==z||n[10]!==K?(X=[z,K],n[9]=z,n[10]=K,n[11]=X):X=n[11];var Y=o("ReQLSuspense").useFirst(Q,X,i.id+":346")==null,J,Z;n[12]!==Y||n[13]!==A?(J=function(){A&&A(Y)},Z=[Y,A],n[12]=Y,n[13]=A,n[14]=J,n[15]=Z):(J=n[14],Z=n[15]),_(J,Z);var ee,te;n[16]!==H||n[17]!==G||n[18]!==B||n[19]!==q||n[20]!==k||n[21]!==$||n[22]!==w?(ee=function(){G==null&&q(H,$,B,w,k)},te=[$,G,H,B,w,k,q],n[16]=H,n[17]=G,n[18]=B,n[19]=q,n[20]=k,n[21]=$,n[22]=w,n[23]=ee,n[24]=te):(ee=n[23],te=n[24]),o("Int64Hooks").useEffectInt64(ee,te);var ne=r("useMarkSeenWhenVisible")($),re;n[25]!==H||n[26]!==G||n[27]!==B||n[28]!==W||n[29]!==k||n[30]!==w||n[31]!==V?(re=function(){W(H,G,B,w,k,V)},n[25]=H,n[26]=G,n[27]=B,n[28]=W,n[29]=k,n[30]=w,n[31]=V,n[32]=re):re=n[32];var oe=re,ae;n[33]!==P?(ae=function(t){return d.jsx(d.Fragment,{children:P(t)},(u||(u=o("I64"))).to_string(t.threadKey))},n[33]=P,n[34]=ae):ae=n[34];var ie=ae,le;if(G==null){var se;n[35]!==N?(se=N!=null?N("nullState",0):null,n[35]=N,n[36]=se):se=n[36],le=se}else{var ue=!G.hasMoreBefore,ce=!G.hasMoreAfter,de;n[37]!==G.isLoadingAfter||n[38]!==G.isLoadingBefore||n[39]!==p||n[40]!==Y?(de=function(){return Y&&!G.isLoadingAfter&&!G.isLoadingBefore?d.jsx(r("Box.react"),{xstyle:f.emptyContentContainer,children:p}):null},n[37]=G.isLoadingAfter,n[38]=G.isLoadingBefore,n[39]=p,n[40]=Y,n[41]=de):de=n[41];var me;n[42]!==a?(me=function(){return a},n[42]=a,n[43]=me):me=n[43];var pe;n[44]!==l?(pe=function(){return l},n[44]=l,n[45]=pe):pe=n[45];var _e;n[46]!==z||n[47]!==K||n[48]!==y||n[49]!==v||n[50]!==S||n[51]!==E||n[52]!==oe||n[53]!==I||n[54]!==T||n[55]!==x||n[56]!==ie||n[57]!==N||n[58]!==ue||n[59]!==ce||n[60]!==de||n[61]!==me||n[62]!==pe?(_e=d.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:d.jsx(r("ReQLPaginatedList.react"),{bounds:z,data:K,direction:"desc",hasReachedBottom:ue,hasReachedTop:ce,imperativeRef:y,isHidden:v,isLogDuplicatedItemEnabled:!0,isSufficientContentLoadedBelow:S,onDataLoaded:E,onReachingBottom:oe,onReachingTop:I,onScroll:T,pageSize:x,renderEmptyContent:de,renderFooter:me,renderHeader:pe,renderItem:ie,renderLoadingAnimation:N,shouldOverscrollBehaviourContain:!0,xstyle:f.list})}),n[46]=z,n[47]=K,n[48]=y,n[49]=v,n[50]=S,n[51]=E,n[52]=oe,n[53]=I,n[54]=T,n[55]=x,n[56]=ie,n[57]=N,n[58]=ue,n[59]=ce,n[60]=de,n[61]=me,n[62]=pe,n[63]=_e):_e=n[63],le=_e}var fe;n[64]!==s?(fe=[f.container,s],n[64]=s,n[65]=fe):fe=n[65];var ge;return n[66]!==le||n[67]!==h||n[68]!==U||n[69]!==fe||n[70]!==ne?(ge=d.jsx(r("Box.react"),{"aria-label":h,"data-testid":void 0,ref:ne,role:U,xstyle:fe,children:le}),n[66]=le,n[67]=h,n[68]=U,n[69]=fe,n[70]=ne,n[71]=ge):ge=n[71],ge}l.default=v}),98);
__d("MWPParentThreadKeyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("MWThreadListFolderItem.react",["BaseView.react","CometTextWithEntities.react","I64","MAWVault","MWAddOnCircleContainer.react","MWCMThreadTypes.react","MWChatTextTransform","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListLastMessage.react","MWXListCellPressable.react","MWXTextPairing.react","react","react-compiler-runtime","useMatchMedia"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo;function p(e){var t=o("react-compiler-runtime").c(28),n=e.icon,a=e.onClick,i=e.responsive,l=e.selected,c=e.size,d=e.thread,m=e.threadName,p=r("useMatchMedia")("(min-width: 900px)")||!i,_;t[0]!==d.snippet?(_=d.snippet!=null?o("MAWVault").unvault(d.snippet):null,t[0]=d.snippet,t[1]=_):_=t[1];var f=_,g;t[2]!==d.lastActivityTimestampMs?(g=(s||(s=o("I64"))).to_float(d.lastActivityTimestampMs),t[2]=d.lastActivityTimestampMs,t[3]=g):g=t[3];var h=g,y=o("MWPIsThreadUnread").useIsThreadUnread(d.threadKey),C;t[4]!==n||t[5]!==c?(C=u.jsx(r("MWAddOnCircleContainer.react"),{size:c,children:n}),t[4]=n,t[5]=c,t[6]=C):C=t[6];var b=C,v=m!=null?m:d.threadName,S;t[7]!==a?(S=function(){return a()},t[7]=a,t[8]=S):S=t[8];var R=S,L;t[9]===Symbol.for("react.memo_cache_sentinel")?(L={className:"xmzvs34 xf159sx"},t[9]=L):L=t[9];var E;t[10]!==p||t[11]!==y||t[12]!==h||t[13]!==f||t[14]!==d.threadType?(E=p?u.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:!1,isUnread:y,lastMessageCtaType:null,lastMessageTimestamp:h,showTimestamp:!o("MWCMThreadTypes.react").isUnjoinedCMThread(d.threadType),snippet:f}):null,t[10]=p,t[11]=y,t[12]=h,t[13]=f,t[14]=d.threadType,t[15]=E):E=t[15];var k;t[16]!==v||t[17]!==p?(k=p?u.jsx(r("CometTextWithEntities.react"),{text:v.toString(),transforms:o("MWChatTextTransform").textTransforms}):null,t[16]=v,t[17]=p,t[18]=k):k=t[18];var I=!y,T;t[19]!==E||t[20]!==k||t[21]!==I?(T=u.jsx(r("MWXTextPairing.react"),{body:E,bodyLineLimit:1,headline:k,headlineLineLimit:1,level:4,reduceEmphasis:I}),t[19]=E,t[20]=k,t[21]=I,t[22]=T):T=t[22];var D;return t[23]!==b||t[24]!==R||t[25]!==l||t[26]!==T?(D=u.jsx(r("BaseView.react"),{testid:void 0,children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:u.jsx("div",{role:"row",children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:u.jsx("div",babelHelpers.extends({},L,{role:"gridcell",children:u.jsx(r("MWXListCellPressable.react"),{addOnStart:b,content:T,onPress:R,selected:l,size:"large"})}))})})})}),t[23]=b,t[24]=R,t[25]=l,t[26]=T,t[27]=D):D=t[27],D}l.default=p}),98);
__d("MWThreadListJobsItem.react",["fbt","ix","LSIntEnum","MWThreadListFolderItem.react","MWXIcon_DEPRECATED.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(11),n=e.onClick,a=e.responsive,i=e.selected,l=e.size,m=e.thread,p;t[0]!==n?(p=function(){return n((c||(c=o("LSIntEnum"))).ofNumber(-13))},t[0]=n,t[1]=p):p=t[1];var _=p,f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(r("MWXIcon_DEPRECATED.react"),{color:"primary",icon:o("fbicon")._(u("512668"),32),size:48}),t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=(c||(c=o("LSIntEnum"))).ofNumber(-13),t[3]=g):g=t[3];var h;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=s._(/*BTDS*/"Jobs").toString(),t[4]=h):h=t[4];var y;return t[5]!==_||t[6]!==a||t[7]!==i||t[8]!==l||t[9]!==m?(y=d.jsx(r("MWThreadListFolderItem.react"),{icon:f,onClick:_,responsive:a,selected:i,size:l,systemFolder:g,thread:m,threadName:h}),t[5]=_,t[6]=a,t[7]=i,t[8]=l,t[9]=m,t[10]=y):y=t[10],y}l.default=m}),226);
__d("MWThreadList.react",["CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","CometPageletWithDiv.react","CometRouterFocusRegion.react","CometTransientDialogProvider.react","CometVisualCompletion","CurrentEnvironment","FBLogger","FocusRegion.react","FocusRegionType","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSThreadBitOffset","MWCMGetValidId","MWCreatorMessagingUtils","MWInboxFollowUps","MWJewelPopoverThreadlistContext.react","MWLSJewelMessageRequestsThreadContainer.react","MWPBaseThreadList.react","MWPBumpEntityKey","MWPParentThreadKeyContext","MWPThreadIsPage.react","MWPThreadsForThreadList","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWResponsiveLayoutShowState","MWThreadKey.react","MWThreadListEmptyContainer.react","MWThreadListGlimmer.react","MWThreadListItem.react","MWThreadListJobsItem.react","MWThreadListSupportedThreadTypes","MWXacGating","MessagingFolderTag","MessengerWebUXLogger","QPLUserFlow","ReQL","ReQLSuspense","VirtualizationContainerContext","cr:13568","cr:2261","cr:6055","emptyFunction","focusScopeQueries","gkx","isMWXacGroupThread","mwCMIsThreadBumped","qpl","react","react-compiler-runtime","useCommunityFolder","useEmptyFunction","useGroupsCometIsInCCNegativeTest","useMWGetInboxFocusTargetFromRoute","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=s,p=m.useCallback,_=m.useContext,f=m.useId,g=m.useMemo,h=m.useRef,y=(u||(u=o("I64"))).of_string("1766237507597786"),C=n("cr:6055")||r("useEmptyFunction");function b(e){return(u||(u=o("I64"))).equal(e.threadType,(c||(c=o("LSIntEnum"))).ofNumber(15))&&(u||(u=o("I64"))).equal(e.authorityLevel,(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&(u||(u=o("I64"))).equal(e.lastReadWatermarkTimestampMs,(u||(u=o("I64"))).of_int32(-1))&&(u||(u=o("I64"))).equal(e.lastActivityTimestampMs,(u||(u=o("I64"))).of_int32(-1))}var v=5;function S(e){var t=e.lsEntryPoint,a=e.lsSubEntryPoint,i=e.messagingEntrypoint,l=e.onClickNestedFolderThread,s=e.onClose,m=e.responsive,p=e.selected,f=e.showFollowUpReminder,g=e.thread,y=_(r("MWJewelPopoverThreadlistContext.react")),C=r("useCommunityFolder")({parentThreadKey:(u||(u=o("I64"))).equal(g.threadType,(c||(c=o("LSIntEnum"))).ofNumber(17))?g.threadKey:g.parentThreadKey}),v=_(r("MWResponsiveLayoutContext.react")),S=v.pushCard,R=g.threadKey;o("Int64Hooks").useEffectInt64(function(){if(n("cr:2261")!=null)return y==null||y.add(R),function(){y==null||y.delete(R)}},[y,R]);var L=h({loggingTimeout:null,threadKey:(u||(u=o("I64"))).of_int32(-1)}),E=h(u.of_int32(-1)),k=_(r("MWPParentThreadKeyContext"));o("Int64Hooks").useEffectInt64(function(){if(k!=null){var e=(u||(u=o("I64"))).to_string(g.parentThreadKey),t=u.to_string(k);!(u||(u=o("I64"))).equal(E.current,R)&&g.folderName!==r("MessagingFolderTag").COMMUNITY&&e!==t&&r("FBLogger")("messenger_threadlist_folder_inconsistency").mustfix("Render thread item expected folder %s but receive %s",t,e)}b(g)?(u||(u=o("I64"))).equal(L.current.threadKey,R)||(L.current.threadKey=R,L.current.loggingTimeout=window.setTimeout(function(){r("FBLogger")("messenger_web").mustfix("Thread ID %s showing up as ghost",(u||(u=o("I64"))).to_string(R)),L.current.loggingTimeout=null},5e3)):(u||(u=o("I64"))).equal(L.current.threadKey,R)&&L.current.loggingTimeout!=null&&window.clearTimeout(L.current.loggingTimeout)},[k,g,R]);var I=o("Int64Hooks").useCallbackInt64(function(){o("MWCreatorMessagingUtils").isAPPlusMessageRequest(g)&&r("QPLUserFlow").start(r("qpl")._(421070823,"2981"),{annotations:{string:{entrypoint:o("MWCreatorMessagingUtils").fetchQPLEntrypoint(g)}},instanceKey:(u||(u=o("I64"))).to_int32(g.threadKey)}),r("mwCMIsThreadBumped")({secondaryParentThreadKey:g.secondaryParentThreadKey,threadType:g.threadType})&&o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_bumped:"true"},community_id:C?(u||(u=o("I64"))).to_string(C.folderId):(u||(u=o("I64"))).to_string(g.parentThreadKey),event:"thread_open",group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(C==null?void 0:C.fbGroupId)?(u||(u=o("I64"))).to_string(C.fbGroupId):null,source:"chat_row",surface:t==="jewel"?"jewel_tray":"messenger_inbox",thread_id:(u||(u=o("I64"))).to_string(R)}),p&&S(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL)},[g.secondaryParentThreadKey,g.threadType,g.parentThreadKey,C,t,R,p,S]);return(u||(u=o("I64"))).equal(g.threadType,(c||(c=o("LSIntEnum"))).ofNumber(6))?(u||(u=o("I64"))).equal(R,(c||(c=o("LSIntEnum"))).ofNumber(-13))?d.jsx(r("MWThreadListJobsItem.react"),{onClick:l,responsive:m,selected:p,size:56,thread:g}):n("cr:2261")!=null&&(u||(u=o("I64"))).equal(R,(c||(c=o("LSIntEnum"))).ofNumber(-12))?d.jsx(n("cr:2261"),{onClick:l,responsive:m,selected:p,size:56,thread:g}):n("cr:13568")!=null&&(u||(u=o("I64"))).equal(R,(c||(c=o("LSIntEnum"))).ofNumber(-18))?d.jsx(n("cr:13568"),{onClick:l,responsive:m,selected:p,size:56,thread:g}):null:d.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:d.jsx(r("MWThreadListGlimmer.react"),{parentComponentForDebug:"MWThreadListItem"}),name:"MWThreadListThreadListRow",children:d.jsx(o("MWPThreadIsPage.react").Provider,{threadKey:g.threadKey,children:d.jsx(o("MWThreadKey.react").MWThreadKeyProvider,{id:g.threadKey,children:d.jsx(r("CometTransientDialogProvider.react"),{children:d.jsx(r("MWThreadListItem.react"),{lsEntryPoint:t,lsSubEntryPoint:a,messagingEntrypoint:i,onClose:s,onThreadSelected:I,selected:p,showFollowUpReminder:f,size:56,thread:g})})})})})}S.displayName=S.name+" [from "+i.id+"]";var R=d.memo(S);function L(t){var n=t.gridLabel,a=t.filter,l=t.customThreadFilter,s=t.header,m=t.lsEntryPoint,b=t.onOpenMessageRequests,S=t.lsSubEntryPoint,L=t.parentThreadKey,k=t.responsive,I=t.selectedThreadKey,T=t.setHasScrolled,D=t.setIsEmptyInbox,x=t.threadListMessagingEntrypoint,$=t.onClose,P=$===void 0?r("emptyFunction"):$,N=t.onClickNestedFolderThread,M=N===void 0?r("emptyFunction"):N,w=t.preamble,A=(e||(e=r("useReStore")))(),F=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(A.tables.threads_ranges_v2__generated).getKeyRange(L)},[A,L],i.id+":375"),O=o("ReQLSuspense").useArray(function(){return o("MWPThreadsForThreadList").createIterable(A,L,F,["lastActivityTimestampMs","threadType"].concat(o("LSThreadBitOffset").threadCapabilityFields)).filter(function(e){return r("MWThreadListSupportedThreadTypes").some(function(t){return(u||(u=o("I64"))).equal(e.threadType,t)})?o("MWXacGating").isGroupsEnabled()?!0:!r("isMWXacGroupThread")(e):!1}).take(5)},[A,L,F],i.id+":388").pop(),B=f(),W=o("ReQLSuspense").useFirst(function(){return I!=null?o("ReQL").fromTableAscending(A.tables.threads,["parentThreadKey"]).getKeyRange(I):o("ReQL").empty()},[A,I],i.id+":414");C(B);var q=o("useGroupsCometIsInCCNegativeTest").useShouldDisableBumpToInboxForNegativeTest(),U=o("MWInboxFollowUps").useInboxFollowUps(A),V=U.computeInboxFollowUps,H=U.reminders,G=p(function(e){if(e==null)return d.jsx("div",{});if((u||(u=o("I64"))).equal(e.threadKey,y)){var t=r("gkx")("14196");if(!t)return d.jsx("div",{})}if(o("CurrentEnvironment").facebookdotcom&&r("mwCMIsThreadBumped")({secondaryParentThreadKey:e.secondaryParentThreadKey,threadType:e.threadType})&&q)return d.jsx("div",{});var n;return(u||(u=o("I64"))).equal(e.threadKey,(c||(c=o("LSIntEnum"))).ofNumber(-13))||(u||(u=o("I64"))).equal(e.threadKey,(c||(c=o("LSIntEnum"))).ofNumber(-12))||(u||(u=o("I64"))).equal(e.threadKey,(c||(c=o("LSIntEnum"))).ofNumber(-18))?n=W!=null&&(u||(u=o("I64"))).equal(e.threadKey,W.parentThreadKey):n=I!=null&&(u||(u=o("I64"))).equal(I,e.threadKey),e!=null?d.jsx(r("CometHideableComponentExperiment.react"),{callingSurface:"thread_list",disableHiding:!0,children:d.jsx(R,{lsEntryPoint:m==="inboxThreadList"?O!=null&&(u||(u=o("I64"))).le(e.lastActivityTimestampMs,O.lastActivityTimestampMs)?"inboxRecentThreads":"inboxRemainingThreads":m,lsSubEntryPoint:S,messagingEntrypoint:x!=null?x:"jewel",onClickNestedFolderThread:M,onClose:P,responsive:k,selected:n,showFollowUpReminder:H.find(function(t){return(u||(u=o("I64"))).equal(t,e.threadKey)})!=null,thread:e})}):d.jsx("div",{})},[m,O,x,M,P,k,W,I,q,H]),z=p(function(e){T&&T(function(t){return e.scrollTop>0})},[T]),j=r("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"threadlist_impression"}),K=h(null),Q=g(function(){return{rootElementRef:K}},[K]),X=p(function(e){var t;K.current=(t=e==null?void 0:e.getScrollAreaElement())!=null?t:null},[]),Y=p(function(e){return l!=null?l(e):!0},[l]),J=r("useMWGetInboxFocusTargetFromRoute")(),Z=J===1,ee=_(r("MWResponsiveLayoutContext.react")),te=o("MWResponsiveLayoutShowState").getCardShowState(o("MWResponsiveLayoutConstants").MWLayoutPanel.THREAD_LIST_PANEL,ee)==="hidden",ne=d.jsx(o("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xmz0i5r x6ikm8r x10wlt62",fallback:null,name:"MWThreadList",children:d.jsx(r("MWPParentThreadKeyContext").Provider,{value:L,children:d.jsx(r("VirtualizationContainerContext").Provider,{value:Q,children:d.jsx(r("MWPBaseThreadList.react"),{beforeContent:d.jsxs(d.Fragment,{children:[d.jsx(r("MWLSJewelMessageRequestsThreadContainer.react"),{onOpenMessageRequests:b}),w]}),customThreadFilter:Y,emptyContent:d.jsx(r("MWThreadListEmptyContainer.react"),{filter:a,parentThreadKey:L}),filter:a,gridLabel:n,imperativeRef:X,isHidden:te,onDataLoaded:V,onLoadMoreThreads:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.threadlist","load_more_threads"),r("CometVisualCompletion").addFirstMarkerPoint("threadListLoadMoreThreads")},onScroll:z,pageSize:15,parentThreadKey:L,renderItem:G,renderLoadingAnimation:function(t,n){var e=t==="onBottom"&&n>v;return d.jsxs("div",{children:[d.jsx(r("MWThreadListGlimmer.react"),{numberOfItems:2,parentComponentForDebug:"MWThreadListLoadingAnimation",vcIgnore:e}),d.jsx(r("CometHeroHoldTrigger.react"),{description:"ThreadListLoadingMoreItems."+t,hold:!e})]})},setIsEmptyInbox:D})})})});return d.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",id:B,ref:j,children:[s!=null?d.jsx(o("FocusRegion.react").FocusRegion,{children:s}):null,d.jsx(E,{autoFocusQuery:o("focusScopeQueries").tabbableScopeQuery,enabled:Z,children:d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:Z?o("focusScopeQueries").tabbableScopeQuery:void 0,recoverFocusQuery:o("focusScopeQueries").tabbableScopeQuery,recoverFocusStrategy:o("FocusRegionType").RecoverFocusStrategy.Nearest,children:ne})})]})}L.displayName=L.name+" [from "+i.id+"]";function E(e){var t=o("react-compiler-runtime").c(3),n=e.autoFocusQuery,a=e.children,i=e.enabled;if(!i)return a;var l;return t[0]!==n||t[1]!==a?(l=d.jsx(r("CometRouterFocusRegion.react"),{autoFocusQuery:n,children:a}),t[0]=n,t[1]=a,t[2]=l):l=t[2],l}l.default=L}),98);
__d("MWJewelNestedFolderThreadList.react",["CometScrollView.react","CometTopNavListDropdownCard.react","MWJewelNestedFolderThreadListHeader.react","MWThreadList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.folder,a=e.onClose,i=e.onReturn,l=e.title,u;t[0]!==i||t[1]!==l?(u=s.jsx(r("MWJewelNestedFolderThreadListHeader.react"),{onReturn:i,title:l}),t[0]=i,t[1]=l,t[2]=u):u=t[2];var c;t[3]!==l?(c=typeof l=="string"?l:l.toString(),t[3]=l,t[4]=c):c=t[4];var d;t[5]!==n||t[6]!==a||t[7]!==c?(d=s.jsx(r("MWThreadList.react"),{gridLabel:c,lsEntryPoint:"jewelNestedFolder",onClose:a,parentThreadKey:n,responsive:!1}),t[5]=n,t[6]=a,t[7]=c,t[8]=d):d=t[8];var m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("div",{className:"x1qx5ct2"}),t[9]=m):m=t[9];var p;return t[10]!==u||t[11]!==d?(p=s.jsx(r("CometTopNavListDropdownCard.react"),{useMaxHeight:!0,children:s.jsxs(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[u,d,m]})}),t[10]=u,t[11]=d,t[12]=p):p=t[12],p}l.default=u}),98);
__d("MWSearchLoggingTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Jewel:"jewel",Inbox:"inbox"});i.SearchSurface=e}),66);
__d("UniversalSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("843"),s=o("FalcoLoggerInternal").create("universal_search_query_changed",e),u=s;l.default=u}),98);
__d("UniversalSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("840"),s=o("FalcoLoggerInternal").create("universal_search_start",e),u=s;l.default=u}),98);
__d("MWJewelLightspeedSearchTypeaheadViewList.react",["CometScrollView.react","MWChatSearchLightspeedTypeaheadViewList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["xstyle"],s,u=s||(s=o("react")),c={scroll:{maxHeight:"x1wxkln1",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(10),a,i;n[0]!==t?(i=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i?(l=[c.scroll,i],n[3]=i,n[4]=l):l=n[4];var s;n[5]!==a?(s=u.jsx(r("MWChatSearchLightspeedTypeaheadViewList.react"),babelHelpers.extends({showActionItems:!1},a)),n[5]=a,n[6]=s):s=n[6];var d;return n[7]!==l||n[8]!==s?(d=u.jsx(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,xstyle:l,children:s}),n[7]=l,n[8]=s,n[9]=d):d=n[9],d}l.default=d}),98);
__d("MWJewelSearchEmptyState.react",["fbt","MWXText.react","react","react-compiler-runtime","useCometTypeaheadEmptyState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(3),n=e.queryString,a=r("useCometTypeaheadEmptyState")(),i;return t[0]!==a||t[1]!==n?(i=a?u.jsxs("div",{className:"xz9dl7a xpdmqnj xsag5q8 x1g0dm76",children:[u.jsx(r("MWXText.react"),{align:"center",type:"body2",children:s._(/*BTDS*/"Nothing found")}),u.jsx("br",{}),u.jsx(r("MWXText.react"),{align:"center",color:"tertiary",type:"body3",children:s._(/*BTDS*/"We couldn't find any matches for \"{query}.\" Try checking for typos or using complete words.",[s._param("query",n)])})]}):null,t[0]=a,t[1]=n,t[2]=i):i=t[2],i}l.default=c}),226);
__d("createMWJewelSearchTypeaheadViewStrategy.react",["CometTypeaheadProgressGlimmer.react","MWJewelLightspeedSearchTypeaheadViewList.react","MWJewelSearchEmptyState.react","MWJewelSearchTypeaheadViewItem.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE"],s,u=s||(s=o("react"));function c(t,n,o){return function(i){var a=i.ariaProps,l=i.entries,s=i.extraViewProps,c=i.highlightedEntry,d=i.isLoading,m=i.onAbandonTypeahead_DO_NOT_USE,p=babelHelpers.objectWithoutPropertiesLoose(i,e),_=l.length===0&&p.queryString.length>0,f=l.length>0&&d,g=l.length===0&&d&&p.queryString.length===0&&r("gkx")("20016");return g?u.jsx(r("CometTypeaheadProgressGlimmer.react"),{}):_?u.jsx(r("MWJewelSearchEmptyState.react"),{queryString:p.queryString}):u.jsxs(u.Fragment,{children:[u.jsx(r("MWJewelLightspeedSearchTypeaheadViewList.react"),{ariaProps:a,entries:l,highlightedEntry:c,xstyle:t,children:function(t){var e=t.entry,a=t.isActive,i=t.itemRole;return u.createElement(r("MWJewelSearchTypeaheadViewItem.react"),babelHelpers.extends({},p,{entry:e,extraViewItemProps:{loggingSessionId:n,onBeforeTokenAdded:o},isActive:a,key:e.key,role:i}))}}),f&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})}}l.default=c}),98);
__d("MWJewelSearchSubscriptionTypeahead.react",["fbt","BaseSubscriptionTypeahead.react","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWFacebookUserWithoutMessengerAccess","MWInboxRouteBuilder","MWLSSearchIssueSearchQuerySupportedTypes","MWLSThreadDisplayContext","MWPConversationSearchLogger","MWSearchLogging","MWSearchLoggingTypes","MWSearchQPLLogger","UniversalSearchEndFalcoEvent","UniversalSearchQueryChangedFalcoEvent","UniversalSearchStartFalcoEvent","cr:2012305","cr:8414","createMWJewelSearchTypeaheadViewStrategy.react","gkx","isArmadillo","react","useCometRouterDispatcher","useReStore","uuidv4","xplatToDOMRef"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onChange","onFocus","onPressEntry","onSelectFreeformQuery"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=m.useMemo,g=m.useRef,h=m.useState,y={searchInput:{marginTop:"x1xmf6yo",marginInlineEnd:"x14z9mp",marginBottom:"x1e56ztr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},searchView:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"xphu8jj",$$css:!0}},C=function(t){return r("createMWJewelSearchTypeaheadViewStrategy.react")(null,t)},b=r("gkx")("23390");function v(t){var a=t.onChange,i=t.onFocus,l=t.onPressEntry,c=t.onSelectFreeformQuery,m=babelHelpers.objectWithoutPropertiesLoose(t,e),v=h(null),S=v[0],R=v[1],L=g(null),E=(u||(u=r("useReStore")))(),k=g(!1),I=n("cr:8414")();_(function(){var e=L.current;return n("cr:2012305")!==null&&e!=null&&n("cr:2012305").trackTypingPerf(e,"MWJewelSearchTypeahead"),function(){n("cr:2012305")!==null&&e!=null&&n("cr:2012305").unregisterTypingPerf(e)}},[L]);var T=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),D=f(function(){return new(r("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:E,excludedIDs:[],includeGroupSearch:T!=="ChatTab",includeMessageSearchEntry:r("gkx")("5801"),includeRecommendations:!0,lightspeedSupportedTypes:o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,source:r("MWChatSearchSurfaces").universal})},[E,T]),x=p(function(){R(null),S!=null&&(k.current||(r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:8,is_epd:b,session_id:S,transport_type:null}}),k.current=!0)),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon"),a("")},[a,S]),$=r("useCometRouterDispatcher")(),P=p(function(e){var t=e.rawData.resultType;if(t===r("MWChatSearchResultType").MESSAGE&&e.rawData.query!=null&&r("gkx")("5801")){var n=o("MWInboxRouteBuilder").buildMultiThreadMesageSearchURL({search:e.rawData.query});$!=null&&n!=null&&(r("MWPConversationSearchLogger").logUniversalMessageSearch(),$.go(n,{}))}else I==null||I(e);var a=function(){l!=null&&l(e)};if(S==null){a();return}o("MWSearchLogging").logResultSelected(S,m.queryString,e,k),a()},[l,S,m.queryString,$,I]);_(function(){return function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon")}},[]);var N=p(function(){var e=r("uuidv4")();R(e),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:"",sessionInstanceId:e,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel}),k.current=!1,r("UniversalSearchStartFalcoEvent").log(function(){return{is_epd:b,search_surface:0,session_id:e}}),r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:"0",query_string:null,session_id:e}})},[E]),M=p(function(e){S!=null&&(r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:e.length.toString(),query_string:e,session_id:S}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:e,sessionInstanceId:S,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel})),a(e)},[a,S]),w=function(){i()},A=o("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),F=s._(/*BTDS*/"Search Messenger"),O=s._(/*BTDS*/"Search messages"),B=A?O:F;return d.jsx(r("BaseSubscriptionTypeahead.react"),{dataSource:D,dataSourceFetchConfigParams:r("isArmadillo")()?{requestFlow:"network-upon-approve"}:void 0,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputRef:o("xplatToDOMRef").xplatToInputRef(L),inputStartContent:S!=null?d.jsx(r("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:r("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:r("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onChange:M,onClose:x,onFocus:w,onOpen:N,onPressEntry:P,onSelectFreeformQuery:c,placeholder:B,queryString:m.queryString,shouldCloseOnEnter:!1,shouldHandleCloseAfterHandlePressEntry:!0,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:C(S),xstyles:{inputXStyle:y.searchInput,viewXStyle_DO_NOT_USE:y.searchView}})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),226);
__d("MWJewelThreadListSearchTypeahead.react",["CometRelay","FBLogger","I64","MWChatSearchFilteringUtils","MWChatSearchResultType","MWJewelSearchSubscriptionTypeahead.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWPSearchSystem","MWThreadCreationUtil","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","setTimeoutCometSpeculative","useCometPreloader","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useState;function f(t){var n=o("react-compiler-runtime").c(25),a=t.onClose,i=_(""),l=i[0],u=i[1],d=r("useMWChatOpenTabForGroup")("jewelSearch"),m=d[0],f=r("useMWChatOpenTabForPage")("jewelSearch"),h=r("useMWChatOpenTabForUser")("jewelSearch"),y=h.openTabByThreadKey,C=h.openTabForUserWithoutPreloadedNavigationData,b=(e||(e=r("useReStore")))(),v=o("CometRelay").useRelayEnvironment(),S;n[0]!==b?(S=function(){return o("MWPSearchSystem").makeAll(b)},n[0]=b,n[1]=S):S=n[1];var R=S,L;n[2]!==R?(L=function(){r("setTimeoutCometSpeculative")(R,1e4)},n[2]=R,n[3]=L):L=n[3],p(L,void 0);var E;n[4]!==b||n[5]!==v||n[6]!==y||n[7]!==C?(E=function(t,n){var e=o("MWChatSearchFilteringUtils").getIsE2ee(n.rawData);if(e)return y(t,!0);o("MWThreadCreationUtil").getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2(n,v,b).then(async function(e){var r=e.isSecureThread,a=e.reason;if(a==="default_e2ee")C({unpreloadedReason:"jewelsearch_not_support_gql",userId:t});else{var i,l,u,c,d=await b.tables.threads.get((s||(s=o("I64"))).of_string(t));C({isSecureThread:r,reason:"MWJewelThreadListSearchTypeahead, FBID: "+t+", reason: "+(a!=null?a:"")+", searchSource: "+((i=n.rawData.searchSource)!=null?i:"")+", otherUserId: "+((l=n.rawData.otherUserId)!=null?l:"")+", hasCutoverThread: "+((u=(c=n.rawData.hasCutoverThread)==null?void 0:c.toString())!=null?u:"false")+", threadAuthorityLevel: "+(d!=null?(s||(s=o("I64"))).to_string(d.authorityLevel):"null"),unpreloadedReason:"jewelsearch_not_support_gql",userId:t})}}).catch(g)},n[4]=b,n[5]=v,n[6]=y,n[7]=C,n[8]=E):E=n[8];var k=E,I;n[9]!==a||n[10]!==m||n[11]!==f||n[12]!==k?(I=function(t){var e=t.rawData,n=e.id,o=e.resultType;e:switch(o){case r("MWChatSearchResultType").MESSAGE:break e;case r("MWChatSearchResultType").GROUP:{m(n);break e}case r("MWChatSearchResultType").USER:case r("MWChatSearchResultType").AI_BOT:{k(n,t);break e}case r("MWChatSearchResultType").PAGE:f(n)}a()},n[9]=a,n[10]=m,n[11]=f,n[12]=k,n[13]=I):I=n[13];var T=I,D=r("useCometPreloader")("button_aggressive",r("emptyFunction"),R),x=D.onHoverInPreloader,$=D.onHoverMovePreloader,P=D.onHoverOutPreloader,N;n[14]!==R?(N=function(){o("MWLogInteraction").logPopoverOpenCancel("initiate_search"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_search"),R(),r("QPLUserFlow").start(r("qpl")._(25312244,"1683"))},n[14]=R,n[15]=N):N=n[15];var M;n[16]!==T||n[17]!==l||n[18]!==N?(M=c.jsx(r("MWJewelSearchSubscriptionTypeahead.react"),{onChange:u,onFocus:N,onPressEntry:T,queryString:l}),n[16]=T,n[17]=l,n[18]=N,n[19]=M):M=n[19];var w;return n[20]!==x||n[21]!==$||n[22]!==P||n[23]!==M?(w=c.jsx("div",{onMouseEnter:x,onMouseLeave:P,onMouseMove:$,children:M}),n[20]=x,n[21]=$,n[22]=P,n[23]=M,n[24]=w):w=n[24],w}function g(e){r("FBLogger")("messenger_search").mustfix("Error fetching contact capabilities: %s",e)}var h=c.memo(f);l.default=h}),98);
__d("CometMessagingJewelDropdownContent.react",["fbt","CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometMessagingJewelDropdownContentGlimmer.react","CometMessagingJewelDropdownEBUpsellContainer.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","CometTopNavListDropdownCard.react","FBLogger","I64","InteractionTracing","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSPlatformErrorsCatcher.react","LSThreadRangeFilter","MAWUnrecoverableErrorBoundary.react","MWCMJewelContext","MWEBEntrypointsKillswitch.enum","MWInboxContextSwitcherDeferred.react","MWInboxContextSwitcherGlimmer.react","MWInboxContextSwitcherUtils","MWJewelDropdownHeader.react","MWJewelMessengerLink.react","MWJewelNestedFolderThreadList.react","MWJewelPopoverDialogContext.react","MWJewelThreadListSearchTypeahead.react","MWThreadList.react","ODS","ReQL","ReQLSuspense","WebUXLoggingEntryPointContextProvider","XCometMessengerControllerRouteBuilder","cr:12528","emptyHook","gkx","lazyLoadComponent","qpl","react","react-compiler-runtime","useCometInteractionTracing","useMWChatSearchClearSearchResults","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p,_=p||(p=o("react")),f=p,g=f.memo,h=f.useCallback,y=f.useContext,C=f.useEffect,b=f.useState,v=(e=n("cr:12528"))!=null?e:r("emptyHook").thatReturnsEmptyFunction,S=r("lazyLoadComponent")(r("JSResourceForInteraction")("MAWJewelMessageRequestsAndSpamDropdownWithTab.react").__setRef("CometMessagingJewelDropdownContent.react")),R=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWRestrictedAccountsList.react").__setRef("CometMessagingJewelDropdownContent.react")),L=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWJewelArchivedChatsDropdown.react").__setRef("CometMessagingJewelDropdownContent.react")),E=r("lazyLoadComponent")(r("JSResourceForInteraction")("CometMessagingJewelDropdownErrorState.react").__setRef("CometMessagingJewelDropdownContent.react")),k=s._(/*BTDS*/"Chats");function I(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}var T=r("gkx")("22839")===!0;function D(e){var t=o("react-compiler-runtime").c(99),n=e.ebSoftblockUpsell,a=e.ebUpsellContainerQueryRef,l=e.onClose,p=e.pushPage,f=y(r("MWJewelPopoverDialogContext.react")),g=f.setIsOpenForDialog,h=r("useMWChatSearchClearSearchResults")(),E;t[0]!==h||t[1]!==l?(E=function(){h(),l()},t[0]=h,t[1]=l,t[2]=E):E=t[2];var D=E,$,P;t[3]!==h?($=function(){return h},P=[h],t[3]=h,t[4]=$,t[5]=P):($=t[4],P=t[5]),C($,P);var N;t[6]===Symbol.for("react.memo_cache_sentinel")?(N=r("XCometMessengerControllerRouteBuilder").buildURL({}),t[6]=N):N=t[6];var M=N,w;t[7]===Symbol.for("react.memo_cache_sentinel")?(w={entrypoint:r("MWEBEntrypointsKillswitch.enum").JEWEL_THREADLIST},t[7]=w):w=t[7];var A=v(w),F=y(r("MWCMJewelContext")),O=F.MWCMBlendedThreadListEntrypointRef,B=F.selectedFilterTab,W=F.setSelectedFilterTab,q=b(),U=q[0],V=q[1],H;t[8]===Symbol.for("react.memo_cache_sentinel")?(H=r("qpl")._(30610001,"3003"),t[8]=H):H=t[8];var G=r("useCometInteractionTracing")(H,"fast","INTERACTION"),z=(u||(u=r("useReStore")))(),j;t[9]!==z.tables._user_info?(j=function(){return o("ReQL").fromTableAscending(z.tables._user_info).map(x)},t[9]=z.tables._user_info,t[10]=j):j=t[10];var K;t[11]!==z?(K=[z],t[11]=z,t[12]=K):K=t[12];var Q=o("ReQLSuspense").useFirst(j,K,i.id+":159"),X;t[13]!==z.tables.contacts||t[14]!==Q?(X=function(){return Q!=null?o("ReQL").fromTableAscending(z.tables.contacts,["capabilities","capabilities2"]).getKeyRange(Q):o("ReQL").empty()},t[13]=z.tables.contacts,t[14]=Q,t[15]=X):X=t[15];var Y;t[16]!==z||t[17]!==Q?(Y=[z,Q],t[16]=z,t[17]=Q,t[18]=Y):Y=t[18];var J=o("ReQLSuspense").useFirst(X,Y,i.id+":163"),Z;t[19]!==D||t[20]!==p?(Z=function(){var e=r("InteractionTracing").startInteraction({interactionClass:"fast",qplEvent:r("qpl")._(30607516,"756"),tracePolicy:"comet.jewel.message_requests",traceType:"INTERACTION"});p(function(t){var n=t.onReturn;return _.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:_.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!1,title:k,withBackButton:!0}),name:"MAWJewelMessageRequestsAndSpamDropdownWithTab",children:_.jsx(S,{interactionID:e,onClose:D,onReturn:n})})})},t[19]=D,t[20]=p,t[21]=Z):Z=t[21];var ee=Z,te;t[22]!==ee||t[23]!==B?(te=o("MWInboxContextSwitcherUtils").shouldShowMessageRequestsFromFilter(B)?ee:void 0,t[22]=ee,t[23]=B,t[24]=te):te=t[24];var ne=te,re;t[25]!==D||t[26]!==p?(re=function(){p(function(e){var t=e.onReturn;return _.jsx(R,{hidePage:t,onClose:D})})},t[25]=D,t[26]=p,t[27]=re):re=t[27];var oe=re,ae;t[28]!==D||t[29]!==p?(ae=function(){(c||(c=o("ODS"))).bumpEntityKey(3185,"mw_jewel","archived_chats"),p(function(e){var t=e.onReturn;return _.jsx(L,{onClose:D,onReturn:t})})},t[28]=D,t[29]=p,t[30]=ae):ae=t[30];var ie=ae,le;t[31]!==D||t[32]!==p||t[33]!==J?(le=function(t){p(function(e){var n=e.onReturn;switch((d||(d=o("I64"))).to_int32(t)){case-13:return _.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:s._(/*BTDS*/"Jobs")});case-12:{var a=J!=null&&o("LSContactBitOffset").has(86,J),i=s._(/*BTDS*/"Marketplace");return a&&(i=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"6a9a0529abd169ff91b49b4022dbf5a5\",1]")),_.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:i})}default:return r("FBLogger")("messenger_web_entrypoints").mustfix("Attempted to show an unimplemented nested system folder"),null}})},t[31]=D,t[32]=p,t[33]=J,t[34]=le):le=t[34];var se=le,ue;t[35]!==n||t[36]!==a||t[37]!==B?(ue=_.jsx(r("CometMessagingJewelDropdownEBUpsellContainer.react"),{ebSoftblockUpsell:n,ebUpsellContainerQueryRef:a,selectedFilterTab:B}),t[35]=n,t[36]=a,t[37]=B,t[38]=ue):ue=t[38];var ce=ue,de;t[39]!==B?(de=o("MWInboxContextSwitcherUtils").getCustomThreadFilter(B),t[39]=B,t[40]=de):de=t[40];var me=de,pe;t[41]!==B?(pe=o("MWInboxContextSwitcherUtils").getParentThreadKeyFromFilter(B),t[41]=B,t[42]=pe):pe=t[42];var _e=pe,fe;t[43]!==n||t[44]!==B?(fe=n!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(B),t[43]=n,t[44]=B,t[45]=fe):fe=t[45];var ge=!fe,he;t[46]!==D||t[47]!==ie||t[48]!==ee||t[49]!==oe?(he=_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelDropdownHeader",children:_.jsx(r("MWJewelDropdownHeader.react"),{inboxUrl:M,onClose:D,onOpenArchivedChats:ie,onOpenMessageRequests:ee,onOpenRestrictedAccountsList:oe,title:k})}),t[46]=D,t[47]=ie,t[48]=ee,t[49]=oe,t[50]=he):he=t[50];var ye;t[51]===Symbol.for("react.memo_cache_sentinel")?(ye={className:"x1c4vz4f"},t[51]=ye):ye=t[51];var Ce;t[52]!==D||t[53]!==p?(Ce=_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelThreadListSearchTypeahead",children:_.jsx(r("MWJewelThreadListSearchTypeahead.react"),{onClose:D,pushPage:p})}),t[52]=D,t[53]=p,t[54]=Ce):Ce=t[54];var be;t[55]===Symbol.for("react.memo_cache_sentinel")?(be=_.jsx(r("MWInboxContextSwitcherGlimmer.react"),{}),t[55]=be):be=t[55];var ve;t[56]!==G||t[57]!==g||t[58]!==W?(ve=function(t){G(function(e){V(e.getTraceId())},void 0,void 0,"comet.jewel.messenger."+o("MWInboxContextSwitcherUtils").getTracePolicyFromFilter(t)),g(!1),W==null||W(t)},t[56]=G,t[57]=g,t[58]=W,t[59]=ve):ve=t[59];var Se;t[60]!==_e||t[61]!==B||t[62]!==ve?(Se=_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:be,name:"MWInboxContextSwitcher",children:_.jsx(r("MWInboxContextSwitcherDeferred.react"),{entryPoint:"jewel",onTabChange:ve,parentThreadKey:_e,selectedFilterTab:B})}),t[60]=_e,t[61]=B,t[62]=ve,t[63]=Se):Se=t[63];var Re;t[64]!==Ce||t[65]!==Se?(Re=_.jsxs("div",babelHelpers.extends({},ye,{children:[Ce,Se]})),t[64]=Ce,t[65]=Se,t[66]=Re):Re=t[66];var Le=ge&&ce,Ee;t[67]!==he||t[68]!==Re||t[69]!==Le?(Ee=_.jsxs(_.Fragment,{children:[he,Re,Le]}),t[67]=he,t[68]=Re,t[69]=Le,t[70]=Ee):Ee=t[70];var ke=Ee,Ie;t[71]!==B?(Ie=o("MWInboxContextSwitcherUtils").getJewelEntryPointFromFilter(B),t[71]=B,t[72]=Ie):Ie=t[72];var Te=Ie,De;t[73]!==B?(De=o("MWInboxContextSwitcherUtils").getJewelLsSubEntryPointFromFilter(B),t[73]=B,t[74]=De):De=t[74];var xe=De,$e;t[75]!==O||t[76]!==me||t[77]!==n||t[78]!==xe||t[79]!==se||t[80]!==D||t[81]!==ne||t[82]!==_e||t[83]!==B?($e=n!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(B)?_.jsx(_.Fragment,{children:n}):_.jsxs(_.Fragment,{children:[T&&(d||(d=o("I64"))).equal(B,(m||(m=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES))?_.jsx(r("CometPlaceholder.react"),{fallback:_.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0}),name:"CometMessagingJewelDropdownContent.MWCMBlendedThreadList",children:O!=null?_.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:O,props:{filter:B,gridLabel:k.toString(),header:null,lsEntryPoint:"jewel",lsSubEntryPoint:xe,onDropdownClose:D,onError:I,parentThreadKey:_e}}):null}):_.jsx(r("MWThreadList.react"),{customThreadFilter:me,filter:B,gridLabel:k.toString(),lsEntryPoint:"jewel",lsSubEntryPoint:xe,onClickNestedFolderThread:se,onClose:D,onOpenMessageRequests:ne,parentThreadKey:_e,responsive:!1},(d||(d=o("I64"))).to_string(B)),_.jsx(r("MWJewelMessengerLink.react"),{onClick:D,url:M})]}),t[75]=O,t[76]=me,t[77]=n,t[78]=xe,t[79]=se,t[80]=D,t[81]=ne,t[82]=_e,t[83]=B,t[84]=$e):$e=t[84];var Pe;t[85]!==ke||t[86]!==$e?(Pe=_.jsxs(r("CometTopNavListDropdownCard.react"),{testid:void 0,useFullHeight:!0,useMaxHeight:!0,children:[ke,$e]}),t[85]=ke,t[86]=$e,t[87]=Pe):Pe=t[87];var Ne=Pe,Me;t[88]===Symbol.for("react.memo_cache_sentinel")?(Me=_.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0,title:k}),t[88]=Me):Me=t[88];var we;t[89]!==U||t[90]!==B||t[91]!==Ne?(we=U!=null?_.jsx(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"JewelThreadList."+o("MWInboxContextSwitcherUtils").getInteractionDescFromFilter(B),interactionUUID:U,children:Ne}):Ne,t[89]=U,t[90]=B,t[91]=Ne,t[92]=we):we=t[92];var Ae;t[93]!==we||t[94]!==Te?(Ae=_.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:Te,children:we}),t[93]=we,t[94]=Te,t[95]=Ae):Ae=t[95];var Fe;return t[96]!==A||t[97]!==Ae?(Fe=_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:Me,name:"MWJewelDropdownContent",ref:A,children:Ae}),t[96]=A,t[97]=Ae,t[98]=Fe):Fe=t[98],Fe}function x(e){return e.facebookUserId}function $(e){var t=o("react-compiler-runtime").c(2),n=P,a;return t[0]!==e?(a=_.jsx(r("MAWUnrecoverableErrorBoundary.react"),{fallback:n,children:_.jsx(r("CometErrorBoundary.react"),{fallback:n,children:_.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:n,children:_.jsx(D,babelHelpers.extends({},e))})})}),t[0]=e,t[1]=a):a=t[1],a}function P(e){return _.jsx(E,{error:e})}P.displayName=P.name+" [from "+i.id+"]";var N=g($);l.default=N}),226);
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"10004682126249141",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometNotificationsBadgeCount.react",["fbt","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometPlaceholder.react","CometRelay","FBLogger","FDSNumberedBadge.react","hero-tracing","react","react-compiler-runtime","setupNotificationsLiveQuery","updateWidgetServiceWorker","useMaybeZeroNotificationsBadgeCount"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var a=o("react-compiler-runtime").c(14),i=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"}),l=i.viewer;if(l==null)throw r("FBLogger")("comet_feed").mustfixThrow("The viewer recieving these notifications cannot be null");var c=o("CometRelay").useFragment(u!==void 0?u:u=n("CometNotificationsBadgeCountFragment_viewer.graphql"),l),p=r("useMaybeZeroNotificationsBadgeCount")(c==null?void 0:c.notifications_unseen_count),_=t.isBadgeHidden,f=t.overflow,g=t.setBadgeCount,h=o("CometRelay").useRelayEnvironment(),y,C;a[0]!==h?(y=function(){var e=r("setupNotificationsLiveQuery")(h);return(function(){return e.dispose()})},C=[h],a[0]=h,a[1]=y,a[2]=C):(y=a[1],C=a[2]),m(y,C);var b,v;a[3]!==p||a[4]!==g?(b=function(){g&&g(p),r("updateWidgetServiceWorker")()},v=[p,g],a[3]=p,a[4]=g,a[5]=b,a[6]=v):(b=a[5],v=a[6]),m(b,v);var S;a[7]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsx("span",{}),a[7]=S):S=a[7];var R;a[8]!==p||a[9]!==_||a[10]!==f?(R=_!==!0&&p>0?d.jsx(o("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(t,n){return d.jsxs(d.Fragment,{children:[d.jsx(r("FDSNumberedBadge.react"),{accessibilityText:s._(/*BTDS*/"Number of unread notifications"),overflow:f,ref:t,testid:void 0,value:p}),d.jsx(n,{})]})}}):null,a[8]=p,a[9]=_,a[10]=f,a[11]=R):R=a[11];var L;return a[12]!==R?(L=d.jsx(r("CometPlaceholder.react"),{fallback:S,name:"FDSNumberedBadge",children:R}),a[12]=R,a[13]=L):L=a[13],L}l.default=p}),226);
__d("CometTopNavTabBadge.react",["fbt","FDSNumberedBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(12),n=e.testid,a=e.value,i=e.isBadgeHidden,l=e.isTab,d=e.overflow,m=e.setBadgeCount,p,_;if(t[0]!==m||t[1]!==a?(p=function(){m==null||m(a)},_=[a,m],t[0]=m,t[1]=a,t[2]=p,t[3]=_):(p=t[2],_=t[3]),c(p,_),i===!0||a===0)return null;var f=l===!0?"red":void 0,g;t[4]!==a?(g=s._(/*BTDS*/"_j{\"*\":\"{number} items\",\"_1\":\"1 item\"}",[s._plural(a,"number")]),t[4]=a,t[5]=g):g=t[5];var h;return t[6]!==f||t[7]!==d||t[8]!==g||t[9]!==n||t[10]!==a?(h=u.jsx(r("FDSNumberedBadge.react"),{accessibilityText:g,color:f,overflow:d,testid:void 0,value:a}),t[6]=f,t[7]=d,t[8]=g,t[9]=n,t[10]=a,t[11]=h):h=t[11],h}l.default=d}),226);
__d("FDSResizeFreeFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("580260"),20),u=e;l.default=u}),98);
__d("LSDatascriptEvaluatorDeferredForDisplay",["requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferredForDisplay")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferredForDisplay");function s(){return e.load()}l.default=s}),98);
__d("LSDedicatedMqttChannelDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSDedicatedMqttChannel").__setRef("LSDedicatedMqttChannelDeferred");l.default=e}),98);
__d("LSPlatformClientDeferred",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientDeferred"),s=o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e);l.default=s}),98);
__d("LSPlatformClientMaybeEagerly",["LSEagerlyLoadOnMessenger","cr:12301"],(function(t,n,r,o,a,i,l){"use strict";var e=o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(n("cr:12301"));l.default=e}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","react-compiler-runtime","setTimeout","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useRef,m=r("justknobx")._("1134"),p=r("justknobx")._("1135"),_=r("gkx")("24156");function f(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a=d(null),i=d(!1),l;t[0]!==n.tables.pending_tasks?(l=function(){var e=n.tables.pending_tasks.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.pending_tasks).take(m)),function(e){var t=e.length;if(t===m){if(a.current!=null)return;a.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),i.current=!0,_&&r("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",t,p)},p)}else r("clearTimeout")(a.current),i.current&&_&&r("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),i.current=!1})});return(function(){e()})},t[0]=n.tables.pending_tasks,t[1]=l):l=t[1];var s;return t[2]!==n?(s=[n],t[2]=n,t[3]=s):s=t[3],c(l,s),null}l.default=f}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","LSPlatformLogTooManyPendingTasksForS337085.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:r("LSPlatformLogTooManyPendingTasksForS337085.react")!=null&&s.jsx(r("LSPlatformLogTooManyPendingTasksForS337085.react"),{})}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("gkx")("20836")?u.Fragment:(e=n("cr:3921"))!=null?e:u.Fragment,d=c;l.default=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(r("MAWCondSetup.react"),{}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=s.jsx(r("MAWSetupWrapperOnce.react"),{setupComponent:a,children:n}),t[1]=n,t[2]=i):i=t[2],i}l.default=u}),98);
__d("LSPlatformClientProvider.react",["CometDOMOnlyBoundary.react","CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformErrorsCatcher.react","LSPlatformLsInitLog","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","react","react-compiler-runtime","useCurrentRoute"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u.useLayoutEffect;function m(t,n){var a=o("react-compiler-runtime").c(3),i;if(a[0]!==t||a[1]!==n){var l=(e||(e=r("LSSuspense"))).getOrSuspend(t);i=r("LSPlatformClientInstances").getOrInit(l,n,{fromReact:!0}),a[0]=t,a[1]=n,a[2]=i}else i=a[2];return i}function p(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.config,i=e.loadLSPlatformClient,l=r("useCurrentRoute")(),u=m(a,i),p,_;t[0]!==l?(p=function(){(l==null?void 0:l.routePath)!=null&&o("LSPlatformLsInitLog").addAnnotations({string:{routePath:l.routePath}})},_=[l],t[0]=l,t[1]=p,t[2]=_):(p=t[1],_=t[2]),d(p,_);var f;return t[3]!==n||t[4]!==u?(f=u!=null?c.jsx((s||(s=o("ReStoreProvider.react"))).ReStoreProvider,{db:u,children:n}):n,t[3]=n,t[4]=u,t[5]=f):f=t[5],f}function _(e){var t=o("react-compiler-runtime").c(14),n=e.children,a=e.config,i=e.errorFallback,l=e.loadLSPlatformClient,s=e.placeholder,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(r("LSPlatformClientProviderAddons.react"),{}),t[0]=u):u=t[0];var d;t[1]!==n||t[2]!==s?(d=c.jsx(r("CometPlaceholder.react"),{fallback:s,name:"LSPlatformClientProvider.UISuspense",children:n}),t[1]=n,t[2]=s,t[3]=d):d=t[3];var m;t[4]!==a||t[5]!==l||t[6]!==d?(m=c.jsxs(p,{config:a,loadLSPlatformClient:l,children:[u,d]}),t[4]=a,t[5]=l,t[6]=d,t[7]=m):m=t[7];var _;t[8]!==s||t[9]!==m?(_=c.jsx(r("MAWCondWrapper.react"),{children:c.jsx(r("CometPlaceholder.react"),{fallback:s,name:"LSPlatformClientProvider.ClientProvider",children:m})}),t[8]=s,t[9]=m,t[10]=_):_=t[10];var f;if(t[11]!==i||t[12]!==_){var g=c.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:i,children:_});f=c.jsx(r("CometDOMOnlyBoundary.react"),{children:g}),t[11]=i,t[12]=_,t[13]=f}else f=t[13];return f}l.default=_}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientMaybeEagerly","LSPlatformClientProvider.react","LSPlatformLsInitLog","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));async function u(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n=await r("LSPlatformClientMaybeEagerly").load();return o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.config,i=e.errorFallback,l=e.placeholder,c;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(c=s.jsx(r("LSPlatformClientProvider.react"),{config:a,errorFallback:i,loadLSPlatformClient:u,placeholder:l,children:n}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=c):c=t[4],c}l.default=c}),98);
__d("LSPlatformCometTransportMaybeEagerly",["CurrentMessengerUser","LSPlatformLsInitLog","Promise","cr:7497","cr:7499","cr:7500"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=n("Promise"))).all([n("cr:7500").load().then(function(e){return o("LSPlatformLsInitLog").addAnnotations({bool:{mqttRealtimeTransportLoaded:!0}}),e}),n("cr:7499").load().then(function(e){return o("LSPlatformLsInitLog").addAnnotations({bool:{dgwTransportLoaded:!0}}),e}),n("cr:7497").load().then(function(e){return o("LSPlatformLsInitLog").addAnnotations({bool:{dedicatedMqttChannelLoaded:!0}}),e})]).then(function(e){var t=e[0],n=e[1].LSPlatformDGWTransport,r=e[2];return{dgw:n,mqtt:function(n,a){return t(n,a,{getInstance:r.getInstance(o("CurrentMessengerUser").isLoggedInNow),shutdownAndClear:r.shutdownAndClear})}}})}l.default=s}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("LSPlatformGraphQLLightspeedRequestQuery.graphql");l.query=s}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){return o("CometRelay").fetchQuery(o("XPlatRelayEnvironment").getRelayEnvironment(),o("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:e,requestId:t,requestPayload:n,requestType:r},a!=null?a:void 0).toPromise().then(function(e){var t,n=e==null||(t=e.viewer)==null?void 0:t.lightspeed_web_request;if(n!=null)return babelHelpers.extends({dependencies:void 0},n)})}l.default=e}),98);
__d("LSPlatformMessengerConfig",["LSDatabaseSingleton","LSDatascriptEvaluatorDeferredForDisplay","LSDatascriptEvaluatorMaybeDeferred","LSPlatformCometTransportMaybeEagerly","LSPlatformGraphQLLightspeedRequest","LSPlatformLsInitLog","LSPlatformMessengerSyncParams","LSSuspense","LSVersion","ServerAppID","cr:3239","getMWLSRegion","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e=n("cr:3239"))!=null?e:r("LSPlatformGraphQLLightspeedRequest");function d(){return(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton}function m(){return r("LSPlatformCometTransportMaybeEagerly")().then(function(e){return function(t,n){return o("LSPlatformLsInitLog").addAnnotations({int:{syncChannel:t}}),t===3?e.dgw(r("LSVersion"),n):e.mqtt(r("LSVersion"),n)}})}function p(){return r("LSDatascriptEvaluatorMaybeDeferred")()}var _={appId:r("ServerAppID").app_id,eagerEvaluatorForInitSync:r("LSDatascriptEvaluatorDeferredForDisplay"),executeGraphQLLightSpeedRequest:r("gkx")("3889")?c:r("LSPlatformGraphQLLightspeedRequest"),getDb:d,getEval:p,platformName:"Messenger",realtimeUnderylingTransport:m,region:r("getMWLSRegion")(),schemaVersion:r("LSVersion"),sendHardcodedInitSync:!0,syncParams:r("LSPlatformMessengerSyncParams")},f=(s||(s=r("LSSuspense"))).makeWithValue(_);l.config=_,l.configEagerlyLoaded=f}),98);
__d("LSPlatformCometClientStartEagerly",["LSPlatformClientInstances","LSPlatformClientMaybeEagerly","LSPlatformLsInitLog","LSPlatformMessengerConfig"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n=await r("LSPlatformClientMaybeEagerly").load();return o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}function s(){try{r("LSPlatformClientInstances").getOrInit(o("LSPlatformMessengerConfig").config,e)}catch(e){return}}l.start=s}),98);
__d("LSPlatformDGWTransportDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformDGWTransport").__setRef("LSPlatformDGWTransportDeferred");l.default=e}),98);
__d("LSPlatformMqttRealtimeTransportDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSPlatformMqttRealtimeTransportDeferred");l.default=e}),98);
__d("MAWPreloadSecureMessagesDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWPreloadSecureMessages").__setRef("MAWPreloadSecureMessagesDeferred"),s=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.load().then(function(e){return e.preloadSecureMessagesByThreadKey.apply(e,n)})};l.preloadSecureMessagesByThreadKey=s}),98);
__d("MWCMChatTabNotificationsQPLLoggingUtils",["QPLE2E","QPLUserFlow","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(25298296,"1725"),s=r("qpl")._(25304846,"1726");function u(){var t=o("Random").uint32();return{logCancel:function(n){r("QPLUserFlow").endCancel(s,{annotations:{string:{cancelReason:n}},instanceKey:t})},logEventStreamReceived:function(o){o!=null&&r("QPLE2E").logPointDeprecated(e,"client:receive_event_stream",o,{action:2}),r("QPLUserFlow").start(s,{instanceKey:t})},logOpenChatTab:function(){r("QPLUserFlow").addPoint(s,"open_chat_tab",{instanceKey:t})},logOpenChatTabSuccess:function(){r("QPLUserFlow").endSuccess(s,{instanceKey:t})},logThreadLoaded:function(){r("QPLUserFlow").addPoint(s,"thread_loaded",{instanceKey:t})}}}l.createChatTabQPLLogger=u}),98);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recent_unread_count_with_e2ee",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatBadgeCountQuery",selections:t},params:{id:"9649973961748511",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("useMWJewelStartLoadingLogger",["CometBlendedInitialLoadTraceLog","qpl","react","react-compiler-runtime","useCometInteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState,m=r("qpl")._(30616158,"2565");function p(){var e=o("react-compiler-runtime").c(3),t=c(!1),n=d(),a=n[0],i=n[1],l=r("useCometInteractionTracing")(m,"slower","INTERACTION"),s,p;return e[0]!==l?(s=function(){t.current||(t.current=!0,l(function(e){r("CometBlendedInitialLoadTraceLog").logStart("mwj_badge",e.getInstanceKey(),e.getTrace()),i(e.getTraceId()),e.onVcMetricsComplete(function(t,n){r("CometBlendedInitialLoadTraceLog").logVc("mwj_badge",e.getInstanceKey(),t,n)}),e.onLog(_)},0))},p=[l],e[0]=l,e[1]=s,e[2]=p):(s=e[1],p=e[2]),u(s,p),a}function _(e,t){r("CometBlendedInitialLoadTraceLog").log("mwj_badge",t)}l.default=p}),98);
__d("useMWJewelStopLoadingLogger",["QPLEvent","interaction-tracing","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=r("qpl")._(30616158,"2565");function d(e,t,n){var a=o("react-compiler-runtime").c(5),i,l;a[0]!==t||a[1]!==e||a[2]!==n?(i=function(){n||r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(n){var r,a=n.getTrace();((r=a==null?void 0:a.completed)!=null?r:0)>0||n.getQPLEventMarkerId()===(s||(s=o("QPLEvent"))).getMarkerId(c)&&(n.addAnnotationInt("badgeCount",e),n.addAnnotationInt("badgeUnreadCount",t),e===0&&n.forceCompleteTrace())})},l=[n,e,t],a[0]=t,a[1]=e,a[2]=n,a[3]=i,a[4]=l):(i=a[3],l=a[4]),u(i,l)}l.default=d}),98);
__d("MWChatBadgeCount.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","HeroInteractionIgnoreWithDiv.react","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.react","hero-tracing","react","react-compiler-runtime","useMWJewelStartLoadingLogger","useMWJewelStopLoadingLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useEffect,p=d.useRef;function _(t){var a,i,l=o("react-compiler-runtime").c(12),u=t.overflow,d=t.setBadgeCount,_=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!1},{fetchPolicy:"store-or-network"}),f=((a=_.viewer)==null||(a=a.message_threads)==null?void 0:a.is_loading_client_threads)!==!1,g=(i=_.viewer)==null?void 0:i.message_threads,h=g!=null&&g.unseen_count!=null&&g.unseen_count>0?Math.min(o("MWChatBadgeCountUpdates.react").minSyncedThreads,g.unseen_count):0,y=g!=null&&g.recent_unread_count_with_e2ee!=null&&g.recent_unread_count_with_e2ee>0?Math.min(o("MWChatBadgeCountUpdates.react").minSyncedThreads,g.recent_unread_count_with_e2ee):0,C=p(null),b,v;l[0]!==h||l[1]!==d?(b=function(){d&&C.current!==h&&(C.current=h,d(h))},v=[h,d],l[0]=h,l[1]=d,l[2]=b,l[3]=v):(b=l[2],v=l[3]),m(b,v),r("useMWJewelStopLoadingLogger")(h,y,f);var S;l[4]!==h||l[5]!==u?(S=h>0?c.jsx(r("FDSNumberedBadge.react"),{accessibilityText:s._(/*BTDS*/"{count} Unread Chats",[s._param("count",h)]),overflow:u,testid:void 0,value:h,vcIgnore:!0}):null,l[4]=h,l[5]=u,l[6]=S):S=l[6];var R;l[7]!==f?(R=c.jsx(r("CometHeroHoldTrigger.react"),{description:"MessengerBadgeLoadingHold",hold:f}),l[7]=f,l[8]=R):R=l[8];var L;return l[9]!==S||l[10]!==R?(L=c.jsxs(c.Fragment,{children:[S,R]}),l[9]=S,l[10]=R,l[11]=L):L=l[11],L}function f(e){var t=o("react-compiler-runtime").c(7),n=e.overflow,a=e.setBadgeCount,i=r("useMWJewelStartLoadingLogger")(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("span",{}),t[0]=l):l=t[0];var s;t[1]!==n||t[2]!==a?(s=c.jsx(r("CometPlaceholder.react"),{fallback:l,name:"MWChatBadgeCount",children:c.jsx(_,{overflow:n,setBadgeCount:a})}),t[1]=n,t[2]=a,t[3]=s):s=t[3];var u;return t[4]!==i||t[5]!==s?(u=c.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:c.jsx(o("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MSGR_JEWEL_BADGE",interactionUUID:i,pageletName:"MessengerJewelBadge",children:s})}),t[4]=i,t[5]=s,t[6]=u):u=t[6],u}l.default=f}),226);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=r("FBLogger")("messenger_web_entrypoints");e!=null&&(t=t.catching(e)),t.debug("Error loading MWChatBadgeCountUpdater")}function d(){var t=o("react-compiler-runtime").c(1),a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(e||(e=r("ExecutionEnvironment"))).canUseDOM?u.jsx(r("CometErrorBoundary.react"),{onError:c,children:n("cr:4562")&&u.jsx(n("cr:4562"),{})}):null,t[0]=a):a=t[0],a}l.default=d}),98);
__d("MWChatConfig",["CurrentEnvironment","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273041")):r("bx").getURL(r("bx")("273022")),s=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273042")):r("bx").getURL(r("bx")("273023"));l.soundNotifMp3Url=e,l.soundNotifOggUrl=s}),98);
__d("MWChatHeadError.react",["fbt","CometHeroFailTrigger.react","CometHeroInteractionWithDiv.react","FDSCautionTriangleFilled24Icon","MWChatInteraction","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},d=s._(/*BTDS*/"Something went wrong while loading chat");function m(e){var t=o("react-compiler-runtime").c(7),n=e.contextRef,a=e.onPress,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MWChatInteraction").get(o("MWChatInteraction").MW_CHATHEADS_LOAD),l=u.jsx(r("CometHeroFailTrigger.react"),{description:"Error while loading chatheads",fail:!0}),t[0]=i,t[1]=l):(i=t[0],l=t[1]);var s=a==null,c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("MWXIcon_DEPRECATED.react"),{icon:r("FDSCautionTriangleFilled24Icon")}),t[2]=c):c=t[2];var m;return t[3]!==n||t[4]!==a||t[5]!==s?(m=u.jsxs(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:i,children:[l,u.jsx(r("MWXTooltip.react"),{align:"end",position:"above",tooltip:d,children:u.jsx(r("MWXPressable.react"),{"aria-label":d,disabled:s,display:"inline",onPress:a,ref:n,xstyle:p,children:c})})]}),t[3]=n,t[4]=a,t[5]=s,t[6]=m):m=t[6],m}function p(e){return[c.compose,c.dropShadow]}l.default=m}),226);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","react-compiler-runtime","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.contextRef,a=e.onPress,i=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=i?s.jsx("div",{className:"x1ey2m1c xtijo5x xixxii4",children:s.jsx("div",{className:"x191j7n5 xdg88n9 x10l6tqk",children:s.jsx(r("MWChatHeadError.react"),{contextRef:n,onPress:a})})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react",["CometErrorBoundary.react","CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","deferredLoadComponent","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsHandleRestoreWrapper.react").__setRef("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"));function c(e){return s.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return null},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"EncryptedBackupsHandleRestoreWrapper",children:s.jsx(u,babelHelpers.extends({},e))})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWChatStateV2IsComposeTab",["MWChatStateV2Types"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.tabType;return t.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab}l.isComposeTab=e}),98);
__d("MWChatStateV2HeadGroups",["MWChatStateV2CompareTabs","MWChatStateV2IsComposeTab","MWChatStateV2IsMinimized"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=Array.from(n.values()).filter(function(t){return o("MWChatStateV2IsMinimized").isMinimized(e,t)}).sort(function(e,t){var n=o("MWChatStateV2CompareTabs").byMostRecentMinimized(e,t);return n===0?o("MWChatStateV2CompareTabs").byMostRecentOpened(e,t):n}),i=t.filter(function(e){return!o("MWChatStateV2IsComposeTab").isComposeTab(e)}).concat(a);return[i.slice(0,r),i.slice(r,i.length)]}l.getHeadGroups=e}),98);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23885219097739619"}),null);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql",["MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsNotificationSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_notification_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"qpl_join_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t},params:{id:n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_notification_subscribe"},name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("MWChatTabsNotificationSubscription",["CometRelay","MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql");function u(e,t){return o("CometRelay").requestSubscription(e,{onNext:t,subscription:s,variables:{input:{}}})}l.subscribe=u}),98);
__d("MWChatThreadPingCounter",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n=e.get(t);return n!=null?n:0}function s(t){e.set(t,l(t)+1)}function u(){e.clear()}i.getCount=l,i.incrementCount=s,i.clear=u}),66);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferredWithEBCheck.react",["cr:9938"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:9938")}),98);
__d("MWFDSMarketplace.svg.react",["cr:21707"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21707")}),98);
__d("MWFallbackWithTimeout.react",["FBLogger","react","react-compiler-runtime","useTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(4),n=e.children,a=e.message,i=r("useTimeout")(1e4),l=i.pending,s,c;return t[0]!==a||t[1]!==l?(s=function(){l||r("FBLogger")("messenger_web_entrypoints","fallback_timeout").warn(a)},c=[a,l],t[0]=a,t[1]=l,t[2]=s,t[3]=c):(s=t[2],c=t[3]),u(s,c),n}l.default=c}),98);
__d("MWGetCurrentThreadIDForLSThread",["FBLogger","I64","LSIntEnum","mwCMIsAnyCMThread"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(a)return{NAME:"Page",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(7))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(16)))return{NAME:"UserSecret",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(13))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(201)))return{NAME:"User",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(5))||r("mwCMIsAnyCMThread")(n)||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(150))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(151))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(154))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(155))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(152))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(153))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(26)))return{NAME:"Group",VAL:(e||(e=o("I64"))).to_string(t)};throw r("FBLogger")("messenger_web_messaging").mustfixThrow("Unsupported MWMessagingThreadType %s",(e||(e=o("I64"))).to_string(n))}l.get=u}),98);
__d("MWNotificationRenderer.react",["fbt","I64","LSIntEnum"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(t,n,r,a,i){var l,c;if((e||(e=o("I64"))).equal(t.senderId,n))return s._(/*BTDS*/"New message");var d=(l=(c=i.nickname)!=null?c:a.firstName)!=null?l:a.name,m=r.threadName;return m!=null?s._(/*BTDS*/"{senderName} messaged {groupName}",[s._param("senderName",d),s._param("groupName",m)]):(e||(e=o("I64"))).equal(r.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))?s._(/*BTDS*/"{name} messaged your group",[s._param("name",d)]):s._(/*BTDS*/"{name} messaged you",[s._param("name",d)])}l.renderDocumentTitle=c}),226);
__d("MWLSChatPopperCommon",["CometSetBlinkingTitleMessageContext","CurrentUser","I64","MWChatConfig","MWChatSettingsQuery","MWNotificationRenderer.react","MWPIsThreadUnread","MessengerWebEventsFalcoEvent","ReQL","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=r("requireDeferred")("Sound").__setRef("MWLSChatPopperCommon");function p(e){var t=(s||(s=o("I64"))).to_string(e.senderId)!==r("CurrentUser").getID();t&&m.onReady(function(t){t.play([o("MWChatConfig").soundNotifOggUrl,o("MWChatConfig").soundNotifMp3Url],(s||(s=o("I64"))).to_float(e.timestampMs),!1)})}function _(e,t,n){var a=d(r("CometSetBlinkingTitleMessageContext"));return c(function(r,i,l,u){var c=o("MWNotificationRenderer.react").renderDocumentTitle(r,t,i,l,u);n.contents!=null&&n.contents(),n.contents=o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(i.threadKey).subscribe(function(e,t){if(t.operation==="add"||t.operation==="put"){var r=t.value;if(o("MWPIsThreadUnread").isThreadUnread(r))return;n.contents!=null&&n.contents(),n.contents=void 0,a(null,(s||(s=o("I64"))).to_float(r.lastReadWatermarkTimestampMs))}}),a(c,(s||(s=o("I64"))).to_float(r.timestampMs))},[t,n,e.tables.threads,a])}function f(e){o("MWChatSettingsQuery").areChatTabsSoundsOn(function(t){if(t!=null&&t)return p(e);r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message_sound"}})})}l.useUpdateDocumentTitle=_,l.playChatTabSound=f}),98);
__d("MWLSChatTabPolicy",["$InternalEnum","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWCMThreadTypes.react","MWChatSettingsQuery","MWGenAIUtils","MWPActor.react","MessagingFolderTag","MessengerWebEventsFalcoEvent","emptyFunction","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({ALLOW:0,DENY:1});function c(e,t,n){if(n===u.ALLOW)return e(t)}var d=function(t){return r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:t}}})},m=function(t){t(u.ALLOW)},p=function(n,r,a){(e||(e=o("I64"))).equal(r.senderId,a)?(d("message_outgoing"),n(u.DENY)):n(u.ALLOW)},_=function(t,n,a){if(r("gkx")("23433"))t(u.ALLOW);else{o("MWChatSettingsQuery").areChatTabsTurnedOff(function(e){e!=null&&e?(d("turn_off_chat_tab"),n!=null&&o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)&&a!=null&&a.logCancel("turn_off_chat_tab"),t(u.DENY)):t(u.ALLOW)});return}},f=function(n,r,a){var t=(e||(e=o("I64"))).to_float(r.muteExpireTimeMs);t>Date.now()||t<0?(d("mention_muted"),o("MWCMThreadTypes.react").isJoinedCMThread(r.threadType)&&a!=null&&a.logCancel("mention_muted"),n(u.DENY)):n(u.ALLOW)},g=function(t,n){n.isAdminMessage?(d("message_non_user_generated"),t(u.DENY)):t(u.ALLOW)},h=function(n,a){a.folderName===r("MessagingFolderTag").INBOX||(e||(e=o("I64"))).equal(a.parentThreadKey,(s||(s=o("LSIntEnum"))).ofNumber(-10))?n(u.ALLOW):(d("message_no_inbox"),n(u.DENY))},y=function(n,a){(e||(e=o("I64"))).equal(a.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))?n(u.ALLOW):(d("message_blocked_participants"),n(u.DENY))},C=function(t,n){o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)?(d("community_messaging_group_blocked"),t(u.DENY)):t(u.ALLOW)},b=function(t,n){var e=n.mentionTypes;e!=null&&"s".includes(e)?t(u.DENY):t(u.ALLOW)},v=function(t,n){r("gkx")("23433")&&n?t(u.DENY):t(u.ALLOW)},S=function(t,n){o("MWGenAIUtils").isMetaAIThread(n.threadKey)?t(u.DENY):t(u.ALLOW)},R=function(t){o("MWPActor.react").isAPPlus()?(d("viewer_is_ap_plus"),t(u.DENY)):t(u.ALLOW)},L=new Set(["1766237507597786"]),E=function(n,r){L.has((e||(e=o("I64"))).to_string(r.threadKey))?(d("thread_blocked"),n(u.DENY)):n(u.ALLOW)},k=function(t,n){if(t.length===0)return function(e){return c(n,r("emptyFunction"),e)};var e=t[0],o=babelHelpers.arrayLikeToArray(t).slice(1);return function(t){return c(e,k(o,n),t)}},I=function(t,n){var e=t[0],r=babelHelpers.arrayLikeToArray(t).slice(1);e(k(r,n))};function T(e,t,n,r,o,a){return I([function(){return m.apply(void 0,arguments)},function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return p.apply(void 0,n.concat([e,r]))},function(){return _.apply(void 0,arguments)},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h.apply(void 0,n.concat([t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,t.concat([n]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return C.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,t.concat([o]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S.apply(void 0,n.concat([e]))},function(){return R.apply(void 0,arguments)},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return E.apply(void 0,n.concat([t]))}],a)}function D(e,t,n,r){return I([function(){return m.apply(void 0,arguments)},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _.apply(void 0,r.concat([e,t]))},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return f.apply(void 0,r.concat([e,t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v.apply(void 0,t.concat([n]))},function(){return R.apply(void 0,arguments)}],r)}l.shouldMessageBeAllowed=T,l.shouldCommunityChatThreadPopup=D}),98);
__d("useMWChatOpenTabFromNewMessage",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionStore","MAWPreloadSecureMessagesDeferred","MWChatInteraction","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatStateV2IsClosed","MWChatStateV2Types","MWChatThreadId","MessengerWebEventsFalcoEvent","ODS","dispatchOpenChatTabTraceLogging","gkx","justknobx","loadChatTabEntryPoint","react","setTimeout","useAsyncReStore","useCometFeedNoRoutingNavigationEventLogger","useCometRelayEntrypointContextualEnvironmentProvider","useLazyShouldShowMessagingEntrypointInCometRoot","useMWChatOpenTabTraceProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e||(e=o("react"))).useCallback,m=new Set;function p(e,t){var n=t.withChatTabTracing,a=n===void 0?!1:n,i=r("useCometFeedNoRoutingNavigationEventLogger")(),l=o("MWChatStateV2.react").useDispatch(),p=r("useMWChatOpenTabTraceProvider")(),_=o("MWChatStateContext").useChatState(function(e){return e.tabs}),f=r("useLazyShouldShowMessagingEntrypointInCometRoot")("CHAT"),g=r("useCometRelayEntrypointContextualEnvironmentProvider")(),h=r("useAsyncReStore")();return d(function(t,n,d){i(Date.now(),"","messenger"),(s||(s=o("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_incoming"),r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab_from_new_message"}}),o("LSThreadAttributionStore").setSource(o("MWChatThreadId").getFBID(t),e);var y=Date.now();if(o("LSMessagingThreadTypeUtil").isArmadilloSecure(n.threadType)){var C=r("gkx")("14315")?8:r("justknobx")._("2038");h.then(function(e){return o("MAWPreloadSecureMessagesDeferred").preloadSecureMessagesByThreadKey(e,n.threadKey,C)})}var b=function(t){var e={clientThreadKey:void 0,threadKey:n.threadKey,threadType:n.threadType},a=r("loadChatTabEntryPoint")(g);r("dispatchOpenChatTabTraceLogging")(t,e,"useMWChatOpenTabFromNewMessage"),l(o("MWChatStateActions").openTabOrFlyout(y,{shouldFocus:!1},{threadKeyDescriptor:e,type:o("MWChatStateV2Types").MWChatStateTabType.ChatTab},a),!r("gkx")("24037"))},v=n.threadKey,S=Array.from(_.values()).find(function(e){if(e.tabType.type===o("MWChatStateV2Types").MWChatStateTabType.ChatTab){var t=e.tabType.threadKeyDescriptor.threadKey;return(u||(u=o("I64"))).equal(v,t)}}),R=S!=null?o("MWChatStateV2IsClosed").isClosed(S):!1,L=m.has((u||(u=o("I64"))).to_string(v)),E=a&&(S==null&&!L||S!=null&&R)&&f();return E?(m.add((u||(u=o("I64"))).to_string(v)),p({entrypoint:"notificationInThreadReply",threadKey:n.threadKey,threadType:(c||(c=o("LSIntEnum"))).unwrapIntEnum(n.threadType)},function(e,t){o("MWChatInteraction").set((u||(u=o("I64"))).to_string(n.threadKey),e),t.onComplete(function(){m.delete((u||(u=o("I64"))).to_string(v))}),b(t)})):b(),r("setTimeout")(function(){return l(o("MWChatStateActions").closeFlyout(y,n.threadKey))},3e3),d()},[i,e,_,a,l,p,f])}l.default=p}),98);
__d("MWLSCommunityChatPopper",["CometRelay","GroupsCometChatsEngagementLogger","I64","MWCMChatTabNotificationsQPLLoggingUtils","MWChatTabsNotificationSubscription","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MercuryIDs","ReQL","promiseDone","react","react-compiler-runtime","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useEffect,m={contents:void 0};function p(e,t){var n=o("react-compiler-runtime").c(8),a=o("MWLSChatPopperCommon").useUpdateDocumentTitle(e,t,m),i;n[0]!==e.tables.contacts||n[1]!==e.tables.participants||n[2]!==e.tables.threads||n[3]!==a?(i=function(n){r("promiseDone")(window.Promise.all([e.tables.threads.get(n.threadKey),e.tables.contacts.get(n.senderId),e.tables.participants.get(n.threadKey,n.senderId)]),function(e){var t=e[0],i=e[1],l=e[2];if(t!=null&&i!=null&&l!=null){a(n,t,i,l);var u=r("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(t.threadKey));if(o("MWChatThreadPingCounter").getCount(u)<3){o("MWChatThreadPingCounter").incrementCount(u),o("MWLSChatPopperCommon").playChatTabSound(n);return}}})},n[0]=e.tables.contacts,n[1]=e.tables.participants,n[2]=e.tables.threads,n[3]=a,n[4]=i):i=n[4];var l=i,u;return n[5]!==l||n[6]!==e.tables.messages?(u=function(n,a,i){var t={contents:_};t.contents=o("ReQL").fromTableAscending(e.tables.messages).getKeyRange((s||(s=o("I64"))).of_string(n),s.of_string(i),a).subscribe(function(e,n){if(n.operation==="add"){var r=n.value;t.contents(),l(r)}}),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.messages).getKeyRange(s.of_string(n),s.of_string(i),a)),function(e){e&&(t.contents(),l(e))})},n[5]=l,n[6]=e.tables.messages,n[7]=u):u=n[7],u}function _(){}function f(e){var t=o("react-compiler-runtime").c(9),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),m=r("CometRelay").useRelayEnvironment(),_=p(n,c),f=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),g=f.familyCenterData,h,y;t[2]!==m||t[3]!==g.hasActiveMsgrFamilyCenterEnforcement||t[4]!==u||t[5]!==n||t[6]!==_?(h=function(){var e=o("MWChatTabsNotificationSubscription").subscribe(m,function(e){var t=(e==null?void 0:e.messenger_chat_tabs_notification_subscribe)||{},a=t.message_id,i=t.message_timestamp,l=t.qpl_join_id,c=t.thread_id;if(!(c==null||i==null||a==null)){var d=o("MWCMChatTabNotificationsQPLLoggingUtils").createChatTabQPLLogger();d.logEventStreamReceived(l),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(c))),function(e){e!=null&&(d.logThreadLoaded(),o("MWLSChatTabPolicy").shouldCommunityChatThreadPopup(e,d,g.hasActiveMsgrFamilyCenterEnforcement,function(){var t=o("MWGetCurrentThreadIDForLSThread").get(e.threadKey,e.threadType,!1);d.logOpenChatTab(),u(t,e,function(){d.logOpenChatTabSuccess(),o("GroupsCometChatsEngagementLogger").log({action:"impression",event:"thread_open_auto",source:"auto_open_chat_tabs",surface:"auto_open_chat_tabs_container",thread_id:(s||(s=o("I64"))).to_string(e.threadKey)}),_(c,a,i)})}))})}});return(function(){e.dispose()})},y=[m,n,u,_,g.hasActiveMsgrFamilyCenterEnforcement],t[2]=m,t[3]=g.hasActiveMsgrFamilyCenterEnforcement,t[4]=u,t[5]=n,t[6]=_,t[7]=h,t[8]=y):(h=t[7],y=t[8]),d(h,y)}l.useOpenCommunityChatTabs=f}),98);
__d("MWXIconMarketplace",["MWXSvgIcon","SVGIcon","cr:22393","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22393")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadListMarketplaceItem.react",["fbt","CometMarketplaceLogger","LSContactBitOffset","LSIntEnum","MWPBumpEntityKey","MWThreadListFolderItem.react","MWXIconGroup","MWXIconMarketplace","MWXIconStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useLogMarketplaceClick","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var n=o("react-compiler-runtime").c(27),a=t.onClick,l=t.responsive,c=t.selected,p=t.size,g=t.thread,h=r("useLogMarketplaceClick")("marketplace_inbox_folder"),y=(e||(e=r("useReStore")))(),C;n[0]!==y.tables._user_info?(C=function(){return o("ReQL").fromTableAscending(y.tables._user_info).map(f)},n[0]=y.tables._user_info,n[1]=C):C=n[1];var b;n[2]!==y?(b=[y],n[2]=y,n[3]=b):b=n[3];var v=o("ReQLSuspense").useFirst(C,b,i.id+":51"),S;n[4]!==y.tables.contacts||n[5]!==v?(S=function(){return v!=null?o("ReQL").fromTableAscending(y.tables.contacts,[].concat(o("LSContactBitOffset").contactCapabilityFields)).getKeyRange(v):o("ReQL").empty()},n[4]=y.tables.contacts,n[5]=v,n[6]=S):S=n[6];var R;n[7]!==y||n[8]!==v?(R=[y,v],n[7]=y,n[8]=v,n[9]=R):R=n[9];var L=o("ReQLSuspense").useFirst(S,R,i.id+":56"),E=L!=null&&o("LSContactBitOffset").has(86,L),k;n[10]===Symbol.for("react.memo_cache_sentinel")?(k=[],n[10]=k):k=n[10],m(_,k);var I;n[11]===Symbol.for("react.memo_cache_sentinel")?(I=s._(/*BTDS*/"Marketplace").toString(),n[11]=I):I=n[11];var T=I,D=r("MWXIconMarketplace");if(E===!0){var x;n[12]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"3a9a1e192465754ec4427995fe1cffb4\",1]").toString(),n[12]=x):x=n[12],T=x,D=r("MWXIconGroup")}var $;n[13]!==D?($=d.jsx(r("MWXIconStrict.react"),{color:"primary",icon:D,size:36}),n[13]=D,n[14]=$):$=n[14];var P;n[15]!==h||n[16]!==a?(P=function(){return h(),a((u||(u=o("LSIntEnum"))).ofNumber(-12)),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","marketplace_threads")},n[15]=h,n[16]=a,n[17]=P):P=n[17];var N;n[18]===Symbol.for("react.memo_cache_sentinel")?(N=(u||(u=o("LSIntEnum"))).ofNumber(-12),n[18]=N):N=n[18];var M;return n[19]!==l||n[20]!==c||n[21]!==p||n[22]!==$||n[23]!==P||n[24]!==g||n[25]!==T?(M=d.jsx(r("MWThreadListFolderItem.react"),{icon:$,onClick:P,responsive:l,selected:c,size:p,systemFolder:N,thread:g,threadName:T}),n[19]=l,n[20]=c,n[21]=p,n[22]=$,n[23]=P,n[24]=g,n[25]=T,n[26]=M):M=n[26],M}function _(){return o("CometMarketplaceLogger").logImpression("marketplace_inbox_folder")}function f(e){return e.facebookUserId}l.default=p}),226);
__d("MWV2ChatHeadsLayout.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x191j7n5 xdg88n9 x10l6tqk x1useyqa"},t[0]=a):a=t[0];var i;return t[1]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{children:r})),t[1]=r,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWV2ChatOptionsHead.react",["fbt","FDSDots3HorizontalFilled20Icon","MWXDeferredPopoverTrigger.react","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useState,d=r("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.react"),m={head:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i",width:"x14qfxbe",":hover_boxShadow":"x19xcq9t",$$css:!0},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh",$$css:!0}},p=s._(/*BTDS*/"Options");function _(e){var t=o("react-compiler-runtime").c(11),n=e.isVisible,a=e.openTabCount,i=e.style,l=c(!1),s=l[0],_=l[1],f=c(!1),g=f[0],h=f[1],y=c(!1),C=y[0],b=y[1],v=a>0,S;t[0]!==v?(S={hasOpenTabs:v},t[0]=v,t[1]=S):S=t[1];var R;t[2]!==g||t[3]!==s||t[4]!==C||t[5]!==n||t[6]!==i?(R=function(t,o){return u.jsx("div",{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p xc9qbxq xrr41r3 x10l6tqk x14qfxbe",style:i,children:u.jsx("div",{className:"x6s0dn4 xjbqb8w x78zum5 xnnlda6 xl56j7k x1kovpyh xhsvlbd x1dmp6jm","data-testid":void 0,onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return _(!1)},children:u.jsx(r("MWXPressable.react"),{label:p,onFocusChange:function(t){return h(t)},onPress:o,ref:t,testid:void 0,xstyle:function(){return[m.head,n||s||g||C?m.headVisible:!1]},children:u.jsx(r("MWXTooltip.react"),{align:"middle",position:"start",tooltip:p,children:u.jsx(r("MWXIcon_DEPRECATED.react"),{icon:r("FDSDots3HorizontalFilled20Icon")})})})})})},t[2]=g,t[3]=s,t[4]=C,t[5]=n,t[6]=i,t[7]=R):R=t[7];var L;return t[8]!==S||t[9]!==R?(L=u.jsx(r("MWXDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:b,popoverProps:S,popoverResource:d,position:"above",children:R}),t[8]=S,t[9]=R,t[10]=L):L=t[10],L}l.default=_}),226);
__d("useMWV2PreloadComposeTab",["JSResourceForInteraction","JSScheduler","react","react-compiler-runtime","useCometPreloader"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback,c=r("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("useMWV2PreloadComposeTab");function d(){var e=o("react-compiler-runtime").c(3),t=m,n=r("useCometPreloader")("button",t,t),a=n.onHoverInPreloader,i=n.onHoverOutPreloader,l;return e[0]!==a||e[1]!==i?(l=[a,i],e[0]=a,e[1]=i,e[2]=l):l=e[2],l}function m(){(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(p)}function p(){c.preload()}l.default=d}),98);
__d("MWV2ComposeHead.react",["fbt","FDSComposeFilled20Icon","FDSIcon.react","LSThreadAttributionStore","MWChatInteraction","MWChatStateV2.react","MWChatStateV2Types","MWPBumpEntityKey","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","react","react-compiler-runtime","useMWNewChatOpenTabTraceProvider","useMWV2PreloadComposeTab"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={button:{alignItems:"x6s0dn4",appearance:"xjyslct",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x3nfvp2",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",":hover_boxShadow":"x19xcq9t",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(16),n=e.onFocusChange,a=e.onHoverChange,i=o("MWChatStateV2.react").useDispatch(),l=r("MessengerWebUXLogger").useInteractionLogger(),c=r("useMWNewChatOpenTabTraceProvider")(),d;t[0]!==i||t[1]!==l||t[2]!==c?(d=function(){c(function(e){o("MWChatInteraction").set("open_new",e),l==null||l({eventName:"create_thread"}),o("LSThreadAttributionStore").setSourceForNewThread("chatheadsNewMessage"),o("MWPBumpEntityKey").bumpEntityKey("comet.sidebar","compose_head_click");var t=Date.now(),n=function(n){return{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:n.closeWatermark,doNotBlockWithEBUpsell:!0,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:t,tabId:n.tabId,tabType:n.tabType}},r=function(n){var e=n.openWatermark<n.closeWatermark;return e?{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:n.closeWatermark,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:t,tabId:n.tabId,tabType:n.tabType}:{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:t,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:n.openWatermark,tabId:n.tabId,tabType:n.tabType}};return i([{inserter:n,tabConfig:{shouldFocus:!0},tabType:{initialTokens:[],secureThreadToggleEnabled:!1,type:o("MWChatStateV2Types").MWChatStateTabType.ComposeTab},type:o("MWChatStateV2Types").MWChatStateActionsType.UpsertTab,updater:r}])},"chatheadsNewMessage")},t[0]=i,t[1]=l,t[2]=c,t[3]=d):d=t[3];var p=d,_=r("useMWV2PreloadComposeTab")(),f=_[0],g=_[1],h,y,C,b,v;t[4]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"New message"),h=r("MWXTooltip.react"),C="middle",b="start",v=y.toString(),t[4]=h,t[5]=y,t[6]=C,t[7]=b,t[8]=v):(h=t[4],y=t[5],C=t[6],b=t[7],v=t[8]);var S;t[9]===Symbol.for("react.memo_cache_sentinel")?(S=u.jsx(r("FDSIcon.react"),{color:"primary",icon:r("FDSComposeFilled20Icon"),size:20}),t[9]=S):S=t[9];var R;return t[10]!==f||t[11]!==g||t[12]!==n||t[13]!==a||t[14]!==p?(R=u.jsx(h,{align:C,position:b,tooltip:v,children:u.jsx(r("MWXPressable.react"),{"aria-label":y,onFocusChange:n,onHoverChange:a,onHoverIn:f,onHoverOut:g,onPress:p,role:"button",testid:void 0,xstyle:m,children:S})}),t[10]=f,t[11]=g,t[12]=n,t[13]=a,t[14]=p,t[15]=R):R=t[15],R}function m(){return[c.button]}l.default=d}),226);
__d("useMWV2MaxChatHeadsCount",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";var e=5;function s(){var t=r("useCometRouterState")();if(t!=null){var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;if(a.route.tracePolicy==="comet.reels.unified.player")return 1}return e}l.default=s}),98);
__d("MWV2ChatHeads.react",["CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometPlaceholder.react","I64","JSResourceForInteraction","MWChatInteraction","MWChatStateContext","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPActor.react","MWV2ChatHeadsLayout.react","MWV2ChatOptionsHead.react","MWV2ComposeHead.react","WebUXLoggingEntryPointContextProvider","lazyLoadComponent","react","react-compiler-runtime","useMWChatStateV2MaxTabCount","useMWV2MaxChatHeadsCount"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useState,d=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatHead.react").__setRef("MWV2ChatHeads.react")),m=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatOverflowHead.react").__setRef("MWV2ChatHeads.react"));function p(e){return{transform:"translateY(-"+Math.imul(e,58)+"px)"}}function _(e){return{transform:"translateY(-"+(Math.imul(e,58)-12)+"px"}}function f(e){var t=o("react-compiler-runtime").c(27),n=e.isMediaViewer,a=r("useMWV2MaxChatHeadsCount")(),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MWPActor.react").isAPPlus(),t[0]=i):i=t[0];var l=i,f=o("MWChatStateContext").useChatState(y),C=f[0],b=f[1],v=f[2],S=r("useMWChatStateV2MaxTabCount")(n),R=o("MWChatStateV2TabGroups").getTabGroups(v,C,b,S),L=R.openExcessTabs,E=R.openTabs,k=o("MWChatStateV2HeadGroups").getHeadGroups(n?v:void 0,L,C,a),I=k[0],T=k[1],D=E.length,x=I.length,$=T.length>0?1:0,P=c(!1),N=P[0],M=P[1],w,A=T[0];if(T.length===1&&A.tabType.type!==o("MWChatStateV2Types").MWChatStateTabType.ComposeTab){var F=A.tabType.threadKeyDescriptor,O=(s||(s=o("I64"))).to_string(F.threadKey),B;t[1]===Symbol.for("react.memo_cache_sentinel")?(B=p(1),t[1]=B):B=t[1],w=u.jsx(r("CometErrorBoundary.react"),{fallback:h,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ExcessHeads",children:u.jsx(d,{onFocusChange:M,onHoverChange:M,style:B,tab:T[0],threadKeyDescriptor:F})})},O)}else if(T.length>1){var W;t[2]===Symbol.for("react.memo_cache_sentinel")?(W=p(1),t[2]=W):W=t[2],w=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatOverflowHead",children:u.jsx(m,{excessHeads:T,onActiveChange:M,style:W})})}var q=o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,U="chat_heads",V=r("CometHeroInteractionWithDiv.react"),H="Comet initial load to chatheads VC",G;t[3]===Symbol.for("react.memo_cache_sentinel")?(G=o("MWChatInteraction").get(o("MWChatInteraction").MW_CHATHEADS_LOAD),t[3]=G):G=t[3];var z=r("MWV2ChatHeadsLayout.react"),j;t[4]!==x||t[5]!==N||t[6]!==D||t[7]!==$?(j=r("MWV2ChatOptionsHead.react")!=null&&D+x>=2?u.jsx(r("MWV2ChatOptionsHead.react"),{isVisible:N,openTabCount:D,style:_(x+$+1)}):null,t[4]=x,t[5]=N,t[6]=D,t[7]=$,t[8]=j):j=t[8];var K;t[9]!==$||t[10]!==M?(K=function(t,n){var e=t.tabType;if(e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;var a=n+$+1;return u.jsx(r("CometErrorBoundary.react"),{fallback:g,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatHead",children:u.jsx(d,{onFocusChange:M,onHoverChange:M,style:p(a),tab:t,threadKeyDescriptor:e.threadKeyDescriptor})})},(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.threadKey))},t[9]=$,t[10]=M,t[11]=K):K=t[11];var Q=I.reverse().map(K),X;t[12]!==M?(X=!l&&u.jsx(r("MWV2ComposeHead.react"),{onFocusChange:M,onHoverChange:M}),t[12]=M,t[13]=X):X=t[13];var Y;t[14]!==z||t[15]!==w||t[16]!==j||t[17]!==Q||t[18]!==X?(Y=u.jsxs(z,{children:[j,Q,w,X]}),t[14]=z,t[15]=w,t[16]=j,t[17]=Q,t[18]=X,t[19]=Y):Y=t[19];var J;t[20]!==V||t[21]!==G||t[22]!==Y?(J=u.jsx(V,{interactionDesc:H,interactionUUID:G,children:Y}),t[20]=V,t[21]=G,t[22]=Y,t[23]=J):J=t[23];var Z;return t[24]!==q||t[25]!==J?(Z=u.jsx(q,{value:U,children:J}),t[24]=q,t[25]=J,t[26]=Z):Z=t[26],Z}function g(){return null}function h(){return null}function y(e){return[e.tabs,e.focusedTabId,e.mediaViewerOpenWatermark]}l.MWV2ChatHeads=f}),98);
__d("MWV2ChatTabRootLoaderDeferred.react",["deferredLoadComponent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferred")("MWV2ChatTabRootLoader.react").__setRef("MWV2ChatTabRootLoaderDeferred.react")),s=e;l.default=s}),98);
__d("MWV2ChatTabsLayout.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"xpqajaz x1ey2m1c x78zum5 x1jndppq xixxii4 x1vjfegm"},t[0]=a):a=t[0];var i;return t[1]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{"data-testid":void 0,children:r})),t[1]=r,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWV2ChatTabs.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","FocusRegion.react","HeroInteractionIgnoreWithDiv.react","I64","JSResourceForInteraction","MAWEditMessageContext.react","MWChatInteraction","MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPReplyContext.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2ChatTabRootLoaderDeferred.react","MWV2ChatTabsLayout.react","MWV2EnsureThatChatTabExists","MWV2IsTabFocusedContext.react","cr:7101","gkx","hero-tracing","lazyLoadComponent","react","react-compiler-runtime","useCometDisplayTimingTrackerForInteraction","useMWChatStateV2MaxTabCount","useMWV2MaxChatHeadsCount"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=n("cr:7101")||{},d=c.MWComposerKeyCommandFocusManager,m=c.MWComposerKeyCommandFocusManagerTabIndex,p=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("MWV2ChatTabs.react")),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("MWV2ChatTabs.react"));function f(e){var t=o("react-compiler-runtime").c(8),n=e.isMinimized,a=e.tab,i=e.threadKeyDescriptor;o("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(i.threadKey,i.threadType,i.clientThreadKey,"MWV2ChatTabs");var l=r("gkx")("16508");if(l===!0){var s;return t[0]!==n||t[1]!==a||t[2]!==i?(s=u.jsx(r("MWV2ChatTabRootLoaderDeferred.react"),{isMinimized:n,tab:a,threadKeyDescriptor:i}),t[0]=n,t[1]=a,t[2]=i,t[3]=s):s=t[3],s}var c;return t[4]!==n||t[5]!==a||t[6]!==i?(c=u.jsx(_,{isMinimized:n,tab:a,threadKeyDescriptor:i}),t[4]=n,t[5]=a,t[6]=i,t[7]=c):c=t[7],c}function g(e){var t=o("react-compiler-runtime").c(4),n=e.isMediaViewer,a=o("MWChatStateContext").useChatState(b),i=a[0],l=a[1],s=a[2],c=r("useMWChatStateV2MaxTabCount")(n),_=o("MWChatStateV2TabGroups").getTabGroups(n?s:void 0,i,l,c),g=_.minimizedTabs,S=_.openExcessTabs,R=_.openTabs,L=r("useMWV2MaxChatHeadsCount")(),E=o("MWChatStateV2HeadGroups").getHeadGroups(n?s:void 0,S,i,L),k=E[1],I=r("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0),T=g.filter(function(e){return!k.includes(e)}).filter(C),D=[].concat(R,T,S).sort(o("MWChatStateV2CompareTabs").byMostRecentOpened),x=D.map(function(e,t){var n=l===e.tabId,a=e.tabType,i,s=R.indexOf(e)===-1;a.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab?i=u.jsx(p,{initialTokens:a.initialTokens,tab:e},a.initialTokens.map(y).join()):i=u.jsx(f,{isMinimized:s,tab:e,threadKeyDescriptor:a.threadKeyDescriptor});var c=u.jsx(o("FocusRegion.react").FocusRegion,{autoRestoreFocus:!0,children:u.jsx(o("MWV2IsTabFocusedContext.react").MWV2IsTabFocusedContextProvider,{isFocused:n,children:u.jsx(o("MWPReplyContext.react").MWPReplyContextProvider,{children:u.jsx(o("MAWEditMessageContext.react").MAWEditMessageContext,{children:u.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:u.jsx(o("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MWV2_CHAT_TAB",interactionUUID:v(e.tabType),pageletName:"ChatTab",ref:I,children:u.jsx(r("CometPlaceholder.react"),{fallback:s?null:u.jsx(r("MWV2ChatTabLoadingWithGlimmers.react"),{tab:e}),name:"MWV2ChatTabs",children:i})})})})})})});return u.jsx(r("CometErrorBoundary.react"),{fallback:h,children:m==null?c:u.jsx(m,{value:t,children:c})},String(e.tabId))}),$;t[0]!==x?($=d==null?x:u.jsx(d,{children:x}),t[0]=x,t[1]=$):$=t[1];var P;return t[2]!==$?(P=u.jsx(r("MWV2ChatTabsLayout.react"),{children:$}),t[2]=$,t[3]=P):P=t[3],P}function h(){return null}function y(e){return e.id}function C(e){return e.isPreloaded!==!0||e.openWatermark>0}function b(e){return[e.tabs,e.focusedTabId,e.mediaViewerOpenWatermark]}function v(e){if(e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;var t=(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.threadKey),n=o("MWChatInteraction").get(t);return n==null&&r("FBLogger")("messenger_web").warn("Could not find interaction UUID for thread key %s, client thread key %s",t,e.threadKeyDescriptor.clientThreadKey?(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.clientThreadKey):"<empty>"),n}l.default=g}),98);
__d("useMWLSChatPopperUpper",["FBLogger","I64","JSResourceForInteraction","LSContactType","LSIntEnum","MWChatMessagesOnChatTabLoadTracker","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MWXacGating","MercuryIDs","ReQL","ServerTime","VisibilityAPI","clearInterval","gkx","isMWXacGroupThread","isMessengerPWA","justknobx","promiseDone","react","react-compiler-runtime","requireDeferred","setInterval","useGlobalEventListener","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useRef,p=r("requireDeferred")("MWDesktopNotifications").__setRef("useMWLSChatPopperUpper"),_=r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("useMWLSChatPopperUpper"),f=r("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("useMWLSChatPopperUpper"),g={contents:void 0};function h(e,t,n,a,i,l,c,d,m,g,h){h===void 0&&(h=o("MWLSChatTabPolicy").shouldMessageBeAllowed);var y=o("MWGetCurrentThreadIDForLSThread").get(a.threadKey,a.threadType,(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE))||(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE_PERSONA)));return h(n,a,i,d,m,function(){var u=r("gkx")("16508");u===!0?r("promiseDone")(f.load()):r("promiseDone")(_.load());var d=o("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(a.threadKey));return o("MWChatMessagesOnChatTabLoadTracker").trackReceivedFor(a.threadKey),e(y,a,function(){if(c(n,a,i,l),o("VisibilityAPI").isVisibilityHidden()===!0){var e=r("isMessengerPWA")()&&r("justknobx")._("1465");e&&r("promiseDone")((async function(){var e=await p.load(),r=e.triggerLocalNotification;await r(t,n,g)})())}if(o("MWChatThreadPingCounter").getCount(d)<3){o("MWChatThreadPingCounter").incrementCount(d),o("MWLSChatPopperCommon").playChatTabSound(n);return}})})}function y(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c==null){r("FBLogger")("messenger_web_entrypoints").mustfix("Thread is null when receiving a new message");return}if(d!=null&&m!=null)return h(i,s,o,c,d,m,u,t,n,a,l)})}function C(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c!=null&&d!=null&&m!=null&&!r("isMWXacGroupThread")(c))return h(i,s,o,c,d,m,u,t,n,a,l)})}function b(e){var t=o("react-compiler-runtime").c(11),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),p=o("MWLSChatPopperCommon").useUpdateDocumentTitle(n,c,g),_;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=o("ServerTime").getMillis(),t[2]=_):_=t[2];var f=m(_),h=r("useMWNavigation")(),b=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),v=b.familyCenterData,S,R;t[3]!==c||t[4]!==v.hasActiveMsgrFamilyCenterEnforcement||t[5]!==h||t[6]!==u||t[7]!==n||t[8]!==p?(S=function(){return o("ReQL").fromTableAscending(n.tables.messages).subscribe(function(e,t){if(t.operation==="add"){var r=t.value;if((s||(s=o("I64"))).to_float(r.timestampMs)<=f.current)return;f.current=(s||(s=o("I64"))).to_float(r.timestampMs);var a=o("MWXacGating").isGroupsEnabled()?y:C;return a({actor:c,hasActiveMsgrFamilyCenterEnforcement:v.hasActiveMsgrFamilyCenterEnforcement,message:r,navigationApi:h,openTabFromNewMessage:u,storage:n,updateDocumentTitle:p})}})},R=[c,h,v.hasActiveMsgrFamilyCenterEnforcement,u,n,p],t[3]=c,t[4]=v.hasActiveMsgrFamilyCenterEnforcement,t[5]=h,t[6]=u,t[7]=n,t[8]=p,t[9]=S,t[10]=R):(S=t[9],R=t[10]),d(S,R)}function v(e){var t=o("react-compiler-runtime").c(10),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==n||t[1]!==i?(l={storage:n,withChatTabTracing:i},t[0]=n,t[1]=i,t[2]=l):l=t[2],b(l);var s=m(),u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=function(){var e=s.current;if(e!=null){r("clearInterval")(e);return}},t[3]=u):u=t[3];var c=u,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=function(){c(),s.current=r("setInterval")(S,6e5)},t[4]=p):p=t[4];var _=p,f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return o("MWChatThreadPingCounter").clear(),c()},t[5]=f):f=t[5];var g=f,h;t[6]===Symbol.for("react.memo_cache_sentinel")?(h={},t[6]=h):h=t[6],r("useGlobalEventListener")("blur",_,h);var y;t[7]===Symbol.for("react.memo_cache_sentinel")?(y={},t[7]=y):y=t[7],r("useGlobalEventListener")("focus",g,y);var C,v;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return(function(){return c()})},v=[],t[8]=C,t[9]=v):(C=t[8],v=t[9]),d(C,v)}function S(){return o("MWChatThreadPingCounter").clear()}l.default=v}),98);
__d("useSubscribeToErrorTableAndShowToast",["ReQL","react","react-compiler-runtime","requireDeferred","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c=r("requireDeferred")("LSUserVisibleErrorsUtil").__setRef("useSubscribeToErrorTableAndShowToast"),d=r("requireDeferred")("mwPushToast").__setRef("useSubscribeToErrorTableAndShowToast"),m={contents:!1};function p(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){if(!m.contents){m.contents=!0;var e=o("ReQL").fromTableAscending(a.tables.user_visible_errors).subscribe(function(e,n){switch(n.operation){case"add":{var o=n.value,i=o.presentationStyle;if(i!=null&&i!=="toast"&&i!=="undefined")return;d.onReady(function(e){e.mwPushErrorToast({body:o.errorBodyText!=null?r("translatedServerString")(o.errorBodyText):void 0,onDismiss:function(){c.onReady(function(e){e.removeUserVisibleErrorFromTable(a,o.errorId)})},title:r("translatedServerString")(o.errorTitleText)},t)});return}case"put":case"delete":return}});return(function(){return m.contents=!1,e()})}},l=[a,t],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),u(i,l)}l.default=p}),98);
__d("useMWChatInit",["MWLSCommunityChatPopper","MWPGetThreadTitle","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useMWLSChatPopperUpper","useReStore","useSubscribeToErrorTableAndShowToast"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(){var t=o("react-compiler-runtime").c(12),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.community_folders||t[1]!==n.tables.contacts||t[2]!==n.tables.participants||t[3]!==n.tables.pinned_threads||t[4]!==n.tables.threads?(a=function(){var e;r("promiseDone")((e=o("ReQL")).toArrayAsync(e.fromTableAscending(n.tables.threads).map(function(e){return[e,o("ReQLSuspense").toArray(o("ReQL").leftJoin(o("ReQL").fromTableAscending(n.tables.participants,[]).getKeyRange(e.threadKey),o("ReQL").fromTableAscending(n.tables.contacts)).take(o("MWPGetThreadTitle").amountToFetchForTitle),i.id+":34")]}).take(30))),r("promiseDone")(e.toArrayAsync(e.fromTableAscending(n.tables.pinned_threads.index("pinnedTimestamp")))),r("promiseDone")(e.toArrayAsync(e.fromTableAscending(n.tables.community_folders)))},t[0]=n.tables.community_folders,t[1]=n.tables.contacts,t[2]=n.tables.participants,t[3]=n.tables.pinned_threads,t[4]=n.tables.threads,t[5]=a):a=t[5];var l;t[6]!==n?(l=[n],t[6]=n,t[7]=l):l=t[7],u(a,l),r("useSubscribeToErrorTableAndShowToast")();var s;t[8]!==n?(s={storage:n,withChatTabTracing:!0},t[8]=n,t[9]=s):s=t[9],r("useMWLSChatPopperUpper")(s);var c;t[10]!==n?(c={storage:n,withChatTabTracing:!0},t[10]=n,t[11]=c):c=t[11],o("MWLSCommunityChatPopper").useOpenCommunityChatTabs(c)}l.default=c}),98);
__d("useMWIsAPPlusChannelsInbox",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("useCometRouterState")();if(t==null)return!1;var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;return((e=a.route)==null?void 0:e.tracePolicy)==="comet.messenger.applus.inbox"}l.default=e}),98);
__d("useMWIsTopLevelRouteMessengerMediaViewer",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("useCometRouterState")();if(t==null)return!1;var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;return((e=a.route)==null?void 0:e.tracePolicy)==="comet.sharedmediaviewer.media"}l.default=e}),98);
__d("useMWV2ChatUpdateMediaViewerOpenWatermark",["MWChatStateActions","MWChatStateV2.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(2),t=o("MWChatStateV2.react").useDispatch(),n;return e[0]!==t?(n=function(){var e=Date.now();t(o("MWChatStateActions").updateMediaViewerOpenWatermark(e))},e[0]=t,e[1]=n):n=e[1],n}l.default=u}),98);
__d("MWV2CookieWriter",["DeferredCookie","FBLogger","I64","MWCMThreadTypes.react","MWChatStateV2Types","Promise","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(Number((s||(s=o("I64"))).to_string(e))){case 2:return"g.";case 15:return"sc.";case 16:return"sg.";case 18:return"cg.";case 19:return"cgu.";case 23:return"cbj.";case 24:return"cbu.";case 21:return"cphj.";case 22:return"cphu.";case 150:return"dp.";case 151:return"dpu.";case 152:return"dpb.";case 153:return"dpbu.";case 154:return"dp2.";case 155:return"dp2u.";default:return"u."}}function c(t,a,i){var l=function(t){if(a==null)return!1;var e=a.tabType;return e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab?!1:(s||(s=o("I64"))).equal(e.threadKeyDescriptor.threadKey,t)},c=function(t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.threads).getKeyRange(t))},d={contents:void 0},m=t.map(function(t){var r=t.isOpen,a=t.threadKey,i=t.threadType,m={o:r?1:0};return c(a).then(function(t){return t!=null?l(a)?(o("MWCMThreadTypes.react").isJoinedCMThread(i)&&(d.contents=(s||(s=o("I64"))).to_string(t.parentThreadKey)),(e||(e=n("Promise"))).resolve()):(m.i=u(i)+(s||(s=o("I64"))).to_string(a),o("MWCMThreadTypes.react").isJoinedCMThread(i)&&(m.p=(s||(s=o("I64"))).to_string(t.parentThreadKey)),(e||(e=n("Promise"))).resolve(m)):(m.i=u(i)+(s||(s=o("I64"))).to_string(a),(e||(e=n("Promise"))).resolve(m))})});r("promiseDone")((e||(e=n("Promise"))).all(m).then(function(t){var i;if(a!=null){var l=a.tabType;if(l.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)i=void 0;else{var c=l.threadKeyDescriptor,m=c.threadKey,p=c.threadType;i=u(p)+(s||(s=o("I64"))).to_string(m)}}else i=void 0;var _=t.filter(function(e){return e!=null}),f=d.contents,g=f!=null?JSON.stringify({lm3:i,lm3p:f,t3:_,utc3:Date.now(),v:1}):JSON.stringify({lm3:i,t3:_,utc3:Date.now(),v:1});return g!=null?r("DeferredCookie").addToQueue("presence","C"+g,0,"/",!1,!1,!0):r("FBLogger")("messenger_comet").mustfix("Failed to serialize cookie"),(e||(e=n("Promise"))).resolve()}))}l.write=c}),98);
__d("useMWV2CookieWriter",["MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2IsOpen","MWChatStateV2Types","MWPActor.react","MWV2CookieWriter","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(){var t=o("react-compiler-runtime").c(4),n=o("MWChatStateContext").useChatState(_),a=(e||(e=r("useReStore")))(),i,l;t[0]!==a||t[1]!==n?(i=function(){if(!o("MWPActor.react").isAPPlus()){var e=Array.from(n.values()).filter(p).sort(o("MWChatStateV2CompareTabs").byMostRecentOpened)[0],t=[];Array.from(n.values()).filter(m).sort(d).forEach(function(e){var n=e.tabType;n.type!==o("MWChatStateV2Types").MWChatStateTabType.ComposeTab&&t.push(babelHelpers.extends({},n.threadKeyDescriptor,{isOpen:!1}))}),o("MWV2CookieWriter").write(t,e,a)}},l=[a,n],t[0]=a,t[1]=n,t[2]=i,t[3]=l):(i=t[2],l=t[3]),u(i,l)}function d(e,t){var n=o("MWChatStateV2CompareTabs").byMostRecentMinimized(e,t);return n===0?o("MWChatStateV2CompareTabs").byMostRecentOpened(e,t):n}function m(e){return e.openWatermark>e.closeWatermark?!0:e.minimizeWatermark>e.closeWatermark}function p(e){return o("MWChatStateV2IsOpen").isOpen(void 0,e)}function _(e){return e.tabs}l.default=c}),98);
__d("MWV2ChatTabsRoot.react",["CometContextualLayerAnchorRoot.react","CometDOMOnlyBoundary.react","CometPlaceholder.react","FocusRegion.react","MWChatStateV2.react","MWChatVisibilityOverrideContext","MWDraftMessages.react","MWFallbackWithTimeout.react","MWLSThreadDisplayContext","MWV2ChatHeads.react","MWV2ChatTabs.react","WebUXLoggingEntryPointContextProvider","focusScopeQueries","react","react-compiler-runtime","useEnsureViewerContactExistAndUpdated","useMWChatInit","useMWIsAPPlusChannelsInbox","useMWIsTopLevelRouteMediaViewerExperiment","useMWIsTopLevelRouteMessengerMediaViewer","useMWV2ChatUpdateMediaViewerOpenWatermark","useMWV2CookieWriter","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useMemo;function m(e){var t=o("react-compiler-runtime").c(16),n=e.isMediaViewer,a=o("MWChatStateV2.react").useChatState(_),i=r("useMWIsTopLevelRouteMessengerMediaViewer")(),l=Array.from(a.values()).some(p),u;t[0]!==i?(u={0:{className:"x1ey2m1c xtijo5x xixxii4 xamhafn x1vjfegm"},1:{className:"x1ey2m1c xtijo5x xixxii4 xamhafn x1vjfegm x1s85apg"}}[!!i<<0],t[0]=i,t[1]=u):u=t[1];var c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c={className:"xuk3077 x78zum5 xc8icb0"},t[2]=c):c=t[2];var d=l?o("focusScopeQueries").tabbableScopeQuery:void 0,m;t[3]!==n?(m=s.jsx(r("MWV2ChatTabs.react"),{isMediaViewer:n}),t[3]=n,t[4]=m):m=t[4];var f;t[5]!==n?(f=s.jsx(r("CometDOMOnlyBoundary.react"),{children:s.jsx(o("MWV2ChatHeads.react").MWV2ChatHeads,{isMediaViewer:n})}),t[5]=n,t[6]=f):f=t[6];var g;t[7]!==m||t[8]!==f?(g=s.jsxs(s.Fragment,{children:[m,f]}),t[7]=m,t[8]=f,t[9]=g):g=t[9];var h;t[10]!==d||t[11]!==g?(h=s.jsx(r("CometContextualLayerAnchorRoot.react"),{children:s.jsx("div",babelHelpers.extends({},c,{children:s.jsx(o("FocusRegion.react").FocusRegion,{containFocusQuery:d,id:"MWV2ChatTabsRootChatTabsFocusRegion",children:g})}))}),t[10]=d,t[11]=g,t[12]=h):h=t[12];var y;t[13]!==u||t[14]!==h?(y=s.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"popup_chat_box",children:s.jsx(o("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"ChatTab",children:s.jsx(o("MWDraftMessages.react").MWDraftProvider,{children:s.jsx("div",babelHelpers.extends({},u,{children:h}))})})}),t[13]=u,t[14]=h,t[15]=y):y=t[15];var C=y;return C}function p(e){return e.openWatermark>e.closeWatermark}function _(e){return e.tabs}function f(e){var t=e.children;return r("useMWV2CookieWriter")(),r("useMWChatInit")(),t}function g(){var e=o("react-compiler-runtime").c(10),t=r("useMWIsTopLevelRouteMediaViewerExperiment")(),n=o("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(t),a=r("useMWV2ChatUpdateMediaViewerOpenWatermark")(),i=r("useMWIsAPPlusChannelsInbox")(),l=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT_TABS_ROOT")&&n&&!i,u,d;e[0]!==t||e[1]!==a?(u=function(){t&&a()},d=[t,a],e[0]=t,e[1]=a,e[2]=u,e[3]=d):(u=e[2],d=e[3]),c(u,d),r("useEnsureViewerContactExistAndUpdated")();var p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(r("MWFallbackWithTimeout.react"),{message:"MWV2ChatTabsRoot suspense timeout"}),e[4]=p):p=e[4];var _;e[5]!==t||e[6]!==l?(_=l?s.jsx(m,{isMediaViewer:t}):null,e[5]=t,e[6]=l,e[7]=_):_=e[7];var g;return e[8]!==_?(g=s.jsx(r("CometPlaceholder.react"),{fallback:p,name:"MWV2ChatTabsRoot",children:s.jsx(f,{children:_})}),e[8]=_,e[9]=g):g=e[9],g}l.default=g}),98);
__d("MWV2ChatContainer.react",["MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react","MWV2ChatTabsRoot.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(s.Fragment,{children:[s.jsx(r("MWV2ChatTabsRoot.react"),{}),s.jsx(r("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"),{})]}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","FBLogger","JSResourceForInteraction","LSDatabaseAfterInitSyncSingleton","LSDatabaseSingleton","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformMessengerConfig","MWChatInteraction","MWV2ChatContainer.react","MWXLazyPopoverTrigger.react","cr:1118","gkx","isAppsSubdomain","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useLayoutEffect;function p(e){var t=r("FBLogger")("messenger_web");e!=null&&(t=t.catching(e)),t.warn("Error loading MWV2Chat")}var _=r("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),f=function(t){return u.jsx(r("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:t},popoverResource:_,position:"above",visibleOnLoad:!0,children:function(t,r){return u.jsx(n("cr:1118"),{contextRef:t,onPress:r})}})},g=!r("gkx")("22788")||r("isAppsSubdomain")();function h(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],m(C,t);var a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[1]=a):a=e[1],d(y,a);var i;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i=u.jsx(r("CometErrorBoundary.react"),{fallback:f,onError:p,children:g?u.jsx(n("cr:1118"),{}):u.jsx(r("LSPlatformClientProviderWithDeferredLoadingStrategy.react"),{config:o("LSPlatformMessengerConfig").configEagerlyLoaded,errorFallback:f,children:u.jsx(r("MWV2ChatContainer.react"),{})})}),e[2]=i):i=e[2],i}function y(){g&&o("LSDatabaseAfterInitSyncSingleton").resolveInitSync((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton)}function C(){o("MWChatInteraction").addAutoChatTabMarkerPoint("mwv2_chat_rendered")}l.default=h}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","react-compiler-runtime","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","onChange"],s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef;function p(t){var a,i=o("react-compiler-runtime").c(14),l,s,c;i[0]!==t?(c=t.ref,l=t.onChange,s=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=s,i[3]=c):(l=i[1],s=i[2],c=i[3]);var p=(a=r("useSearchCometEventEmitterContext")(r("SearchCometTypeaheadEventEmitterContext")))!=null?a:{},_=p.subscribeToGlobalTypeaheadFocus,f,g;i[4]!==l||i[5]!==_?(f=function(t){return _==null?void 0:_(function(){t!=null&&(t.value="",t.focus(),l(""))})},g=[l,_],i[4]=l,i[5]=_,i[6]=f,i[7]=g):(f=i[6],g=i[7]);var h=r("useRefEffect")(f,g),y=m(null),C=m(!1),b,v;i[8]===Symbol.for("react.memo_cache_sentinel")?(b=function(){var e=y.current;if(n("cr:2012305")!=null&&e!=null&&C.current===!1)return n("cr:2012305").trackTypingPerf(e,"top_tab_serp_typeahead"),C.current=!0,(function(){n("cr:2012305").unregisterTypingPerf(e),C.current=!1})},v=[],i[8]=b,i[9]=v):(b=i[8],v=i[9]),d(b,v);var S=r("useMergeRefs")(h,y),R=r("useMergeRefs")(S,c),L;return i[10]!==R||i[11]!==l||i[12]!==s?(L=u.jsx(r("CometTypeaheadInputRoundedStrategy.react"),babelHelpers.extends({},s,{onChange:l,ref:R})),i[10]=R,i[11]=l,i[12]=s,i[13]=L):L=i[13],L}l.default=p}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e,t){"use no forget";var n=e?e.getInteractionUUID():null,r=e?e.getVCTrackerRef():null,o=n!=null&&e!=null&&!e.isResolved();return s(function(){var a=function(r,o){e&&o!=null&&e.setEventStartTime(o.timeStamp),t(r,o)};return{interactionUUID:n,onTracedChange:a,shouldHoldHeroTracing:o,vcTrackerRef:r}},[n,t,o,e,r])}l.default=u}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(t,n,r,o,a,i,l){"use strict";var e=["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","onLeftArrow","onRightArrow","viewRole","inputRef","xstyles"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(74),a,i,l,s,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T;n[0]!==t?(E=t.extraLayoutProps,i=t.helperText,l=t.label,s=t.onAbandonTypeahead_DO_NOT_USE,c=t.onBlur,d=t.onChange,m=t.onClick,p=t.onDownArrow,_=t.onEnter,f=t.onEscape,g=t.onHighlightEntry,y=t.onOutsideClick,C=t.onPressEntry,v=t.onShiftTab,S=t.onTab,R=t.onUpArrow,k=t.traceProvider,h=t.onLeftArrow,b=t.onRightArrow,I=t.viewRole,a=t.inputRef,T=t.xstyles,L=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g,n[12]=h,n[13]=y,n[14]=C,n[15]=b,n[16]=v,n[17]=S,n[18]=R,n[19]=L,n[20]=E,n[21]=k,n[22]=I,n[23]=T):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11],h=n[12],y=n[13],C=n[14],b=n[15],v=n[16],S=n[17],R=n[18],L=n[19],E=n[20],k=n[21],I=n[22],T=n[23]);var D;n[24]!==E?(D=E===void 0?{afterViewContent:void 0,beforeViewContent:void 0}:E,n[24]=E,n[25]=D):D=n[25];var x=D,$=x.afterViewContent,P=x.beforeViewContent,N=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),M=N.isOpened,w=r("useCometInternalTypeaheadState")(),A=w.activeEntries,F=w.highlightedEntry,O=w.secondaryActionHighlighted,B=r("useCometInternalTypeaheadFetch")(),W=B.isLoading,q=r("useCometTypeaheadInputRefs")(a),U=q.composedRef,V=q.inputRef,H=r("useSearchCometGlobalTypeaheadStyles")(),G=T!=null?T:H,z=r("useCometInternalTypeaheadHeroTracing")(k,d),j=z.interactionUUID,K=z.onTracedChange,Q=z.shouldHoldHeroTracing,X=z.vcTrackerRef,Y;n[26]!==s||n[27]!==c||n[28]!==m||n[29]!==p||n[30]!==_||n[31]!==f||n[32]!==g||n[33]!==h||n[34]!==y||n[35]!==C||n[36]!==b||n[37]!==v||n[38]!==S||n[39]!==K||n[40]!==R?(Y={onAbandonTypeahead_DO_NOT_USE:s,onBlur:c,onChange:K,onClick:m,onDownArrow:p,onEnter:_,onEscape:f,onHighlightEntry:g,onLeftArrow:h,onOutsideClick:y,onPressEntry:C,onRightArrow:b,onShiftTab:v,onTab:S,onUpArrow:R},n[26]=s,n[27]=c,n[28]=m,n[29]=p,n[30]=_,n[31]=f,n[32]=g,n[33]=h,n[34]=y,n[35]=C,n[36]=b,n[37]=v,n[38]=S,n[39]=K,n[40]=R,n[41]=Y):Y=n[41];var J;n[42]!==V||n[43]!==Y?(J={handlers:Y,inputRef:V},n[42]=V,n[43]=Y,n[44]=J):J=n[44];var Z=r("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(J),ee;n[45]!==A||n[46]!==i||n[47]!==F||n[48]!==M||n[49]!==l||n[50]!==O||n[51]!==I?(ee={activeEntries:A,helperText:i,highlightedEntry:F,inputLabel:l,isOpened:M,secondaryActionHighlighted:O,viewRole:I},n[45]=A,n[46]=i,n[47]=F,n[48]=M,n[49]=l,n[50]=O,n[51]=I,n[52]=ee):ee=n[52];var te=r("useCometTypeaheadLayoutContextualStrategyARIAProps")(ee),ne;n[53]!==Q?(ne=u.jsx(r("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:Q}),n[53]=Q,n[54]=ne):ne=n[54];var re;n[55]!==$||n[56]!==te||n[57]!==P||n[58]!==W||n[59]!==M?(re={afterViewContent:$,ariaProps:te,beforeViewContent:P,helperTextComponent:null,isLoading:W,isOpened:M},n[55]=$,n[56]=te,n[57]=P,n[58]=W,n[59]=M,n[60]=re):re=n[60];var oe;n[61]!==U||n[62]!==Z||n[63]!==l||n[64]!==L||n[65]!==re||n[66]!==I||n[67]!==G?(oe=u.jsx(r("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers.extends({},L,Z,{extraLayoutProps:re,inputRef:U,label:l,viewRole:I,xstyles:G})),n[61]=U,n[62]=Z,n[63]=l,n[64]=L,n[65]=re,n[66]=I,n[67]=G,n[68]=oe):oe=n[68];var ae;return n[69]!==j||n[70]!==ne||n[71]!==oe||n[72]!==X?(ae=u.jsxs(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:j,ref:X,children:[ne,oe]}),n[69]=j,n[70]=ne,n[71]=oe,n[72]=X,n[73]=ae):ae=n[73],ae}l.default=c}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("24247")}l.hasTypeaheadRedirection=e}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","XCometSearchResultsControllerRouteBuilder","react-compiler-runtime","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface","useSearchCometResultsURLBuilder"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={routeBuilder:r("XCometSearchResultsControllerRouteBuilder")},e[0]=t):t=e[0];var n=r("useSearchCometResultsURLBuilder")(t),a=r("useSearchCometHashtagRouteUrlBuilder")(),i=r("useSearchCometResultsEntryPointSurface")(),l;return e[1]!==a||e[2]!==i||e[3]!==n?(l=function(t){var e=t.entry,l=t.queryString,s=t.typeaheadSessionID,u=e.label.toLowerCase(),c=e.metaData,d=c==null?void 0:c.markers,m=o("SearchCometInterestsDeepDiveUtil").getHashtagTag(u);if(o("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&m!=null&&!d.has("see_all"))return a({entryPointAction:"SEARCH_BOX",exploreEntryPoint:l===""?3:4,hashtag:m,typeaheadSessionID:s});var p,_=e.rawData,f=(p=r("searchCometTypeaheadGetStsDisambiguation")(e))!=null?p:void 0;if(e.subtype==="keyword"&&d.has("disambiguation")){var g,h,y=(g=(h=_.structuredInfo)==null||(h=h.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?g:{},C=y.link_url;if(C!=null){var b=o("ConstUriUtils").getUri(C);if(b!=null){var v=new Map;i!=null&&v.set("__eps__",i),f!==void 0&&v.set("__stsd__",r("Base64").encode(JSON.stringify(f)));var S=new Map;for(var R of v){var L=R[0],E=R[1];S.set(L,E)}var k=b.addQueryParams(S);if(k!=null)return k.toString()}}}return n({entryPointAction:"SEARCH_BOX",highConfidenceResult:r("searchCometTypeaheadGetHighConfidenceResult")(e),query:u,stsDisambiguation:f,typeaheadSessionID:s})},e[1]=a,e[2]=i,e[3]=n,e[4]=l):l=e[4],l}l.default=e}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["react","react-compiler-runtime","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(10),n=e.entry,a=e.queryString,i=r("useCometRouterDispatcher")(),l=r("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),s;t[0]!==l||t[1]!==n||t[2]!==a?(s=l({entry:n,queryString:a}),t[0]=l,t[1]=n,t[2]=a,t[3]=s):s=t[3];var c=s,d,m;t[4]!==i||t[5]!==c?(d=function(){i!=null&&i.preloadRouteCode(c)},m=[i,c],t[4]=i,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]),u(d,m);var p;return t[8]!==c?(p={preloadCodeOnMount:!0,preventLocalNavigation:!0,url:c},t[8]=c,t[9]=p):p=t[9],p}l.default=d}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useMemo,d={view:{backgroundColor:"x1jx94hy",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function m(e){var t=e.onHeaderActionPress,n=c(function(){return[d.view]},[]),o=c(function(){return u.jsx(r("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return r("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:r("searchCometTypeaheadSTSMappings"),emptyStateContent:o,getLinkProps:r("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:t,seeAllLabelBuilder:p,xstyle:n})}function p(e){return s._(/*BTDS*/"Search for {=m1}",[s._implicitParam("=m1",u.jsx("strong",{children:s._(/*BTDS*/"{query}",[s._param("query",e)])}))])}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9365993650171871"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:t},params:{id:n("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","FBLogger","filterNulls","react","react-compiler-runtime","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var a=o("react-compiler-runtime").c(3),i=t.bootstrapDatasource,l=o("CometRelay").useRelayEnvironment(),s;return a[0]!==i||a[1]!==l?(s={validate:function(a){var t=r("filterNulls")(a.map(m));o("CometRelay").fetchQuery(l,e!==void 0?e:e=n("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:t}}).subscribe({error:d,next:function(t){var e=t.search_client_cache_policy_check;for(var n of(r=e==null?void 0:e.policy_decision)!=null?r:[]){var r,o=n.cache_type,a=n.force_cache_refresh,l=n.ids_to_remove;if(o==="KEYWORD_BOOTSTRAP"){for(var s of l)i.removeEntriesByEntID(s);a===!0&&(i.clear(),i.bootstrap())}}}})}},a[0]=i,a[1]=l,a[2]=s):s=a[2],s}function d(e){o("CometRelayErrorHandling").markErrorAsHandled(e)}function m(e){var t;if(e.subtype!=="bootstrap")return null;var n=(t=e.rawData.structuredInfo)!=null?t:{},o=n.direct_nav_result;if(o==null)return null;var a=o.ent_id,i=o.title;return a==null||i==null?(r("FBLogger")("search").mustfix("Unexpected missing ent_id or title on direct_nav_result"),null):{id:a,keyword:i}}l.default=c}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){function n(n){var r=o("react-compiler-runtime").c(15),a,i,l,s,c;r[0]!==n?(a=n.inputRef,i=n.onChange,l=n.onPressEntry,c=n.shouldQueryStringUpdateFromSelectedEntryOnClick,s=babelHelpers.objectWithoutPropertiesLoose(n,e),r[0]=n,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=c):(a=r[1],i=r[2],l=r[3],s=r[4],c=r[5]);var d=c===void 0?!1:c,m;r[6]!==i||r[7]!==l?(m=function(t,n){var e=t.metaData,r=t.subtype,o=e.markers,a=r==="recent"&&o.has("entity")||o.has("direct_nav");i(a?"":t.label),l==null||l(t,n)},r[6]=i,r[7]=l,r[8]=m):m=r[8];var p=m,_;return r[9]!==a||r[10]!==p||r[11]!==i||r[12]!==s||r[13]!==d?(_=u.jsx(t,babelHelpers.extends({},s,{inputRef:a,onChange:i,onPressEntry:p,shouldQueryStringUpdateFromSelectedEntryOnClick:d})),r[9]=a,r[10]=p,r[11]=i,r[12]=s,r[13]=d,r[14]=_):_=r[14],_}return n}l.default=d}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo;function p(t){function n(n){var a=n.inputRef,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=r("useCometTypeaheadInputRefs")(a),s=l.composedRef,c=l.inputRef,p=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),_=p.dispatchIsOpened,f=d(function(){c.current!=null&&(c.current.focus(),_(!0))},[c,_]),g=m(function(){return[o("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",f)]},[f]);return r("useGlobalKeyCommands")(g),u.jsx(t,babelHelpers.extends({},i,{inputRef:s}))}return n.displayName=n.name+" [from "+i.id+"]",n}l.default=p}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onPressEntry","traceProvider"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){function n(n){var r=o("react-compiler-runtime").c(13),a,i,l,s;r[0]!==n?(a=n.inputRef,i=n.onPressEntry,s=n.traceProvider,l=babelHelpers.objectWithoutPropertiesLoose(n,e),r[0]=n,r[1]=a,r[2]=i,r[3]=l,r[4]=s):(a=r[1],i=r[2],l=r[3],s=r[4]);var c;r[5]!==i||r[6]!==s?(c=function(t,n){s&&s.setEndReason("successful_user_action"),i==null||i(t,n)},r[5]=i,r[6]=s,r[7]=c):c=r[7];var d=c,m;return r[8]!==a||r[9]!==d||r[10]!==l||r[11]!==s?(m=u.jsx(t,babelHelpers.extends({},l,{inputRef:a,onPressEntry:d,traceProvider:s})),r[8]=a,r[9]=d,r[10]=l,r[11]=s,r[12]=m):m=r[12],m}return n}l.default=d}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometTypeaheadErrorFallback.react","FBLogger","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","XCometSearchResultsControllerRouteBuilder","qex","react","react-compiler-runtime","requireDeferred","searchCometGlobalTypeahead.config","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadNullStateDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsURLBuilder","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useContext,f=m.useEffect,g=m.useMemo,h=m.useRef,y=r("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react"),C=(u=r("qex")._("7"))!=null?u:!1;function b(t){var n=o("react-compiler-runtime").c(77),a,i,l,u,c,m,p,g,b,E;n[0]!==t?(E=t.autoOpen,a=t.inputXStyle,l=t.onClose,u=t.onEscape,c=t.onFocus,m=t.onHeaderActionPress,p=t.onPressEntry,g=t.onSelectFreeformQuery,i=t.queryString,b=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=c,n[6]=m,n[7]=p,n[8]=g,n[9]=b,n[10]=E):(a=n[1],i=n[2],l=n[3],u=n[4],c=n[5],m=n[6],p=n[7],g=n[8],b=n[9],E=n[10]);var k=E===void 0?!1:E,I=r("useCometTypeaheadStateQueryString")(i),T=I[0],D=I[1],x=r("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),$;n[11]===Symbol.for("react.memo_cache_sentinel")?($={routeBuilder:r("XCometSearchResultsControllerRouteBuilder")},n[11]=$):$=n[11];var P=r("useSearchCometResultsURLBuilder")($),N=r("useSearchCometHashtagRouteUrlBuilder")(),M;n[12]===Symbol.for("react.memo_cache_sentinel")?(M={tapPoint:"tap_search_bar"},n[12]=M):M=n[12];var w=r("useCometTypeaheadNavigate")(M),A=h(!1),F=r("useSearchCometGlobalTypeaheadNullStateDataSource")(),O;n[13]!==F?(O={config:r("searchCometGlobalTypeahead.config"),recentDataSource:F},n[13]=F,n[14]=O):O=n[14];var B=r("useSearchCometGlobalTypeaheadCompositeDataSource")(O),W;n[15]!==B?(W=B.getBootstrapKeywordsDataSource(),n[15]=B,n[16]=W):W=n[16];var q=W;if(q==null)throw r("FBLogger")("search").mustfixThrow("Bootstrap datasource is missing");var U;n[17]!==q?(U={bootstrapDatasource:q},n[17]=q,n[18]=U):U=n[18];var V=r("useSearchCometTypeaheadBootstrapValidation")(U),H=V.validate,G;n[19]!==H?(G=function(t){var e=t.shownEntries;H(e)},n[19]=H,n[20]=G):G=n[20];var z=G,j=_(o("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext),K=j.logger,Q=j.onSessionStart,X=j.setSessionEndCallback,Y=j.traceProvider,J=K,Z=Y,ee;n[21]!==z?(ee={context:"search_global",onSessionEnd:z},n[21]=z,n[22]=ee):ee=n[22];var te=r("useSearchCometTypeaheadLoggingProvider")(ee);r("useCometSearchTypeaheadTraceProvider")(K||te);var ne,re;if(n[23]!==z||n[24]!==X?(re=function(){X(z)},ne=[X,z],n[23]=z,n[24]=X,n[25]=ne,n[26]=re):(ne=n[25],re=n[26]),f(re,ne),J==null)throw J=te,y.onReady(R),r("FBLogger")("search").mustfix("Typeahead used without logger in context");if(Z==null)throw r("FBLogger")("search").mustfix("Typeahead used without traceProvider in context");var oe=r("useSearchCometTypeaheadRecentDataSourceContextDecorator")(B,!1),ae;n[27]===Symbol.for("react.memo_cache_sentinel")?(ae={decorate:r("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")},n[27]=ae):ae=n[27];var ie;n[28]!==oe?(ie=[oe,ae].filter(Boolean),n[28]=oe,n[29]=ie):ie=n[29];var le=ie,se,ue;n[30]!==B?(se=function(){B.bootstrap()},ue=[B],n[30]=B,n[31]=se,n[32]=ue):(se=n[31],ue=n[32]),f(se,ue);var ce;n[33]!==c||n[34]!==Q?(ce=function(){A.current=!0,Q(),c&&c()},n[33]=c,n[34]=Q,n[35]=ce):ce=n[35];var de=ce,me;n[36]!==J||n[37]!==w||n[38]!==p||n[39]!==T||n[40]!==x?(me=function(t,n){var e;if(n!==!0){var r=t.metaData,o=r==null?void 0:r.markers,a=o!=null&&o.has("entity"),i=o!=null&&o.has("direct_nav"),l=x({entry:t,queryString:T,typeaheadSessionID:(e=J)==null?void 0:e.getSessionID()}),s=L(t,l,a,i);w(s),p==null||p(t)}},n[36]=J,n[37]=w,n[38]=p,n[39]=T,n[40]=x,n[41]=me):me=n[41];var pe=me,_e;n[42]!==N||n[43]!==J||n[44]!==w||n[45]!==g||n[46]!==T||n[47]!==P?(_e=function(t){var e=o("SearchCometInterestsDeepDiveUtil").getHashtagTag(t),n;if(o("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&e!=null){var r;n=N({entryPointAction:"SEARCH_BOX",exploreEntryPoint:T===""?3:4,hashtag:e,typeaheadSessionID:(r=J)==null?void 0:r.getSessionID()})}else{var a;n=P({entryPointAction:"SEARCH_BOX",query:t,typeaheadSessionID:(a=J)==null?void 0:a.getSessionID()})}w(n),g==null||g(t)},n[42]=N,n[43]=J,n[44]=w,n[45]=g,n[46]=T,n[47]=P,n[48]=_e):_e=n[48];var fe=_e,ge;n[49]!==B||n[50]!==l?(ge=function(){B.clearQueryCache(),l&&l()},n[49]=B,n[50]=l,n[51]=ge):ge=n[51];var he=ge,ye=r("useStable")(S),Ce;n[52]===Symbol.for("react.memo_cache_sentinel")?(Ce=s._(/*BTDS*/"Search Facebook"),n[52]=Ce):Ce=n[52];var be=Ce,ve=T==="",Se=ve?"grid":"listbox",Re;n[53]===Symbol.for("react.memo_cache_sentinel")?(Re={bypassCacheRenderLimitCheck:C},n[53]=Re):Re=n[53];var Le=b.inputEndContent,Ee;n[54]!==a?(Ee={hideIconOnFocus:!0,size:"large",xstyle:a},n[54]=a,n[55]=Ee):Ee=n[55];var ke=b.inputStartContent,Ie;n[56]===Symbol.for("react.memo_cache_sentinel")?(Ie=s._(/*BTDS*/"Search Facebook"),n[56]=Ie):Ie=n[56];var Te=J,De;n[57]!==m?(De={onHeaderActionPress:m},n[57]=m,n[58]=De):De=n[58];var xe=r("useSearchCometGlobalTypeaheadViewStrategy")(De),$e;return n[59]!==ye||n[60]!==k||n[61]!==B||n[62]!==he||n[63]!==de||n[64]!==pe||n[65]!==fe||n[66]!==J||n[67]!==u||n[68]!==b||n[69]!==T||n[70]!==D||n[71]!==le||n[72]!==Ee||n[73]!==xe||n[74]!==Z||n[75]!==Se?($e=d.jsx(r("CometErrorBoundary.react"),{fallback:v,children:d.jsx(ye,babelHelpers.extends({},b,{autoOpen:k,dataSource:B,dataSourceFetchConfigParams:Re,decorators:le,inputEndContent:Le,inputExtraProps:Ee,inputStartContent:ke,inputStrategyRenderer:r("SearchCometGlobalTypeaheadInputStrategy.react"),label:Ie,layoutStrategyRenderer:r("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:Te,onChange:D,onClose:he,onEscape:u,onFocus:de,onPressEntry:pe,onSelectFreeformQuery:fe,placeholder:be,queryString:T,testid:void 0,traceProvider:Z,viewRole:Se,viewStrategyRenderer:xe}))}),n[59]=ye,n[60]=k,n[61]=B,n[62]=he,n[63]=de,n[64]=pe,n[65]=fe,n[66]=J,n[67]=u,n[68]=b,n[69]=T,n[70]=D,n[71]=le,n[72]=Ee,n[73]=xe,n[74]=Z,n[75]=Se,n[76]=$e):$e=n[76],$e}function v(){return d.jsx(r("CometTypeaheadErrorFallback.react"),{})}v.displayName=v.name+" [from "+i.id+"]";function S(){return r("withSearchCometTypeaheadSERPWarmCallDecorator")(r("withSearchCometTypeaheadTraceEndReasonDecorator")(r("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(r("withSearchCometTypeaheadBaseNavigationDecorator")(r("BaseTypeahead.react")))))}function R(e){e.bumpEntityKey(354,"typeahead.missing_logger_context","focused")}function L(e,t,n,r){var o=e.rawData,a;if(o!=null&&e.subtype==="recent"&&n){var i;a=o==null||(i=o.profile)==null?void 0:i.url}if(o!=null&&(e.subtype==="keyword"||e.subtype==="bootstrap"||e.subtype==="recent")&&r){var l;a=o==null||(l=o.structuredInfo)==null||(l=l.direct_nav_result)==null?void 0:l.link_url}return a!=null?a:t}l.default=b}),226);/*FB_PKG_DELIM*/
__d("CryptoLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("FBLogger")("labyrinth_web","crypto."+e)}function s(e,t){return t instanceof Error?e.catching(t):e}l.CryptoLogger=e,l.captureError=s}),98);
__d("base64Binary",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){for(var t="",n=0;n<e.byteLength;n+=3){var r=e.subarray(n,n+3);t+=m(r)}var o=(e.byteLength+2)%3;return t.slice(0,t.length+o-2)+"==".slice(o)}function u(e){var t,n;e.length%4===0||s(0,51156);for(var r=e.length/4,o=(t=(n=e.match(/={0,2}$/))==null?void 0:n[0].length)!=null?t:0,a=new Uint8Array(r*3-o),i=0;i<r;i++){var l=p(e.slice(i*4,i*4+4));a.set(l.subarray(0,a.byteLength-i*3),i*3)}return a}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=">___?456789:;<=___\0___\0\x07\b	\n\v\f\r______\x1B !\"#$%&'()*+,-./0123";function m(e){var t,n,r=e[0]<<16|((t=e[1])!=null?t:0)<<8|((n=e[2])!=null?n:0);return String.fromCharCode(c.charCodeAt(r>>>18),c.charCodeAt(r>>>12&63),c.charCodeAt(r>>>6&63),c.charCodeAt(r&63))}function p(e){var t=d.charCodeAt(e.charCodeAt(0)-43)<<18|d.charCodeAt(e.charCodeAt(1)-43)<<12|d.charCodeAt(e.charCodeAt(2)-43)<<6|d.charCodeAt(e.charCodeAt(3)-43);return new Uint8Array([t>>>16,t>>>8&255,t&255])}l.encode=e,l.decode=u}),98);
__d("EBBase64Encode",["Base64Utils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("Base64Utils").fromArrayBuffer(e)}l.default=e}),98);
__d("I64MigrationHelper",["I64","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return r("nullthrows")((e||(e=o("I64"))).cast(t))}l.cast=s}),98);
__d("LSDatascriptRuntimeTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UI","BROKER"]);i.TopLevelCallOrigin=e}),66);
__d("LSClientDependencies",[],(function(t,n,r,o,a,i){}),null);
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.storedProcedure(n("LSComputeParticipantCapabilities"),e[1],e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.filter(t.db.table(14).fetch([[[e[0],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.gt(n.authorityLevel,e[9])}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(14).put({threadKey:e[0],contactId:e[1],readWatermarkTimestampMs:e[2],readActionTimestampMs:e[3],deliveredWatermarkTimestampMs:e[4],nickname:e[5],normalizedSearchTerms:e[10],isAdmin:e[6],isSuperAdmin:e[13],subscribeSource:e[7],authorityLevel:e[9],participantCapabilities:r[0],groupParticipantJoinState:e[11],isModerator:e[12],threadRoles:e[14]}):0})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxAddParticipantIdToGroupThreadStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSCheckAuthoritativeMessageExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[1]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.offlineThreadingId===e[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSClearPinnedMessages",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(205).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearPinnedMessagesStoredProcedure",e.__tables__=["msg_pinned_messages_v2"],a.exports=e}),null);
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,r){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n));if(a!=null){var i=(e||(e=o("I64"))).to_string(r);return o("LSMessagingThreadTypeUtil").isGroup(a.threadType)?o("WAJids").toGroupJid(i):o("WAJids").toMsgrUserJid(i)}}l.getMaybeChatJidForLSDBJid=s}),98);
__d("LSShimCompleteThreadCutover.nop",["FBLogger","I64","ReQL","cr:7344","getChatJidForLSDBJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(a,i,l,s,u){var t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.cutover_threads).getKeyRange(s));if(t!=null){var c=t.showOpenMessageHistory===!1;if(c)return[(e||(e=o("I64"))).one];var d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(t.armadilloThreadId));if(d!=null){var m=await o("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(a,d.serverThreadKey,d.jid);return m==null?[(e||(e=o("I64"))).one]:(n("cr:7344").load().then(function(t){var n=t.fireAndForget;n("backend","insertAdminMessageInCutoverThreads",{openThreadId:(e||(e=o("I64"))).to_string(s),threadJid:m,traceId:u})}).catch(function(e){r("FBLogger")("messenger_web_product").catching(e).warn("Failed to insert admin message in cutover threads")}),[(e||(e=o("I64"))).zero])}return[(e||(e=o("I64"))).one]}return[(e||(e=o("I64"))).one]};s.__nop_name__="LSShimCompleteThreadCutover",l.default=s}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.nativeOperation(n("LSShimCompleteThreadCutover.nop"),e[0],e[1],e[2]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteBanner",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.bannerId,e[0])}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.sequence([function(o){return r[1]=t.createArray(),r[2]=t.i64.of_int32(e[1].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(e){return r[7]=(r[1].push(t.i64.to_string(r[5])),r[1])}])}):t.resolve()},function(e){return r[3]=r[1].join(","),r[0]=r[3]}])},function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&e[1].some(function(e){return t.i64.eq(n.bannerId,e)})}),function(e){return e.delete()})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteExistingMessageRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(13).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteExistingMessageRangesStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSDeleteRowRichStatusCustomAudience",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSOmnistoreSettingsDeleteRowRichStatusCustomAudienceStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertAvatarFeatureConfig",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSContactDeleteThenInsertAvatarFeatureConfigStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(299).put({botId:e[0],isCreatedByViewer:e[1],description:e[4],tintColor:e[2],shortDescription:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure",e.__tables__=["bot_profile_info_v2"],a.exports=e}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(167).put({communityId:e[0],threadId:e[1],categoryId:e[2],channelPrivacy:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmChannelListStoredProcedure",e.__tables__=["cm_channel_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[1]=e[12]==null?t.i64.cast([0,19]):e[12],n[2]="community",n[3]=t.i64.cast([0,0])==null?t.i64.cast([0,0]):t.i64.cast([0,0]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26]}):(o=s.item,n[4]=o.lastActivityTimestampMs,n[6]=o.parentThreadKey,n[5]=o.disappearingThreadKey,n[7]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[4],e[7])&&t.i64.neq(n[5],void 0)?(t.i64.eq(e[1],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[6],t.i64.cast([0,0]))?(a=[n[6],o.folderName],n[8]=a[0],n[9]=a[1]):(i=[e[1],n[2]],n[8]=i[0],n[9]=i[1]),t.db.table(9).put({threadKey:e[0],parentThreadKey:n[8],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[9],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:n[4],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]})):t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityUnjoinedThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSFillDeanonCacheForE2EEThread.nop",["I64","LSShape","LSSynchronousPromise","LSVec","PromiseOrValue","ReQL","cr:7871","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u){if(n("cr:7871")==null||!r("gkx")("15959"))return o("LSSynchronousPromise").makeSynchronousPromise();var t=r("LSVec").toArray(u).map(function(t){var n=o("LSShape").toRecord(t),r=n.offline_threading_id,a=n.sort_order_ms;return{externalId:r,msgType:"unknown-deanon",sortOrderMs:(e||(e=o("I64"))).to_float(a)}}),c=o("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(l).iterator(new WeakMap);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise((s||(s=o("PromiseOrValue"))).map(c.next(),function(e){var r;((r=e.value)==null?void 0:r[1].jid)!=null&&n("cr:7871").initDeanonCacheDescForThread(e.value[1].jid,t)}))};u.__nop_name__="LSFillDeanonCacheForE2EEThread",l.default=u}),98);
__d("LSFillDeanonCacheForE2EEThread",["LSFillDeanonCacheForE2EEThread.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSFillDeanonCacheForE2EEThread.nop"),e[0],e[1])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxFillDeanonCacheForE2EEThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",[],(function(t,n,r,o,a,i){"use strict";var e=async function(t,n,r){};e.__nop_name__="LSShimHybridThreadDeleteByThreadKey",i.default=e}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSShimHybridThreadDeleteByThreadKey.nop"),e[0])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertAttachmentCta",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(19).add({ctaId:e[0],attachmentFbid:e[1],attachmentIndex:e[2],threadKey:e[3],messageId:e[5],title:e[6],type_:e[7],platformToken:e[8],actionUrl:e[9],nativeUrl:e[10],urlWebviewType:e[11],actionContentBlob:e[12],enableExtensions:e[13],extensionHeightType:e[14],targetId:e[15]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSInsertAttachmentItem",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(18).add({attachmentFbid:e[0],attachmentIndex:e[1],threadKey:e[2],messageId:e[4],defaultActionEnableExtensions:e[31],originalPageSenderId:e[7],titleText:e[8],subtitleText:e[9],bodyText:e[12],playableUrl:e[13],playableUrlFallback:e[14],playableUrlExpirationTimestampMs:e[15],playableUrlMimeType:e[16],dashManifest:e[17],previewUrl:e[18],previewUrlFallback:e[19],previewUrlExpirationTimestampMs:e[20],previewUrlMimeType:e[21],previewWidth:e[22],previewHeight:e[23],imageUrl:e[24],defaultCtaId:e[25],defaultCtaTitle:e[26],defaultCtaType:e[27],defaultButtonType:e[29],defaultActionUrl:e[30],defaultWebviewHeightRatio:e[33],attachmentCta1Id:e[35],cta1Title:e[36],cta1IconType:e[37],cta1Type:e[38],attachmentCta2Id:e[40],cta2Title:e[41],cta2IconType:e[42],cta2Type:e[43],attachmentCta3Id:e[45],cta3Title:e[46],cta3IconType:e[47],cta3Type:e[48],faviconUrl:e[49],faviconUrlFallback:e[50],faviconUrlExpirationTimestampMs:e[51],previewUrlLarge:e[52]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSInsertBlobAttachment",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[27],e[32],e[34]]]]),function(n){return t.i64.eq(n.threadKey,e[27])&&t.i64.eq(t.i64.cast([0,0]),e[28])&&n.messageId===e[32]&&n.attachmentFbid===e[34]&&t.i64.lt(n.authorityLevel,e[48])&&(t.i64.eq(n.attachmentType,t.i64.cast([0,2]))||t.i64.eq(n.attachmentType,t.i64.cast([0,3]))||t.i64.eq(n.attachmentType,t.i64.cast([0,4]))||t.i64.eq(n.attachmentType,t.i64.cast([0,5]))||t.i64.eq(n.attachmentType,t.i64.cast([0,6]))||t.i64.eq(n.attachmentType,t.i64.cast([0,10]))||t.i64.eq(n.attachmentType,t.i64.cast([0,14]))||t.i64.eq(n.attachmentType,t.i64.cast([0,15])))&&t.i64.eq(n.ephemeralMediaState,void 0)&&n.isSharable===!1}),function(e){return e.delete()})},function(n){return t.db.table(16).add({threadKey:e[27],messageId:e[32],attachmentFbid:e[34],filename:e[0],filesize:e[1],hasMedia:e[2],isSharable:!1,playableUrl:e[3],playableUrlFallback:e[4],playableUrlExpirationTimestampMs:e[5],playableUrlMimeType:e[6],dashManifest:e[7],previewUrl:e[8],previewUrlFallback:e[9],previewUrlExpirationTimestampMs:e[10],previewUrlMimeType:e[11],miniPreview:e[13],previewWidth:e[14],previewHeight:e[15],attributionAppId:e[16],attributionAppName:e[17],attributionAppIcon:e[18],attributionAppIconFallback:e[19],attributionAppIconUrlExpirationTimestampMs:e[20],localPlayableUrl:e[21],playableDurationMs:e[22],attachmentIndex:e[23],accessibilitySummaryText:e[24],isPreviewImage:e[25],originalFileHash:e[26],attachmentType:e[29],timestampMs:e[31],offlineAttachmentId:e[33],hasXma:e[35],xmaLayoutType:e[36],xmasTemplateType:e[37],titleText:e[38],subtitleText:e[39],descriptionText:e[40],sourceText:e[41],faviconUrlExpirationTimestampMs:e[42],isBorderless:e[44],previewUrlLarge:e[45],samplingFrequencyHz:e[46],waveformData:e[47],authorityLevel:e[48]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertBlobAttachmentStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSIssueFetchThreadCapabilitiesTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxIssueFetchThreadCapabilitiesTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"insert_persistent_menu_items",t.i64.cast([0,117]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.count(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]})).then(function(e){return r[0]=e})},function(o){return t.i64.gt(r[0],t.i64.cast([0,0]))&&e[3]===!0?t.resolve(0):t.sequence([function(n){return t.forEach(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]}),function(e){return e.delete()})},function(o){return t.i64.gt(e[2],t.i64.cast([0,0]))?(r[3]=t.i64.of_float(Date.now()),r[1]=t.i64.add(r[3],e[2])):r[1]=t.i64.cast([0,0]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",e[1]].join(""),t.i64.cast([0,362]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[1],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(310).add({taskId:r[2],projectName:e[1],maxClientTokenPoolSize:e[0]})}])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context"],a.exports=e}),null);
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,0]):(n=a.item,r[0]=n.lastActivityTimestampMs)})},function(o){return t.i64.gt(r[0],e[1])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.count(t.filter(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.senderId,r[2])&&t.i64.gt(n.timestampMs,e[1])})).then(function(e){return r[3]=e})},function(n){return t.count(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]])).then(function(e){return r[4]=e})},function(n){return t.i64.eq(r[3],r[4])&&t.i64.gt(r[4],t.i64.cast([0,0]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({lastReadWatermarkTimestampMs:n.lastActivityTimestampMs})}):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}]):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure",e.__tables__=["threads","messages"],a.exports=e}),null);
__d("LSReplaceOptimisticReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var n=e.update,r=e.item;return n({authorityLevel:t.i64.cast([0,60])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxReplaceOptimisticReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSSetForwardScore",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(t){var n=t.update,r=t.item;return n({forwardScore:e[3]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetForwardScoreStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSDeleteAllCommunityChannelCategories",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(182).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure",e.__tables__=["cm_category_list","threads"],a.exports=e}),null);
__d("LSDeleteAllCommunityFolders",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(162).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(166).put({communityId:e[0]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSBase64Decode",["Base64Utils","CryptoLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","="),n=4-t.length%4;if(n<4)for(var r=0;r<n;r++)t+="=";return t}function s(t){var n=o("CryptoLogger").CryptoLogger("base64decode");try{return t!=null?o("Base64Utils").toArrayBuffer(e(t)):void 0}catch(e){var a=r("getErrorSafe")(e);if(a.message==null)return;n.catching(a).mustfix(a.message)}}l.decode=s}),98);
__d("LSResult",[],(function(t,n,r,o,a,i){"use strict";function e(e){return[e]}i.default=e}),66);
__d("LSBase64Decode.nop",["LSBase64Decode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(o("LSBase64Decode").decode(a)))};e.__nop_name__="LSBase64Decode",l.default=e}),98);
__d("LSMinosVerifySingleEpoch.nop",["cr:8434"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,r,o,a,i,l,s,u,c){return n("cr:8434")(t,r,o,a,i,l,s,u,c)};e.__nop_name__="LSMinosVerifySingleEpochCall",l.default=e}),98);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{string:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateString",l.default=s}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addPoint(t,u,{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkPoint",l.default=s}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),d=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").start(t,{instanceKey:d}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplStartTrace",l.default=s}),98);
__d("LSSetThreadImageURL",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1]===""?void 0:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],isCustomThreadPicture:e[4],shouldRoundThreadPicture:e[5]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSWriteMinosPublicKey.nop",["cr:8435"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,r,o,a,i,l,s,u,c,d,m,p){return n("cr:8435")(t,r,o,a,i,l,s,u,c,d,m,p)};e.__nop_name__="LSWriteMinosPublicKeyCall",l.default=e}),98);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSGetViewerFBID","LSMinosVerifySingleEpoch.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return t.sequence([function(r){return e[50]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[50]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[0]=o[17]}]):t.resolve(o[0]=void 0)},function(r){return e[52]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[52]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[1]=o[17]}]):t.resolve(o[1]=void 0)},function(r){return e[53]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[53]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[2]=o[17]}]):t.resolve(o[2]=void 0)},function(r){return e[55]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[55]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[3]=o[17]}]):t.resolve(o[3]=void 0)},function(r){return e[56]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[56]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[4]=o[17]}]):t.resolve(o[4]=void 0)},function(r){return e[57]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[57]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[5]=o[17]}]):t.resolve(o[5]=void 0)},function(r){return e[58]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[58]).then(function(e){var t;return t=e,o[17]=t[0],t})},function(e){return o[6]=o[17]}]):t.resolve(o[6]=void 0)},function(a){var i,l,s;return o[16]="LSContactDeleteThenInsertContactStoredProcedure",r("gkx")("11690")&&r("gkx")("16269")?t.sequence([function(r){var a;return o[17]=t.i64.random(),o[27]=t.i64.to_string(o[17]),t.blobs.eq(o[2],void 0)&&t.blobs.eq(o[1],void 0)&&t.i64.eq(e[51],void 0)&&t.i64.eq(e[54],void 0)&&t.blobs.eq(o[3],void 0)&&t.blobs.eq(o[4],void 0)&&t.blobs.eq(o[5],void 0)&&t.blobs.eq(o[0],void 0)?t.resolve((a=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[18]=a[0],o[19]=a[1],o[20]=a[2],o[21]=a[3],o[22]=a[4],o[23]=a[5],o[24]=a[6],o[25]=a[7],o[26]=a[8],a)):t.sequence([function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,1021650676]),o[27],!0,void 0):t.resolve()},function(e){return o[27]!==void 0&&o[16]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"source_for_validation",o[16]):t.resolve()},function(r){return t.blobs.neq(o[2],void 0)?t.sequence([function(r){return t.blobs.neq(o[4],void 0)?t.sequence([function(r){return t.blobs.neq(o[3],void 0)?t.sequence([function(r){return t.blobs.neq(o[0],void 0)?t.sequence([function(r){return t.blobs.neq(o[5],void 0)?t.sequence([function(r){return t.nativeOperation(n("LSMinosVerifySingleEpoch.nop"),o[2],e[0],o[3],o[0],o[4],o[6],o[5]).then(function(e){var t;return t=e,o[42]=t[0],t})},function(r){return o[42]?t.sequence([function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[27],"native_op_success"):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!0):t.resolve()}]):t.sequence([function(r){return o[43]=["MinosPublicKeyClientUtils",".",["Key verification failed for contact id: ","",t.i64.to_string(e[0])].join("")].join(""),o[27]!==void 0&&o[43]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[43]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()}])},function(e){return o[41]=o[42]}]):t.sequence([function(e){return o[42]=["MinosPublicKeyClientUtils",".","Missing or Null Epoch Signature Self"].join(""),o[27]!==void 0&&o[42]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[42]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[41]=!1}])},function(e){return o[40]=o[41]}]):t.sequence([function(e){return o[41]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Encryption Public Key"].join(""),o[27]!==void 0&&o[41]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[41]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[40]=!1}])},function(e){return o[39]=o[40]}]):t.sequence([function(e){return o[40]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Signing Public Key"].join(""),o[27]!==void 0&&o[40]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[40]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[39]=!1}])},function(e){return o[38]=o[39]}]):t.sequence([function(e){return o[39]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Auth Public Key"].join(""),o[27]!==void 0&&o[39]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[39]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[38]=!1}])},function(e){return o[28]=o[38]}]):t.sequence([function(e){return o[38]=["MinosPublicKeyClientUtils",".","Missing or Null Minos Epoch Anon ID"].join(""),o[27]!==void 0&&o[38]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[27],"error",o[38]):t.resolve()},function(e){return o[27]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[27],!1):t.resolve()},function(e){return o[28]=!1}])},function(n){var r,a,i,l,s;return o[28]?(r=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[29]=r[0],o[30]=r[1],o[31]=r[2],o[32]=r[3],o[33]=r[4],o[34]=r[5],o[35]=r[6],o[36]=r[7],o[37]=r[8]):(o[38]=t.createArray(),o[51]=(o[38].push(e[0]),o[38]),o[39]=new t.Map,o[40]=o[39].get(e[0]),o[40]?o[41]=!1:o[41]=!0,o[41]?(i=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[42]=i[0],o[43]=i[1],o[44]=i[2],o[45]=i[3],o[46]=i[4],o[47]=i[5],o[48]=i[6],o[49]=i[7],o[50]=i[8]):(o[51]=o[40].get("mailbox_encryption_public_key"),o[52]=o[40].get("epoch_anon_id"),o[53]=o[40].get("epoch_head"),o[54]=o[40].get("epoch_head_creation_time"),o[55]=o[40].get("minos_mailbox_public_keys_fbid"),a=[o[51],o[52],o[53],o[54],o[55],void 0,void 0,void 0,void 0],o[42]=a[0],o[43]=a[1],o[44]=a[2],o[45]=a[3],o[46]=a[4],o[47]=a[5],o[48]=a[6],o[49]=a[7],o[50]=a[8]),l=[o[42],o[43],o[44],o[45],o[46],o[47],o[48],o[49],o[50]],o[29]=l[0],o[30]=l[1],o[31]=l[2],o[32]=l[3],o[33]=l[4],o[34]=l[5],o[35]=l[6],o[36]=l[7],o[37]=l[8]),s=[o[29],o[30],o[31],o[32],o[33],o[34],o[35],o[36],o[37]],o[18]=s[0],o[19]=s[1],o[20]=s[2],o[21]=s[3],o[22]=s[4],o[23]=s[5],o[24]=s[6],o[25]=s[7],o[26]=s[8]}])},function(e){var t;return t=[o[18],o[19],o[20],o[21],o[22],o[23],o[24],o[25],o[26]],o[7]=t[0],o[8]=t[1],o[9]=t[2],o[10]=t[3],o[11]=t[4],o[12]=t[5],o[13]=t[6],o[14]=t[7],o[15]=t[8],t}]):t.resolve((o[17]=t.createArray(),o[30]=(o[17].push(e[0]),o[17]),o[18]=new t.Map,o[19]=o[18].get(e[0]),o[19]?o[20]=!1:o[20]=!0,o[20]?(l=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[21]=l[0],o[22]=l[1],o[23]=l[2],o[24]=l[3],o[25]=l[4],o[26]=l[5],o[27]=l[6],o[28]=l[7],o[29]=l[8]):(o[30]=o[19].get("mailbox_encryption_public_key"),o[31]=o[19].get("epoch_anon_id"),o[32]=o[19].get("epoch_head"),o[33]=o[19].get("epoch_head_creation_time"),o[34]=o[19].get("minos_mailbox_public_keys_fbid"),i=[o[30],o[31],o[32],o[33],o[34],void 0,void 0,void 0,void 0],o[21]=i[0],o[22]=i[1],o[23]=i[2],o[24]=i[3],o[25]=i[4],o[26]=i[5],o[27]=i[6],o[28]=i[7],o[29]=i[8]),s=[o[21],o[22],o[23],o[24],o[25],o[26],o[27],o[28],o[29]],o[7]=s[0],o[8]=s[1],o[9]=s[2],o[10]=s[3],o[11]=s[4],o[12]=s[5],o[13]=s[6],o[14]=s[7],o[15]=s[8]))},function(a){return r("gkx")("20879")&&r("gkx")("16269"),r("gkx")("11690")&&r("gkx")("16269")?t.nativeOperation(n("LSWriteMinosPublicKey.nop"),e[0],o[8],o[10],o[7],o[9],o[11],o[14],o[13],o[12],o[15]):t.resolve()},function(r){return t.sequence([function(r){return t.db.table(53).fetch([[[e[0]]],"optimistic"]).next().then(function(e,r){var a=e.done,i=e.value;return a?o[17]=t.i64.cast([0,0]):(r=i.item,t.sequence([function(e){return t.sortBy(t.filter(t.db.table(54).fetch(),function(e){return t.i64.eq(e.bucketId,r.bucketId)}),[["timestampMs","DESC"]]).next().then(function(e,r){var a=e.done,i=e.value;return a?o[19]=t.i64.cast([0,0]):(r=i.item,t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,o[21]=t[0],t})},function(e){return t.db.table(55).fetch([[[r.storyId,o[21],t.i64.cast([0,1])]]]).next().then(function(e,n){var r=e.done,a=e.value;return r?(o[24]=t.i64.cast([0,1]),o[22]=o[24]):(n=a.item,o[24]=t.i64.cast([0,2]),o[22]=o[24])})},function(e){return o[19]=o[22]}]))})},function(e){return o[17]=o[19]}]))})},function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))&&t.i64.gt(n.authorityLevel,e[21])}).next().then(function(n){var r=n.done,a=n.value;return r?t.db.table(7).put({id:e[0],profilePictureUrl:e[2],profilePictureFallbackUrl:e[3],profilePictureUrlExpirationTimestampMs:e[4],profilePictureLargeUrl:e[5],profilePictureLargeFallbackUrl:e[6],profilePictureLargeUrlExpirationTimestampMs:e[7],name:e[9],secondaryName:e[41],normalizedNameForSearch:e[10],normalizedSearchTerms:e[33],isMessengerUser:e[11],isMemorialized:e[12],isManagedByViewer:e[35],blockedByViewerStatus:e[14],rank:e[17],firstName:e[18],contactType:e[19],contactTypeExact:e[20],authorityLevel:e[21],messengerCallLogThirdPartyId:e[22],profileRingColor:e[23],requiresMultiway:e[24],blockedSinceTimestampMs:e[25],fbUnblockedSinceTimestampMs:e[48],canViewerMessage:e[26],profileRingColorExpirationTimestampMs:e[27],phoneNumber:e[28],emailAddress:e[29],workCompanyId:e[30],workCompanyName:e[31],workJobTitle:e[32],deviceContactId:e[34],workForeignEntityType:e[36],capabilities:e[37],capabilities2:e[38],profileRingState:o[17],contactViewerRelationship:e[39],gender:e[40],username:e[43],contactReachabilityStatusType:e[44],friendshipStatus:e[45],restrictionType:e[46],waConnectStatus:e[47],isEmployee:!1,pageType:e[49]}):0})}])},function(r){return t.storedProcedure(n("LSSetThreadImageURL"),e[0],e[2],e[3],e[4],!1,!0)}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure",e.__tables__=["story_buckets","stories","story_viewers","contacts"];var s=e;l.default=s}),98);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(175).put({id:e[0],globalMuteUntil:e[1],showMessagePreview:e[4],isSoundOn:e[7],groupNotificationSetting:e[8],oneToOneNotificationSetting:e[9],replyReminderSetting:e[10],messageReminderDisabled:e[12],messageSound:e[13],ringtoneSound:e[14],newFriendBumpDisabledSetting:e[15],globalMuteMessageUntil:e[2],globalMuteCallUntil:e[3],includeInSwitchAccountBadges:e[11],dismissNfbThreadsCount:e[16],mutePageAccountMessageReminder:e[17]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSDeleteThenInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[29],parentThreadKey:e[35],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:e[56],isDisappearingMode:e[57],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[35],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[35],e[10]],n[5]=i[0],n[6]=i[1]),t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[29],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]})):t.db.table(9).put({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[29],parentThreadKey:e[35],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteCallsExpireTimeMs:e[15],groupNotificationSettings:e[16],isAdminSnippet:e[17],snippetSenderContactId:e[18],snippetText:e[20],snippetStringHash:e[21],snippetStringArgument1:e[22],snippetAttribution:e[23],snippetAttributionStringHash:e[24],disappearingSettingTtl:e[25],disappearingSettingUpdatedTs:e[26],disappearingSettingUpdatedBy:e[27],cannotReplyReason:e[30],customEmoji:e[31],customEmojiImageUrl:e[32],outgoingBubbleColor:e[33],themeFbid:e[34],nullstateDescriptionText1:e[36],nullstateDescriptionType1:e[37],nullstateDescriptionText2:e[38],nullstateDescriptionType2:e[39],nullstateDescriptionText3:e[40],nullstateDescriptionType3:e[41],snippetHasEmoji:e[42],hasPersistentMenu:e[43],disableComposerInput:e[44],cannotUnsendReason:e[45],viewedPluginKey:e[46],viewedPluginContext:e[47],clientThreadKey:e[48],capabilities:e[49],shouldRoundThreadPicture:e[50],proactiveWarningDismissTime:e[51],isCustomThreadPicture:e[52],otidOfFirstMessage:e[53],normalizedSearchTerms:e[54],additionalThreadContext:e[55],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[58],unreadDisappearingMessageCount:e[59],lastMessageCtaId:e[61],lastMessageCtaType:e[62],consistentThreadFbid:e[63],threadDescription:e[64],unsendLimitMs:e[65],syncGroup:e[66],threadInvitesEnabled:e[67],threadInviteLink:e[68],numUnreadSubthreads:e[69],subthreadCount:e[70],threadInvitesEnabledV2:e[71],joinRequestApprovalSetting:e[72],pendingJoinRequestsCount:e[73],eventStartTimestampMs:e[74],eventEndTimestampMs:e[75],takedownState:e[76],memberCount:e[77],admodCount:e[78],secondaryParentThreadKey:e[79],igFolder:e[80],inviterId:e[81],threadTags:e[82],readReceiptsDisabledV2:e[83],threadStatus:e[84],threadSubtype:e[85],pauseThreadTimestamp:e[86],metadata:e[87],syncSource:e[88]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSGroupRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.neq(e.groupRoomType,void 0)&&t.i64.neq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(162).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.folderId,e[0])&&t.i64.gt(t.i64.cast([0,80]),e[54])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(162).put({folderId:e[0],fbGroupId:e[1],name:e[2],memberCount:e[4],description:e[3],pictureUrl:e[5],pictureUrlFallback:e[6],pictureUrlExpirationTimestampMs:e[7],joiningChannelTaskId:e[8],afterJoiningOpenChannelId:e[10],capabilities:e[11],capabilities2:e[12],capabilities3:e[13],notificationSetting:e[14],notificationMutedUntil:e[15],sendsBlockedUntil:e[17],isHidden:e[18],hasSeenDisablingAlert:e[19],inviteLink:e[21],communityType:e[22],directInviteLink:e[23],enableState:e[24],takedownState:e[25],fbGroupType:e[28],threadCount:e[29],disableTimestamp:e[32],readTimestampMs:e[33],inviteStatus:e[37],blockedFromCommunityMemberCount:e[40],categoryCount:e[41],snippetText:e[42],coverPicUrl:e[43],coverPicUrlFallback:e[44],coverPicUrlExpirationTimestampMs:e[45],invitedThreadId:e[47],fbGroupUserParticipationApprovalStatus:e[48],ccAdminAssistRegistrationStatus:e[49],pauseStatus:e[50],isMember:e[51],latestThreadId:e[52],latestThreadActivityTimestampMs:e[53]}):0})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSUpdateOrInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).add({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:e[59],isDisappearingMode:e[60],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[38],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[38],e[10]],n[5]=i[0],n[6]=i[1]),t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,a=t.item;return r({lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[32],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,o=t.item;return r({lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.storedProcedure(n("LSDeleteThenInsertCommunityFolder"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],void 0,void 0,void 0,e[11],e[12],e[13],e[14],e[15],void 0,e[16],e[17],e[18],void 0,e[19],e[20],e[21],e[22],e[23],void 0,void 0,e[24],e[26],void 0,void 0,e[25],e[37],void 0,void 0,t.i64.cast([0,0]),e[29],void 0,t.i64.cast([0,1]),e[28],e[27],e[30],e[31],e[32],e[33],void 0,e[34],e[35],e[36],e[38],e[39],void 0,void 0,t.i64.cast([0,80]))},function(r){return t.storedProcedure(n("LSUpdateOrInsertThread"),e[8],e[9],e[10],e[2],e[5],void 0,t.i64.cast([0,80]),e[0],t.i64.cast([0,0]),t.i64.cast([0,17]),"community",e[6],e[7],t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,e[40],void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0)}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.eq(e.groupRoomType,void 0)||t.i64.eq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSTruncateCommunityListTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(166).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSTruncateNotificationSettings",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(175).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncCompletedTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSUpsertGradientColor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(117).put({themeFbid:e[0],gradientIndex:e[1],color:e[2],type_:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertGradientColorStoredProcedure",e.__tables__=["gradient_colors"],a.exports=e}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.i64.neq(e[1],void 0)?r[1]=e[1]:r[1]=r[0],t.db.table(25).put({id:r[1],lastAppliedMailboxSequenceId:e[0]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpsertSequenceIdStoredProcedure",e.__tables__=["mailbox_metadata"],a.exports=e}),null);
__d("LSUpsertTheme",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.neq(e[12],void 0)?n[0]=e[12]:n[0]=e[0],t.db.table(116).put({fbid:e[0],themeIdx:e[1],fallbackColor:e[2],reverseGradiantsForRadial:e[3],accessibilityLabel:e[4],iconUrl:e[5],iconUrlFallback:e[6],backgroundUrl:e[8],description:e[9],isDeprecated:e[11],normalThemeId:n[0],appColorMode:e[13],titlebarBackgroundColor:e[14],titlebarButtonTintColor:e[15],titlebarTextColor:e[16],titlebarAttributionTextColor:e[17],composerTintColor:e[18],composerUnselectedTintColor:e[19],composerInputTextPlaceholderColor:e[20],composerInputBackgroundColor:e[21],composerInputBorderColor:e[22],composerInputBorderWidth:e[23],composerBackgroundColor:e[24],messageTextColor:e[25],messageBorderColor:e[26],messageBorderWidth:e[27],incomingMessageTextColor:e[28],incomingMessageBorderColor:e[29],incomingMessageBorderWidth:e[30],deliveryReceiptColor:e[31],tertiaryTextColor:e[32],primaryButtonBackgroundColor:e[33],hotLikeColor:e[34],reactionPillBackgroundColor:e[35],secondaryTextColor:e[36],quotedIncomingMessageBubbleColor:e[37],cornerRadius:e[38],blurredComposerBackgroundColor:e[39],composerSecondaryButtonColor:e[40],composerPlaceholderTextColor:e[41]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertThemeStoredProcedure",e.__tables__=["thread_themes"],a.exports=e}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSReplaceOptimisticReaction","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(t,n,r,o,a,i,l){"use strict";var e={deleteAllCommunityChannelCategories:r("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:r("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:r("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:r("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:r("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:r("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:r("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:r("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:r("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:r("LSGroupRoomTruncate"),populateCommunityFolderData:r("LSPopulateCommunityFolderData"),removeTask:r("LSRemoveTask"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),roomTruncate:r("LSRoomTruncate"),setRegionHint:r("LSSetRegionHint"),taskExists:r("LSTaskExists"),truncateCommunityListTable:r("LSTruncateCommunityListTable"),truncateNotificationSettings:r("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:r("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:r("LSUpsertGradientColor"),upsertSequenceId:r("LSUpsertSequenceId"),upsertTheme:r("LSUpsertTheme"),verifyContactRowExists:r("LSVerifyContactRowExists")},s=e;l.default=s}),98);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSBase64Decode.nop"),e[4]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.blobs.neq(r[0],void 0)?t.db.table(307).put({configId:e[1],projectName:e[0],cipherSuite:e[5],publicKey:r[0],maxEvals:e[2],redemptionLimit:e[3],expirationTimestampMs:e[6],tokenPollFrequencyMs:e[7],maxClientTokenPoolSize:e[8]}):((function(e){t.logger(e).info(e)})("issuing retry for project configurations task since public key was null"),r[1]=new t.Map,r[1].set("project_name",e[0]),r[2]=r[1].get("project_name"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),["acs_credentials","_",r[2]].join(""),t.i64.cast([0,351]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure",e.__tables__=["secure_acs_configurations"],a.exports=e}),null);
__d("LSSyncBumpThreadDataToClient",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[1],n.lastActivityTimestampMs)}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(o){return t.i64.eq(a.parentThreadKey,t.i64.cast([-1,4294967286]))&&t.i64.eq(e[2],t.i64.cast([0,2]))?(r[0]=new t.Map,r[0].set("thread_fbid",e[0]),r[0].set("force_upsert",!1),r[0].set("use_open_messenger_transport",!1),r[0].set("sync_group",t.i64.cast([0,95])),r[0].set("metadata_only",!1),r[0].set("preview_only",!1),r[1]=r[0].get("thread_fbid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,209]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1]})})},function(n){return t.i64.eq(e[2],t.i64.cast([0,1]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.i64.eq(e[2],t.i64.cast([0,2]))?t.resolve(0):t.i64.eq(e[2],t.i64.cast([0,3]))?t.i64.ge(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve():t.resolve(0)}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxSyncBumpThreadDataToClientStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIsMobileClient",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return r[0]=!1,t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLogMEBUploadSuccessEvent.nop",["Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EncryptedBackupUploadFailureFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),u=r("requireDeferred")("EncryptedBackupUploadSuccessFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),c=function(r,o,a,i,l){if(a!=null){var t=l?u.load():s.load();t.then(function(e){return e.log(function(){return{message_id:a,trace_id:i}})})}return(e||(e=n("Promise"))).resolve()};c.__nop_name__="LSLogMEBUploadSuccessEvent",l.default=c}),98);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3226"),s=o("FalcoLoggerInternal").create("meb_client_logs",e),u=s;l.default=u}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){return r("MebClientLogsFalcoEvent").log(function(){return{calling_class:l,device_family_id:void 0,device_registration_id:void 0,log_level:(s||(s=o("I64"))).to_string(d),msg:u,trace_ids:r("LSVec").toArray(c)}}),(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSLogMebClientEvent",l.default=u}),98);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMEBUploadSuccessEvent.nop","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return e[3]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_sproc_start"):t.resolve()},function(r){return e[3]!==void 0&&e[4]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_error_message",e[4]):t.resolve()},function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),t.i64.neq(void 0,void 0)?(r[9]=["deleteBackupOnClient reason: "," ",t.i64.to_string(void 0)].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[r[9]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(e){return r[1]="Beginning deleteBackupOnClient stored procedure",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[1]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[1]].join(""),r[2],t.i64.cast([0,4]))},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(168).fetch([[[e[0]]]]),function(e){return e.delete()}):t.forEach(t.db.table(168).fetch(),function(e){return e.delete()})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(169).fetch([[[e[0]]],"fk_secure_encrypted_backups_client_state"]),function(e){return e.delete()}):t.forEach(t.db.table(169).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(174).fetch(),function(e){return e.delete()})},function(n){return e[1]==="fetch_virtual_device"?t.db.table(178).put({pk:t.i64.cast([0,1]),recoveryCodeStatus:t.i64.cast([0,4])}):t.resolve()},function(o){return e[2]?t.sequence([function(e){return r[9]="Clearing state management backups tables",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[9]].join(""),r[10],t.i64.cast([0,4]))},function(e){return t.forEach(t.db.table(172).fetch([[[t.i64.cast([0,1])]]]),function(e){var t=e.update,n=e.item;return t({backupId:void 0})})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.filter(t.db.table(184).fetch(),function(n){return t.i64.eq(n.backupId,e[0])}),function(e){return e.delete()}):t.forEach(t.db.table(184).fetch(),function(e){return e.delete()})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(196).fetch([[[e[0]]]]),function(e){return e.delete()}):t.forEach(t.db.table(196).fetch(),function(e){return e.delete()})}]):t.resolve()},function(e){return t.sequence([function(e){return t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}])},function(e){return t.forEach(t.db.table(177).fetch(),function(e){var r=e.item;return t.sequence([function(e){return t.forEach(t.db.table(2).fetch([[[r.pendingBackupTaskId]]]),function(e){return e.delete()})},function(e){return t.i64.eq(r.contentType,t.i64.cast([0,1]))?t.nativeOperation(n("LSLogMEBUploadSuccessEvent.nop"),r.uniqueKey,r.lsTraceId,!0):t.resolve()}])})},function(e){return t.count(t.db.table(177).fetch()).then(function(e){return r[9]=e})},function(e){return t.i64.eq(r[9],t.i64.cast([0,0]))?t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}]):t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}])}])},function(o){return e[2]?(r[9]="Clearing data flow backups tables",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[9]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(o){return e[5]?t.resolve(0):e[4]!==void 0?((function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",e[4]].join("")),r[9]=t.createArray(),e[3]!==void 0&&(r[10]=(r[9].push(e[3]),r[9])),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",e[4],r[9],t.i64.cast([0,3]))):t.resolve()},function(e){return r[3]=t.i64.of_float(Date.now()),r[4]=t.i64.random(),r[6]="Finishing execution. Execution time: ",r[7]=t.i64.to_string(t.i64.sub(r[3],r[0])),r[8]=" ms",r[5]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",r[5],r[6],r[5],r[7],r[5],r[8]].join("")),t.i64.eq(t.i64.mod_(r[4],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[9]=",",r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[r[6],r[9],r[7],r[9],r[8]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(r){return e[3]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_sproc_end"):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_generated_recovery_code","secure_encrypted_backups_recovery_code_status","encrypted_backups","encrypted_backups_virtual_devices","encrypted_backups_metadata","pending_backups_context_v2","pending_tasks"],a.exports=e}),null);
__d("LSDeleteAndReenrollDeviceState",["LSArrayGetObjectAt","LSDeleteBackupOnClient","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Beginning execution."),t.i64.neq(e[0],void 0)?t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_msg","Expected a nonempty query result"),r[13].set("code",t.i64.cast([0,3])),r[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[14]=t.createArray(),r[15]=(r[14].push(r[13]),r[14]),o=[void 0,r[14]],r[7]=o[0],r[8]=o[1]):(n=l.item,r[13]=new t.Map,r[13].set("backup_id",n.backupId),r[13].set("device_public_key_blob",n.devicePublicKeyBlob),r[13].set("device_private_key_blob",n.devicePrivateKeyBlob),r[13].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[13].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[13].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[13].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[13].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[13].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[13].set("orf_client_state_v2_blob",void 0),r[13].set("orf_v2_authority_level",void 0),r[13].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[13].set("device_id",n.deviceId),r[13].set("backup_tenancy",n.backupTenancy),r[13].set("encryption_version",n.encryptionVersion),r[13].set("revision_version",n.revisionVersion),r[13].set("initialize_restore_result",void 0),r[13].set("device_creation_timestamp_sec",void 0),r[13].set("authority_level",n.authorityLevel),a=[r[13],void 0],r[7]=a[0],r[8]=a[1])})},function(o){return r[10]=new t.Map,r[10].set("value",r[7]),r[10].set("errors",r[8]),r[11]=r[10].get("value"),r[11]!==void 0?t.sequence([function(o){return r[13]=r[11].get("backup_id"),r[14]=r[11].get("device_public_key_blob"),r[15]=r[11].get("device_private_key_blob"),r[16]=r[11].get("epoch_storage_public_key_blob"),r[17]=r[11].get("epoch_storage_private_key_blob"),r[18]=r[11].get("epoch_auth_public_key_blob"),r[19]=r[11].get("epoch_auth_private_key_blob"),r[20]=r[11].get("mailbox_root_key_blob"),r[21]=r[11].get("ocmf_client_state_blob"),r[22]=r[11].get("orf_client_state_v2_blob"),r[23]=r[11].get("orf_v2_authority_level"),r[24]=r[11].get("oblivious_validation_token_blob"),r[25]=r[11].get("device_id"),r[26]=r[11].get("backup_tenancy"),r[27]=r[11].get("encryption_version"),r[28]=r[11].get("revision_version"),r[29]=r[11].get("initialize_restore_result"),r[30]=r[11].get("device_creation_timestamp_sec"),r[31]=r[11].get("authority_level"),t.i64.neq(r[25],void 0)?t.sequence([function(e){return r[33]=void 0,t.i64.neq(r[33],void 0)?t.resolve(r[34]=r[33]):t.sequence([function(e){return r[37]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[47]=(r[37].push(t.i64.cast([0,0])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[39]&&(r[47]=(r[37].push(t.i64.cast([0,2])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[40]&&(r[47]=(r[37].push(t.i64.cast([0,3])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[41]&&(r[47]=(r[37].push(t.i64.cast([0,4])),r[37])),r[42]=t.createArray(),r[43]=t.i64.of_int32(r[37].length),t.i64.gt(r[43],t.i64.cast([0,0]))?t.loopAsync(r[43],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[42].push(r[48]),r[42])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[47]=t.createArray(),r[48]=t.i64.of_int32(r[42].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[50]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],r[50]).then(function(e){var t;return t=e,r[51]=t[0],r[52]=t[1],t})},function(e){return r[53]=(r[47].push(t.i64.to_string(r[51])),r[47])}])}):t.resolve()},function(e){return r[49]=r[47].join(","),r[44]=r[49]}])},function(e){return r[42].some(function(e){return t.i64.eq(r[27],e)})?r[45]=r[27]:r[45]=void 0,t.i64.neq(r[45],void 0)?r[46]=r[45]:r[46]=void 0,r[34]=r[46]}])},function(o){return t.i64.neq(r[34],void 0)?r[35]=r[34]:r[35]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[36]=r[26]:r[36]=t.i64.cast([0,1]),t.i64.eq(r[25],e[0])?t.sequence([function(e){return t.storedProcedure(n("LSDeleteBackupOnClient"),r[13],void 0,!1,void 0,void 0,!0)},function(n){return r[37]=t.i64.of_float(Date.now()),t.db.table(343).add({pk:void 0,deviceReenrollmentReason:e[1],reenrollmentTimestamp:r[37]})}]):t.resolve(0)},function(e){return r[32]=!0}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 24"),r[34]="Failed to load client state: 24",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[34]].join("")),r[33]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[34],r[33],t.i64.cast([0,3]))},function(e){return r[32]=!1}])},function(e){return r[12]=r[32]}]):t.sequence([function(e){return r[13]=r[10].get("errors"),r[14]=r[10].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 1"),r[16]="Failed to load client state: 1",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[16]].join("")),r[15]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[16],r[15],t.i64.cast([0,3]))},function(e){return r[12]=!1}])}]):t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!0}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_msg","Expected a nonempty query result"),r[13].set("code",t.i64.cast([0,3])),r[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[14]=t.createArray(),r[15]=(r[14].push(r[13]),r[14]),o=[void 0,r[14]],r[7]=o[0],r[8]=o[1]):(n=l.item,r[13]=new t.Map,r[13].set("backup_id",n.backupId),r[13].set("device_public_key_blob",n.devicePublicKeyBlob),r[13].set("device_private_key_blob",n.devicePrivateKeyBlob),r[13].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[13].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[13].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[13].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[13].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[13].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[13].set("orf_client_state_v2_blob",void 0),r[13].set("orf_v2_authority_level",void 0),r[13].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[13].set("device_id",n.deviceId),r[13].set("backup_tenancy",n.backupTenancy),r[13].set("encryption_version",n.encryptionVersion),r[13].set("revision_version",n.revisionVersion),r[13].set("initialize_restore_result",void 0),r[13].set("device_creation_timestamp_sec",void 0),r[13].set("authority_level",n.authorityLevel),a=[r[13],void 0],r[7]=a[0],r[8]=a[1])})},function(e){return r[10]=new t.Map,r[10].set("value",r[7]),r[10].set("errors",r[8]),r[11]=r[10].get("value"),r[11]!==void 0?t.sequence([function(e){return r[13]=r[11].get("backup_id"),r[14]=r[11].get("device_public_key_blob"),r[15]=r[11].get("device_private_key_blob"),r[16]=r[11].get("epoch_storage_public_key_blob"),r[17]=r[11].get("epoch_storage_private_key_blob"),r[18]=r[11].get("epoch_auth_public_key_blob"),r[19]=r[11].get("epoch_auth_private_key_blob"),r[20]=r[11].get("mailbox_root_key_blob"),r[21]=r[11].get("ocmf_client_state_blob"),r[22]=r[11].get("orf_client_state_v2_blob"),r[23]=r[11].get("orf_v2_authority_level"),r[24]=r[11].get("oblivious_validation_token_blob"),r[25]=r[11].get("device_id"),r[26]=r[11].get("backup_tenancy"),r[27]=r[11].get("encryption_version"),r[28]=r[11].get("revision_version"),r[29]=r[11].get("initialize_restore_result"),r[30]=r[11].get("device_creation_timestamp_sec"),r[31]=r[11].get("authority_level"),t.i64.neq(r[25],void 0)?t.sequence([function(e){return r[33]=void 0,t.i64.neq(r[33],void 0)?t.resolve(r[34]=r[33]):t.sequence([function(e){return r[37]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[38]&&(r[47]=(r[37].push(t.i64.cast([0,0])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[39]=t[0],t})},function(e){return r[39]&&(r[47]=(r[37].push(t.i64.cast([0,2])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[40]=t[0],t})},function(e){return r[40]&&(r[47]=(r[37].push(t.i64.cast([0,3])),r[37])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[41]=t[0],t})},function(e){return r[41]&&(r[47]=(r[37].push(t.i64.cast([0,4])),r[37])),r[42]=t.createArray(),r[43]=t.i64.of_int32(r[37].length),t.i64.gt(r[43],t.i64.cast([0,0]))?t.loopAsync(r[43],function(e){return r[47]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[47]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],t})},function(e){return r[50]=(r[42].push(r[48]),r[42])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[47]=t.createArray(),r[48]=t.i64.of_int32(r[42].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[50]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],r[50]).then(function(e){var t;return t=e,r[51]=t[0],r[52]=t[1],t})},function(e){return r[53]=(r[47].push(t.i64.to_string(r[51])),r[47])}])}):t.resolve()},function(e){return r[49]=r[47].join(","),r[44]=r[49]}])},function(e){return r[42].some(function(e){return t.i64.eq(r[27],e)})?r[45]=r[27]:r[45]=void 0,t.i64.neq(r[45],void 0)?r[46]=r[45]:r[46]=void 0,r[34]=r[46]}])},function(e){return t.i64.neq(r[34],void 0)?r[35]=r[34]:r[35]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[36]=r[26]:r[36]=t.i64.cast([0,1]),r[32]=!0}]):t.resolve(r[32]=!1)},function(e){return r[12]=r[32]}]):t.resolve((r[13]=r[10].get("errors"),r[14]=r[10].get("errors"),r[12]=!1))},function(o){return r[12]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failure. Attempted to reset nux flags on an onboarded device"),r[14]="Failure. Attempted to reset nux flags on an onboarded device",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",r[14]].join("")),r[13]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",r[14],r[13],t.i64.cast([0,3]))):(r[13]=t.i64.of_float(Date.now()),t.db.table(343).add({pk:void 0,deviceReenrollmentReason:e[1],reenrollmentTimestamp:r[13]}))}])},function(e){return r[1]=t.i64.of_float(Date.now()),r[2]=t.i64.random(),r[4]="Finishing execution. Execution time: ",r[5]=t.i64.to_string(t.i64.sub(r[1],r[0])),r[6]=" ms",r[3]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ",r[3],r[4],r[3],r[5],r[3],r[6]].join("")),t.i64.eq(t.i64.mod_(r[2],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[7]=",",r[8]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",[r[4],r[7],r[5],r[7],r[6]].join(""),r[8],t.i64.cast([0,4]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","encrypted_backups_reenrollment_trigger"],a.exports=e}),null);
__d("LSTriggerReenrollementFromOptOutDelta",["LSArrayGetObjectAt","LSDeleteAndReenrollDeviceState","LSIsEncryptionVersionSecure"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r[16]=a[16],r[17]=a[17],a):(o=l.item,t.sequence([function(e){return r[26]=o.backupTenancy,r[25]=o.encryptionVersion,r[21]=void 0,t.i64.neq(r[21],void 0)?t.resolve(r[22]=r[21]):t.sequence([function(e){return r[27]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[28]&&(r[37]=(r[27].push(t.i64.cast([0,0])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]&&(r[37]=(r[27].push(t.i64.cast([0,2])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return r[30]&&(r[37]=(r[27].push(t.i64.cast([0,3])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[31]&&(r[37]=(r[27].push(t.i64.cast([0,4])),r[27])),r[32]=t.createArray(),r[33]=t.i64.of_int32(r[27].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[37]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[27],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=(r[32].push(r[38]),r[32])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[37]=t.createArray(),r[38]=t.i64.of_int32(r[32].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[40]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[40]).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return r[43]=(r[37].push(t.i64.to_string(r[41])),r[37])}])}):t.resolve()},function(e){return r[39]=r[37].join(","),r[34]=r[39]}])},function(e){return r[32].some(function(e){return t.i64.eq(r[25],e)})?r[35]=r[25]:r[35]=void 0,t.i64.neq(r[35],void 0)?r[36]=r[35]:r[36]=void 0,r[22]=r[36]}])},function(e){var n;return t.i64.neq(r[22],void 0)?r[23]=r[22]:r[23]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[24]=r[26]:r[24]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[23],r[24],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r[16]=n[16],r[17]=n[17]}]))})},function(o){return r[19]=!1,r[20]=t.i64.of_int32(e[1].length),t.i64.gt(r[20],t.i64.cast([0,0]))?t.loopAsync(r[20],function(o){return r[21]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[21]).then(function(e){var t;return t=e,r[22]=t[0],r[23]=t[1],t})},function(e){return r[19]=r[19]||t.i64.eq(r[22],r[1])}])}):t.resolve()},function(o){return r[19]&&t.i64.eq(e[0],r[0])&&t.i64.neq(r[1],void 0)?t.storedProcedure(n("LSDeleteAndReenrollDeviceState"),r[1],t.i64.cast([0,6])):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTriggerReenrollementFromOptOutDeltaStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a){if(r("gkx")("9855")){for(var t=n.mi_act_mapping_table.keys(new WeakMap);;){var i,l=await t.next();if(l.done)break;await(i=n.mi_act_mapping_table).delete.apply(i,l.value)}for(var u=o("ReQL").fromTableAscending(n.threads).filter(function(t){return t.syncGroup!=null&&(e||(e=o("I64"))).equal(t.syncGroup,(s||(s=o("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap);;){var c,d=await u.next();if(d.done)break;await(c=n.threads).delete.apply(c,d.value[0])}}return Promise.resolve()};u.__nop_name__="LSTruncateMetadataThreads",l.default=u}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.nativeOperation(n("LSTruncateMetadataThreads.nop"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTruncateThreadRangeTablesForSyncGroup",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.i64.eq(e[0],t.i64.cast([0,1]))?t.forEach(t.filter(t.db.table(10).fetch(),function(e){return t.i64.eq(t.i64.cast([0,1])==null?t.i64.cast([0,1]):t.i64.cast([0,1]),t.i64.cast([0,1]))}),function(e){return e.delete()}):t.i64.eq(e[0],t.i64.cast([0,95]))?t.forEach(t.filter(t.db.table(10).fetch([[[t.i64.cast([0,0])],[t.i64.cast([-1,4294967295])]]]),function(e){return t.i64.eq(t.i64.cast([0,1])==null?t.i64.cast([0,1]):t.i64.cast([0,1]),t.i64.cast([0,1]))&&(t.i64.eq(e.parentThreadKey,t.i64.cast([0,0]))||t.i64.eq(e.parentThreadKey,t.i64.cast([-1,4294967295])))}),function(e){return e.delete()}):t.resolve(0)},function(n){return t.i64.eq(e[0],t.i64.cast([0,1]))?t.forEach(t.filter(t.db.table(247).fetch(),function(e){return t.i64.eq(e.syncGroup==null?t.i64.cast([0,1]):e.syncGroup,t.i64.cast([0,1]))}),function(e){return e.delete()}):t.resolve()},function(n){return t.forEach(t.db.table(198).fetch([[[e[0]]]]),function(e){return e.delete()})},function(n){return t.forEach(t.db.table(220).fetch([[[e[0]]]]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTruncateThreadRangeTablesForSyncGroupStoredProcedure",e.__tables__=["threads_ranges_v2__generated","filtered_threads_ranges_v3__generated","inbox_threads_ranges","sync_group_threads_ranges"],a.exports=e}),null);
__d("LSTruncateTablesForSyncGroup",["LSTruncateThreadRangeTablesForSyncGroup"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(9).fetch(),function(n){return(t.i64.eq(n.syncGroup,e[0])||t.i64.eq(n.syncGroup,void 0)&&t.i64.eq(t.i64.cast([0,1]),e[0]))&&![t.i64.cast([0,17]),t.i64.cast([0,18]),t.i64.cast([0,19]),t.i64.cast([0,20]),t.i64.cast([0,21]),t.i64.cast([0,22]),t.i64.cast([0,23]),t.i64.cast([0,24]),t.i64.cast([0,25]),t.i64.cast([0,26]),t.i64.cast([0,27]),t.i64.cast([0,28])].some(function(e){return t.i64.eq(n.threadType,e)})}),function(e){return e.delete()})},function(r){return t.storedProcedure(n("LSTruncateThreadRangeTablesForSyncGroup"),e[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxTruncateTablesForSyncGroupStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.eq(e[5],t.i64.cast([0,0]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({defaultCtaId:e[2],defaultCtaTitle:e[3],defaultCtaType:e[4]})}):t.i64.eq(e[5],t.i64.cast([0,1]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta1Id:e[2],cta1Title:e[3],cta1Type:e[4],cta1IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,2]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta2Id:e[2],cta2Title:e[3],cta2Type:e[4],cta2IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,3]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta3Id:e[2],cta3Title:e[3],cta3Type:e[4],cta3IconType:void 0})}):t.resolve((function(e){t.logger(e).warn(e)})("Unexpected CTA index"))},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&([t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)})||t.i64.eq(n.threadType,t.i64.cast([0,152])))}).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.db.table(294).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(294).add({threadKey:e[0],threadQueueSequenceId:t.i64.cast([0,0]),isStale:e[1]}):(r=a.item,t.forEach(t.db.table(294).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({isStale:e[1]})}))}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure",e.__tables__=["threads","community_thread_sync_info"],a.exports=e}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(253).put({surfaceType:e[0],communityKey:e[1],isLoadingAfter:!1,hasMoreAfter:e[2],nextPageCursor:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure",e.__tables__=["community_surface_ranges"],a.exports=e}),null);
__d("LSUpdateReadReceipt",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[2])&&t.i64.lt(n.readWatermarkTimestampMs,e[0])}),function(n){var r=n.update,o=n.item;return r({readWatermarkTimestampMs:e[0],readActionTimestampMs:t.i64.gt(e[3],t.i64.cast([0,0]))?e[3]:o.readActionTimestampMs})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(o){return r[2]=new t.Map,r[2].set("thread_fbid",e[0]),r[2].set("force_upsert",!1),r[2].set("use_open_messenger_transport",!1),r[2].set("sync_group",t.i64.cast([0,104])),r[2].set("metadata_only",!1),r[2].set("preview_only",!1),r[3]=r[2].get("thread_fbid"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,209]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(o){return r[5]=t.createArray(),r[8]=(r[5].push(e[0]),r[5]),r[6]=new t.Map,r[6].set("number_of_threads",t.i64.cast([0,1])),r[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),r[6].set("thread_ids",r[5]),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"log_community_resnapshot_event",t.i64.cast([0,576]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[0]=t.i64.cast([0,2])}]):(a=l.item,t.sequence([function(n){return t.i64.lt(a.lastActivityTimestampMs,e[1])?t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1],snippet:e[2]})})},function(e){return r[2]=t.i64.cast([0,1])}]):t.resolve(r[2]=t.i64.cast([0,0]))},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("RetUtil",["LSResult"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSResult")(e)}l.getNullableRetResult=e}),98);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table.index("jid")).getKeyRange(r));return o("RetUtil").getNullableRetResult(e==null?void 0:e.serverThreadKey)};e.__nop_name__="LSShimGetServerThreadKeyFromJIDV2",l.default=e}),98);
__d("LSReplaceOptimisticThread",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({threadKey:e[1],authorityLevel:t.i64.cast([0,40])})}):(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,40]))?(r("gkx")("14697")?n[2]=!1:n[2]=!0,n[1]=n[2]):n[1]=!0,n[1]?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()}):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure",e.__tables__=["threads"];var s=e;l.default=s}),98);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(32).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})},function(n){return t.forEach(t.filter(t.db.table(31).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure",e.__tables__=["threads_optimistic_context","messages_optimistic_context"],a.exports=e}),null);
__d("LSUpdateTaskQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({queueName:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateTaskValue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({taskValue:r.taskValue.split(e[1]).join(e[2])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSHybridThreadDelete","LSIssueNewTask","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[1]=!1:(t=o.item,r[1]=!0)})},function(n){return t.filter(t.db.table(9).fetch(),function(n){return t.i64.eq(n.threadKey,e[2])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!1:(t=o.item,r[3]=!0)})},function(o){return r[5]=t.i64.neq(r[0],void 0),r[7]=t.i64.eq(r[0],e[2])&&r[5],!r[7]&&!(t.i64.eq(r[0],e[1])&&r[5])&&r[5]&&(function(e){t.logger(e).mustfix(e)})("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."),t.i64.neq(e[2],void 0)?r[6]=e[2]:r[6]=t.i64.cast([0,0]),r[5]?r[7]?t.sequence([function(o){return r[1]?t.sequence([function(n){return t.db.table(173).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[8]=void 0:(t=o.item,r[8]=t.jid)})},function(o){return r[10]=new t.Map,r[10].set("authoritative_thread_key",e[1]),r[10].set("jid_authoritative_mapped",r[8]),r[10].set("jid_optimistic_mapped",e[0]),r[10].set("optimistic_thread_key",e[2]),r[11]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),"e2ee_log_incorrect_occam_mapping",t.i64.cast([0,160033]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSHybridThreadDelete"),e[1])}]):t.resolve()},function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):r[3]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.resolve():r[3]?r[1]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.sequence([function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):t.resolve()},function(o){return r[3]?t.sequence([function(o){return r[9]=t.i64.to_string(r[6]),r[8]=t.i64.to_string(e[1]),t.storedProcedure(n("LSUpdateTaskQueueName"),r[9],r[8])},function(e){return t.storedProcedure(n("LSUpdateTaskValue"),r[8],r[9],r[8])}]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure",e.__tables__=["threads","mi_act_mapping_table"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.neq(r[0],e[1])?r[1]=r[0]:r[1]=void 0,t.storedProcedure(n("LSUpdateThreadAuthorityAndMapping"),e[0],e[1],r[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateThreadNullState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],nullstateDescriptionText1:e[5],nullstateDescriptionType1:e[10],nullstateDescriptionText2:e[6],nullstateDescriptionType2:e[11],nullstateDescriptionText3:e[7],nullstateDescriptionType3:e[12],capabilities:e[15],threadName:e[16],threadSubtype:e[4]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadNullStateStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadsRangesV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.db.table(10).fetch([[[e[1]]]]),function(e){return e.delete()})},function(r){var o;return n[8]=t.i64.gt(e[2],t.i64.cast([0,1]))&&t.i64.gt(e[3],t.i64.cast([-2147483648,0])),e[0]==="inbox"&&t.i64.eq(e[1],t.i64.cast([0,0]))&&t.i64.eq(e[4],t.i64.cast([0,1]))?t.sequence([function(r){return n[9]=e[2],n[10]=e[3],n[11]=!1,n[12]=n[8],t.forEach(t.db.table(198).fetch(),function(e){var r=e.item;return n[13]=r.minLastActivityTimestampMs,n[15]=r.minThreadKey,n[14]=t.i64.lt(n[9]==null?n[13]:n[9],n[13]),n[9]=n[14]?n[13]:n[9],n[10]=n[14]?n[15]:n[10],n[11]=n[11]||r.isLoadingBefore,n[12]=n[12]||t.i64.gt(n[13],t.i64.cast([0,1]))&&t.i64.gt(n[15],t.i64.cast([-2147483648,0]))})},function(e){var t;return t=[n[9],n[10],n[11],n[12]],n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],t}]):t.resolve((o=[e[2],e[3],!1,n[8]],n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],o))},function(r){var o;return t.i64.eq(e[4],t.i64.cast([0,1]))?t.sequence([function(r){return n[9]=n[0],n[10]=n[1],n[11]=n[2],n[12]=n[3],t.forEach(t.filter(t.db.table(220).fetch(),function(n){return t.i64.eq(n.parentThreadKey,e[1])}),function(e){var r=e.item;return n[13]=r.minLastActivityTimestampMs,n[15]=r.minThreadKey,n[14]=t.i64.lt(n[9]==null?n[13]:n[9],n[13]),n[9]=n[14]?n[13]:n[9],n[10]=n[14]?n[15]:n[10],n[11]=n[11]||r.isLoadingBefore,n[12]=n[12]||t.i64.gt(n[13],t.i64.cast([0,1]))&&t.i64.gt(n[15],t.i64.cast([-2147483648,0]))})},function(e){var t;return t=[n[9],n[10],n[11],n[12]],n[4]=t[0],n[5]=t[1],n[6]=t[2],n[7]=t[3],t}]):t.resolve((o=[n[0],n[1],n[2],n[3]],n[4]=o[0],n[5]=o[1],n[6]=o[2],n[7]=o[3],o))},function(r){return t.db.table(10).add({parentThreadKey:e[1],minThreadKey:n[5]==null?t.i64.cast([-2147483648,0]):n[5],minLastActivityTimestampMs:n[4]==null?t.i64.cast([0,1]):n[4],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:n[6],isLoadingAfter:!1,hasMoreBefore:n[7],hasMoreAfter:!1})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadsRangesV2StoredProcedure",e.__tables__=["threads_ranges_v2__generated","inbox_threads_ranges","sync_group_threads_ranges"],a.exports=e}),null);
__d("LSUpsertContextualProfileV1",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.eq(e[5],t.i64.cast([0,0]))?n[0]=void 0:n[0]=e[5],t.db.table(216).put({ownerId:e[0],associatedEntityId:e[1],profilePictureUrl:e[2],profilePictureFallbackUrl:e[4],profilePictureUrlExpirationTimestampMs:n[0],profileName:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactUpsertContextualProfileV1StoredProcedure",e.__tables__=["contextual_profile_v1"],a.exports=e}),null);
__d("LSUpsertFolderSeenTimestamp",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.i64.gt(e[1],t.i64.cast([0,0]))?t.db.table(35).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(35).add({parentThreadKey:e[0],lastSeenRequestTimestampMs:e[1]}):(r=a.item,t.i64.lt(r.lastSeenRequestTimestampMs,e[1])?t.forEach(t.db.table(35).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastSeenRequestTimestampMs:e[1]})}):t.resolve())}):t.resolve()},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.i64.lt(r.lastReadWatermarkTimestampMs,e[1])?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve())})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertFolderSeenTimestampStoredProcedure",e.__tables__=["folder_metadata","threads"],a.exports=e}),null);
__d("LSUpsertInboxThreadsRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(198).put({syncGroup:e[0],minLastActivityTimestampMs:e[1],hasMoreBefore:e[2],isLoadingBefore:e[3],minThreadKey:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertInboxThreadsRangeStoredProcedure",e.__tables__=["inbox_threads_ranges"],a.exports=e}),null);
__d("LSUpsertMessage",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(12).fetch([[[e[9]]],"optimistic"]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(12).add({threadKey:e[3],timestampMs:e[5],messageId:e[8],offlineThreadingId:e[9],authorityLevel:e[2],primarySortKey:e[6],senderId:e[10],isAdminMessage:e[12],sendStatus:e[15],sendStatusV2:e[16],text:e[0],subscriptErrorMessage:e[1],secondarySortKey:e[7],stickerId:e[11],messageRenderingType:e[13],isUnsent:e[17],unsentTimestampMs:e[18],mentionOffsets:e[19],mentionLengths:e[20],mentionIds:e[21],mentionTypes:e[22],replySourceId:e[23],replySourceType:e[24],replySourceTypeV2:e[25],replyStatus:e[26],replySnippet:e[27],replyMessageText:e[28],replyToUserId:e[29],replyMediaExpirationTimestampMs:e[30],replyMediaUrl:e[31],replyMediaPreviewWidth:e[33],replyMediaPreviewHeight:e[34],replyMediaUrlMimeType:e[35],replyMediaUrlFallback:e[36],replyCtaId:e[37],replyCtaTitle:e[38],replyAttachmentType:e[39],replyAttachmentId:e[40],replyAttachmentExtra:e[41],replyType:e[42],isForwarded:e[43],forwardScore:e[44],hasQuickReplies:e[45],adminMsgCtaId:e[46],adminMsgCtaTitle:e[47],adminMsgCtaType:e[48],cannotUnsendReason:e[49],textHasLinks:e[50],viewFlags:e[51],displayedContentTypes:e[52],viewedPluginKey:e[53],viewedPluginContext:e[54],quickReplyType:e[55],hotEmojiSize:e[56],platformXmdEncoded:e[57],sendAttributionXmd:e[58],replySourceTimestampMs:e[59],ephemeralDurationInSec:e[60],msUntilExpirationTs:e[61],ephemeralExpirationTs:e[62],takedownState:e[63],isCollapsed:e[64],subthreadKey:e[65],botResponseId:e[66],metadataDataclass:e[67],editCount:e[68],isPaidPartnership:e[69],messageHiddenState:e[70],adminSignatureName:e[71],adminSignatureProfileUrl:e[72],adminSignatureCreatorType:e[73],replyMessageHiddenState:e[74],translatedText:e[75],textDialect:e[76],translatedTextDialect:e[77],scheduledTimestamp:e[78],isVideoQuickSend:e[79],subthreadParentMessageId:e[80],isExclusiveToSubthread:e[81]}):(r=a.item,t.i64.le(r.authorityLevel,e[2])?t.db.table(12).put({threadKey:e[3],timestampMs:e[5],messageId:e[8],offlineThreadingId:e[9],authorityLevel:e[2],primarySortKey:r.primarySortKey,senderId:e[10],isAdminMessage:e[12],sendStatus:e[15],sendStatusV2:e[16],text:e[0],subscriptErrorMessage:e[1],secondarySortKey:r.secondarySortKey,stickerId:e[11],messageRenderingType:e[13],isUnsent:e[17],unsentTimestampMs:e[18],mentionOffsets:e[19],mentionLengths:e[20],mentionIds:e[21],mentionTypes:e[22],replySourceId:e[23],replySourceType:e[24],replySourceTypeV2:e[25],replyStatus:e[26],replySnippet:e[27],replyMessageText:e[28],replyToUserId:e[29],replyMediaExpirationTimestampMs:e[30],replyMediaUrl:e[31],replyMediaPreviewWidth:e[33],replyMediaPreviewHeight:e[34],replyMediaUrlMimeType:e[35],replyMediaUrlFallback:e[36],replyCtaId:e[37],replyCtaTitle:e[38],replyAttachmentType:e[39],replyAttachmentId:e[40],replyAttachmentExtra:e[41],replyType:e[42],isForwarded:e[43],forwardScore:e[44],hasQuickReplies:e[45],adminMsgCtaId:e[46],adminMsgCtaTitle:e[47],adminMsgCtaType:e[48],cannotUnsendReason:e[49],textHasLinks:e[50],viewFlags:e[51],displayedContentTypes:e[52],viewedPluginKey:e[53],viewedPluginContext:e[54],quickReplyType:e[55],hotEmojiSize:e[56],platformXmdEncoded:e[57],sendAttributionXmd:e[58],replySourceTimestampMs:e[59],ephemeralDurationInSec:e[60],msUntilExpirationTs:e[61],ephemeralExpirationTs:e[62],takedownState:e[63],isCollapsed:e[64],subthreadKey:e[65],botResponseId:e[66],metadataDataclass:e[67],editCount:e[68],isPaidPartnership:e[69],messageHiddenState:e[70],adminSignatureName:e[71],adminSignatureProfileUrl:e[72],adminSignatureCreatorType:e[73],replyMessageHiddenState:e[74],translatedText:e[75],textDialect:e[76],translatedTextDialect:e[77],scheduledTimestamp:e[78],isVideoQuickSend:e[79],subthreadParentMessageId:e[80],isExclusiveToSubthread:e[81]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertMessageStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSUpsertReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(8).put({threadKey:e[0],messageId:e[2],actorId:e[3],timestampMs:e[1],reaction:e[4],authorityLevel:e[5],reactionCreationTimestampMs:e[6]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSUpsertSyncGroupThreadsRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(220).put({syncGroup:e[0],parentThreadKey:e[1],minLastActivityTimestampMs:e[2],hasMoreBefore:e[3],isLoadingBefore:e[4],minThreadKey:e[5]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertSyncGroupThreadsRangeStoredProcedure",e.__tables__=["sync_group_threads_ranges"],a.exports=e}),null);
__d("LSRemoveBlindedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(308).fetch(),function(t){return t.configId===e[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure",e.__tables__=["secure_acs_blinded_tokens"],a.exports=e}),null);
__d("XPlatReactVoprf",["WAWasmModuleCache","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");async function s(){var t=await e.load(),n=t.LSVoprfWasm,r=t.locateFile,a=await n({getWasmModule:function(){return o("WAWasmModuleCache").loadWasmModule(r())}}),i,l;try{i=a.createCurveRistretto(),l=a.createVoprfExpTwohashdh(i);var s={voprfInfo:{curvePtr:i,voprfPtr:l},voprfWasm:a};return{voprfInstance:s}}catch(e){throw i!=null&&a.freeCurve(i),l!=null&&a.freeVoprf(l),e}}function u(){return Promise.resolve(s())}function c(e){var t=e.voprfInfo,n=e.voprfWasm,r=t.curvePtr,o=t.voprfPtr;n.freeCurve(r),n.freeVoprf(o)}l.loadXPlatReactVoprf=u,l.freeVoprfInstance=c}),98);
__d("LSVoprfComputeSharedSecret.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),i=e.voprfInstance,l=i.voprfInfo,s=i.voprfWasm;try{var u=s.clientFinalize(l,new Uint8Array(r),new Uint8Array(a));return Promise.resolve([u.finalEvaluation.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(i)}};e.__nop_name__="LSVoprfComputeSharedSecret",l.default=e}),98);
__d("LSVoprfUnblind.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a,i,l,s,u){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),c=e.voprfInstance,d=c.voprfInfo,m=c.voprfWasm;try{var p=m.verifiableUnblind(d,new Uint8Array(s),new Uint8Array(u),new Uint8Array(a),new Uint8Array(l),new Uint8Array(i),new Uint8Array(r),!0);return Promise.resolve([p.unblindedElement.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(c)}};e.__nop_name__="LSVoprfUnblind",l.default=e}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(307).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?(r[1]=t.createArray(),r[2]=(r[1].push("No valid config found when saving signed credentials for project: "),r[1]),r[3]=(r[1].push("unknown"),r[1]),r[4]=t.toJSON(r[1]),(function(e){t.logger(e).mustfix(e)})(r[4])):(a=l.item,t.sequence([function(o){return r[1]=t.i64.of_int32(e[1].length),t.i64.gt(r[1],t.i64.cast([0,0]))?t.loopAsync(r[1],function(o){return r[2]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[2]).then(function(e){var t;return t=e,r[3]=t[0],r[4]=t[1],t})},function(e){return r[5]=r[3].get("token_id"),t.db.table(308).fetch([[[r[5]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.blob(""),t.blob(""),t.blob("")],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.nonce,n.blindedNonce,n.blindingFactor],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return t.forEach(t.db.table(308).fetch([[[r[5]]]]),function(e){return e.delete()})},function(e){return r[10]=r[3].get("signed_nonce"),t.nativeOperation(n("LSBase64Decode.nop"),r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return r[12]=r[3].get("proof_c"),t.nativeOperation(n("LSBase64Decode.nop"),r[12]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[14]=r[3].get("proof_s"),t.nativeOperation(n("LSBase64Decode.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSVoprfUnblind.nop"),a.publicKey,r[8],r[7],r[11]==null?t.blob(""):r[11],r[13]==null?t.blob(""):r[13],r[15]==null?t.blob(""):r[15]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfComputeSharedSecret.nop"),r[6],r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(n){return t.blobs.neq(r[17],void 0)?t.db.table(309).add({tokenId:r[5],configId:e[0],nonce:r[6],redeemLimit:a.redemptionLimit,sharedSecret:r[17]}):t.resolve()}]):t.resolve()}])}):t.resolve()},function(r){return t.storedProcedure(n("LSRemoveBlindedTokens"),e[0])}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_blinded_tokens","secure_acs_tokens"],a.exports=e}),null);
__d("LSVerifyCommunityFolderExistsV2",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return e[1]?t.resolve(r[0]=e[1]):t.sequence([function(n){return t.db.table(162).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!0:(t=o.item,r[3]=!1)})},function(e){return r[1]=r[3]}]))})},function(e){return r[0]=r[1]}])},function(o){return r[0]?(r[1]=new t.Map,r[1].set("folder_id",e[0]),r[2]=r[1].get("folder_id"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[2]),t.i64.cast([0,813]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyCommunityFolderExistsV2StoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSWriteThreadCapabilities",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({capabilities:e[1],capabilities2:e[2],capabilities3:e[3],capabilities4:e[4],capabilities5:e[5]})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxWriteThreadCapabilitiesStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSCheckAuthoritativeMessageExists","LSClearPinnedMessages","LSCompleteThreadCutover","LSDeleteBanner","LSDeleteBannersByIds","LSDeleteExistingMessageRanges","LSDeleteRowRichStatusCustomAudience","LSDeleteThenInsertAvatarFeatureConfig","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmChannelList","LSDeleteThenInsertCommunityUnjoinedThread","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSFillDeanonCacheForE2EEThread","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueFetchThreadCapabilitiesTask","LSIssueInsertPersistentMenuItemsForThreadTask","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkThreadReadV2","LSReplaceOptimisticReaction","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSStoreProjectConfiguration","LSSyncBumpThreadDataToClient","LSTransportHybridParticipantUpdateReceipts","LSTriggerReenrollementFromOptOutDelta","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateCommunityThreadStaleState","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadActivityStatus","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadNullState","LSUpdateThreadsRangesV2","LSUpsertContextualProfileV1","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSVerifyAndSaveNewCredentials","LSVerifyCommunityFolderExistsV2","LSVerifyE2EEMetadataThreadExistsV2","LSWriteThreadCapabilities","cr:7877"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("LSStaticDependencies"),{LSVerifyCommunityFolderExistsV2:r("LSVerifyCommunityFolderExistsV2"),addParticipantIdToGroupThread:r("LSAddParticipantIdToGroupThread"),checkAuthoritativeMessageExists:r("LSCheckAuthoritativeMessageExists"),clearPinnedMessages:r("LSClearPinnedMessages"),completeThreadCutover:r("LSCompleteThreadCutover"),deleteBanner:r("LSDeleteBanner"),deleteBannersByIds:r("LSDeleteBannersByIds"),deleteExistingMessageRanges:r("LSDeleteExistingMessageRanges"),deleteRowRichStatusCustomAudience:r("LSDeleteRowRichStatusCustomAudience"),deleteThenInsertAvatarFeatureConfig:r("LSDeleteThenInsertAvatarFeatureConfig"),deleteThenInsertBotProfileInfoV2:r("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmChannelList:r("LSDeleteThenInsertCmChannelList"),deleteThenInsertCommunityUnjoinedThread:r("LSDeleteThenInsertCommunityUnjoinedThread"),deleteThenInsertRankingRequest:r("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:r("LSDeleteThenInsertRankingScore"),fillDeanonCacheForE2EEThread:r("LSFillDeanonCacheForE2EEThread"),getFirstAvailableAttachmentCTAID:r("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:r("LSHybridThreadDelete"),insertAttachmentCta:r("LSInsertAttachmentCta"),insertAttachmentItem:r("LSInsertAttachmentItem"),insertBlobAttachment:r("LSInsertBlobAttachment"),insertNewMessageRange:r("LSInsertNewMessageRange"),issueFetchThreadCapabilitiesTask:r("LSIssueFetchThreadCapabilitiesTask"),issueInsertPersistentMenuItemsForThreadTask:r("LSIssueInsertPersistentMenuItemsForThreadTask"),issueNextSync:r("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:r("LSMailboxTaskCompletionApiOnTaskCompletion"),markThreadReadV2:r("LSMarkThreadReadV2"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),setForwardScore:r("LSSetForwardScore"),setMessageDisplayedContentTypes:r("LSSetMessageDisplayedContentTypes"),storeProjectConfiguration:r("LSStoreProjectConfiguration"),syncBumpThreadDataToClient:r("LSSyncBumpThreadDataToClient"),transportHybridParticipantUpdateReceipts:r("LSTransportHybridParticipantUpdateReceipts"),triggerReenrollementFromOptOutDelta:r("LSTriggerReenrollementFromOptOutDelta"),truncateMetadataThreads:r("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:r("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:r("LSUpdateAttachmentItemCtaAtIndex"),updateCommunityThreadStaleState:r("LSUpdateCommunityThreadStaleState"),updateOrInsertCommunitySurfaceRange:r("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:r("LSUpdateOrInsertOhaiGatewayKeyConfigs"),updateOrInsertThread:r("LSUpdateOrInsertThread"),updateReadReceipt:r("LSUpdateReadReceipt"),updateThreadActivityStatus:r("LSUpdateThreadActivityStatus"),updateThreadAuthorityAndMappingWithOTIDFromJID:r("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadDisappearingSetting:n("cr:7877"),updateThreadNullState:r("LSUpdateThreadNullState"),updateThreadsRangesV2:r("LSUpdateThreadsRangesV2"),upsertContextualProfileV1:r("LSUpsertContextualProfileV1"),upsertFolderSeenTimestamp:r("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:r("LSUpsertInboxThreadsRange"),upsertMessage:r("LSUpsertMessage"),upsertReaction:r("LSUpsertReaction"),upsertSyncGroupThreadsRange:r("LSUpsertSyncGroupThreadsRange"),verifyAndSaveNewCredentials:r("LSVerifyAndSaveNewCredentials"),verifyE2EEMetadataThreadExistsV2:r("LSVerifyE2EEMetadataThreadExistsV2"),writeThreadCapabilities:r("LSWriteThreadCapabilities")}),s=e;l.default=s}),98);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","LSExpandedStaticDependencies","ODS","SiteData","clearTimeout","err","justknobx","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=babelHelpers.extends({},r("LSExpandedStaticDependencies"));function u(e){Object.assign(s,e)}var c={_tombstone:!0};function d(t){var n=new Map;for(var a of t){var i=a.name;i!=null&&!_(i)&&n.set(i,r("nullthrows")(a.value))}if(n.size===0)return Promise.resolve();var l=new Promise(function(t){var a={},i=[],u=function(){var t=c[0],n=c[1],r=n==null?void 0:n.__dr;a[r]={be:1,r:[]},i.push(r),(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",r),s[t]={load:async function(){return await l,s[t]}}};for(var c of n)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}}),m(r("Bootloader"),i,function(e){Array.from(n.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()})});return l}function m(e,t,n){return e.loadModules.call(e,t,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)})}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e){return e in s&&s[e]!==c}var f=r("justknobx")._("2800");function g(t,n,a){var i=new Map;for(var l of t!=null?t:[])_(l)||i.set(l,"LS"+p(l));for(var u of n!=null?n:[])_(u+".bs")?u+".nop"in s||i.set(u+".nop","LS"+p(u)+".nop"):i.set(u+".bs","LS"+p(u)+".nop");for(var d of a!=null?a:[])d in s||i.set(d,"LS"+p(d));if(i.size===0)return Promise.resolve();var g=new Promise(function(t,n){var a={},l=[],u=function(){var t=d[0],n=d[1];(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",n),o("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(n),a[n]={be:1,r:[]},l.push(n),s[t]={load:async function(){try{await g}catch(e){throw s[t]=c,e}return s[t]}}};for(var d of i)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}});var p=m(r("Bootloader"),l,function(e){r("clearTimeout")(_),Array.from(i.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()}),_=r("setTimeout")(function(){p.remove();var e=r("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",f,Array.from(i.keys()));e.name="dynamic_sproc_loading_timeout",n(e)},f)});return g}l.cachedModules=s,l.addToCachedModules=u,l.TOMBSTONE=c,l.downloadRelayDependencies=d,l.downloadBootloaderDependencies=g}),98);
__d("XPlatReactCrypto",["err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=self.crypto)==null?void 0:e.subtle;function u(e){var t;if(typeof((t=self.crypto)==null?void 0:t.getRandomValues)!="function")throw r("err")("crypto.getRandomValues: Not implemented");return self.crypto.getRandomValues(e),e}function c(){var e;if(typeof((e=self.crypto)==null?void 0:e.randomUUID)!="function")return null;var t=self.crypto.randomUUID();return typeof t=="string"?t:null}function d(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.importKey: Not implemented");return s.importKey(e,t,n,o,a)}function m(e,t){if(s==null)throw r("err")("crypto.subtle.exportKey: Not implemented");return s.exportKey(e,t)}function p(e,t,n){if(s==null)throw r("err")("crypto.subtle.generateKey: Not implemented");return s.generateKey(e,t,n)}function _(e,t,n){if(s==null)throw r("err")("crypto.subtle.encrypt: Not implemented");return s.encrypt(e,t,n)}function f(e,t,n){if(s==null)throw r("err")("crypto.subtle.decrypt: Not implemented");return s.decrypt(e,t,n)}function g(e,t,n){if(s==null)throw r("err")("crypto.subtle.sign: Not implemented");return s.sign(e,t,n)}function h(e,t){if(s==null)throw r("err")("crypto.subtle.digest: Not implemented");return s.digest(e,t)}function y(e,t,n){if(s==null)throw r("err")("crypto.subtle.deriveBits: Not implemented");return s.deriveBits(e,t,n)}function C(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.deriveKey: Not implemented");return s.deriveKey(e,t,n,o,a)}l.getRandomValues=u,l.randomUUID=c,l.subtleImportKey=d,l.subtleExportKey=m,l.subtleGenerateKey=p,l.subtleEncrypt=_,l.subtleDecrypt=f,l.subtleSign=g,l.subtleDigest=h,l.subtleDeriveBits=y,l.subtleDeriveKey=C}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e||(e=o("I64"))).add,and_:e.and_,asr_:e.asr_,cast:function(n){return(e||(e=o("I64"))).mk(n[1],n[0])},div:e.div,eq:function(n,r){return n==null&&r==null||n!=null&&r!=null&&(e||(e=o("I64"))).equal(n,r)},from_string:function(n){try{return(e||(e=o("I64"))).of_string(n)}catch(e){throw r("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',n)}},ge:e.ge,gt:e.gt,le:e.le,lsl_:e.lsl_,lsr_:e.lsr_,lt:e.lt,max:e.max,min:e.min,mod_:e.mod_,mul:e.mul,neq:function(n,r){return n==null&&r!=null||n!=null&&r==null||n!=null&&r!=null&&!(e||(e=o("I64"))).equal(n,r)},of_float:e.of_float,of_int32:e.of_int32,or_:e.or_,random:function(){var t=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return t[0]>>>=1,(e||(e=o("I64"))).add(e.lsl_(e.of_float(t[0]),32),e.of_float(t[1]))},sub:e.sub,to_float:e.to_float,to_int32:e.to_int32,to_string:function(n){return n==null?n:(e||(e=o("I64"))).to_string(n)},xor:e.xor};l.default=s}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={__val__:"__stop_iteration__"};function u(e){return{__val__:"__next_value__",next:e}}function c(e){return e!=null&&typeof e=="object"&&e.__val__==="__next_value__"}function d(t,n,a){for(var i=m(t,a);!(e||(e=r("isPromise")))(i);){if(i.done)return o("LSSynchronousPromise").makeSynchronousPromise(i);var l=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(n(i));if((e||(e=r("isPromise")))(l))return l.then(function(e){if(e===s)return i;var r=c(e)?e.next:void 0;return d(t,n,r)});if(l===s)return o("LSSynchronousPromise").makeSynchronousPromise(i);var u=c(l)?l.next:void 0;i=m(t,u)}var _=p(n);return i.then(function(e){return e.done?e:_(e).then(function(r){if(r===s)return e;var o=c(r)?r.next:void 0;return d(t,n,o)})})}function m(t,n){var a=t.next(n);return(e||(e=r("isPromise")))(a)?o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a):a}function p(e){return function(t){var n=e(t);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(n)}}l.STOP_ITERATION=s,l.wrapNextValue=u,l.iteratorLoop=d}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return u(e,t)},n.next=function(){var n={done:!0},r=function(r){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t(r.value.item)).then(function(e){if(e)return n=r,o("LSMaybeSyncIteration").STOP_ITERATION})};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){return n})},n}function c(e,t,n){var r,a=0;return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return c(e,t,n)},r.next=function(){if(a>=n)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});var r={done:!0},i=function(n){if(!(a++<t))return r=n,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,i).then(function(){return r})},r}function d(e,t){return m(e).then(function(e){return e.reduce(function(e,n){return e.then(function(){return t(n)})},o("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function m(e){var t=[],n=function(n){t.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return t})}function p(t,n,r){var a;r===void 0&&(r=[]);var i={ASC:1,DESC:-1},l=function(r,a){for(var t=r.item,l=a.item,s=0;s<n.length;s++){var u=n[s],c=u[0],d=t[c],m=l[c],p=0;if(d==null&&m==null?p=0:d==null&&m!=null?p=-1:d!=null&&m==null?p=1:p=(e||(e=o("ReStoreKeyComparer"))).compareValue(d,m),p!==0)return p*i[n[s][1]]}return 0},s,u=[],c=[],d=function(t){for(var e=[],n=r.length-1;n>=0;n--)e.push(t[r[n]]);return e},m=function(){c=u,c.sort(l),u=[]};return a={},a[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(t,n,r)},a.next=function(){if(c.length)return o("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:c.shift()});var n=function(n){var t=d(n.value.item);if(s!=null&&(e||(e=o("ReStoreKeyComparer"))).compareKey(s,t)!==0)return m(),u.push(n.value),s=t,o("LSMaybeSyncIteration").STOP_ITERATION;s=t,u.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(t,n).then(function(){return!c.length&&u.length&&m(),c.length?{done:!1,value:c.shift()}:{done:!0}})},a}function _(e){var t=0,n=function(){t++};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return(s||(s=o("I64"))).of_int32(t)})}function f(e,t){return{forEach:function(a){return m(e).then(function(e){var n=e.reduce(function(e,n){var r=n.item[t],o=(e.get(r)||0)+1;return e.set(r,o)},new(r("LSDict"))),i=o("LSSynchronousPromise").makeSynchronousPromise(void 0),l=function(){var e=u[0],n=u[1];i=i.then(function(){var r;return a((r={},r[t]=e,r.group_count=(s||(s=o("I64"))).of_int32(n),r))})};for(var u of n.entries())l();return i})}}}l.filter=u,l.slice=c,l.forEach=d,l.toArray=m,l.sortBy=p,l.count=_,l.groupBy=f}),98);
__d("LSPendingTasksPluginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});i.default=e}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(t,n,r,o,a,i,l){"use strict";var e,s="4",u="16",c=new Set([r("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function d(t){var n=c.has((e||(e=o("I64"))).to_float(t.pluginType)),r=t.context===u||t.context===s;return n||r}l.default=d}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set(["messages","attachments","reactions"]);function c(e){return u.has(e)}function d(e,t,n){return e&&t.name==="pending_tasks"&&n!=null&&r("isNativeTask")(n)}function m(e){for(var t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function p(e,t,n){n===void 0&&(n="asc");var r=e.entries(new WeakMap,n);function a(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,e.next=function(){var e={done:!0},a=0,i="start",l=[],u=function(u){for(var r=function(){var e=a,r=t[e]||{},c=r.end,d=r.start,m=u.value[0];if(d&&i==="start"){var p=(s||(s=o("ReStoreKeyComparer"))).compareValue(m[e],d[0]),_=p*(n==="asc"?1:-1)<d[1];if(_){if(i="start_verify",l=m.slice(0,e),e===m.length-1&&p===0)return{v:void 0};var f=[].concat(l,[d[0]],d[1]&&n==="asc"||!d[1]&&n==="desc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:o("LSMaybeSyncIteration").wrapNextValue(f)}}else i="check_end"}if(d&&i==="start_verify"&&!l.every(function(e,t){return(s||(s=o("ReStoreKeyComparer"))).compareValue(e,m[t])===0}))return a=0,i="start",{v:void 0};if(c&&(s||(s=o("ReStoreKeyComparer"))).compareValue(c[0],m[e])*(n==="asc"?1:-1)<c[1])return a=0,i="start",{v:o("LSMaybeSyncIteration").wrapNextValue([].concat(m.slice(0,e),n==="asc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]))};a++,i="start"},c;a<t.length;)if(c=r(),c)return c.v;return e=u,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(r,u).then(function(){return e})},e}return a()}function _(e,t,n,o,a){return{delete:function(){return n.delete.apply(n,e)},item:t,update:function(l){var i=a&&c(o.name)?{transportKey:"FBBroker"}:{},s=babelHelpers.extends({},t,l,i);if(d(a,o,s))throw r("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return n.upsert(e,m(s))}}}function f(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return f(e,t)},n.next=function(){var n={done:!0},r=function(t){return n=t,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){if(n.done)return o("LSMaybeSyncIteration").iteratorLoop(t,r)}).then(function(){return n})},n}function g(e,t,n){var r,a=[{done:!0},{done:!0}],i=function(t){var e=a[t];return a[t]={done:!0},e};return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return g(e,t,n)},r.next=function(){var r=function(t){return function(e){return t==="a"?a[0]=e:a[1]=e,o("LSMaybeSyncIteration").STOP_ITERATION}},l=o("LSSynchronousPromise").makeSynchronousPromise();return a[0].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(e,r("a"))})),a[1].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(t,r("b"))})),l.then(function(){if(a[0].done&&a[1].done)return{done:!0};if(a[0].done)return i(1);if(a[1].done)return i(0);var e=(s||(s=o("ReStoreKeyComparer"))).compareKey(a[0].value[0],a[1].value[0]);return e===0||e*(n==="asc"?1:-1)<0?i(0):i(1)})},r}var h=(e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return h},e.next=function(){return o("LSSynchronousPromise").makeSynchronousPromise({done:!0})},e);function y(e,t,n,a,i,l,s,u){var m=new Set,y=e.length>1,C=e.length===1&&e[0][1]==null,b=e.map(function(e){var r=e[0],s=e[1];return r.map(function(e){a.key_lookup===!0&&e.length!==0&&(s==null?"primary":"index "+s)+""+n.name+(JSON.stringify(e)||""),a.table_scan===!0&&e.length===0&&""+n.name;var r=e.map(function(e){return l(e,t)}),u=r.length===(s==null?n.primaryKeyIds:n.indexes[s]).length&&r.every(function(e){var t=e.end,n=e.start;return n&&t&&n[0]===t[0]&&n[1]===0&&t[1]===0});if(u){var c=function(){var e,t=!1;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=c,e.next=function(){var e;if(t)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});t=!0;var a=r.map(function(e){var t=e.start;return t[0]});return(e=s==null?i:i.index(s)).get.apply(e,a).then(function(e){if(!e)return{done:!0};var t=o("ReStoreVaulting").maybeUnvaultDbRow(e,n.name);return{done:!1,value:[a,t]}})},e};return c()}return p(s==null?i:i.index(s),r,t)})}).flat().reduce(function(n,r,o){var a=o===0&&n==null?h:n;return e.length>1?f(a,r):g(a,r,t)});function v(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,e.next=function(){var e=!0,t,a,l,p,f=function(i){e=!1;var r=i.value;if(a=r[0],l=r[1],t=C?a:n.primaryKeyIds.map(function(e){return l[e]}),d(s,n,l)){p=i,e=!0;return}if(c(n.name)&&s&&l!=null&&l.transportKey!=="FBBroker"){p=i,e=!0;return}if(y){var u=JSON.stringify(t);if(m.has(u)){e=!0;return}m.add(u)}return o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(b,f).then(function(){if(p!=null){var o=p.value[1].transportKey;r("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',u,o)}return e||t==null||l==null?{done:!0}:{done:!1,value:_(t,l,i,n,s)}})},e.return=function(){return Promise.resolve({done:!0,value:void 0})},e.throw=function(t){return Promise.reject(t)},e}return v()}l.isTranportKeyEnforcedTable=c,l.isNativePendingTaskViolation=d,l.stripUndefinedProperties=m,l.unionIterators=f,l.mergeIterators=g,l.fetch=y}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.name.match(/secure_|inbox(?!_)/i)}function s(t,n,o,a,i,l,s){return{metadata:o,table:function(d){var c=o.tableNames[o.tableIds[d]];if(n===0&&e(c))throw r("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return u(t,c,a,i,l,s)},transactionId:t.__internal__transaction_id}}function u(e,t,n,a,i,l){var s=e.transactionTable(t.name,a[a.length-1]);return{add:function(n){l==null||l.logTableOperation(t.name,"add"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker");var e=s.add(n);return r("gkx")("6636")?e:Promise.resolve(e)},fetch:function(){l==null||l.logTableOperation(t.name,"fetch"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"asc",t,n,s,c,i,a.join(", "))},fetchDesc:function(){l==null||l.logTableOperation(t.name,"fetchDesc"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"desc",t,n,s,c,i,a.join(", "))},peekNextAutoIncrementId:function(){return l==null||l.logTableOperation(t.name,"peekNextAutoIncrementId"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),s.peekNextAutoIncrementId()},put:function(n){if(l==null||l.logTableOperation(t.name,"put"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker"),o("LSIterationHelpers").isNativePendingTaskViolation(i,t,n))throw r("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=t.primaryKeyIds.map(function(e){if(n[e]!==void 0)return n[e];throw r("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")}),a=s.delete.apply(s,e).then(function(){return s.add(o("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},n)))});return r("gkx")("6636")?a:Promise.resolve(a)}}}function c(e,t){if(typeof e=="object"&&!Array.isArray(e)){var n=e,o,a;if(t==="asc"){if(Object.prototype.hasOwnProperty.call(e,"gt")&&(o=[n.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");o=[n.gte,0]}if(Object.prototype.hasOwnProperty.call(e,"lt")&&(a=[n.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(a!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");a=[n.lte,0]}}else{if(Object.prototype.hasOwnProperty.call(e,"lt")&&(o=[n.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");o=[n.lte,0]}if(Object.prototype.hasOwnProperty.call(e,"gt")&&(a=[n.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(a!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");a=[n.gte,0]}}return{end:a,start:o}}return{end:[e,0],start:[e,0]}}l.LSRuntimeDb=s,l.parseConstraint=c}),98);
__d("XPlatReactTextDecoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextDecoder;i.TextDecoder=e}),66);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDatascriptRuntimeTypes","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MWFBLogger","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h="LS_WEB",y=o("MessengerLogHistory").getInstance("ls");function C(e){return o("base64Binary").decode(e).buffer}var b={compareTo:function(t,n){for(var e=new Uint8Array(t),r=new Uint8Array(n),o=Math.min(e.length,r.length),a=0;a<o;a++){var i=e[a]-r[a];if(i!==0)return i}return e.length===r.length?0:e.length-r.length},eq:function(t,n){if(t==null&&n==null)return!0;if(t==null||n==null)return!1;var e=new Uint8Array(t),r=new Uint8Array(n);if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0},ge:function(t,n){return b.compareTo(t,n)>=0},gt:function(t,n){return b.compareTo(t,n)>0},le:function(t,n){return b.compareTo(t,n)<=0},lt:function(t,n){return b.compareTo(t,n)<0},neq:function(t,n){return!b.eq(t,n)},of_string:function(t){if(t!=null){var e=new(o("XPlatReactTextEncoder")).TextEncoder;return e.encode(t).buffer}},to_string:function(t){if(t!=null){var e=new(o("XPlatReactTextDecoder")).TextDecoder;return e.decode(t)}}};function v(e){if(e.length!==1)throw r("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");var t=e[0],n=parseInt(t.substr(-8),16),a=parseInt(t.substr(0,t.length-8),16);return(g||(g=o("I64"))).mk((n>>>1)+(a&1)*2147483648^-(n&1),a>>>1^-(n&1))}function S(e){if(e!=null&&typeof e=="object"){if("__sproc_name__"in e&&typeof e.__sproc_name__=="string")return e.__sproc_name__;if("__debugModuleSource"in e&&typeof e.__debugModuleSource=="string")return e.__debugModuleSource}return"<unknown_sproc>"}var R=(function(){var e=0;function t(t){var o=t.args,a=t.shouldLog,i=t.sprocName;if(n("cr:1088")==null||n("cr:1088").logStoredProcedureCall(i,o),!(!a||!n("cr:4790"))){var l=++e;return n("cr:4790").markerStart(r("qpl")._(25302991,"143"),l),n("cr:4790").markerAnnotate(r("qpl")._(25302991,"143"),{string:{name:i}},{instanceKey:l}),l}}function o(e,t,o){var a=e.shouldLog;!a||t==null||n("cr:4790")==null||n("cr:4790").markerEnd(r("qpl")._(25302991,"143"),o,t)}function a(e){return Math.random()*r("MetaConfig")._("10")<1}return{call:t,logSprocDone:o,shouldLogSproc:a}})(),L="Native operation timeout; transaction blocked",E=30*1e3;function k(t,n,a,i,l,g,I,T){l===void 0&&(l={}),g===void 0&&(g=void 0);var D=[],x=o("LSRuntimeDb").LSRuntimeDb(i,t,n,l,D,I,T),$=function(n,l){for(var e=arguments.length,s=new Array(e>2?e-2:0),u=2;u<e;u++)s[u-2]=arguments[u];var c;if(typeof l=="string"){if(c=a[l.toString()],c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",n,l);if(c===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",l);c.load&&(c=c.load())}else c=l;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(c).then(function(e){return e.call.apply(e,[i,t].concat(s))})},P=function(n){for(var e=arguments.length,l=new Array(e>1?e-1:0),s=1;s<e;s++)l[s-1]=arguments[s];var u;if(typeof n=="string"){if(u=a[n+".bs"]||a[n+".nop"],u==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",n);if(u===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",n);u.load&&(u=u.load())}else u=n;var c,d;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(u).then(function(e){var n,a;c=(n=(a=e.__nop_name__)!=null?a:e==null?void 0:e.toString().slice(0,250))!=null?n:"<unknown nop name>",d=T==null?void 0:T.logNativeOperationStart(c);var s=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e.apply(void 0,[i,t].concat(l)));return(m||(m=r("isPromise")))(s)&&r("justknobx")._("3895")&&(f||(f=r("ExecutionEnvironment"))).isInBrowser?Promise.race([s,new Promise(function(e,t){return r("setTimeout")(function(){return t(r("err")(L))},E)})]):s}).then(function(e){var t;return(t=d)==null||t.end(),e},function(e){var t;(t=d)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"NATIVE_OP_ID",c).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",c,(e==null?void 0:e.message)===L,(f||(f=r("ExecutionEnvironment"))).isInWorker)})},N=function(t){return t.slice(1).reduce(function(e,n){return typeof n!="function"?(r("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",n,typeof n,JSON.stringify(t.map(function(e){return typeof e}))),e):e.then(n)},t[0]())},M=function(t,n){return t.slice(n)},w={Map:r("LSDict"),blob:C,blobs:b,constructor:{n:v},count:o("LSIterationOperations").count,createArray:function(){return r("LSVec").ofArray([])},createArrayWithElements:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("LSVec").ofArray(t)},db:x,filter:o("LSIterationOperations").filter,forEach:o("LSIterationOperations").forEach,groupBy:o("LSIterationOperations").groupBy,i64:r("LSInt64Lite"),islc:o("LSIterationOperations").slice,like:function(t,n){var e=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(e).test(t)},logger:function(t){if(g)return{debug:g,info:g,mustfix:g,warn:g};var e=o("MWFBLogger").MWLogger(),n=t.startsWith("epoch mismatch"),a=t.startsWith("cursor mismatch");if(n||a){var i=function(t){y.error(t,"error");var e=(function(){return n?"epoch_mismatch":a?"cursor_mismatch":"fixme_could_not_produce_key"})();(p||(p=o("ODS"))).bumpEntityKey(3185,"lsplatform",e)};return{debug:function(t){return y.debug(t)},info:function(t){return y.debug(t)},mustfix:i,warn:i}}else return r("gkx")("26382")||(e.info=r("emptyFunction")),e},loopAsync:function(n,a){function t(i){if(r("LSInt64Lite").lt(i,n)){for(var l=i,u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l));!(m||(m=r("isPromise")))(u);){if(l=r("LSInt64Lite").add(l,v(e||(e=babelHelpers.taggedTemplateLiteralLoose(["2"])))),!r("LSInt64Lite").lt(l,n))return o("LSSynchronousPromise").makeSynchronousPromise(void 0);u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l))}return u.then(function(){return t(r("LSInt64Lite").add(l,v(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))})}return o("LSSynchronousPromise").makeSynchronousPromise(void 0)}return t(v(u||(u=babelHelpers.taggedTemplateLiteralLoose(["0"]))))},loopSync:function(t,n){for(var e=v(c||(c=babelHelpers.taggedTemplateLiteralLoose(["0"])));r("LSInt64Lite").lt(e,t);e=r("LSInt64Lite").add(e,v(d||(d=babelHelpers.taggedTemplateLiteralLoose(["2"])))))n(e)},merge:function(){function e(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue(e,t)>0?e:t}function t(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue([e[0],-e[1]],[t[0],-t[1]])<0?e:t}for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.reduce(function(n,r){var a=o("LSRuntimeDb").parseConstraint(r,"asc");return{end:n.end&&a.end?t(a.end,n.end):a.end||n.end,start:n.start&&a.start?e(a.start,n.start):a.start||n.start}},{}),l=i.start?i.start[1]?{gt:i.start[0]}:{gte:i.start[0]}:{};return i.end?i.end[1]?babelHelpers.extends({},l,{lt:i.end[0]}):babelHelpers.extends({},l,{lte:i.end[0]}):l},n:v,nativeOperation:P,nativeTypeOperation:$,notnull:function(t){if(t===null)throw r("FBLogger")("messenger_web").mustfixThrow("value should not be null");return t},print:function(t){},resolve:function(t){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t)},resolveGuaranteeAsync:function(t){var e;return((e=self.Promise)!=null?e:Promise).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(t))},rm:r("LSInt64Lite").of_int32(t),sequence:N,slice:M,sortBy:o("LSIterationOperations").sortBy,storedProcedure:function(s){for(var e=arguments.length,u=new Array(e>1?e-1:0),c=1;c<e;c++)u[c-1]=arguments[c];var d;if(typeof s=="string"){if(d=a[s],d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",s);if(d===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent sproc loading failed for: %s (retryable)",s);d.load&&(d=d.load())}else d=s;var m=w;switch(t){case 0:m=k(2,n,a,i,l,g,I);break;case 2:m=k(1,n,a,i,l,g,I);break}var p,_,f,y;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(d).then(function(e){return _=S(e),f=R.shouldLogSproc(_),D.push(_),p=R.call({args:u,shouldLog:f,sprocName:_}),y=T==null?void 0:T.logSprocCallStart(_,o("LSDatascriptRuntimeTypes").TopLevelCallOrigin.UI),i.reportUsedTablesForSyncAccess(e.__tables__),e.apply(void 0,u.concat([m]))}).then(function(e){var t;return D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,2),(t=y)==null||t.end(),e},function(e){var t;throw D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,3),(t=y)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"SPROC_STACK",D.join(`
`)).warn("Sproc %s failed",_),e})},throw:function(t){throw r("FBLogger")("messenger_web").mustfixThrow(t)},toArray:o("LSIterationOperations").toArray,toJSON:function(t){return o("LSJson").stringify(t)}};return w}k.n=v,l.default=k}),98);
__d("LSBase64Encode.nop",["EBBase64Encode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(a?r("EBBase64Encode")(a):void 0))};e.__nop_name__="LSBase64Encode",l.default=e}),98);
__d("LSClientSchemaType",[],(function(t,n,r,o,a,i){"use strict";var e="maw";i.MAW_SCHEMA_NAME=e}),66);
__d("LSConstants",[],(function(t,n,r,o,a,i){"use strict";var e="ls";i.LS_SCHEMA_NAME=e}),66);
__d("LSContactBlockedByViewerStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});i.default=e}),66);
__d("LSContactGender",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});i.default=e}),66);
__d("LSContactIdType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});i.default=e}),66);
__d("LSContactType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});i.default=e}),66);
__d("LSContactWorkForeignEntityType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});i.default=e}),66);
__d("LSDbV1.upgrade",[],(function(t,n,r,o,a,i){"use strict";var e={};i.afterUpgrade=e}),66);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={c:"string",t:"string"};for(var n in t){if(!Object.prototype.hasOwnProperty.call(e,n)||e[n]==null)return r("FBLogger")("messenger_web").warn('Malformed default values data, missing key "%s"',n),null;var o=e[n],a=t[n],i=typeof o;if(i!==a)return r("FBLogger")("messenger_web").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',n,i,a),null}if(typeof e.c!="string"||typeof e.t!="string")return null;var l=[],s=e.t;try{l=JSON.parse(e.c);for(var u of l)if(typeof u!="string")return null}catch(e){return null}return{columns:l,tableName:s}}function s(e){return{c:JSON.stringify(e.columns),t:e.tableName}}var u="_db_defaults_meta";l.tryParseDefaultValuesData=e,l.defaultValuesColumnToValue=s,l.defaultValuesTableName=u}),98);
__d("ReStoreCommonUtils",["isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){function o(n){return n.done?n.value:(e||(e=r("isPromise")))(n.value)?n.value.then(function(e){return o(t.next(e))}):o(t.next(n.value))}return o(t.next(n))}l.gen=s}),98);
__d("ReStoreOperationLock",["ReStoreCommonUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==="\u2757"}var s=(function(){function e(e){var t=this;this.isSync=!1,this.waitFor=null,this.waitFor=e.then(function(e){return t.waitFor=null})}var t=e.prototype;return t.chainPromiseOrValue=function(t){return this.waitFor!=null?this.waitFor.then(function(){return t("\u{1F512}")}):t("\u{1F512}")},e})(),u=(function(){function e(){this.isSync=!0}var t=e.prototype;return t.chainPromiseOrValue=function(t){return t("\u2757")},e})(),c=(function(){function e(){this.isSync=!1,this.$1=Promise.resolve()}var t=e.prototype;return t.chainPromiseOrValue=function(t){var e=this;return new Promise(function(n,r){e.$1=e.$1.then(async function(){try{n(await t("\u{1F512}"))}catch(e){r(e)}})})},e})();function d(e,t){return{next:function(r){return t.chainPromiseOrValue(function(t){return o("ReStoreCommonUtils").gen(e.next(t,r))})}}}l.isNoopLockProof=e,l.WaitForPromiseLock=s,l.NoopLock=u,l.ReStoreOperationLock=c,l.lockIterator=d}),98);
__d("ReStoreIndex",["ReQLBounds","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e,t,n,r,a){var i=this;this.entries=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").entries(i.$5,e,i.$1,i.$3,t,n,i.$2),i.$4)},this.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.$4.chainPromiseOrValue(function(e){return o("ReStoreUtils").getLocked(i.$5,new WeakMap,i.$1.name,i.$3,t,e,i.$2)})},this.getKey=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.$4.chainPromiseOrValue(function(e){return i.$6(i.$5,new WeakMap,t,e)})},this.keys=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").keys(i.$5,e,i.$1,i.$3,t,n),i.$4)},this.$3=e,this.keyFields=t.indexes[e],this.$1=t,this.$2=n,this.$4=r,this.$5=a}var t=e.prototype;return t.$6=function(t,n,r,a){var e=this;return o("ReStoreUtils").getLocked(t,n,this.$1.name,this.$3,r,a,this.$2).then(function(t){if(t!==void 0)return o("ReStoreUtils").searchKey(e.$1,t)})},e})(),u=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(t){function n(n,r,a,i,l,s){var u;return u=t.call(this,n,r,a,i,l)||this,u.subscribe=function(t,n,r){return u.$ReStoreIndex$p_3.subscribeIndex(u.$ReStoreIndex$p_1.name,u.$ReStoreIndex$p_2,t,(e||(e=o("ReQLBounds"))).extendBounds(n,u.$ReStoreIndex$p_1.indexes[u.$ReStoreIndex$p_2].length),r)},u.$ReStoreIndex$p_2=n,u.$ReStoreIndex$p_1=r,u.$ReStoreIndex$p_3=s,u}return babelHelpers.inheritsLoose(n,t),n})(s);l.ReStoreTransactionIndex=u,l.ReStoreIndex=c}),98);
__d("ReStoreTable",["FBLogger","I64","JSONStringifyBigIntSafe","LSSynchronousPromise","PromiseOrValue","ReQLBounds","ReStoreCommonUtils","ReStoreIndex","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=(e||(e=o("I64"))).cast(t);if(n===void 0)throw r("FBLogger")("messenger_web").mustfixThrow("Expected int64");return e.to_float(n)}function d(e,t,n,o,a){var i=r("JSONStringifyBigIntSafe")([t,n]),l=e.get(i);e.set(i,[l==null?o:l[0],a])}var m=(function(){function t(t,n,a,i){var l=this;this.entries=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").entries(l.$4,e,l.$1,void 0,t,n,l.$2),l.$3)},this.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.$3.chainPromiseOrValue(function(e){return o("ReStoreUtils").getLocked(l.$4,new WeakMap,l.$1.name,void 0,t,e,l.$2)})},this.keys=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").keys(l.$4,e,l.$1,void 0,t,n),l.$3)},this.peekNextAutoIncrementId=function(){return l.$5(l.$3.chainPromiseOrValue(function(t){var n=l.$1.autoIncrement;if(!n)throw r("FBLogger")("messenger_web").mustfixThrow("only supported for auto-incrementing tables");return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(o("ReStoreCommonUtils").gen(l.$4.table(l.$1.name).readSeed(new WeakMap))).then(function(t){if(t===void 0)throw r("FBLogger")("messenger_web").mustfixThrow("unexpected undefined autoIncrementSeed");return(e||(e=o("I64"))).of_float(t)})}))},this.keyFields=t.primaryKeyIds,this.$1=t,this.$2=n,this.$3=a,this.$4=i}var n=t.prototype;return n.$5=function(t){return this.$3.isSync?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t):Promise.resolve(t)},t})(),p=(function(t){function n(e,n,r,a,i,l,u,c,d,m){var p,_=n.tableNames[e];return p=t.call(this,_,r,a,i)||this,p.$ReStoreTransactionTable$p_1=new Map,p.$ReStoreTransactionTable$p_10=new Map,p.add=function(e){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(s.map(p.$ReStoreTransactionTable$p_4.beforeAdd({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r;return(r=p.$ReStoreTransactionTable$p_9)==null||r.recordLogicalWrite(),o("ReStoreCommonUtils").gen(p.$ReStoreTransactionTable$p_14(p.$ReStoreTransactionTable$p_10,n,new WeakMap,p.$ReStoreTransactionTable$p_3.name,e,t))})}),function(t){return(s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.afterAdd({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(){return t})}))},p.delete=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.beforeDelete({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r=p;return o("ReStoreCommonUtils").gen((function*(a){(a=r.$ReStoreTransactionTable$p_9)==null||a.recordLogicalWrite(),yield*o("ReStoreUtils").deleteItemLocked(r.$ReStoreTransactionTable$p_2,r.$ReStoreTransactionTable$p_10,n,new WeakMap,r.$ReStoreTransactionTable$p_3.name,e,t),yield*o("ReStoreUtils").cascadeKeyUpdatesLocked(r.$ReStoreTransactionTable$p_2,r.$ReStoreTransactionTable$p_10,n,new WeakMap,r.$ReStoreTransactionTable$p_3.name,e,void 0,r.$ReStoreTransactionTable$p_4,t,r.$ReStoreTransactionTable$p_11)})())})}))},p.put=function(e){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(s.map(p.$ReStoreTransactionTable$p_4.beforePut({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r;return(r=p.$ReStoreTransactionTable$p_9)==null||r.recordLogicalWrite(),o("ReStoreCommonUtils").gen(o("ReStoreUtils").putLocked(p.$ReStoreTransactionTable$p_2,p.$ReStoreTransactionTable$p_10,n,new WeakMap,p.$ReStoreTransactionTable$p_3.name,e,p.$ReStoreTransactionTable$p_4,t,p.$ReStoreTransactionTable$p_11))})}),function(t){return(s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.afterPut({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(){return t})}))},p.upsert=function(e,t){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.beforeUpsert({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:t}),function(n){return p.$ReStoreTransactionTable$p_13(function(r,a){var i=p;return o("ReStoreCommonUtils").gen((function*(l){(l=i.$ReStoreTransactionTable$p_9)==null||l.recordLogicalWrite(),yield*o("ReStoreUtils").upsertLocked(i.$ReStoreTransactionTable$p_2,i.$ReStoreTransactionTable$p_10,a,new WeakMap,i.$ReStoreTransactionTable$p_3.name,e,n,i.$ReStoreTransactionTable$p_4,r,i.$ReStoreTransactionTable$p_11),yield*o("ReStoreUtils").cascadeKeyUpdatesLocked(i.$ReStoreTransactionTable$p_2,i.$ReStoreTransactionTable$p_10,a,new WeakMap,i.$ReStoreTransactionTable$p_3.name,e,o("ReStoreUtils").searchKey(i.$ReStoreTransactionTable$p_3,t),i.$ReStoreTransactionTable$p_4,r,i.$ReStoreTransactionTable$p_11)})())})}))},p.index=function(e){return o("ReStoreUtils").getOrCreate(p.$ReStoreTransactionTable$p_1,e,function(){return new(o("ReStoreIndex")).ReStoreTransactionIndex(e,p.$ReStoreTransactionTable$p_3,p.$ReStoreTransactionTable$p_4,p.$ReStoreTransactionTable$p_5,p.$ReStoreTransactionTable$p_6)})},p.$ReStoreTransactionTable$p_3=_,p.$ReStoreTransactionTable$p_2=n,p.$ReStoreTransactionTable$p_4=r,p.$ReStoreTransactionTable$p_5=a,p.$ReStoreTransactionTable$p_6=i,p.$ReStoreTransactionTable$p_7=l,p.$ReStoreTransactionTable$p_8=u,p.$ReStoreTransactionTable$p_9=c,p.$ReStoreTransactionTable$p_10=d,p.$ReStoreTransactionTable$p_11=m,p}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$ReStoreTransactionTable$p_12=function(t){return this.$ReStoreTransactionTable$p_5.isSync?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t):Promise.resolve(t)},r.$ReStoreTransactionTable$p_13=function(t){var e=this;return this.$ReStoreTransactionTable$p_5.chainPromiseOrValue(function(n){var r=e.$ReStoreTransactionTable$p_6.createNested(e.$ReStoreTransactionTable$p_9);return(s||(s=o("PromiseOrValue"))).map(t(n,r),function(e){return r.flush(),e})})},r.$ReStoreTransactionTable$p_14=function*(n,r,a,i,l,s){var t=r.table(i),u=this.$ReStoreTransactionTable$p_2.tableNames[i];if(u.autoIncrement){var m=l[u.primaryKeyIds[0]],p=(e||(e=o("I64"))).of_float(yield*t.incrementSeed(a,m===void 0?m:c(m)));l[u.primaryKeyIds[0]]=p}var _=o("ReStoreUtils").appendDefaultValues(l,u.name,this.$ReStoreTransactionTable$p_11),f=o("ReStoreUtils").searchKey(u,_);if(f==null)throw new Error("Evaluating the object store's key path did not yield a value");if((yield*t.tableGet(a,f))==null){var g=o("ReStoreUtils").indicesWithKeyForValue(this.$ReStoreTransactionTable$p_3,Object.keys(u.indexes),_);yield*o("ReStoreUtils").deconflictIndicesLocked(this.$ReStoreTransactionTable$p_2,n,r,a,i,g,this.$ReStoreTransactionTable$p_4,s,this.$ReStoreTransactionTable$p_11);var h=yield*t.tableSet(a,f,_),y=h[0];yield*o("ReStoreUtils").addIdToIndices(r,a,i,y,g),d(n,i,f,void 0,_)}return f},n})(m),_=(function(e){function t(t,n,r,a,i){var l;return l=e.call(this,t,n,r,a)||this,l.$ReStoreTable$p_1=new Map,l.index=function(e){return o("ReStoreUtils").getOrCreate(l.$ReStoreTable$p_1,e,function(){return new(o("ReStoreIndex")).ReStoreIndex(e,l.$ReStoreTable$p_2,l.$ReStoreTable$p_3,l.$ReStoreTable$p_4,l.$ReStoreTable$p_5,l.$ReStoreTable$p_6)})},l.subscribe=function(e,t,n){return l.$ReStoreTable$p_6.subscribeTable(l.$ReStoreTable$p_2.name,e,(u||(u=o("ReQLBounds"))).extendBounds(t,l.$ReStoreTable$p_2.primaryKeyIds.length),n)},l.$ReStoreTable$p_2=t,l.$ReStoreTable$p_3=n,l.$ReStoreTable$p_4=r,l.$ReStoreTable$p_5=a,l.$ReStoreTable$p_6=i,l}return babelHelpers.inheritsLoose(t,e),t})(m);l.ReStoreTransactionTable=p,l.ReStoreTable=_}),98);
__d("LSStorage",["ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return(e||(e=o("ReStoreKeyComparer"))).compareKey(t,n)===0}l.areKeysEqual=s}),98);
__d("ReStoreUtils",["FBLogger","I64","JSONStringifyBigIntSafe","LSStorage","LSSynchronousPromise","Random","ReQLBounds","ReStoreCommonUtils","ReStoreKeyComparer","ReStoreOperationLock","ReStoreTable","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=500;async function d(e){for(var t=[],n=await e.next();!n.done;)t.push(n.value),n=await e.next();return t}function m(e,t,n){var o=e.indexes,a=e.primaryKeyIds,i=n==null?a:o[n];return i.map(function(e){if(t[e]!==void 0||n!=null)return t[e];throw r("FBLogger")("maw_db").mustfixThrow("primary key must be defined on object")})}function p(e,t,n){var r=n[t];return r?Object.keys(r).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(e,t)||(e[t]=r[t]),e},babelHelpers.extends({},e)):e}function _(t,n,r,a,i,l,s){function u(){var c,d=t.table(r.name),m=babelHelpers.extends({},(e||(e=o("ReQLBounds"))).extendBounds(l,(a===void 0?r.primaryKeyIds:r.indexes[a]).length),{dir:i}),p=a==null?d.tableEntries(n,m):d.indexEntries(n,a,m);return c={next:function*(t,n){var e=yield*p.next(n);if(e.done)return{done:!0};var o=e.value[1];return{done:!1,value:[e.value[0],s==null?o:s.afterEntriesNext({tableName:r.name,value:o})]}}},c[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]=u,c}return u()}function f(t,n,r,a,i,l){function s(){var u,c=t.table(r.name),d=c.keys(n,a,babelHelpers.extends({},(e||(e=o("ReQLBounds"))).extendBounds(l,(a===void 0?r.primaryKeyIds:r.indexes[a]).length),{dir:i}));return u={next:function*(t,n){return yield*d.next(n)}},u[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]=s,u}return s()}function g(e,t,n,r,a,i,l){var s=e.table(n),u=o("ReStoreOperationLock").isNoopLockProof(i)?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise:Promise.resolve.bind(Promise),c;return r!=null?c=u(o("ReStoreCommonUtils").gen(s.indexGet(t,r,a))):c=u(o("ReStoreCommonUtils").gen(s.tableGet(t,a))),c.then(function(e){if(e!==void 0)return l.afterGet({tableName:n,value:e})})}function h(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function y(e){var t=(s||(s=o("I64"))).cast(e);if(t===void 0)throw r("FBLogger")("maw_db").mustfixThrow("Expected int64");return s.to_float(t)}function C(e,t,n,o,a){var i=r("JSONStringifyBigIntSafe")([t,n]),l=e.get(i);(l==null?o:l[0])==null&&a==null?e.delete(i):e.set(i,[l==null?o:l[0],a])}function*b(e,t,n,r,a,i,l,s,c,d){function p(e,t){return e.length>=t?e:[].concat(e,[(u||(u=o("ReStoreKeyComparer"))).MAX_KEY])}if(!(l!=null&&(u||(u=o("ReStoreKeyComparer"))).compareKey(i,l)===0)){var f=e.tableNames[a],g=f.cascadeUpdates,h=f.primaryKeyIds,y=function*(){for(var o=C.indexName,a=C.tableName,u=e.tableNames[a],f=u.indexes,g=u.primaryKeyIds,y=o==null?g:f[o],v={gte:i,lte:p(i,y.length)},L=_(n,r,u,o,"asc",v),E=[],k=yield*L.next(c);!k.done;)E.push(k.value),k=yield*L.next(c);for(var I of E){var T=I[0],D=I[1],x=m(e.tableNames[a],D);if(l===void 0)yield*R(e,t,n,r,a,x,c),yield*b(e,t,n,r,a,x,void 0,s,c,d);else{var $=h.reduce(function(e,t,n){return n>=l.length||(e[y[n]]=l[n]),e},babelHelpers.extends({},D));yield*S(e,t,n,r,a,x,$,s,c,d),yield*b(e,t,n,r,a,x,m(e.tableNames[a],$),s,c,d)}}};for(var C of g)yield*y()}}function*v(e,t,n,r,a,i,l,c,d){var _=n.table(a),f=e.tableNames[a];if(f.autoIncrement){var g=i[f.primaryKeyIds[0]],h=(s||(s=o("I64"))).of_float(yield*_.incrementSeed(r,g===void 0?g:y(g)));i[f.primaryKeyIds[0]]=h}var b=m(f,i),v={},S=yield*_.tableGet(r,b),R=i;S!==void 0?v=L(f,Object.keys(f.indexes),S):R=p(i,f.name,d);var I=yield*_.tableSet(r,b,R),T=I[0],D=I[1],x=L(f,Object.keys(f.indexes),R),$=babelHelpers.extends({},x);for(var P of Object.keys($))v[P]!==void 0&&(u||(u=o("ReStoreKeyComparer"))).compareKey(v[P],$[P])===0&&(delete $[P],delete v[P]);yield*E(e,t,n,r,a,$,l,c,d),yield*k(n,r,a,T,D?x:$);for(var N of Object.keys(v))yield*_.indexDelete(r,N,v[N]);return C(t,a,b,S,R),b}function*S(e,t,n,r,a,i,l,s,u,c){var d=m(e.tableNames[a],l);o("LSStorage").areKeysEqual(i,d)||(yield*R(e,t,n,r,a,i,u)),yield*v(e,t,n,r,a,l,s,u,c)}function*R(e,t,n,r,o,a,i){var l=n.table(o),s=e.tableNames[o],u=yield*l.tableGet(r,a);if(u!==void 0){if(Object.keys(s.indexes).length)for(var c of Object.keys(s.indexes)){var d=m(s,u,c);d!=null&&(yield*l.indexDelete(r,c,d))}yield*l.tableDelete(r,a),C(t,o,a,u,void 0)}}function L(e,t,n){return t.reduce(function(t,r){var o,a=(o=e.indexPredicates)==null?void 0:o[r];if(a!=null&&!a(n))return t;var i=m(e,n,r);return t[r]=i,t},{})}function*E(e,t,n,r,o,a,i,l,s){var u=n.table(o);for(var c of Object.keys(a)){var d=a[c],p=yield*u.indexGet(r,c,d);if(p!=null){var _=m(e.tableNames[o],p);yield*R(e,t,n,r,o,_,l),yield*b(e,t,n,r,o,_,void 0,i,l,s)}}}function*k(e,t,n,r,o){var a=e.table(n);for(var i of Object.keys(o)){var l=o[i];l===void 0?yield*a.indexDelete(t,i,l):yield*a.indexSet(t,i,l,r)}}function*I(e,t,n,o,a,i,l,s,u,d){var m=n.table(s),p=i.tableNames[s];for(var f of u)yield*m.clearIds(o,f);var g=u.filter(function(e){return(p==null?void 0:p.indexes[e])!=null});if(g.length!==0)for(var h=_(n,o,p,void 0,"asc",void 0,a),y=[],C=yield*h.next(d);!C.done;){for(;!C.done&&y.length<=c;)y.push(C.value),C=yield*h.next(d);for(var b of y){var v=b[0],S=b[1],R=L(i.tableNames[s],g,S);yield*E(i,e,n,o,s,R,a,d,l);var I=r("nullthrows")(yield*m.getId(o,v));yield*k(n,o,s,I,R)}y.length=0,t==null||t()}}var T="__internal__transaction_id";function D(e,t,n,a,i,l,s){var u,c=null,d=new(o("ReStoreOperationLock")).NoopLock,m=new(o("ReStoreOperationLock")).ReStoreOperationLock,p=s==null?void 0:s.qplFlow,_=new Map,f=(u={},u[T]=r("Random").uint32(),u.reportUsedTablesForSyncAccess=function(t){c=t&&t.every(function(e){return i.tablePermitsSynchronousIO(e)})&&c!==!1},u.table=function(s){return new(o("ReStoreTable")).ReStoreTransactionTable(s,e,n,m,i,a,f,p,l,t)},u.transactionTable=function(s,u){var r=u!=null?s+"::"+u:s;return h(_,r,function(){return new(o("ReStoreTable")).ReStoreTransactionTable(s,e,n,c===!0&&u!=null?d:m,i,a,f,p,l,t)})},u),g=function(t){Object.defineProperty(f,t,{get:function(){return f.transactionTable(t)}})};for(var y of Object.keys(e.tableNames))g(y);return f}function x(e){return e.types.includes("indexeddb")}l.collectIterator=d,l.searchKey=m,l.appendDefaultValues=p,l.entries=_,l.keys=f,l.getLocked=g,l.getOrCreate=h,l.cascadeKeyUpdatesLocked=b,l.putLocked=v,l.upsertLocked=S,l.deleteItemLocked=R,l.indicesWithKeyForValue=L,l.deconflictIndicesLocked=E,l.addIdToIndices=k,l.rebuildIndicesLocked=I,l.createReStoreTransaction=D,l.isPDB=x}),98);
__d("ReStoreDefaultValueMigration",["LSPlatformLsInitLog","ReStoreDefaultValuesMetadata","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n={},r=await o("ReStoreUtils").collectIterator(t[o("ReStoreDefaultValuesMetadata").defaultValuesTableName].entries(e));for(var a of r){var i=a[0],l=a[1];if(i!=null){var s,u=o("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(l);if(u==null)continue;var c=u.columns,d=u.tableName;n[d]=(s=n[d])!=null?s:new Set;for(var m of c)n[d].add(m)}}return n}async function s(t,n,r,o){var a=await e(t,n),i={};for(var l in r.tableNames){var s=o[l];if(s!=null)for(var u in s){var c,d=(c=a[l])==null?void 0:c.has(u);if(!d){var m;i[l]=(m=i[l])!=null?m:{},i[l][u]=s[u]}}}return i}async function u(e,t,n){for(var r in t){var a=Object.keys(n[r]||{}),i={columns:a,tableName:r};await e[o("ReStoreDefaultValuesMetadata").defaultValuesTableName].put(o("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(i))}}async function c(e,t,n,r){var a=new WeakMap;o("LSPlatformLsInitLog").addPoint("default_values_update_start");var i=function(t,n){o("LSPlatformLsInitLog").addPoint("default_values_update_end_failure",{string:{default_values_update_failure_point:n,default_values_update_failure_reason:String(t)}})};try{var l=await s(a,e,t,r);try{if(n===!1)for(var c in l)for(var d=e[c].entries(a),m=await d.next();!m.done;){var p=babelHelpers.extends({},m.value[1]),_=o("ReStoreUtils").appendDefaultValues(p,c,r);await e[c].put(_),m=await d.next()}await u(e,l,r),o("LSPlatformLsInitLog").addPoint("default_values_update_end")}catch(e){i(e,"setDefaultValues")}}catch(e){i(e,"findDefaultValuesToUpdate")}}l.runMigrationForTableDefaultValuesIfNeeded=c}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=typeof e=="string"?e:null;if(t==null)return null;try{var n=JSON.parse(t);for(var r of n)if(typeof r!="string")return null;return n}catch(e){return null}}function s(t){var n={indexName:"string",keyIds:"string","predicate?":"string",tableName:"string"};for(var o in n){var a=void 0,i=o.endsWith("?");if(i)a=t[o.slice(0,-1)];else{if(!Object.prototype.hasOwnProperty.call(t,o)||t[o]==null)return r("FBLogger")("messenger_web").warn('Malformed index data, missing key "%s"',o),null;a=t[o]}var l=n[o],s=typeof a;if(a!=null&&s!==l)return r("FBLogger")("messenger_web").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',o,s,l),null}var u=e(t.keyIds);return u==null?(r("FBLogger")("messenger_web").warn('Malformed index data, key IDs "%s" are invalid',typeof t.keyIds=="string"?t.keyIds:"<"+typeof t.keyIds+">"),null):typeof t.indexName!="string"||typeof t.tableName!="string"||typeof t.predicate!="string"&&t.predicate!=null?null:babelHelpers.extends({data:u,indexName:t.indexName,tableName:t.tableName},t.predicate==null?{}:{predicate:t.predicate})}function u(e,t){if(e[0]==null||e[0].length!==t[0].length)return!0;for(var n=0;n<e[0].length;n++)if(e[0][n]!==t[0][n])return!0;return e[1]!==t[1]}function c(e){return babelHelpers.extends({indexName:e.indexName,keyIds:JSON.stringify(e.data),tableName:e.tableName},e.predicate==null?{}:{predicate:e.predicate})}var d="_db_indices_meta";l.tryParseIndexData=s,l.indicesDiffer=u,l.indexDataToValue=c,l.indicesTableName=d}),98);
__d("ReStoreIndicesMigration",["LSPlatformLsInitLog","ReStoreCommonUtils","ReStoreIndexMetadata","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n={},r=await o("ReStoreUtils").collectIterator(t[o("ReStoreIndexMetadata").indicesTableName].entries(e));for(var a of r){var i=a[0],l=a[1];if(i!=null){var s,u=o("ReStoreIndexMetadata").tryParseIndexData(l);if(u==null)continue;var c=u.indexName,d=u.tableName;n[d]=(s=n[d])!=null?s:{},n[d][c]=babelHelpers.extends({index:u.data,key:i},u.predicate==null?{}:{predicate:u.predicate})}}return n}async function s(t,n,r){var a=await e(t,n),i={};for(var l in r.tableNames){var s=r.tableNames[l];for(var u in s.indexes){var c,d,m=[s.indexes[u],(c=s.indexPredicates)==null||(c=c[u])==null?void 0:c.toString()],p=(d=a[l])==null?void 0:d[u];if(o("ReStoreIndexMetadata").indicesDiffer([p==null?void 0:p.index,p==null?void 0:p.predicate],m)){var _;i[l]=(_=i[l])!=null?_:{},i[l][u]=m}}}var f={};for(var g in r.tableNames)if(g in a){var h=a[g];for(var y in h){var C,b=h[y],v=(C=r.tableNames[g])==null||(C=C.indexes)==null?void 0:C[y];if(v==null){var S;f[g]=(S=f[g])!=null?S:{},f[g][y]=b}}}return{toRemove:f,toUpdate:i}}async function u(e,t){for(var n in t){var r=t[n];for(var a in r){var i=r[a],l=i[0],s=i[1],u=babelHelpers.extends({data:l,indexName:a,tableName:n},s==null?{}:{predicate:s});await e[o("ReStoreIndexMetadata").indicesTableName].put(o("ReStoreIndexMetadata").indexDataToValue(u))}}}async function c(e,t){for(var n in t){var r=t[n];for(var a in r){var i,l=r[a].key;await(i=e[o("ReStoreIndexMetadata").indicesTableName]).delete.apply(i,l)}}}function d(e,t,n,r,a){return new(o("ReStoreOperationLock")).ReStoreOperationLock().chainPromiseOrValue(function(i){return o("ReStoreCommonUtils").gen(o("ReStoreUtils").rebuildIndicesLocked(e.changedKeys,e.clearCache,e.storeTx,new WeakMap,e.hooksManager,n,r,t,a,i))})}function m(e,t,n,r){var a=new WeakMap;o("LSPlatformLsInitLog").addPoint("index_migration_start");var i=function(t,n){o("LSPlatformLsInitLog").addPoint("index_migration_end_failure",{string:{index_migration_failure_point:n,index_migration_failure_reason:String(t)}})};return s(a,e.transaction,t).then(async function(a){var i=a.toRemove,l=a.toUpdate,s=Array.from(new Set([].concat(Object.keys(l),Object.keys(i))));if(o("LSPlatformLsInitLog").addAnnotations({int:{index_migration_rebuild_tables_count:s.length}}),r===!1){for(var m of s)if(t.tableNames[m]!=null){var p,_,f=Array.from(new Set([].concat(Object.keys((p=l[m])!=null?p:{}),Object.keys((_=i[m])!=null?_:{}))));await d(e,m,t,n,f)}}await u(e.transaction,l),await c(e.transaction,i),o("LSPlatformLsInitLog").addPoint("index_migration_end")},function(e){return i(e,"findIndicesToUpdateOrRemove")}).catch(function(e){return i(e,"rebuildIndices")})}l.runMigrationForIndicesIfNeeded=m}),98);
__d("ReStoreMigrateUtil",["$InternalEnum","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["UPDATE_METADATA","UPGRADE_COMPLETE","NO_UPGRADE_NEEDED"]);function s(e,t){var n="V"+t;return n in e?n:null}function u(e,t){return c.apply(this,arguments)}function c(){return c=babelHelpers.wrapAsyncGenerator(function*(e,t){for(var n=e.iterator(new WeakMap),r=[],o=yield babelHelpers.awaitAsyncGenerator(n.next());!o.done;){var a=o.value,i=a[0],l=a[1];r.push(l),r.length===t&&(yield r,r=[]),o=yield babelHelpers.awaitAsyncGenerator(n.next())}r.length&&(yield r)}),c.apply(this,arguments)}async function d(e,t,n){var r=!1,a=!1,i;try{for(var l=babelHelpers.asyncIterator(u(o("ReQL").fromTableAscending(e),100)),s;r=!(s=await l.next()).done;r=!1){var c=s.value;await Promise.all(c.map(function(n){return t(n).then(e.put)})),n==null||n()}}catch(e){a=!0,i=e}finally{try{r&&l.return!=null&&await l.return()}finally{if(a)throw i}}}function m(e,t){function n(t){if(t!=null){var n={};for(var r in t)n[e+"_"+r]=t[r];return n}}return{bool:n(t.bool),int:n(t.int),string:n(t.string)}}l.ReStoreMigrateResult=e,l.getVersionFromNumber=s,l.fetchReQLBatch=u,l.upgradeTableEntries=d,l.prefixAnnotations=m}),98);
__d("ReStoreHashMigration",["JSONStringifyBigIntSafe","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.values(e.tableNames).map(function(e){var t;return babelHelpers.extends({},e,{indexPredicates:Object.entries((t=e.indexPredicates)!=null?t:{}).map(function(e){var t=e[0],n=e[1];return[t,n.toString()]})})});return r("JSONStringifyBigIntSafe")(t)}async function s(e,t,n,r){var a,i,l=r.loggers,s=l.logHistory,u=l.userFlow,c=r.storeTx,d=r.transaction,m=o("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(n),p=o("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash(t);u==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(e,{int:{defaultValuesVersion:m,schemaVersion:p}}));var _=new(o("ReStorePersistedMetadata")).ReStorePersistedSchemaVersion(e),f=new(o("ReStorePersistedMetadata")).ReStorePersistedDefaultValuesVersion(e),g=(a=await _.read(c))==null?void 0:a.schemaVersion,h=(i=await f.read(c))==null?void 0:i.defaultValuesVersion;if(s==null||s.debug("storeSchemaVersion: "+(g!=null?g:"null")),s==null||s.debug("storeDefaultValuesVersion: "+(h!=null?h:"null")),g!=null&&(u==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(e,{int:{storeDefaultValuesVersion:h,storeSchemaVersion:g}}))),g===p&&h===m)return o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED;var y=g==null;return await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(d,t,y,n),s==null||s.debug("migration default values finished"),await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(r,t,n,y),s==null||s.debug("migration indices finished"),_.write(c,{schemaVersion:p}),f.write(c,{defaultValuesVersion:m}),s==null||s.debug("version is written"),s==null||s.debug("migration hash end"),u==null||u.addPoint("migration_hash_end"),y?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE}l.serializeTableData=e,l.runHashMigration=s}),98);
__d("ReStorePersistenceIds",[],(function(t,n,r,o,a,i){"use strict";var e="nextId",l="seed";function s(e){return e}i.idForNextId=e,i.idForSeed=l,i.castPersistenceId=s}),66);
__d("ReStorePersistedMetadata",["JSONStringifyBigIntSafe","ReStoreCommonUtils","ReStoreHashMigration","ReStorePersistenceIds","hashString"],(function(t,n,r,o,a,i,l){"use strict";var e="_db_schema_meta",s=(function(){function t(e){this.$1=o("ReStorePersistenceIds").castPersistenceId(e)}var n=t.prototype;return n.read=async function(n){var t=await o("ReStoreCommonUtils").gen(n.table(e).readData(new WeakMap,this.$1));return t},n.write=function(n,r){n.table(e).writeData(new WeakMap,this.$1,r)},n.getId=function(){return this.$1},t})(),u=(function(e){function t(t){return e.call(this,t+"_schema_version")||this}return babelHelpers.inheritsLoose(t,e),t.hash=function(t){return r("hashString")(o("ReStoreHashMigration").serializeTableData(t))},t})(s),c=(function(e){function t(){return e.call(this,"custom_migration_value_version")||this}return babelHelpers.inheritsLoose(t,e),t})(s),d=(function(e){function t(t){return e.call(this,t+"_default_value_version")||this}return babelHelpers.inheritsLoose(t,e),t.hash=function(t){return r("hashString")(r("JSONStringifyBigIntSafe")(t))},t})(s);l.schemaMetadataTableName=e,l.ReStorePersistedMetadata=s,l.ReStorePersistedSchemaVersion=u,l.ReStorePersistedCustomMigrationVersion=c,l.ReStorePersistedDefaultValuesVersion=d}),98);
__d("ReStoreMetadata",["ReStoreDefaultValuesMetadata","ReStoreIndexMetadata","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return!0}function u(e){var t=e.reduce(function(e,t){return function(n){return n[t]!=null&&e(n)}},s);return t.toString=function(){return"dynamic predicate on ["+e.join(",")+"]"},t}function c(e){return function(n){var t={},r={};for(var o of n)for(var a of o){var i,l,s,u,c;a.id!=null&&(t[a.id]=a.name),r[a.name]={autoIncrement:(i=a.auto_increment)!=null?i:!1,cascadeUpdates:(l=e[a.name])!=null?l:[],indexes:(s=Object.fromEntries(Object.entries((u=a.indexes)!=null?u:{}).map(function(e){var t=e[0],n=e[1].columns;return[t,n]})))!=null?s:{},indexPredicates:Object.fromEntries(Object.entries((c=a.indexes)!=null?c:{}).filter(function(e){var t=e[0],n=e[1];return n.predicate}).map(function(e){var t=e[0],n=e[1];return[t,n.predicate]})),name:a.name,primaryKeyIds:a.primary_key}}return{tableIds:t,tableNames:r}}}var d=(e={},e[o("ReStoreDefaultValuesMetadata").defaultValuesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]},e[o("ReStoreIndexMetadata").indicesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]},e[o("ReStorePersistedMetadata").schemaMetadataTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStorePersistedMetadata").schemaMetadataTableName,primaryKeyIds:[]},e);l.createPredicate=u,l.getBuildTableData=c,l.RESTORE_METADATA_TABLES=d}),98);
__d("ReStoreVersionedSchemaProviderUtil",["ReStoreMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n={tableIds:{},tableNames:o("ReStoreMetadata").RESTORE_METADATA_TABLES},r={};for(var a of Object.keys(e)){var i,l=e[a],s={},u={};for(var c in l.indexes)s[c]=l.indexes[c].fields,l.indexes[c].ignoreNulls.length>0&&(u[c]=o("ReStoreMetadata").createPredicate(l.indexes[c].ignoreNulls));n.tableNames[a]={autoIncrement:l.autoIncrement,cascadeUpdates:(i=t==null?void 0:t[a])!=null?i:[],indexes:s,indexPredicates:u,name:a,primaryKeyIds:l.primaryKey.fields},l.id!=null&&(n.tableIds[l.id]=a),Object.keys(l.defaults).length>0&&(r[a]=l.defaults)}return{defaults:r,tableData:n}}l.getTableData=e}),98);
__d("LSDbV1",["I64MigrationHelper","LSDbV1.upgrade","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreVersionedSchemaProviderUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({_user_info:{autoIncrement:!1,defaults:{},id:4,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},acs_request_context:{autoIncrement:!1,defaults:{},id:310,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},ad_context:{autoIncrement:!1,defaults:{},id:160,indexes:{},primaryKey:{fields:["adId"],ignoreNulls:[]}},admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:(e=o("I64MigrationHelper")).cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ai_bot_feedback_submission_status:{autoIncrement:!1,defaults:{},id:315,indexes:{},primaryKey:{fields:["botResponseId"],ignoreNulls:[]}},ai_bot_search_metadata:{autoIncrement:!1,defaults:{contactViewerRelationship:e.cast([0,0]),displayName:"",score:0},id:298,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},anonymous_task_context:{autoIncrement:!1,defaults:{failureCount:e.cast([0,0])},id:311,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},attachment_conversion:{autoIncrement:!1,defaults:{},id:164,indexes:{},primaryKey:{fields:["attachmentFbid"],ignoreNulls:[]}},attachment_ctas:{autoIncrement:!1,defaults:{},id:19,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}},attachments_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,mediaGroup:e.cast([0,0])},id:17,indexes:{},primaryKey:{fields:["threadKey","mediaGroup","minTimestampMs"],ignoreNulls:[]}},audio_channel_events:{autoIncrement:!1,defaults:{},id:238,indexes:{},primaryKey:{fields:["eventId","roomId"],ignoreNulls:[]}},available_reactions:{autoIncrement:!1,defaults:{},id:188,indexes:{},primaryKey:{fields:["emojiIdx"],ignoreNulls:[]}},avatar_settings:{autoIncrement:!1,defaults:{enableAvatarHotlike:!1},id:209,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},bot_profile_info_v2:{autoIncrement:!1,defaults:{hasEmbodiment:!1},id:299,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},bots:{autoIncrement:!1,defaults:{},id:230,indexes:{},primaryKey:{fields:["threadKey","botId"],ignoreNulls:[]}},business_comm_items:{autoIncrement:!1,defaults:{},id:234,indexes:{},primaryKey:{fields:["threadKey","entId"],ignoreNulls:[]}},business_support_case_details:{autoIncrement:!1,defaults:{},id:222,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},business_support_notification_settings:{autoIncrement:!1,defaults:{},id:236,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},business_thread_suggestions:{autoIncrement:!1,defaults:{},id:290,indexes:{},primaryKey:{fields:["threadKey","suggestionType"],ignoreNulls:[]}},client_accounts:{autoIncrement:!0,defaults:{},id:272,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_message_translation_info:{autoIncrement:!1,defaults:{},id:324,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_messages:{autoIncrement:!0,defaults:{disabledActionsReason:e.cast([0,0]),isForwarded:!1,isHidden:!1,isReadonly:!1,isReplyOnly:!1,isTombstoned:!1,messageContentSubtype:e.cast([0,0]),messageContentType:e.cast([0,0]),messageCreationType:e.cast([0,0]),messageEphemeralityType:e.cast([0,0]),messageSource:e.cast([0,0]),replyMessageTextSize:e.cast([0,0]),replyStatus:e.cast([0,0]),replyVicinityStatus:e.cast([0,0]),sendStatus:e.cast([0,0]),shouldHideInSnippet:!1,shouldPersist:!1,textSize:e.cast([0,0])},id:273,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_participants:{autoIncrement:!0,defaults:{capabilities1:e.cast([0,0]),capabilities2:e.cast([0,0]),isPending:!1,readActionTsMs:e.cast([0,0])},id:274,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}},client_threads:{autoIncrement:!0,defaults:{capabilities1:e.cast([0,0]),capabilities2:e.cast([0,0]),groupMemberAddMode:e.cast([0,0]),isAdminSnippet:!1,isHidden:!1,isHotlikeSnippet:!1,isPending:!1,isShadowThread:!1,isTombstoned:!1,pinnedMessagesCount:e.cast([0,0])},id:276,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_web_pinned_messages:{autoIncrement:!1,defaults:{},id:328,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","offlineThreadingId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","offlineThreadingId","pinnedTimestampMs"],ignoreNulls:[]}},client_xmas:{autoIncrement:!0,defaults:{},id:314,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},cm_category_list:{autoIncrement:!1,defaults:{},id:182,indexes:{},primaryKey:{fields:["communityId","categoryId"],ignoreNulls:[]}},cm_channel_events:{autoIncrement:!1,defaults:{},id:201,indexes:{eventsInThread:{fields:["threadId","eventId"],ignoreNulls:[]}},primaryKey:{fields:["eventId","threadId"],ignoreNulls:[]}},cm_channel_list:{autoIncrement:!1,defaults:{},id:167,indexes:{threadIdCommunityId:{fields:["threadId","communityId"],ignoreNulls:[]}},primaryKey:{fields:["communityId","threadId"],ignoreNulls:[]}},cm_community_list:{autoIncrement:!1,defaults:{},id:166,indexes:{},primaryKey:{fields:["communityId"],ignoreNulls:[]}},cm_search_nullstate_metadata:{autoIncrement:!1,defaults:{score:0},id:289,indexes:{},primaryKey:{fields:["threadKey","scoreType"],ignoreNulls:[]}},community_chat_admin_assist_command_sequences:{autoIncrement:!1,defaults:{},id:291,indexes:{},primaryKey:{fields:["commandSequenceId"],ignoreNulls:[]}},community_chat_message_seen_count:{autoIncrement:!1,defaults:{},id:221,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},community_chat_poll_options:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:e.cast([0,0]),sortKeyVotingTimestamp:e.cast([0,0]),voteCount:e.cast([0,0])},id:224,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},community_chat_poll_votes:{autoIncrement:!1,defaults:{},id:225,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},community_chat_poll_votes_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:244,indexes:{},primaryKey:{fields:["pollId","optionId","minTimestampMs"],ignoreNulls:[]}},community_chat_polls:{autoIncrement:!1,defaults:{pollType:e.cast([0,0])},id:223,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},community_direct_invites_presets:{autoIncrement:!1,defaults:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:e.cast([0,0]),pictureUrlExpirationTimestampMs2:e.cast([0,0]),presetTypeV2:"ALL_MEMBERS"},id:199,indexes:{},primaryKey:{fields:["communityId","presetType","source"],ignoreNulls:[]}},community_events:{autoIncrement:!1,defaults:{},id:202,indexes:{},primaryKey:{fields:["eventId","communityId"],ignoreNulls:[]}},community_folders:{autoIncrement:!1,defaults:{capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),inviteStatus:e.cast([0,0]),notificationMutedUntil:e.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_members:{autoIncrement:!1,defaults:{adminActions:e.cast([0,0]),channelBadges:e.cast([0,0]),contactCapabilities:e.cast([0,0]),requestId:"",source:e.cast([0,0]),threadRoles:e.cast([0,0])},id:170,indexes:{communityContact:{fields:["communityId","contactId","requestId","source","name"],ignoreNulls:[]},communitySource:{fields:["communityId","source","requestId","contactId","name"],ignoreNulls:[]}},primaryKey:{fields:["communityId","contactId","source","requestId"],ignoreNulls:[]}},community_members_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:189,indexes:{},primaryKey:{fields:["communityId","isAdmin","minName","source","requestId"],ignoreNulls:[]}},community_messaging_aggregated_copresence_counts_for_chat:{autoIncrement:!1,defaults:{},id:204,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},community_messaging_aggregated_user_presence_counts_for_community:{autoIncrement:!1,defaults:{},id:203,indexes:{},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_rules:{autoIncrement:!1,defaults:{},id:254,indexes:{},primaryKey:{fields:["communityId","ruleId"],ignoreNulls:[]}},community_surface_ranges:{autoIncrement:!1,defaults:{},id:253,indexes:{},primaryKey:{fields:["surfaceType","communityKey"],ignoreNulls:[]}},community_thread_sync_info:{autoIncrement:!1,defaults:{},id:294,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},connectivity_status:{autoIncrement:!0,defaults:{},id:114,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},contact_upload_settings:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:74,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},contextual_profile_v1:{autoIncrement:!1,defaults:{},id:216,indexes:{associatedEntityIdAndOwner:{fields:["associatedEntityId","ownerId"],ignoreNulls:[]}},primaryKey:{fields:["ownerId","associatedEntityId"],ignoreNulls:[]}},cowatch_sessions:{autoIncrement:!1,defaults:{},id:80,indexes:{},primaryKey:{fields:["cowatchSessionId"],ignoreNulls:[]}},ctas:{autoIncrement:!1,defaults:{},id:15,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},custom_thread_commands:{autoIncrement:!1,defaults:{isOpenPersistentMenu:!1},id:296,indexes:{commandId:{fields:["commandId"],ignoreNulls:[]},rank:{fields:["threadKey","rank"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","commandId"],ignoreNulls:[]}},cutover_threads:{autoIncrement:!1,defaults:{isMigrated:!1,showOpenMessageHistory:!1},id:193,indexes:{},primaryKey:{fields:["openThreadId"],ignoreNulls:[]}},data_trace_addon:{autoIncrement:!0,defaults:{timestampMs:e.cast([0,0])},id:154,indexes:{traceIdAddonId:{fields:["traceId","addonId"],ignoreNulls:[]}},primaryKey:{fields:["addonId"],ignoreNulls:[]}},data_trace_meta:{autoIncrement:!1,defaults:{foregroundTimestampMs:e.cast([0,0]),initTimestampMs:e.cast([0,0]),shouldFlush:!1,traceType:e.cast([0,0])},id:153,indexes:{shouldFlushInitTimestampMsTraceId:{fields:["shouldFlush","initTimestampMs","traceId"],ignoreNulls:[]}},primaryKey:{fields:["traceId"],ignoreNulls:[]}},device_metadata:{autoIncrement:!0,defaults:{},id:185,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},discoverable_chat_participants:{autoIncrement:!1,defaults:{source:e.cast([0,0])},id:248,indexes:{},primaryKey:{fields:["threadId","contactId","source"],ignoreNulls:[]}},discoverable_chat_participants_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:249,indexes:{},primaryKey:{fields:["threadId","source","minName"],ignoreNulls:[]}},discoverable_chats_personal_inbox_info:{autoIncrement:!1,defaults:{},id:326,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}},e2ee_dummy_table_for_sync:{autoIncrement:!1,defaults:{},id:171,indexes:{},primaryKey:{fields:["placeholder"],ignoreNulls:[]}},edit_message_history:{autoIncrement:!0,defaults:{sendStatus:e.cast([0,0])},id:322,indexes:{originalMsgPkEditTs:{fields:["originalMessagePk","serverAdjustedEditTsMs"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},emoji_sets:{autoIncrement:!1,defaults:{},id:151,indexes:{},primaryKey:{fields:["categoryIdx","emojiIdx","type_"],ignoreNulls:[]}},encrypted_backup_restore_task_payload_context:{autoIncrement:!1,defaults:{},id:190,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},encrypted_backups:{autoIncrement:!0,defaults:{authorityLevel:e.cast([0,0]),hasOtcEligibleDevices:!1},id:172,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_client_restore_status:{autoIncrement:!1,defaults:{},id:231,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},encrypted_backups_debug_metadata:{autoIncrement:!1,defaults:{},id:206,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:217,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_dyi_backup_restore_status:{autoIncrement:!0,defaults:{},id:208,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata:{autoIncrement:!1,defaults:{},id:207,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:218,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_message_backup_status:{autoIncrement:!1,defaults:{},id:213,indexes:{},primaryKey:{fields:["messagePk"],ignoreNulls:[]}},encrypted_backups_metadata:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:196,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},encrypted_backups_otc_notification_sending_status:{autoIncrement:!0,defaults:{},id:285,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_status_trigger:{autoIncrement:!0,defaults:{},id:195,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_virtual_devices:{autoIncrement:!0,defaults:{removalStatus:e.cast([0,1]),requiresHsmMigration:!1,virtualDeviceType:e.cast([0,1])},id:184,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},epd_cookie_settings:{autoIncrement:!1,defaults:{},id:163,indexes:{},primaryKey:{fields:[],ignoreNulls:[]}},experiences_shared_state:{autoIncrement:!1,defaults:{},id:282,indexes:{},primaryKey:{fields:["stateKey"],ignoreNulls:[]}},fb_events:{autoIncrement:!1,defaults:{},id:200,indexes:{},primaryKey:{fields:["eventId"],ignoreNulls:[]}},fb_transport_contacts:{autoIncrement:!0,defaults:{},id:240,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},feature_limits:{autoIncrement:!1,defaults:{},id:150,indexes:{},primaryKey:{fields:["type_"],ignoreNulls:[]}},filtered_messages_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:211,indexes:{},primaryKey:{fields:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"],ignoreNulls:[]}},filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0]),secondaryThreadRangeFilter:e.cast([0,0]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}},focus_mode_ctas:{autoIncrement:!1,defaults:{},id:30,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},folder_metadata:{autoIncrement:!1,defaults:{},id:35,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},forward_content:{autoIncrement:!1,defaults:{},id:129,indexes:{},primaryKey:{fields:["value","type_"],ignoreNulls:[]}},gdpr_settings:{autoIncrement:!1,defaults:{},id:75,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},gradient_colors:{autoIncrement:!1,defaults:{},id:117,indexes:{},primaryKey:{fields:["themeFbid","gradientIndex"],ignoreNulls:[]}},group_invitations_pending:{autoIncrement:!1,defaults:{communityJoinRequestStatus:e.cast([0,0]),communityParticipationControlRequestStatus:e.cast([0,0]),communityParticipationControlSetting:e.cast([0,0])},id:235,indexes:{},primaryKey:{fields:["linkHash"],ignoreNulls:[]}},group_invites:{autoIncrement:!1,defaults:{},id:197,indexes:{},primaryKey:{fields:["threadKey","inviterId","inviteeId"],ignoreNulls:[]}},group_membership_approval_requests:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:26,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},horizon_contact_info:{autoIncrement:!1,defaults:{},id:323,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_contact_info:{autoIncrement:!1,defaults:{e2eeEligibility:e.cast([0,0])},id:176,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:e.cast([0,0]),igDmSettingsTtlSec:e.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},ig_thread_labels:{autoIncrement:!1,defaults:{labelTimestampMs:e.cast([0,0])},id:318,indexes:{},primaryKey:{fields:["threadKey","labelType"],ignoreNulls:[]}},igd_xma_receiver_fetch:{autoIncrement:!1,defaults:{},id:316,indexes:{},primaryKey:{fields:["messageId"],ignoreNulls:[]}},in_thread_banner:{autoIncrement:!1,defaults:{},id:118,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},in_thread_banner_ctas:{autoIncrement:!1,defaults:{},id:119,indexes:{},primaryKey:{fields:["bannerId","ctaId"],ignoreNulls:[]}},in_thread_banner_overflow_menu:{autoIncrement:!1,defaults:{},id:120,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},inbox_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:198,indexes:{},primaryKey:{fields:["syncGroup"],ignoreNulls:[]}},inbox_view_state:{autoIncrement:!1,defaults:{value:""},id:277,indexes:{},primaryKey:{fields:["interface_","configName"],ignoreNulls:[]}},inbox_view_state_v2:{autoIncrement:!1,defaults:{value:""},id:281,indexes:{},primaryKey:{fields:["configName"],ignoreNulls:[]}},lightspeed_task_context:{autoIncrement:!1,defaults:{requiresAuthentication:!1},id:306,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},linked_groups:{autoIncrement:!1,defaults:{},id:130,indexes:{threadKey:{fields:["threadKey"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},live_location_sharers:{autoIncrement:!1,defaults:{},id:149,indexes:{},primaryKey:{fields:["threadKey","userId"],ignoreNulls:[]}},local_message_persistence_store:{autoIncrement:!0,defaults:{},id:301,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_deleted_messages:{autoIncrement:!0,defaults:{},id:303,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_supplemental:{autoIncrement:!0,defaults:{},id:302,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_tag_index:{autoIncrement:!0,defaults:{},id:304,indexes:{offlineThreadingId:{fields:["offlineThreadingId","threadId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},m_suggestions:{autoIncrement:!1,defaults:{},id:21,indexes:{},primaryKey:{fields:["threadKey","timestampMs","suggestionId"],ignoreNulls:[]}},mailbox_metadata:{autoIncrement:!1,defaults:{},id:25,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mailbox_task_completion_api_tasks:{autoIncrement:!1,defaults:{},id:233,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},mailbox_task_completion_notification_context:{autoIncrement:!1,defaults:{},id:232,indexes:{},primaryKey:{fields:["notificationScopeKey"],ignoreNulls:[]}},media_send_jobs:{autoIncrement:!1,defaults:{},id:51,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},message_requests:{autoIncrement:!1,defaults:{},id:34,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},message_search_queries:{autoIncrement:!1,defaults:{},id:70,indexes:{},primaryKey:{fields:["type_","query","threadKeyV2"],ignoreNulls:[]}},message_search_results:{autoIncrement:!1,defaults:{},id:69,indexes:{},primaryKey:{fields:["type_","query","threadKey","globalIndex"],ignoreNulls:[]}},messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},messages_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1},id:13,indexes:{},primaryKey:{fields:["threadKey","minTimestampMs","minMessageId"],ignoreNulls:[]}},messages_status:{autoIncrement:!1,defaults:{timestampMs:e.cast([0,0])},id:33,indexes:{},primaryKey:{fields:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"],ignoreNulls:[]}},messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:e.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},messaging_settings:{autoIncrement:!1,defaults:{},id:83,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mi_act_mapping_table:{autoIncrement:!1,defaults:{},id:173,indexes:{chat_id:{fields:["clientThreadPk"],ignoreNulls:[]},fk_threads:{fields:["serverThreadKey"],ignoreNulls:[]},jid:{fields:["jid"],ignoreNulls:[]}},primaryKey:{fields:["serverThreadKey","clientThreadPk","jid"],ignoreNulls:[]}},msg_pinned_messages_v2:{autoIncrement:!1,defaults:{},id:205,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","pinnedTimestampMs"],ignoreNulls:[]}},msgr_quiet_time:{autoIncrement:!1,defaults:{},id:317,indexes:{quietTimeId:{fields:["quietTimeId"],ignoreNulls:[]}},primaryKey:{fields:["quietTimeId"],ignoreNulls:[]}},mwb_safety_interventions:{autoIncrement:!1,defaults:{},id:327,indexes:{},primaryKey:{fields:["interventionId","interventionEntId"],ignoreNulls:[]}},network_requests:{autoIncrement:!1,defaults:{},id:3,indexes:{},primaryKey:{fields:["taskQueueName","syncDatabaseId"],ignoreNulls:[]}},new_payment_credential_option:{autoIncrement:!1,defaults:{},id:90,indexes:{},primaryKey:{fields:["credentialType"],ignoreNulls:[]}},notification_settings:{autoIncrement:!1,defaults:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},id:175,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},offline_queue_thread_status:{autoIncrement:!1,defaults:{},id:295,indexes:{},primaryKey:{fields:["threadJid"],ignoreNulls:[]}},ohai_gateway_key_configs:{autoIncrement:!1,defaults:{},id:313,indexes:{},primaryKey:{fields:["keyId"],ignoreNulls:[]}},p2m_charge:{autoIncrement:!1,defaults:{},id:97,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice:{autoIncrement:!1,defaults:{},id:94,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice_attachment:{autoIncrement:!1,defaults:{},id:95,indexes:{},primaryKey:{fields:["orderId","productItemId"],ignoreNulls:[]}},p2p_request_v2:{autoIncrement:!1,defaults:{},id:100,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},p2p_transfer_v2:{autoIncrement:!1,defaults:{},id:101,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}},participant_list_queries:{autoIncrement:!1,defaults:{},id:219,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},participant_search_queries:{autoIncrement:!1,defaults:{},id:214,indexes:{},primaryKey:{fields:["query","threadKey"],ignoreNulls:[]}},participants:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),deliveredWatermarkTimestampMs:e.cast([0,0]),groupParticipantJoinState:e.cast([0,0]),readActionTimestampMs:e.cast([0,0]),readWatermarkTimestampMs:e.cast([0,0]),threadRoles:e.cast([0,0])},id:14,indexes:{contactIdThreadKey:{fields:["contactId","threadKey"],ignoreNulls:[]},threadKeyDeliveredWatermarkTimestampMs:{fields:["threadKey","deliveredWatermarkTimestampMs","contactId"],ignoreNulls:[]},threadKeyReadWatermarkTimestampMs:{fields:["threadKey","readWatermarkTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},payment_auth_request_results:{autoIncrement:!1,defaults:{},id:108,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_client_auth_token:{autoIncrement:!1,defaults:{},id:107,indexes:{},primaryKey:{fields:["userId","deviceId","appId"],ignoreNulls:[]}},payment_method:{autoIncrement:!1,defaults:{},id:89,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_p2p_risk_verification:{autoIncrement:!1,defaults:{},id:98,indexes:{},primaryKey:{fields:["requestId","transactionId"],ignoreNulls:[]}},payment_pin_verification_results:{autoIncrement:!1,defaults:{},id:113,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_price_list_item:{autoIncrement:!1,defaults:{},id:96,indexes:{},primaryKey:{fields:["orderId","id"],ignoreNulls:[]}},payment_server_request_results:{autoIncrement:!1,defaults:{},id:109,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_transaction_v2:{autoIncrement:!1,defaults:{},id:99,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},payment_type_bank_v2:{autoIncrement:!1,defaults:{},id:88,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_type_card:{autoIncrement:!1,defaults:{},id:86,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_type_paypal:{autoIncrement:!1,defaults:{},id:85,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_user_auth:{autoIncrement:!1,defaults:{},id:106,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_eligibility:{autoIncrement:!1,defaults:{},id:92,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_ofac_blacklisted_countries:{autoIncrement:!1,defaults:{},id:93,indexes:{},primaryKey:{fields:["isoCountryCode"],ignoreNulls:[]}},payments_transaction_details_core:{autoIncrement:!1,defaults:{},id:103,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},payments_transaction_details_ctas:{autoIncrement:!1,defaults:{},id:104,indexes:{},primaryKey:{fields:["transactionId","ctaId"],ignoreNulls:[]}},payments_transaction_details_rows:{autoIncrement:!1,defaults:{},id:105,indexes:{},primaryKey:{fields:["transactionId","rowOrder"],ignoreNulls:[]}},paypal_funding_options:{autoIncrement:!1,defaults:{},id:91,indexes:{},primaryKey:{fields:["optionId"],ignoreNulls:[]}},pending_backups_context_v2:{autoIncrement:!0,defaults:{isInstamadillo:!1},id:177,indexes:{fk_pending_tasks:{fields:["pendingBackupTaskId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_fire_and_forget_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:e.cast([0,0]),priority:e.cast([0,0])},id:5,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:e.cast([0,0]),failureCount:e.cast([0,0]),firstExecutedTimestampMs:e.cast([0,0]),minTimeToSyncTimestampMs:e.cast([0,0]),pluginType:e.cast([0,0]),priority:e.cast([0,0]),taskDispatchPriority:e.cast([0,0])},id:2,indexes:{queueNameTaskId:{fields:["queueName","taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},persistent_menu_ctas:{autoIncrement:!1,defaults:{ctaType:"fallback"},id:251,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},persistent_menu_items:{autoIncrement:!1,defaults:{},id:77,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},pinned_messages_v2:{autoIncrement:!1,defaults:{},id:155,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},pinned_threads:{autoIncrement:!1,defaults:{},id:82,indexes:{pinnedTimestamp:{fields:["pinnedTimestamp","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},poll_options_v2:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:e.cast([0,0]),sortKeyVotingTimestamp:e.cast([0,0]),voteCount:e.cast([0,0])},id:39,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},poll_votes_v2:{autoIncrement:!1,defaults:{},id:40,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},polls:{autoIncrement:!1,defaults:{pollType:e.cast([0,0])},id:38,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},presence_settings:{autoIncrement:!1,defaults:{hasConvertedToViewSideSettings:!1,isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1},id:187,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},presence_states:{autoIncrement:!1,defaults:{},id:186,indexes:{statusContactId:{fields:["status","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId"],ignoreNulls:[]}},profile_sheet_information:{autoIncrement:!1,defaults:{},id:256,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},quick_reply_ctas:{autoIncrement:!1,defaults:{},id:20,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ranking_requests:{autoIncrement:!1,defaults:{},id:135,indexes:{},primaryKey:{fields:["scoreType"],ignoreNulls:[]}},ranking_scores:{autoIncrement:!1,defaults:{score:0,scoreIndex:e.cast([0,0])},id:134,indexes:{scoreTypeContactId:{fields:["scoreType","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId","scoreType"],ignoreNulls:[]}},reachability_settings:{autoIncrement:!1,defaults:{},id:148,indexes:{},primaryKey:{fields:["audience"],ignoreNulls:[]}},reaction_v2_types:{autoIncrement:!1,defaults:{},id:229,indexes:{},primaryKey:{fields:["reactionFbid"],ignoreNulls:[]}},reactions:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),reactionCreationTimestampMs:e.cast([0,0]),timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:8,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","actorId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","actorId"],ignoreNulls:[]}},reactions_v2:{autoIncrement:!1,defaults:{lastUpdatedTimestampMs:e.cast([0,0]),viewerReactionTimestampMs:e.cast([0,0])},id:226,indexes:{optimistic:{fields:["threadKey","messageId","reactionFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","reactionFbid","messageTimestamp"],ignoreNulls:[]}},reactions_v2_details:{autoIncrement:!1,defaults:{},id:239,indexes:{},primaryKey:{fields:["threadId","messageId","reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:243,indexes:{},primaryKey:{fields:["threadId","messageId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},reactions_v2_details_users:{autoIncrement:!1,defaults:{},id:227,indexes:{},primaryKey:{fields:["reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_users_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:228,indexes:{},primaryKey:{fields:["reactorId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},roll_call_contributions_v2:{autoIncrement:!1,defaults:{contributionSource:e.cast([0,0]),contributorId:e.cast([0,0])},id:255,indexes:{optimistic:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs","threadKey"],ignoreNulls:[]}},roll_calls:{autoIncrement:!1,defaults:{canViewWithoutContributing:!1,isBlurred:!1,viewerCanEditPrompt:!1,viewerHasContributed:!1},id:250,indexes:{},primaryKey:{fields:["rollCallId","threadKey"],ignoreNulls:[]}},room_participants:{autoIncrement:!1,defaults:{},id:64,indexes:{optimistic:{fields:["roomId","participantId"],ignoreNulls:[]}},primaryKey:{fields:["roomId","participantId","type_"],ignoreNulls:[]}},rooms:{autoIncrement:!1,defaults:{notificationMutedUntilMs:e.cast([0,0])},id:63,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["roomId"],ignoreNulls:[]}},rtc_call_events:{autoIncrement:!0,defaults:{isProcessed:!1},id:245,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},rtc_multiway_call_initiation_conference_names:{autoIncrement:!1,defaults:{},id:24,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_rooms_on_threads:{autoIncrement:!1,defaults:{},id:181,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_signals:{autoIncrement:!1,defaults:{},id:22,indexes:{},primaryKey:{fields:["timestampMs","type_"],ignoreNulls:[]}},saved_messages:{autoIncrement:!1,defaults:{},id:165,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},screen_time:{autoIncrement:!0,defaults:{},id:321,indexes:{},primaryKey:{fields:["recordId"],ignoreNulls:[]}},search_queries:{autoIncrement:!1,defaults:{surfaceType:e.cast([0,1])},id:67,indexes:{},primaryKey:{fields:["query","surfaceType"],ignoreNulls:[]}},secure_acs_blinded_tokens:{autoIncrement:!0,defaults:{},id:308,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_acs_configurations:{autoIncrement:!1,defaults:{},id:307,indexes:{},primaryKey:{fields:["configId"],ignoreNulls:[]}},secure_acs_tokens:{autoIncrement:!1,defaults:{},id:309,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_encrypted_backups_client_state:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),encryptionVersion:e.cast([0,0]),revisionVersion:e.cast([0,0])},id:168,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},secure_encrypted_backups_device_supported_versions:{autoIncrement:!1,defaults:{},id:192,indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},primaryKey:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},secure_encrypted_backups_devices:{autoIncrement:!1,defaults:{},id:191,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}},secure_encrypted_backups_generated_recovery_code:{autoIncrement:!1,defaults:{virtualDeviceType:e.cast([0,1])},id:174,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_encrypted_backups_message_thread_id_context:{autoIncrement:!1,defaults:{},id:180,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId","listId"],ignoreNulls:[]}},secure_encrypted_backups_recovery_code_status:{autoIncrement:!1,defaults:{},id:178,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_get_secrets_context:{autoIncrement:!1,defaults:{},id:259,indexes:{},primaryKey:{fields:["deviceRegistrationId"],ignoreNulls:[]}},secure_recovery_code_data:{autoIncrement:!1,defaults:{},id:179,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},self_profile:{autoIncrement:!1,defaults:{},id:81,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}},server_search_sections:{autoIncrement:!1,defaults:{},id:66,indexes:{},primaryKey:{fields:["query","globalIndex"],ignoreNulls:[]}},shared_album_contributions:{autoIncrement:!1,defaults:{creationTimestampMs:e.cast([0,0]),creatorId:e.cast([0,0])},id:280,indexes:{},primaryKey:{fields:["sharedAlbumId","sharedAlbumContributionId","threadKey","messageId"],ignoreNulls:[]}},shared_albums:{autoIncrement:!1,defaults:{contributionCount:e.cast([0,0]),lastActivityTimestampMs:e.cast([0,0])},id:279,indexes:{},primaryKey:{fields:["sharedAlbumId","threadKey"],ignoreNulls:[]}},shared_albums_multimedia_upload_jobs:{autoIncrement:!1,defaults:{},id:283,indexes:{},primaryKey:{fields:["offlineThreadingId"],ignoreNulls:[]}},shared_albums_multimedia_upload_subjobs_status:{autoIncrement:!1,defaults:{},id:284,indexes:{},primaryKey:{fields:["offlineThreadingId","jobId"],ignoreNulls:[]}},status:{autoIncrement:!1,defaults:{},id:62,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["statusId"],ignoreNulls:[]}},sticker_pack_details:{autoIncrement:!1,defaults:{},id:127,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_packs:{autoIncrement:!1,defaults:{},id:122,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_search_featured_tags:{autoIncrement:!1,defaults:{},id:125,indexes:{},primaryKey:{fields:["tagIndex"],ignoreNulls:[]}},sticker_search_queries:{autoIncrement:!1,defaults:{},id:124,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},sticker_search_results:{autoIncrement:!1,defaults:{},id:123,indexes:{},primaryKey:{fields:["resultIndex","query","type_"],ignoreNulls:[]}},sticker_store_pack_indices:{autoIncrement:!1,defaults:{},id:128,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_to_collection:{autoIncrement:!1,defaults:{},id:126,indexes:{},primaryKey:{fields:["stickerId","collectionId"],ignoreNulls:[]}},stickers:{autoIncrement:!1,defaults:{},id:121,indexes:{stickerPackId:{fields:["stickerPackId","stickerId"],ignoreNulls:[]}},primaryKey:{fields:["stickerId"],ignoreNulls:[]}},stories:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:54,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["storyId"],ignoreNulls:[]}},story_ad_card:{autoIncrement:!1,defaults:{},id:58,indexes:{},primaryKey:{fields:["adPosition","clientToken","cardId"],ignoreNulls:[]}},story_ad_ctas:{autoIncrement:!1,defaults:{},id:59,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},story_ad_unit:{autoIncrement:!1,defaults:{shouldShowAdChoice:!1},id:57,indexes:{},primaryKey:{fields:["adPosition","clientToken"],ignoreNulls:[]}},story_buckets:{autoIncrement:!1,defaults:{pageNum:e.cast([0,0]),readState:e.cast([0,0])},id:53,indexes:{optimistic:{fields:["ownerId","bucketType"],ignoreNulls:[]}},primaryKey:{fields:["bucketId"],ignoreNulls:[]}},story_buckets_paginated_queries:{autoIncrement:!1,defaults:{},id:61,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}},story_overlays:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:60,indexes:{},primaryKey:{fields:["storyId","storyOverlayId"],ignoreNulls:[]}},story_reactions:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:56,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["reactionId"],ignoreNulls:[]}},story_viewers:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),interactionType:e.cast([0,1])},id:55,indexes:{},primaryKey:{fields:["storyId","viewerContactId","interactionType"],ignoreNulls:[]}},supervision_edge:{autoIncrement:!1,defaults:{},id:319,indexes:{},primaryKey:{fields:["edgeId"],ignoreNulls:[]}},supervision_metadata:{autoIncrement:!1,defaults:{},id:320,indexes:{},primaryKey:{fields:["supervisionMetadataId"],ignoreNulls:[]}},support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}},sync_group_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:220,indexes:{},primaryKey:{fields:["syncGroup","parentThreadKey"],ignoreNulls:[]}},sync_groups:{autoIncrement:!1,defaults:{canIgnoreTimestamp:!1,lastSyncCompletedTimestampMs:e.cast([0,0]),lastSyncRequestTimestampMs:e.cast([0,0]),minTimeToSyncTimestampMs:e.cast([0,0]),priority:e.cast([0,0]),sendSyncParams:!1,syncChannel:e.cast([0,1]),syncStatus:e.cast([0,0])},id:1,indexes:{},primaryKey:{fields:["groupId"],ignoreNulls:[]}},taken_down_threads:{autoIncrement:!1,defaults:{},id:212,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},third_party_id_store:{autoIncrement:!1,defaults:{},id:242,indexes:{},primaryKey:{fields:["platform"],ignoreNulls:[]}},thread_bans:{autoIncrement:!1,defaults:{},id:297,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},thread_creation_status:{autoIncrement:!1,defaults:{},id:278,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:e.cast([0,0])},id:237,indexes:{},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}},thread_labels:{autoIncrement:!1,defaults:{},id:215,indexes:{},primaryKey:{fields:["labelId"],ignoreNulls:[]}},thread_limits:{autoIncrement:!1,defaults:{},id:287,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate:{autoIncrement:!1,defaults:{ctaType:e.cast([0,0]),privacyTextCtaType:e.cast([0,0])},id:28,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate_ctas:{autoIncrement:!1,defaults:{},id:29,indexes:{threadKeyCtaId:{fields:["threadKey","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},thread_point_query_ttrc:{autoIncrement:!1,defaults:{},id:286,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:183,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_seen_heads_queries:{autoIncrement:!1,defaults:{},id:325,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_themes:{autoIncrement:!1,defaults:{backgroundUrl:"",iconUrl:"",iconUrlFallback:"",isDeprecated:!1},id:116,indexes:{},primaryKey:{fields:["fbid"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_optimistic_context:{autoIncrement:!1,defaults:{},id:32,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},threads_optimistic_metadata:{autoIncrement:!1,defaults:{},id:312,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:10,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"],ignoreNulls:[]}},transaction_history:{autoIncrement:!1,defaults:{timestampMs:e.cast([0,0])},id:102,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},typing_indicator:{autoIncrement:!1,defaults:{},id:52,indexes:{},primaryKey:{fields:["threadKey","senderId"],ignoreNulls:[]}},universal_search_recent_searches:{autoIncrement:!1,defaults:{lastAccessedTimestampMs:e.cast([0,0])},id:68,indexes:{},primaryKey:{fields:["resultId"],ignoreNulls:[]}},user_visible_errors:{autoIncrement:!0,defaults:{},id:6,indexes:{},primaryKey:{fields:["errorId"],ignoreNulls:[]}},user_visible_network_connectivity_error:{autoIncrement:!0,defaults:{},id:115,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},value_model_features:{autoIncrement:!1,defaults:{},id:137,indexes:{},primaryKey:{fields:["feature"],ignoreNulls:[]}},value_model_output:{autoIncrement:!1,defaults:{},id:138,indexes:{},primaryKey:{fields:["product","contactId"],ignoreNulls:[]}},value_model_rules:{autoIncrement:!1,defaults:{},id:136,indexes:{},primaryKey:{fields:["product","ruleIndex"],ignoreNulls:[]}},video_chat_links_attempted_joiners:{autoIncrement:!1,defaults:{},id:79,indexes:{},primaryKey:{fields:["userId","url"],ignoreNulls:[]}},video_chat_links_joining:{autoIncrement:!1,defaults:{canAnonymousUsersJoin:!1},id:78,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["url","optimisticClientToken"],ignoreNulls:[]}},work_contact_info:{autoIncrement:!1,defaults:{},id:210,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},work_genai:{autoIncrement:!1,defaults:{},id:293,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},workroom_creation_requests:{autoIncrement:!1,defaults:{},id:252,indexes:{},primaryKey:{fields:["creationId"],ignoreNulls:[]}},workroom_invites:{autoIncrement:!1,defaults:{},id:257,indexes:{},primaryKey:{fields:["inviteId"],ignoreNulls:[]}},workrooms_co_presence_states:{autoIncrement:!1,defaults:{},id:246,indexes:{userCoPresence:{fields:["userId","coPresenceObjectId"],ignoreNulls:[]}},primaryKey:{fields:["userId"],ignoreNulls:[]}}}),u=Object.freeze(babelHelpers.extends({},s,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),c=Object.freeze(babelHelpers.extends({},u,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),d=Object.freeze(babelHelpers.extends({},c,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{fetchTimestamp:{fields:["fetchTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),m=Object.freeze(babelHelpers.extends({},d,{messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),p=Object.freeze(babelHelpers.extends({},m,{auto_restore_opt_out:{autoIncrement:!1,defaults:{},id:330,indexes:{},primaryKey:{fields:["optOutKey"],ignoreNulls:[]}}})),_=Object.freeze(babelHelpers.extends({},p,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),f=Object.freeze(babelHelpers.extends({},_,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:e.cast([-1,4294967295]),status:e.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},messenger_fts_threads_queries:{autoIncrement:!1,defaults:{sessionId:""},id:332,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}}})),g=Object.freeze(babelHelpers.extends({},f,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:e.cast([-1,4294967295]),status:e.cast([0,0]),threadType:e.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}}})),h=Object.freeze(babelHelpers.extends({},g,{filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0]),secondaryThreadRangeFilter:e.cast([0,0]),syncGroup:e.cast([0,1]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}}})),y=Object.freeze(babelHelpers.extends({},h,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),C=Object.freeze(babelHelpers.extends({},y,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),b=Object.freeze(babelHelpers.extends({},C,{media_receiver_fetch_transport_mappings:{autoIncrement:!1,defaults:{},id:333,indexes:{},primaryKey:{fields:["receiverFetchId"],ignoreNulls:[]}}})),v=Object.freeze(babelHelpers.extends({},b,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),S=Object.freeze(babelHelpers.extends({},v,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),R=Object.freeze(babelHelpers.extends({},S,{attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),L=Object.freeze(babelHelpers.extends({},R,{client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}}})),E=Object.freeze(babelHelpers.extends({},L,{pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}}})),k=Object.freeze(babelHelpers.extends({},E,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),I=Object.freeze(babelHelpers.extends({},k,{contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),T=Object.freeze(babelHelpers.extends({},I,{encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}}})),D=Object.freeze(babelHelpers.extends({},T,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),x=Object.freeze(babelHelpers.extends({},D,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),$=Object.freeze(babelHelpers.extends({},x,{account_synced_fields:{autoIncrement:!1,defaults:{},id:334,indexes:{},primaryKey:{fields:["accountId","syncedField"],ignoreNulls:[]}}})),P=Object.freeze(babelHelpers.extends({},$,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),N=Object.freeze(babelHelpers.extends({},P,{encrypted_backup_user_preferences:{autoIncrement:!0,defaults:{},id:335,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),M=Object.freeze(babelHelpers.extends({},N,{support_translation_feedback:{autoIncrement:!1,defaults:{},id:336,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),w=Object.freeze(babelHelpers.extends({},M,{support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),A=Object.freeze(babelHelpers.extends({},w,{ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:e.cast([0,0]),igDmSettingsTtlSec:e.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),F=Object.freeze(babelHelpers.extends({},A,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),O=Object.freeze(babelHelpers.extends({},F,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),B=Object.freeze(babelHelpers.extends({},O,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),W=Object.freeze(babelHelpers.extends({},B,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),q=Object.freeze(babelHelpers.extends({},W,{admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:e.cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}}})),U=Object.freeze(babelHelpers.extends({},q,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,isVideoQuickSend:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),V=Object.freeze(babelHelpers.extends({},U,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),H=Object.freeze(babelHelpers.extends({},V,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),G=Object.freeze(babelHelpers.extends({},H,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),z=Object.freeze(babelHelpers.extends({},G,{messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeHdMediaEnabled:!1,e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:e.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}}})),j=Object.freeze(babelHelpers.extends({},z,{media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}}})),K=Object.freeze(babelHelpers.extends({},j,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Q=Object.freeze(babelHelpers.extends({},K,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),X=Object.freeze(babelHelpers.extends({},Q,{community_folders:{autoIncrement:!1,defaults:{capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),inviteStatus:e.cast([0,0]),notificationMutedUntil:e.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}}})),Y=Object.freeze(babelHelpers.extends({},X,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),J=Object.freeze(babelHelpers.extends({},Y,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),Z=Object.freeze(babelHelpers.extends({},J,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),ee=Object.freeze(babelHelpers.extends({},Z,{horizon_groups_key_mapping:{autoIncrement:!1,defaults:{},id:338,indexes:{},primaryKey:{fields:["threadKey","groupKey"],ignoreNulls:[]}}})),te=Object.freeze(babelHelpers.extends({},ee,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),ne=Object.freeze(babelHelpers.extends({},te,{rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),re=Object.freeze(babelHelpers.extends({},ne,{horizon_party_members:{autoIncrement:!1,defaults:{},id:339,indexes:{},primaryKey:{fields:["partyKey","userId"],ignoreNulls:[]}}})),oe=Object.freeze(babelHelpers.extends({},re,{thread_theme_search_queries:{autoIncrement:!1,defaults:{},id:340,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},thread_theme_search_results:{autoIncrement:!1,defaults:{},id:341,indexes:{},primaryKey:{fields:["resultIndex","query"],ignoreNulls:[]}}})),ae=Object.freeze(babelHelpers.extends({},oe,{client_media_status:{autoIncrement:!1,defaults:{},id:342,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}}})),ie=Object.freeze(babelHelpers.extends({},ae,{secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}}})),le=Object.freeze(babelHelpers.extends({},ie,{contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),friendshipStatus:e.cast([0,5]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),se=Object.freeze(babelHelpers.extends({},le,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ue=Object.freeze(babelHelpers.extends({},se,{encrypted_backups_reenrollment_trigger:{autoIncrement:!0,defaults:{},id:343,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ce=Object.freeze(babelHelpers.extends({},ue,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),de=Object.freeze(babelHelpers.extends({},ce,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),me=Object.freeze(babelHelpers.extends({},de,{thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:e.cast([0,0])},id:237,indexes:{labelId:{fields:["labelId","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}}})),pe=Object.freeze(babelHelpers.extends({},me,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),_e=Object.freeze(babelHelpers.extends({},pe,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),fe=Object.freeze(babelHelpers.extends({},_e,{pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ge=Object.freeze(babelHelpers.extends({},fe,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,draftMessage:"",hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),he=Object.freeze(babelHelpers.extends({},ge,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),ye=Object.freeze(babelHelpers.extends({},he,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ce=Object.freeze(babelHelpers.extends({},ye,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),be=Object.freeze(babelHelpers.extends({},Ce,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},subthread_message_ranges:{autoIncrement:!1,defaults:{},id:347,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}},subthread_ranges:{autoIncrement:!1,defaults:{},id:346,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},subthread_senders:{autoIncrement:!1,defaults:{},id:345,indexes:{},primaryKey:{fields:["subthreadParentMessageId","contactId"],ignoreNulls:[]}},subthreads:{autoIncrement:!1,defaults:{},id:344,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}}})),ve=Object.freeze(babelHelpers.extends({},be,{subthread_senders:{autoIncrement:!1,defaults:{},id:345,indexes:{lastActivityTimestampMsOrder:{fields:["subthreadParentMessageId","lastActivityTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["subthreadParentMessageId","contactId"],ignoreNulls:[]}}})),Se=Object.freeze(babelHelpers.extends({},ve,{subthreads:{autoIncrement:!1,defaults:{},id:344,indexes:{lastActivityTimestampMsOrder:{fields:["parentThreadKey","lastActivityTimestampMs","parentMessageId"],ignoreNulls:[]}},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}}})),Re=Object.freeze(babelHelpers.extends({},Se,{subthread_message_ranges_v2:{autoIncrement:!1,defaults:{},id:348,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId","minTimestampMs"],ignoreNulls:[]}}})),Le=Object.freeze(babelHelpers.extends({},Re,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyMessageHiddenState:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ee=Object.freeze(babelHelpers.extends({},Le,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ke=Object.freeze(babelHelpers.extends({},Ee,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyMessageHiddenState:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{collapsibleId:{fields:["collapsibleId","messageId"],ignoreNulls:["collapsibleId"]},ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ie=Object.freeze(babelHelpers.extends({},ke,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),Te=Object.freeze(babelHelpers.extends({},Ie,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),De=Object.freeze(babelHelpers.extends({},Te,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),xe=Object.freeze(babelHelpers.extends({},De,{multi_step_replies:{autoIncrement:!1,defaults:{},id:349,indexes:{},primaryKey:{fields:["threadKey","messageId","automationRuleId","mailboxType"],ignoreNulls:[]}}})),$e=Object.freeze({afterUpgrade:o("LSDbV1.upgrade").afterUpgrade,revision:76,tables:xe,upgrade:{1:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(u),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},2:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(c),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},3:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(d),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},4:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(m),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},5:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(p),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},6:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(_),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},7:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(f),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},8:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(g),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},9:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(h),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},10:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(y),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},11:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(C),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},12:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(b),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},13:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(v),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},14:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(S),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},15:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(R),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},16:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(L),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},17:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(E),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},18:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(k),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},19:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(I),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},20:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(T),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},21:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(D),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},22:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(x),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},23:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData($),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},24:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(P),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},25:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(N),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},26:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(M),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},27:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(w),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},28:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(A),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},29:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(F),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},30:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(O),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},31:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(B),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},32:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(W),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},33:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(q),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},34:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(U),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},35:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(V),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},36:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(H),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},37:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(G),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},38:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(z),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},39:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(j),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},40:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(K),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},41:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Q),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},42:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(X),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},43:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Y),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},44:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(J),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},45:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Z),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},46:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ee),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},47:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(te),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},48:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ne),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},49:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(re),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},50:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(oe),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},51:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ae),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},52:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ie),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},53:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(le),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},54:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(se),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},55:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ue),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},56:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ce),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},57:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(de),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},58:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(me),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},59:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(pe),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},60:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(_e),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},61:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(fe),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},62:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ge),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},63:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(he),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},64:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ye),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},65:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ce),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},66:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(be),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},67:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ve),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},68:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Se),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},69:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Re),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},70:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Le),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},71:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ee),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},72:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ke),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},73:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ie),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},74:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Te),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},75:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(De),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},76:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(xe),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)}}});l.LSDbV1=$e}),98);
__d("ReStoreDbVersion",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return e}function u(e,t){if(t in e)return e[t];throw r("FBLogger")("restore_db_migrations").mustfixThrow("Cannot find version: %s",t)}l.cast=e,l.uncast=s,l.castVersion=u}),98);
__d("LSDb",["LSDbV1","ReStoreDbVersion","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({V1:o("ReStoreDbVersion").cast("V1")}),u={targetVersion:o("ReStoreDbVersion").castVersion(s,"V"+((e=r("justknobx")._("2392"))!=null?e:0)),versions:{V1:o("LSDbV1").LSDbV1},legacyVersions:{},versionOrder:["V1"]};l.LSDbVersion=s,l.Versions=u}),98);
__d("LSDbForeignKeys",[],(function(t,n,r,o,a,i){"use strict";var e={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],data_trace_meta:[{indexName:"traceIdAddonId",tableName:"data_trace_addon"}],messages:[{indexName:"fk_messages",tableName:"attachments"},{indexName:"fk_messages",tableName:"reactions"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"},{tableName:"messages_optimistic_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"attachments_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"},{tableName:"group_invites"}]},l=e;i.default=l}),66);
__d("MAWDbVersionList",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}var l={V21:21,V22:22,V23:23,V24:24,V25:25,V26:26,V27:27,V28:28,V29:29,V30:30,V31:31,V32:32,V33:33,V34:34,V35:35,V36:36,V37:37,V38:38,V39:39,V40:40,V41:41,V42:42,V43:43,V44:44,V45:45,V46:46,V47:47,V48:48,V49:49,V50:50,V51:51,V52:52,V53:53,V54:54,V55:55,V56:56,V57:57,V58:58,V59:59,V60:60,V61:61,V62:62,V63:63,V64:64,V65:65,V66:66,V67:67,V68:68,V69:69,V70:70,V71:71,V72:72,V73:73,V74:74,V75:75,V76:76,V77:77,V78:78,V79:79,V80:80,V81:81,V82:82,V83:83,V84:84,V85:85,V86:86,V87:87,V88:88,V89:89,V90:90,V91:91,V92:92,V93:93,V94:94,V95:95,V96:96,V97:97,V98:98,V99:99,V100:100,V101:101,V102:102,V103:103,V104:104,V105:105,V106:106,V107:107,V108:108,V109:109,V110:110,V111:111,V112:112,V113:113,V114:114,V115:115,V116:116,V117:117,V118:118,V119:119,V120:120,V121:121,V122:122,V123:123,V124:124,V125:125,V126:126};i.toVersion=e,i.VERSION=l}),66);
__d("MAWDbSchema",["MAWDbVersionList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"]}},name:"e2ee_appData",primaryKey:["appDataId"]},{autoIncrement:!1,indexes:{},name:"e2ee_appMeta",primaryKey:["key"]},{autoIncrement:!1,indexes:{},name:"e2ee_tasks",primaryKey:["taskName"]},{autoIncrement:!1,indexes:{},name:"e2ee_personalSenderKeyStatuses",primaryKey:["groupJid"]},{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_receipts",primaryKey:["msgId"]},{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_media",primaryKey:["mediaId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_chunk",primaryKey:["chunkId"]},{autoIncrement:!0,indexes:{jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]},{autoIncrement:!1,indexes:{},name:"e2ee_existingUsers",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_pendingReceipts",primaryKey:["id"]},{autoIncrement:!0,indexes:{version:{columns:["version"]}},name:"e2ee_browserEncryptionMeta",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],u=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],c=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],d=[{autoIncrement:!0,indexes:{},name:"e2ee_isDualSend",primaryKey:["rowId"]}],m=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeSecretKey",primaryKey:["key"]}],p=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],_=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],f=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId"]}],g=[{autoIncrement:!0,indexes:{deleteTs:{columns:["deleteTs"],unique:!1},externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]}],h=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"]},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"]}},name:"e2ee_media",primaryKey:["mediaId"]}],y=[{autoIncrement:!0,indexes:{},name:"e2ee_dualSendMedia",primaryKey:["id"]}],C=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],b=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeData",primaryKey:["rowId"]}],v=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},externalId:{columns:["externalId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],S=[{autoIncrement:!0,indexes:{},name:"e2ee_dyiBatch",primaryKey:["batchId"]}],R=[{autoIncrement:!1,indexes:{correspondingOpenThreadKey:{columns:["correspondingOpenThreadKey"],unique:!1},threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],L=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"],removed:!0}],E=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],k=[{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],I=[{autoIncrement:!1,indexes:{"[modelId+modelType+actionState]":{columns:["modelId","modelType","actionState"],unique:!1},action:{columns:["action"],unique:!1},actionState:{columns:["actionState"],unique:!1},collection:{columns:["collection"],unique:!1},indexMac:{columns:["indexMac"],unique:!1}},name:"e2ee_syncActions",primaryKey:["index"]}],T=[{autoIncrement:!1,indexes:{},name:"e2ee_missingKeys",primaryKey:["keyHex"]}],D=[{autoIncrement:!0,indexes:{action:{columns:["action"],unique:!1},collection:{columns:["collection"],unique:!1},index:{columns:["index"],unique:!1}},name:"e2ee_pendingMutations",primaryKey:["id"]}],x=[{autoIncrement:!0,indexes:{collection:{columns:["collection"]}},name:"e2ee_collectionVersions",primaryKey:["id"]}],$=[{autoIncrement:!0,indexes:{keyEpoch:{columns:["keyEpoch"],unique:!1},keyId:{columns:["keyId"]}},name:"e2ee_syncKeys",primaryKey:["id"]}],P=[],N=[{autoIncrement:!1,indexes:{externalId:{columns:["externalId"],unique:!1},lastRetryTs:{columns:["lastRetryTs"],unique:!1},traceId:{columns:["traceId"],unique:!1}},name:"e2ee_uploadRetryStatus",primaryKey:["externalId","lastRetryTs"]}],M=[{autoIncrement:!0,indexes:{jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],w=[{autoIncrement:!0,indexes:{},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]}],A=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"]}],F=[{autoIncrement:!0,indexes:{deduplicationKey:{columns:["deduplicationKey"],predicate:function(t){return t.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],O=[{autoIncrement:!0,indexes:{mediaId:{columns:["mediaId"],unique:!1},msgId:{columns:["msgId"],unique:!1},objectId:{columns:["objectId"]}},name:"e2ee_mediaBackup",primaryKey:["mediaBackupId"]}],B=[{autoIncrement:!0,indexes:{authoritativeThreadKey:{columns:["authoritativeThreadKey"]},deduplicationKey:{columns:["deduplicationKey"],predicate:function(t){return t.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],W=[{autoIncrement:!0,indexes:{"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],q=[{autoIncrement:!0,indexes:{originalMsgExternalId:{columns:["originalMsgExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],U=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"],removed:!0},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"],removed:!0},{autoIncrement:!0,indexes:{},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],V=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],H=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],G=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],z=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],j=[],K=[{autoIncrement:!0,indexes:{},name:"e2ee_danglingQueue",primaryKey:["queueId"]}],Q=[{autoIncrement:!0,indexes:{dbVersion:{columns:["dbVersion"],unique:!1}},name:"e2ee_staleQueue",primaryKey:["staleQueueId"]}],X=[{autoIncrement:!0,indexes:{"[offlineThreadingId+backupActionType]":{columns:["offlineThreadingId","backupActionType"],unique:!1},"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},offlineThreadingId:{columns:["offlineThreadingId"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],Y=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]}],J=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],Z=[{autoIncrement:!0,indexes:{},name:"e2ee_pendingMessageStanzaQueue",primaryKey:["pendingMessageStanzaQueueId"]}],ee=[{autoIncrement:!0,indexes:{author:{columns:["author"],unique:!1},chat:{columns:["chat"],unique:!1},externalId:{columns:["externalId"],unique:!1}},name:"e2ee_deletedMessages",primaryKey:["rowId"]}],te=[{autoIncrement:!0,indexes:{threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_ebMsgRanges",primaryKey:["rangeId"]}],ne=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1},threadJid:{columns:["threadJid","inviteeJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],re=[{autoIncrement:!1,indexes:{waMsgId:{columns:["waMsgId"]}},name:"e2ee_receipts",primaryKey:["msgId"]}],oe=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],ae=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ie=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(t){return t.serverTs!=null},unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],le=[{autoIncrement:!1,dexieOnly_primaryKeyUnique:!0,indexes:{ts:{columns:["ts"],unique:!1}},name:"e2ee_sentBytesCache",primaryKey:["waMsgId"]}],se=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(t){return t.serverTs!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ue=[{autoIncrement:!0,indexes:{"[originalMsgExternalId+threadJid]":{columns:["originalMsgExternalId","threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],ce=[{autoIncrement:!0,indexes:{deviceJid:{columns:["deviceJid"],unique:!1},displayOrder:{columns:["isArchived","ts"],unique:!1},isConfirmedActionTs:{columns:["isConfirmed","action","ts"],unique:!1},isNotifiedTs:{columns:["isNotified","ts"],unique:!1}},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],de=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],me=[{autoIncrement:!1,indexes:{},name:"e2ee_ephemeralSettings",primaryKey:["userJid"]}],pe=[{autoIncrement:!1,indexes:{ebClientRequired:{columns:["ebClientRequired","timestampMs"],unique:!1},restorable:{columns:["restorable","timestampMs"],unique:!1}},name:"e2ee_ebMessageRestoreTasks",primaryKey:["messageId"]}],_e=[{autoIncrement:!1,indexes:{},name:"e2ee_igMessageAuxiliaryInfo",primaryKey:["messageId"]}],fe=[{autoIncrement:!1,indexes:{plaintextHash:{columns:["plaintextHash"],unique:!1}},name:"e2ee_mediaKeys",primaryKey:["ciphertextHash"]}],ge=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],he=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],ye=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],Ce=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]}],be=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeBacklog",primaryKey:["externalId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeThreadBacklog",primaryKey:["chatJid"]}],ve=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Se=[{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],Re=[{autoIncrement:!0,indexes:{fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],Le=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"],removed:!0}],Ee=[{autoIncrement:!1,indexes:{},name:"e2ee_uploadRetryStatus",primaryKey:[],removed:!0}],ke=[{autoIncrement:!1,indexes:{},name:"e2ee_receiverFetchInfo",primaryKey:["receiverFetchId"]}],Ie=[{autoIncrement:!0,indexes:{"[threadJid+ts]":{columns:["threadJid","ts"],unique:!1},externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},ts:{columns:["ts"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]}],Te=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],De=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],xe=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],$e=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Pe=[{autoIncrement:!0,indexes:{version:{columns:["version"],unique:!0}},name:"e2ee_encryptionMetaV3",primaryKey:["id"]}],Ne=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages_deduped",primaryKey:["rowId"]}],Me=[{autoIncrement:!1,indexes:{},name:"e2ee_poll",primaryKey:["chatJid","pollStanzaId"]}],we=[{autoIncrement:!0,indexes:{"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(t){return t.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Ae=[{autoIncrement:!0,indexes:{"[threadJid+collapsibleId+sortOrderMs]":{columns:["threadJid","collapsibleId","sortOrderMs"],unique:!1},"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(t){return t.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Fe=[{autoIncrement:!1,indexes:{},name:"e2ee_messages_deduped",primaryKey:[],removed:!0}],Oe=new Map([[(e=o("MAWDbVersionList")).VERSION.V21,s],[e.VERSION.V22,u],[e.VERSION.V23,c],[e.VERSION.V24,d],[e.VERSION.V25,m],[e.VERSION.V30,p],[e.VERSION.V31,_],[e.VERSION.V32,f],[e.VERSION.V33,g],[e.VERSION.V34,h],[e.VERSION.V35,y],[e.VERSION.V36,C],[e.VERSION.V37,b],[e.VERSION.V38,v],[e.VERSION.V39,S],[e.VERSION.V40,R],[e.VERSION.V41,L],[e.VERSION.V42,E],[e.VERSION.V45,k],[e.VERSION.V48,I],[e.VERSION.V49,T],[e.VERSION.V50,D],[e.VERSION.V51,x],[e.VERSION.V52,$],[e.VERSION.V57,P],[e.VERSION.V59,N],[e.VERSION.V61,M],[e.VERSION.V62,w],[e.VERSION.V63,A],[e.VERSION.V64,F],[e.VERSION.V65,O],[e.VERSION.V67,B],[e.VERSION.V69,W],[e.VERSION.V70,q],[e.VERSION.V73,U],[e.VERSION.V74,V],[e.VERSION.V75,H],[e.VERSION.V77,G],[e.VERSION.V78,z],[e.VERSION.V79,j],[e.VERSION.V80,K],[e.VERSION.V81,Q],[e.VERSION.V83,X],[e.VERSION.V84,Y],[e.VERSION.V85,J],[e.VERSION.V86,Z],[e.VERSION.V88,ee],[e.VERSION.V89,te],[e.VERSION.V90,ne],[e.VERSION.V91,re],[e.VERSION.V92,oe],[e.VERSION.V93,ae],[e.VERSION.V94,ie],[e.VERSION.V95,le],[e.VERSION.V96,se],[e.VERSION.V97,ue],[e.VERSION.V98,ce],[e.VERSION.V99,de],[e.VERSION.V100,me],[e.VERSION.V102,pe],[e.VERSION.V103,_e],[e.VERSION.V104,fe],[e.VERSION.V105,ge],[e.VERSION.V106,he],[e.VERSION.V107,ye],[e.VERSION.V108,Ce],[e.VERSION.V109,be],[e.VERSION.V110,ve],[e.VERSION.V111,Se],[e.VERSION.V112,Re],[e.VERSION.V113,Le],[e.VERSION.V114,Ee],[e.VERSION.V115,ke],[e.VERSION.V116,Ie],[e.VERSION.V117,Te],[e.VERSION.V118,De],[e.VERSION.V119,xe],[e.VERSION.V120,$e],[e.VERSION.V121,Pe],[e.VERSION.V122,Ne],[e.VERSION.V123,Me],[e.VERSION.V124,we],[e.VERSION.V125,Ae],[e.VERSION.V126,Fe]]),Be=["messages","unrenderedMessages","groupInfo","receipts","pendingReceipts","threads","participants","tasks","personalSenderKeyStatuses","appData","appMeta","chunk","mediaBackup","media","reactions","groupInvites","dyiBatch","syncActions","missingKeys","pendingMutations","collectionVersions","syncKeys","deviceChangeAlerts","xma","editMsgHistory","deletedMessages","ebMsgRanges","receiverFetchInfo","poll"];l.dbSchema=Oe,l.TABLES_TO_ENCRYPT=Be}),98);
__d("MAWGetDbVersion",["MAWDbVersionList","justknobx","objectValues"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return e!=null?e:o("MAWDbVersionList").toVersion(r("justknobx")._("1716"))}function u(t){if(r("justknobx")._("1495")){if(t==null||t==="current")return e=null,e;var n=Math.max.apply(Math,r("objectValues")(o("MAWDbVersionList").VERSION));if(t==="latest")return e=o("MAWDbVersionList").toVersion(n),e;if(!Number.isInteger(t))return e;if(t<0)return e=o("MAWDbVersionList").toVersion(n+t),e;e=o("MAWDbVersionList").toVersion(t)}}l.getArmadilloDbVersion=s,l.setArmadilloDbVersionForTest=u}),98);
__d("MAWDbSchema.restore",["MAWDbSchema","MAWGetDbVersion","objectEntries","sortBy"],(function(t,n,r,o,a,i,l){"use strict";var e={e2ee_appData:!0,e2ee_appMeta:!0,e2ee_browserEncryptionMeta:!0,e2ee_chunk:!0,e2ee_collectionVersions:!0,e2ee_deletedMessages:!0,e2ee_deviceChangeAlerts:!0,e2ee_dyiBatch:!0,e2ee_ebMessageRestoreTasks:!0,e2ee_ebMsgRanges:!0,e2ee_ebUploadQueue:!0,e2ee_editMsgHistory:!0,e2ee_encryptionMetaV3:!0,e2ee_ephemeralSettings:!0,e2ee_existingUsers:!0,e2ee_ftsBackloggedMessages:!0,e2ee_ftsEncryptionMeta:!0,e2ee_ftsIndexV3:!0,e2ee_ftsPurgeBacklog:!0,e2ee_ftsPurgeThreadBacklog:!0,e2ee_groupInfo:!0,e2ee_groupInvites:!0,e2ee_historySyncQRCodeData:!0,e2ee_historySyncQRCodeSecretKey:!0,e2ee_igMessageAuxiliaryInfo:!0,e2ee_media:!0,e2ee_mediaBackup:!0,e2ee_messages:!0,e2ee_missingKeys:!0,e2ee_participants:!0,e2ee_pendingMessageStanzaQueue:!0,e2ee_pendingMutations:!0,e2ee_pendingReceipts:!0,e2ee_pendingStanzas:!0,e2ee_poll:!0,e2ee_reactions:!0,e2ee_receiverFetchInfo:!0,e2ee_syncActions:!0,e2ee_syncKeys:!0,e2ee_threads:!0,e2ee_unrenderedMessages:!0,e2ee_xma:!0};function s(e){var t=Object.fromEntries(r("objectEntries")(e.indexes).filter(function(e){var t=e[1];return t.multiEntry_DO_NOT_USE!==!0}).map(function(t){var n=t[0],r=t[1];return[n,{columns:[].concat(r.columns,r.unique!==!1?[]:e.primaryKey),predicate:r.predicate}]})),n={auto_increment:e.autoIncrement===!0,indexes:t,name:e.name,primary_key:e.primaryKey};return n}var u=r("sortBy")(Array.from(o("MAWDbSchema").dbSchema.entries()),function(e){var t=e[0];return t}).map(function(e){var t=e[0],n=e[1];return{schema:n,version:t}}),c=function(t){return Array.from(u.filter(function(e){return e.version<=t&&e.schema!=null}).reduce(function(e,t){var n;return(n=t.schema)==null||n.forEach(function(t){if(t.removed===!0){e.delete(t.name);return}e.set(t.name,s(t))}),e},new Map).values())},d=c(o("MAWGetDbVersion").getArmadilloDbVersion());l.msgrDbStores=e,l.getSchemaForVersion=c,l.clientSchema=d}),98);
__d("LSDbSchema",["MAWDbSchema.restore"],(function(t,n,r,o,a,i){"use strict";var e=importNamespace("MAWDbSchema.restore").clientSchema;i.clientSchema=e}),66);
__d("ReStoreVersionedSchemaProvider",["FBLogger","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata","ReStoreVersionedSchemaProviderUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.defaults={},this.$1="",this.$1=e,this.$2=t;var r=t.versions[t.targetVersion],a=o("ReStoreVersionedSchemaProviderUtil").getTableData(r.tables,n),i=a.defaults,l=a.tableData;this.tableNames=l.tableNames,this.tableIds=l.tableIds,this.defaults=i}var t=e.prototype;return t.$3=async function(t,n){var e,r,a,i;(e=n.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from scratch..."),(r=n.loggers.userFlow)==null||r.addPoint(this.$1+"_migration_versioned_from_scratch");var l={tableIds:this.tableIds,tableNames:this.tableNames};return await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(n.transaction,l,t,this.defaults),(a=n.loggers.logHistory)==null||a.debug("migration default values finished"),await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(n,l,this.defaults,t),(i=n.loggers.logHistory)==null||i.debug("migration indices finished"),t?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE},t.$4=function(t){var e=this,n=this.$2.versionOrder.indexOf(t);if(n===-1)throw r("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot resolve version %s",this.$1,t);return Promise.all(this.$2.versionOrder.slice(n,this.$2.versionOrder.indexOf(this.$2.targetVersion)+1).map(async function(t){if(t in e.$2.versions)return{meta:e.$2.versions[t],version:t};if(t in e.$2.legacyVersions)return{meta:await e.$2.legacyVersions[t].load(),version:t};throw r("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot find version %s in either versions or legacyVersions",e.$1,t)}))},t.$5=async function(t,n,a){var e,i,l,s=this.$2.targetVersion,u=this.$2.versions[s].revision;(e=a.loggers)==null||(e=e.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] currentVersion: "+t+"R"+n+", targetVersion: "+s+"R"+u);var c=s;if(c===t&&u===n){var d;return(d=a.loggers)==null||(d=d.logHistory)==null||d.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] DB already up to date, skipping migration"),o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED}(i=a.loggers.logHistory)==null||i.debug("migration versioned incremental"),(l=a.loggers.userFlow)==null||l.addPoint(this.$1+"_migration_versioned_incremental");var m=await this.$4(t);if(m.length===0||n>u)return r("FBLogger")("ReStoreVersionedSchemaProvider","migrate").mustfix("[%s][ReStoreVersionedSchemaProvider][DANGEROUS] Backward migration required from %sR%s to %sR%s, running #migrateFromScratch",this.$1,t,""+n,s,""+u),this.$3(!1,a);for(var p of m)for(var _=p.meta,f=p.version,g=f,h=g===t?n+1:0;h<=_.revision;h++){var y,C,b,v,S,R,L;(y=a.loggers)==null||(y=y.logHistory)==null||y.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating to "+f+"R"+h),(C=a.loggers.userFlow)==null||C.addPoint(this.$1+"_migration_versioned_"+f+"{$revision}_start"),await((b=(v=_.upgrade)[h])==null?void 0:b.call(v,a)),await((S=(R=_.afterUpgrade)[h])==null?void 0:S.call(R,a.transaction)),(L=a.loggers.userFlow)==null||L.addPoint(this.$1+"_migration_versioned_"+f+"{$revision}_end")}return o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE},t.$6=function(t,n,r,a,i){var e;if((e=i.loggers.userFlow)==null||e.addPoint(this.$1+"_migration_versioned_hash_start"),n===r&&t===a){var l,s;return(l=i.loggers.userFlow)==null||l.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"no_changes"}})),(s=i.loggers)==null||(s=s.logHistory)==null||s.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, no changes are detected"),Promise.resolve(o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA)}else{var u,c;return(u=i.loggers.userFlow)==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"changes"}})),(c=i.loggers)==null||(c=c.logHistory)==null||c.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, changed detected, calling #migrateFromScratch"),this.$3(!1,i)}},t.migrate=async function(t){var e,n,r,a,i,l,s,u,c;(e=t.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Start migration"),(n=t.loggers.userFlow)==null||n.addPoint(this.$1+"_migration_versioned_start");var d=o("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(this.defaults),m=o("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash({tableIds:this.tableIds,tableNames:this.tableNames}),p=new(o("ReStorePersistedMetadata")).ReStorePersistedSchemaVersion(this.$1),_=new(o("ReStorePersistedMetadata")).ReStorePersistedDefaultValuesVersion(this.$1),f=await p.read(t.storeTx),g=(r=await _.read(t.storeTx))==null?void 0:r.defaultValuesVersion,h=this.$2.versions[this.$2.targetVersion];(a=t.loggers.userFlow)==null||a.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{int:{defaultValuesVersion:d,schemaVersion:m,storeDefaultValuesVersion:g,storeRevision:f==null?void 0:f.revision,storeSchemaVersion:f==null?void 0:f.schemaVersion,targetRevision:h.revision},string:{schemaProviderType:"versioned",storeVersion:f==null?void 0:f.version,targetVersion:this.$2.targetVersion}})),(i=t.loggers.logHistory)==null||i.debug("storeSchemaVersion: "+((l=f==null?void 0:f.schemaVersion)!=null?l:"null")),(s=t.loggers.logHistory)==null||s.debug("storeDefaultValuesVersion: "+(g!=null?g:"null"));var y=await(f!=null&&f.revision!=null&&f.version!=null?this.$5(f.version,f.revision,t):(f==null?void 0:f.schemaVersion)!=null?this.$6(g,f.schemaVersion,m,d,t):this.$3(!0,t));if(y!==o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED){var C;p.write(t.storeTx,{revision:h.revision,schemaVersion:m,version:this.$2.targetVersion}),_.write(t.storeTx,{defaultValuesVersion:d}),(C=t.loggers.logHistory)==null||C.debug("version is written")}return(u=t.loggers.logHistory)==null||u.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] End Migration. Result: "+y+", SchemaVersion: "+m+", Version: "+this.$2.targetVersion+", Revision: "+h.revision),(c=t.loggers.userFlow)==null||c.addPoint(this.$1+"_migration_versioned_end"),y},e})();l.default=e}),98);
__d("LSVersionedSchemaProvider",["LSConstants","LSDb","LSDbForeignKeys","ReStoreVersionedSchemaProvider"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("ReStoreVersionedSchemaProvider"))(o("LSConstants").LS_SCHEMA_NAME,o("LSDb").Versions,r("LSDbForeignKeys"));l.schemaProvider=e}),98);
__d("ReStoreHashSchemaProvider",["ReStoreHashMigration","ReStoreMetadata","ReStoreMigrateUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var r=t.tableIds,a=t.tableNames;n===void 0&&(n={}),this.$1=e,this.tableNames=babelHelpers.extends({},a,o("ReStoreMetadata").RESTORE_METADATA_TABLES),this.tableIds=r,this.defaults=n!=null?n:{}}var t=e.prototype;return t.migrate=async function(t){var e,n,r,a,i;(e=t.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreHashSchemaProvider] Start migration"),(n=t.loggers.userFlow)==null||n.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{schemaProviderType:"hash"}})),(r=t.loggers.userFlow)==null||r.addPoint(this.$1+"_migration_hash_start");var l=await o("ReStoreHashMigration").runHashMigration(this.$1,{tableIds:this.tableIds,tableNames:this.tableNames},this.defaults,t);return(a=t.loggers.logHistory)==null||a.debug("["+this.$1+"][ReStoreHashSchemaProvider] End migration. Result: "+l),(i=t.loggers.userFlow)==null||i.addPoint(this.$1+"_migration_hash_end"),l},e})();l.default=e}),98);
__d("ReStoreSchemaProvider",["ReStoreMigrateUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return{defaults:babelHelpers.extends({},e.defaults,t.defaults),migrate:async function(r){var n=await e.migrate(r),a=await t.migrate(r);return n===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE||a===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE:n===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA||a===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED},tableIds:babelHelpers.extends({},e.tableIds,t.tableIds),tableNames:babelHelpers.extends({},e.tableNames,t.tableNames)}}l.mergeSchemaProviders=e}),98);
__d("LSMetadata",["LSClientSchemaType","LSDbSchema","LSVersionedSchemaProvider","ReStoreHashSchemaProvider","ReStoreMetadata","ReStoreSchemaProvider"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("ReStoreSchemaProvider").mergeSchemaProviders(e,s)}var s=new(r("ReStoreHashSchemaProvider"))(o("LSClientSchemaType").MAW_SCHEMA_NAME,o("ReStoreMetadata").getBuildTableData({})([o("LSDbSchema").clientSchema])),u=e(o("LSVersionedSchemaProvider").schemaProvider);l.buildSchema=e,l.schema=u}),98);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(t,n,r,o,a,i,l){"use strict";var e,s={dynamic:!1};function u(t,a){a===void 0&&(a=s);var i=r("LS")(1,o("LSMetadata").schema,o("LSDynamicDependencies").cachedModules,t,void 0,void 0,a.dynamic,a.lsRuntimeLogger);return n("cr:8709")!=null&&(e||(e=r("ExecutionEnvironment"))).isInBrowser?n("cr:8709").wrapSprocInvocationWithProfiler(i):i}l.default=u}),98);
__d("LSGetCursor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(1).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=void 0:(t=o.item,n[0]=t.currentCursor)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreGetCursorStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyContactRowExists"),a.id,a.contactIdType,a.profilePictureUrl,a.name,a.contactType,a.profilePictureFallbackUrl,a.profilePictureUrlExpirationTimestampMs,a.urlExpirationTimestampMs,a.normalizedNameForSearch,a.isMemorialized,a.isBlocked,a.blockedByViewerStatus,a.canViewerMessage,a.isSelf,a.authorityLevel,a.capabilities,a.capabilities2,a.workForeignEntityType,a.gender,a.contactViewerRelationship,a.secondaryName,a.firstName,a.friendshipStatus);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWFolderTypes",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=10,d=15,m={ARCHIVED:c,INBOX:e,OTHER:s,PENDING:l,RESTRICTED:d,SPAM:u};i.INBOX=e,i.PENDING=l,i.OTHER=s,i.SPAM=u,i.ARCHIVED=c,i.RESTRICTED=d,i.FOLDER_ID=m}),66);
__d("WAArrayZip",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=Math.min(e.length,t.length);return e.slice(0,n).map(function(e,n){return[e,t[n]]})}i.zip=e}),66);/*FB_PKG_DELIM*/
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("EntMessageReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REGULAR:0,BUMP:1});i.default=e}),66);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.onsuccess=null,this.onerror=null,this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);t==="success"&&this.onsuccess!=null?this.onsuccess.apply(this,r):t==="error"&&this.onerror!=null&&this.onerror.apply(this,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("LSHotEmojiSize",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});i.default=e}),66);
__d("LSMessageReplySourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});i.default=e}),66);
__d("LSMessageReplySourceTypeV2",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28,IG_COLLAB_INVITE:29,FB_QUICKSNAP:30});i.default=e}),66);
__d("LSMessageSendStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});i.default=e}),66);
__d("LSReplyMessageAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});i.default=e}),66);
__d("LSRequestId",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="0123456789abcdef",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(){for(var t=r("uuidv4")().replace(/[^0-9a-f]/gi,""),n=0,o=["#"];n<33;){var a=e.indexOf(t.charAt(n))<<8,i=e.indexOf(t.charAt(n+1))<<4,l=e.indexOf(t.charAt(n+2)),u=l|(i|a),c=u>>6;o.push(s.charAt(c)),o.push(s.charAt(u&63)),n+=3}return o.join("")}var c={generate:u};l.default=c}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("MAWAdminMsgType",[],(function(t,n,r,o,a,i){"use strict";var e="currentUserAddedDevice",l="participantAddedDevice",s="currentUserRemovedDevice",u="participantRemovedDevice",c="currentUserUpdatedDevice",d="participantUpdatedDevice",m="participantAddedYou",p="participantAddedYouAndOneUser",_="participantAddedYouAndMoreThanOneUsers",f="unknowUserAddedYou",g="unknowUserAddedYouAndOneUser",h="unknowUserAddedYouAndMoreThanOneUser",y="unknownUserAddedOneUser",C="unknownUserAddedTwoUser",b="unknownUserAddedMoreThanTwoUser",v="participantAddedOneUser",S="participantAddedTwoUser",R="participantAddedMoreThanTwoUser",L="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",k="currentUserRemovedMoreThanTwoParticipant",I="currentUserAddedOneParticipant",T="currentUserAddedTwoParticipant",D="currentUserAddedMoreThanTwoParticipant",x="participantRemovedYou",$="participantRemovedYouAndOneUser",P="participantRemovedYouAndMoreThanOneUsers",N="unknowUserRemovedYou",M="unknowUserRemovedYouAndOneUser",w="unknowUserRemovedYouAndMoreThanOneUser",A="unknownUserRemovedOneUser",F="unknownUserRemovedTwoUser",O="unknownUserRemovedMoreThanTwoUser",B="participantRemovedOneUser",W="participantRemovedTwoUser",q="participantRemovedMoreThanTwoUser",U="participantLeftGroup",V="currentUserLeftGroup",H="participantCustomizeParticipantNickname",G="participantClearParticipantNickname",z="participantCustomizeCurrentUserNickname",j="currentUserSetOwnNickname",K="currentUserClearOwnNickname",Q="currentUserClearParticipantNickname",X="participantSetOwnNickname",Y="participantClearOwnNickname",J="participantClearCurrentUserNickname",Z="currentUserCustomizeNickname",ee="currentUserNamedGroup",te="unkonwnUserNamedGroup",ne="participantNamedGroup",re="currentUserCustomizeHotlike",oe="participantCustomizeHotlike",ae="currentUserCustomizeTheme",ie="currentUserCustomizeAITheme",le="currentUserCustomizePhoto",se="participantCustomizeTheme",ue="participantCustomizeAITheme",ce="participantCustomizePhoto",de="currentUserSetAddModeAdminOnly",me="currentUserSetAddModeAllMembers",pe="participantSetAddModeAdminOnly",_e="participantSetAddModeAllMembers",fe="serverSetAddModeAdminOnly",ge="serverSetAddModeAllMembers",he="currentUserPinnedMessage",ye="currentUserUnpinnedMessage",Ce="participantPinnedMessage",be="participantUnpinnedMessage",ve="currentUserLimitSharingDisabled",Se="currentUserLimitSharingEnabled",Re="participantLimitSharingDisabled",Le="participantLimitSharingEnabled",Ee="cutoverThreadAdminMessage",ke="cutoverIGDThreadAdminMessage",Ie="cutoverRollbackAdminMessage",Te="dualThreadCutoverAdminMessage",De="dualThreadCutoverAdminMessageSelfThread",xe="dualThreadCutoverAdminMessageWithOtherUserName",$e="dualThreadCutoverAdminMessageOtherUserNameUnknown",Pe="e2eeThreadDescription",Ne="e2eeThreadUKOSAAdminMessage",Me="debugMsg",we="reachabilityError",Ae="twoUsersConnected",Fe="twoUsersConnectedOneMSplit",Oe="CurrentUserCreatedPoll",Be="ParticipantCreatedPoll",We="CurrentUserAddedPollOption",qe="ParticipantAddedPollOption",Ue="CurrentUserAddedMultiplePollOptions",Ve="ParticipantAddedMultiplePollOptions",He="CurrentUserAddedPollVote",Ge="ParticipantAddedPollVote",ze="CurrentUserAddedMultiplePollVotes",je="ParticipantAddedMultiplePollVotes",Ke="CurrentUserRemovedPollVote",Qe="ParticipantRemovedPollVote",Xe="CurrentUserRemovedMultiplePollVotes",Ye="ParticipantRemovedMultiplePollVotes",Je="CurrentUserMixedPollUpdate",Ze="ParticipantMixedPollUpdate",et="CurrentUserChangedPollVote",tt="ParticipantChangedPollVote",nt="CurrentUserChangedMultiplePollVotes",rt="ParticipantChangedMultiplePollVotes",ot="PollUnsentUpdate",at={CURRENT_USER_ADDED_DEVICE:e,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:D,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:Ue,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:ze,CURRENT_USER_ADDED_ONE_PARTICIPANT:I,CURRENT_USER_ADDED_POLL_OPTION:We,CURRENT_USER_ADDED_POLL_VOTE:He,CURRENT_USER_ADDED_TWO_PARTICIPANTS:T,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:nt,CURRENT_USER_CHANGED_POLL_VOTE:et,CURRENT_USER_CLEAR_OWN_NICKNAME:K,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Q,CURRENT_USER_CREATED_POLL:Oe,CURRENT_USER_CUSTOMIZE_AI_THEME:ie,CURRENT_USER_CUSTOMIZE_HOTLIKE:re,CURRENT_USER_CUSTOMIZE_NICKNAME:Z,CURRENT_USER_CUSTOMIZE_PHOTO:le,CURRENT_USER_CUSTOMIZE_THEME:ae,CURRENT_USER_LEFT_GROUP:V,CURRENT_USER_LIMIT_SHARING_DISABLED:ve,CURRENT_USER_LIMIT_SHARING_ENABLED:Se,CURRENT_USER_MIXED_POLL_UPDATE:Je,CURRENT_USER_NAMED_GROUP:ee,CURRENT_USER_PINNED_MESSAGE:he,CURRENT_USER_REMOVED_DEVICE:s,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:k,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:Xe,CURRENT_USER_REMOVED_ONE_PARTICIPANT:L,CURRENT_USER_REMOVED_POLL_VOTE:Ke,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:de,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:me,CURRENT_USER_SET_OWN_NICKNAME:j,CURRENT_USER_UNPINNED_MESSAGE:ye,CURRENT_USER_UPDATED_DEVICE:c,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:ke,CUTOVER_ROLLBACK_ADMIN_MESSAGE:Ie,CUTOVER_THREAD_ADMIN_MESSAGE:Ee,DEBUG_MSG:Me,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Te,E2EE_THREAD_DESCRIPTION:Pe,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:Ne,PARTICIPANT_ADDED_DEVICE:l,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:R,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:Ve,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:je,PARTICIPANT_ADDED_ONE_USER:v,PARTICIPANT_ADDED_POLL_OPTION:qe,PARTICIPANT_ADDED_POLL_VOTE:Ge,PARTICIPANT_ADDED_TWO_USER:S,PARTICIPANT_ADDED_YOU:m,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:_,PARTICIPANT_ADDED_YOU_AND_ONE_USER:p,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:rt,PARTICIPANT_CHANGED_POLL_VOTE:tt,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:J,PARTICIPANT_CLEAR_OWN_NICKNAME:Y,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:G,PARTICIPANT_CREATED_POLL:Be,PARTICIPANT_CUSTOMIZE_AI_THEME:ue,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:z,PARTICIPANT_CUSTOMIZE_HOTLIKE:oe,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:H,PARTICIPANT_CUSTOMIZE_PHOTO:ce,PARTICIPANT_CUSTOMIZE_THEME:se,PARTICIPANT_LEFT_GROUP:U,PARTICIPANT_LIMIT_SHARING_DISABLED:Re,PARTICIPANT_LIMIT_SHARING_ENABLED:Le,PARTICIPANT_MIXED_POLL_UPDATE:Ze,PARTICIPANT_NAMED_GROUP:ne,PARTICIPANT_PINNED_MESSAGE:Ce,PARTICIPANT_REMOVED_DEVICE:u,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:q,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:Ye,PARTICIPANT_REMOVED_ONE_USER:B,PARTICIPANT_REMOVED_POLL_VOTE:Qe,PARTICIPANT_REMOVED_TWO_USER:W,PARTICIPANT_REMOVED_YOU:x,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:P,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:$,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:pe,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:_e,PARTICIPANT_SET_OWN_NICKNAME:X,PARTICIPANT_UNPINNED_MESSAGE:be,PARTICIPANT_UPDATED_DEVICE:d,POLL_UNSENT_UPDATE:ot,REACHABILITY_ERROR:we,SERVER_SET_ADD_MODE_ADMIN_ONLY:fe,SERVER_SET_ADD_MODE_ALL_MEMBERS:ge,TWO_USERS_CONNECTED:Ae,TWO_USERS_CONNECTED_ONE_MSPLIT:Fe,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:b,UNKNOWN_USER_ADDED_ONE_USER:y,UNKNOWN_USER_ADDED_TWO_USER:C,UNKNOWN_USER_ADDED_YOU:f,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:h,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:g,UNKNOWN_USER_NAMED_GROUP:te,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:O,UNKNOWN_USER_REMOVED_ONE_USER:A,UNKNOWN_USER_REMOVED_TWO_USER:F,UNKNOWN_USER_REMOVED_YOU:N,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:M};i.CURRENT_USER_ADDED_DEVICE=e,i.CURRENT_USER_PINNED_MESSAGE=he,i.CURRENT_USER_UNPINNED_MESSAGE=ye,i.PARTICIPANT_PINNED_MESSAGE=Ce,i.PARTICIPANT_UNPINNED_MESSAGE=be,i.CURRENT_USER_LIMIT_SHARING_DISABLED=ve,i.CURRENT_USER_LIMIT_SHARING_ENABLED=Se,i.PARTICIPANT_LIMIT_SHARING_DISABLED=Re,i.PARTICIPANT_LIMIT_SHARING_ENABLED=Le,i.CUTOVER_THREAD_ADMIN_MESSAGE=Ee,i.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=ke,i.CUTOVER_ROLLBACK_ADMIN_MESSAGE=Ie,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Te,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=De,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=xe,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=$e,i.E2EE_THREAD_DESCRIPTION=Pe,i.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=Ne,i.CURRENT_USER_CREATED_POLL=Oe,i.PARTICIPANT_CREATED_POLL=Be,i.CURRENT_USER_ADDED_POLL_OPTION=We,i.PARTICIPANT_ADDED_POLL_OPTION=qe,i.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=Ue,i.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=Ve,i.CURRENT_USER_ADDED_POLL_VOTE=He,i.PARTICIPANT_ADDED_POLL_VOTE=Ge,i.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=ze,i.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=je,i.CURRENT_USER_REMOVED_POLL_VOTE=Ke,i.PARTICIPANT_REMOVED_POLL_VOTE=Qe,i.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=Xe,i.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=Ye,i.CURRENT_USER_MIXED_POLL_UPDATE=Je,i.PARTICIPANT_MIXED_POLL_UPDATE=Ze,i.CURRENT_USER_CHANGED_POLL_VOTE=et,i.PARTICIPANT_CHANGED_POLL_VOTE=tt,i.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=nt,i.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=rt,i.POLL_UNSENT_UPDATE=ot,i.ADMIN_MSG_TYPE=at}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e="emptySnippet",s="currentUserCreatedGroup",u="participantCreatedGroup",c="unknownUserCreatedGroup",d="currentUserGotPromoted",m="currentUserGotDemoted",p="participantGotPromoted",_="participantGotDemoted",f="participantPromotedYou",g="participantDemotedYou",h="currentUserPromotedParticipant",y="currentUserDemotedParticipant",C="participantDemotedParticipant",b="participantPromotedParticipant",v="participantSelfDemoted",S="currentUserSelfDemoted",R="currentUserSendText",L="currentUserSendImage",E="currentUserSendVideo",k="currentUserSendAudio",I="currentUserSendGif",T="currentUserSendSticker",D="participantSendText",x="participantSendTextInGroup",$="participantSendImage",P="participantSendVideo",N="participantSendAudio",M="participantSendGif",w="participantSendSticker",A="unavailableSnippet",F="messageUnavailableSnippet",O="unknownUserEphemeralSettingTurnedOnSeconds",B="unknownUserEphemeralSettingTurnedOnMinutes",W="unknownUserEphemeralSettingTurnedOnHours",q="unknownUserEphemeralSettingTurnedOnDays",U="youEphemeralSettingTurnedOnSeconds",V="youEphemeralSettingTurnedOnMinutes",H="youEphemeralSettingTurnedOnHours",G="youEphemeralSettingTurnedOnDays",z="participantEphemeralSettingTurnedOnSeconds",j="participantEphemeralSettingTurnedOnMinutes",K="participantEphemeralSettingTurnedOnHours",Q="participantEphemeralSettingTurnedOnDays",X="unknownUserEphemeralSettingChangeSeconds",Y="unknownUserEphemeralSettingChangeMinutes",J="unknownUserEphemeralSettingChangeHours",Z="unknownUserEphemeralSettingChangeDays",ee="youEphemeralSettingChangeSeconds",te="youEphemeralSettingChangeMinutes",ne="youEphemeralSettingChangeHours",re="youEphemeralSettingChangeDays",oe="participantEphemeralSettingChangeSeconds",ae="participantEphemeralSettingChangeMinutes",ie="participantEphemeralSettingChangeHours",le="participantEphemeralSettingChangeDays",se="unknownUserEphemeralSettingTurnedOff",ue="youEphemeralSettingTurnedOff",ce="participantEphemeralSettingTurnedOff",de="ephemeralSettingsAutoReset",me="currentUserUnsentMessage",pe="participantUnsentMessage",_e="participantReactMessage",fe="participantReactMessageInGroup",ge="unknownUserEphemeralTakeScreenshot",he="unknownUserEphemeralRecordScreen",ye="youEphemeralTakeScreenshot",Ce="youEphemeralRecordScreen",be="participantEphemeralTakeScreenshot",ve="participantEphemeralRecordScreen",Se="icdcAlertAdminMessage",Re="yourDeviceICDCAlertAdminMessage",Le="currentUserSendAttachment",Ee="participantSendAttachment",ke="currentUserSentPost",Ie="currentUserSentReel",Te="currentUserSentStory",De="currentUserSentEvent",xe="currentUserMentionedStoryIG",$e="currentUserReceivedStoryMentionIG",Pe="participantSentPost",Ne="participantSentReel",Me="participantSentStory",we="participantSentEvent",Ae="currentUserSentStoryHighlight",Fe="participantSentStoryHighlight",Oe="currentUserMissedAudioCall",Be="participantMissedAudioCall",We="currentUserMissedVideoCall",qe="participantMissedVideoCall",Ue="currentUserAudioCalled",Ve="participantAudioCalled",He="currentUserVideoCalled",Ge="participantVideoCalled",ze="currentUserStartedGroupAudioCall",je="participantStartedGroupAudioCall",Ke="currentUserStartedGroupVideoCall",Qe="participantStartedGroupVideoCall",Xe="currentUserBumpedOwnMessage",Ye="currentUserBumpedMessage",Je="participantBumpedOwnMessage",Ze="participantBumpedParticipantMessage",et="participantBumpedCurrentUserMessage",tt="userSendUnavailableMessage",nt="userSendEncryptedMessage",rt="currentUserSendUnrenderableMessage",ot="participantSendUnrenderableMessage",at="currentUserSendLocationFallback",it="participantSendLocation",lt="currentUserSendLiveLocationFallback",st="participantSendLiveLocation",ut="currentUserSendLocation",ct="participantSendLocation",dt="currentUserSendPollCreationFallback",mt="participantSendPollCreation",pt="currentUserSendContactShareFallback",_t="participantSendContactShareFallback",ft="currentUserSendContactShare",gt="participantSendContactShare",ht="currentUserSendAIContactShare",yt="participantSendAIContactShare",Ct="currentUserSendStoryMentionFallback",bt="currentUserSendStoryMention",vt="participantSendStoryMention",St="participantSendStoryMentionFallback",Rt="currentUserSendPostMentionFallback",Lt="participantSendPostMentionFallback",Et="currentUserSendMemoriesShare",kt="participantSendMemoriesShare",It="currentUserSendPostMention",Tt="participantSendPostMention",Dt="currentUserSendNoteMentionFallback",xt="participantSendNoteMentionFallback",$t="messengerMemoryEncryptedMessageFallback",Pt="rtcXMAMessageFallback",Nt="metaAISendMessageFallback",Mt="currentUserSendBumpMessageFallback",wt="participantSendBumpMessageFallback",At="participantSendBumpMessageOriginalUnavailable",Ft="currentUserSendStickerReceiverFetchMessageFallback",Ot="participantSendStickerReceiverFetchMessageFallback",Bt="viewOncePhotoMessageFallback",Wt="viewOnceVideoMessageFallback",qt="unavailableStory",Ut="currentUserLimitSharingDisabled",Vt="currentUserLimitSharingEnabled",Ht="participantLimitSharingDisabled",Gt="participantLimitSharingEnabled",zt="dualThreadCutoverAdminMessageOtherUserNameUnknown",jt="dualThreadCutoverAdminMessageSelfThread",Kt="dualThreadCutoverAdminMessageWithOtherUserName",Qt=babelHelpers.extends({},o("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:Ue,CURRENT_USER_BUMPED_MESSAGE:Ye,CURRENT_USER_BUMPED_OWN_MESSAGE:Xe,CURRENT_USER_CREATED_GROUP:s,CURRENT_USER_DEMOTED_PARTICIPANT:y,CURRENT_USER_GOT_DEMOTED:m,CURRENT_USER_GOT_PROMOTED:d,CURRENT_USER_LIMIT_SHARING_DISABLED:Ut,CURRENT_USER_LIMIT_SHARING_ENABLED:Vt,CURRENT_USER_MENTIONED_STORY_IG:xe,CURRENT_USER_MISSED_AUDIO_CALL:Oe,CURRENT_USER_MISSED_VIDEO_CALL:We,CURRENT_USER_PROMOTED_PARTICIPANT:h,CURRENT_USER_RECEIVED_STORY_MENTION_IG:$e,CURRENT_USER_SELF_DEMOTED:S,CURRENT_USER_SEND_AI_CONTACT_SHARE:ht,CURRENT_USER_SEND_ATTACHMENT:Le,CURRENT_USER_SEND_AUDIO:k,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Mt,CURRENT_USER_SEND_CONTACT_SHARE:ft,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:pt,CURRENT_USER_SEND_GIF:I,CURRENT_USER_SEND_IMAGE:L,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:lt,CURRENT_USER_SEND_LOCATION:ut,CURRENT_USER_SEND_LOCATION_FALLBACK:at,CURRENT_USER_SEND_MEMORIES_SHARE:Et,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:Dt,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:dt,CURRENT_USER_SEND_POST_MENTION:It,CURRENT_USER_SEND_POST_MENTION_FALLBACK:Rt,CURRENT_USER_SEND_STICKER:T,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ft,CURRENT_USER_SEND_STORY_MENTION:bt,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:Ct,CURRENT_USER_SEND_TEXT:R,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:rt,CURRENT_USER_SEND_VIDEO:E,CURRENT_USER_SENT_EVENT:De,CURRENT_USER_SENT_POST:ke,CURRENT_USER_SENT_REEL:Ie,CURRENT_USER_SENT_STORY:Te,CURRENT_USER_SENT_STORY_HIGHLIGHT:Ae,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ze,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ke,CURRENT_USER_UNSENT_MESSAGE:me,CURRENT_USER_VIDEO_CALLED:He,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:zt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:jt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:Kt,EMPTY_SNIPPET:e,EPHEMERAL_SETTINGS_AUTO_RESET:de,ICDC_ALERT_ADMIN_MESSAGE:Se,MESSAGE_UNAVAILABLE_SNIPPET:F,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:$t,META_AI_SEND_MESSAGE_FALLBACK:Nt,PARTICIPANT_AUDIO_CALLED:Ve,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:et,PARTICIPANT_BUMPED_OWN_MESSAGE:Je,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Ze,PARTICIPANT_CREATED_GROUP:u,PARTICIPANT_DEMOTED_PARTICIPANT:C,PARTICIPANT_DEMOTED_YOU:g,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ve,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:le,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:ie,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ae,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:oe,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ce,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:K,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:j,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:z,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:be,PARTICIPANT_GOT_DEMOTED:_,PARTICIPANT_GOT_PROMOTED:p,PARTICIPANT_LIMIT_SHARING_DISABLED:Ht,PARTICIPANT_LIMIT_SHARING_ENABLED:Gt,PARTICIPANT_MISSED_AUDIO_CALL:Be,PARTICIPANT_MISSED_VIDEO_CALL:qe,PARTICIPANT_PROMOTED_PARTICIPANT:b,PARTICIPANT_PROMOTED_YOU:f,PARTICIPANT_REACT_MESSAGE:_e,PARTICIPANT_REACT_MESSAGE_IN_GROUP:fe,PARTICIPANT_SELF_DEMOTED:v,PARTICIPANT_SEND_AI_CONTACT_SHARE:yt,PARTICIPANT_SEND_ATTACHMENT:Ee,PARTICIPANT_SEND_AUDIO:N,PARTICIPANT_SEND_BUMP_MESSAGE:wt,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:At,PARTICIPANT_SEND_CONTACT_SHARE:gt,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:_t,PARTICIPANT_SEND_GIF:M,PARTICIPANT_SEND_IMAGE:$,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:st,PARTICIPANT_SEND_LOCATION:ct,PARTICIPANT_SEND_LOCATION_FALLBACK:it,PARTICIPANT_SEND_MEMORIES_SHARE:kt,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:xt,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:mt,PARTICIPANT_SEND_POST_MENTION:Tt,PARTICIPANT_SEND_POST_MENTION_FALLBACK:Lt,PARTICIPANT_SEND_STICKER:w,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ot,PARTICIPANT_SEND_STORY_MENTION:vt,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:St,PARTICIPANT_SEND_TEXT:D,PARTICIPANT_SEND_TEXT_IN_GROUP:x,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ot,PARTICIPANT_SEND_VIDEO:P,PARTICIPANT_SENT_EVENT:we,PARTICIPANT_SENT_POST:Pe,PARTICIPANT_SENT_REEL:Ne,PARTICIPANT_SENT_STORY:Me,PARTICIPANT_SENT_STORY_HIGHLIGHT:Fe,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:je,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Qe,PARTICIPANT_UNSENT_MESSAGE:pe,PARTICIPANT_VIDEO_CALLED:Ge,RTC_XMA_FALLBACK:Pt,UNAVAILABLE_SNIPPET:A,UNAVAILABLE_STORY:qt,UNKNOWN_USER_CREATED_GROUP:c,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:he,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Z,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:J,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Y,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:X,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:se,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:q,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:W,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:B,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:ge,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:nt,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:tt,VIEW_ONCE_PHOTO_MESSAGE:Bt,VIEW_ONCE_VIDEO_MESSAGE:Wt,YOU_EPHEMERAL_RECORD_SCREEN:Ce,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:re,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:ne,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:te,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:ee,YOU_EPHEMERAL_SETTING_TURNED_OFF:ue,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:G,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:H,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:V,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:U,YOU_EPHEMERAL_TAKE_SCREENSHOT:ye,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Re});l.CURRENT_USER_CREATED_GROUP=s,l.CURRENT_USER_SEND_TEXT=R,l.CURRENT_USER_SEND_IMAGE=L,l.CURRENT_USER_SEND_VIDEO=E,l.CURRENT_USER_SEND_AUDIO=k,l.CURRENT_USER_SEND_GIF=I,l.CURRENT_USER_SEND_STICKER=T,l.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=O,l.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=ge,l.CURRENT_USER_SEND_ATTACHMENT=Le,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=zt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=jt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=Kt,l.LOCALIZATION_TYPE=Qt}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n;return(n=e.get(t))!=null?n:null}function s(t,n){e.set(t,n)}i.getThumbnailSpec=l,i.setThumbnailSpec=s}),66);
__d("WABlobToArrayBuffer",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return"arrayBuffer"in t?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onload=function(){var t=o.result;t instanceof ArrayBuffer?e(t):n(r("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof t))},o.onerror=function(){var e;n((e=o.error)!=null?e:r("err")("blobToArrayBuffer got unknown error"))},o.readAsArrayBuffer(t)})}l.blobToArrayBuffer=s}),98);
__d("WAIsOgg",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e.length<4||e[0]!==79||e[1]!==103||e[2]!==103||e[3]!==83)}i.isOgg=e}),66);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=o("WorkerBundleResource").createDedicatedWebWorker(r("WAWebOpusRecorderWorkerResource")),this.$1.onmessage=e!=null?e:null}var t=e.prototype;return t.getWorker=function(){return this.$1},t.postMessage=function(t,n){var e={type:"message",message:t};this.$1.postMessage(e,n)},t.addEventListener=function(t,n){this.$1.addEventListener(t,n)},t.removeEventListener=function(t,n){this.$1.addEventListener(t,n)},e})();function s(){return new e}function u(t){return new e(t)}l.WAOpusRecorderWorkerClient=e,l.getOpusEncoderWorker=s,l.getOpusDecoderWorker=u}),98);
__d("WAOpusRecorderPlayer",["Promise","WABinary","WABlobToArrayBuffer","WALogger","WAOpusRecorderWorkerClient"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="audio/wav",m,p=0;function _(){return p++,m||(m=new window.AudioContext),m}function f(){if(p--,p===0&&m){try{m.close().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close async error: ",""])),t)})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close sync error: ",""])),e)}m=void 0}}var g=(function(){function e(e){this.oggBlob=e}var t=e.prototype;return t.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)},t.oggBlobToWAVBlob=function(t,r){var e=this;r===void 0&&(r=2);var a=r;return new(c||(c=n("Promise")))(function(n){var r=function(r){if(r.data==null){for(var t=function(t){l.forEach(function(e){for(var n=e[t]||e[0],r=0;r<n.length;r++)s.push(n[r])})},o=0;o<a;o++)t(o);var i=e.encodeWAV(s,c,a),u=new Blob([i.readByteArrayView()],{type:d});f(),n(u)}else l.push(r.data),a=l[0].length},i=o("WAOpusRecorderWorkerClient").getOpusDecoderWorker(r),l=[],s=[],c=_(),m={outputBufferSampleRate:c.sampleRate,bufferLength:4096};i.postMessage({command:"decode-init",config:m}),o("WABlobToArrayBuffer").blobToArrayBuffer(t).then(function(e){i.postMessage({command:"decode",pages:new Uint8Array(e)}),i.postMessage({command:"decode-done"})}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""])),e)})})},t.encodeWAV=function(t,n,r){var e=new(o("WABinary")).Binary(void 0,!0);e.ensureCapacity(44+t.length*2),e.writeString("RIFF"),e.writeUint32(36+t.length*2),e.writeString("WAVE"),e.writeString("fmt "),e.writeUint32(16),e.writeUint16(1),e.writeUint16(r),e.writeUint32(n.sampleRate),e.writeUint32(n.sampleRate*r*2),e.writeUint16(r*2),e.writeUint16(16),e.writeString("data"),e.writeUint32(t.length*2);for(var a=0;a<t.length;a++){var i=Math.max(-1,Math.min(t[a],1));i*=i>0?32767:32768,e.writeInt16(Math.floor(i))}return e},e})();l.default=g}),98);
__d("WAMaybeTranscodeOggOpusToWavForPlayback",["FBLogger","WABlobToArrayBuffer","WAIsOgg","WAOpusRecorderPlayer","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["audio"])},m=r("justknobx")._("4988"),p=new Audio().canPlayType("audio/ogg"),_=p==="probably"||p==="maybe";async function f(t){if(_)return d().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback supported no need to transcode"]))),t;if(d().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback is not supported. Start transcoding"]))),t.size>m)return d().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["blob size too large"]))),t;var n=await o("WABlobToArrayBuffer").blobToArrayBuffer(t);if(!o("WAIsOgg").isOgg(new Uint8Array(n)))return d().DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["blob is not Ogg, skip transcode"]))),t;var a=new(r("WAOpusRecorderPlayer"))(t);return a.generateBlob()}l.isOggPlaybackSupported=_,l.maybeTranscodeOggOpusToWavForPlayback=f}),98);
__d("WAPttComposerScaleWaveform",["invariant"],(function(t,n,r,o,a,i,l,s){function e(e,t){return t===e.length?e:t===0?[]:e.length===0?new Array(t).fill(0):t>e.length?u(e,t):c(e,t)}function u(e,t){t>e.length||s(0,75746,t,e.length);var n;if(e.length===1)n=0;else{var r=(t-e.length)/(e.length-1);n=1/(1+r)}var o=[];t>=1&&o.push(e[0]);for(var a=1;a<t-1;a++){var i=a*n,l=Math.floor(i),u=i-l;o.push(d(e[l],e[Math.ceil(i)],u))}return t>=2&&o.push(e[e.length-1]),o}function c(e,t){t<e.length||s(0,75747,t,e.length);var n=[],r=t/e.length,o=0,a=0,i=0;for(var l of e)o+=l,i+=1,a+=r,a>=1&&(n.push(o/i),i=0,o=0,a-=1);return i>0&&n.push(o/i),n}function d(e,t,n){return e+(t-e)*n}l.default=e}),98);
__d("MAWAudioUtils",["FBLogger","WAMaybeTranscodeOggOpusToWavForPlayback","WAPttComposerScaleWaveform","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=8.5,s=100,u=64;async function c(e){var t=r("gkx")("3053")?URL.createObjectURL(await o("WAMaybeTranscodeOggOpusToWavForPlayback").maybeTranscodeOggOpusToWavForPlayback(e)):URL.createObjectURL(e);return new Promise(function(e,n){var o=new Audio;o.setAttribute("crossOrigin","anonymous"),o.addEventListener("loadedmetadata",function(t){var r=t.currentTarget;if(r instanceof HTMLAudioElement){var o=r.duration;e(Math.ceil(o))}else n("EventTarget returned for event should be HTMLAudioElement")}),o.src=t,o.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading audio from provided URL"))},o.onerror=function(){var e,t;n(r("FBLogger")("messenger_web").mustfixThrow("getAudioDurationInSeconds: audioElement error code: %s. message: %s",(e=o.error)==null?void 0:e.code,(t=o.error)==null?void 0:t.message))}})}function d(e){return e.map(function(e){return Math.floor(e*s)})}function m(e,t){return t===void 0&&(t=u),d(r("WAPttComposerScaleWaveform")(e,t))}function p(e){return Array.from(new Uint8Array(e)).join(",")}l.WAVEFORM_SAMPLE_RATE=e,l.WAVEFORM_AMPLITUDE_SCALE=s,l.WAVEFORM_TARGET_SIZE=u,l.getAudioDurationInSeconds=c,l.normalizeWaveformAmplitudes=d,l.recomputeWaveform=m,l.serializeWaveform=p}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof self.BigInt=="function",s=r("justknobx")._("3427")*1e3;function u(t,n){var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),i=o("MAWSendQplToServer").startQplUserFlow(r("qpl")._(1056840460,"718"),{bool:{has_big_int_support:e},string:{preprocess_type:t}},a,s);return n&&i.addAnnotations({int:{input_file_size:n.size},string:{mimetype:n.type}}),babelHelpers.extends({},i,{flowDetails:{event:r("qpl")._(1056840460,"718"),instanceKey:a}})}l.startMediaPreProcessQpl=u}),98);
__d("WABlobToImage",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r;return new(e||(e=n("Promise")))(function(e,n){r=new Image;var o=URL.createObjectURL(t),a=function(){return URL.revokeObjectURL(o)};r.onload=function(){e({image:r,releaseImageMemory:a})},r.onerror=function(){a(),n("loadBlobToImage error")},r.src=o})}i.blobToImage=l}),66);
__d("WACalculateBoundOutputSize",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t!=null?l(e.width,e.height,t.width,t.height):{outputWidth:e.width,outputHeight:e.height}}function l(e,t,n,r){var o=e,a=t;return e>t?e>n&&(a*=n/o,o=n):a>r&&(o*=r/a,a=r),{outputWidth:Math.round(Math.max(o,1)),outputHeight:Math.round(Math.max(a,1))}}i.calculateBoundOutputSize=e}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["decodeImage"]),c=typeof self.createImageBitmap=="function"&&typeof self.OffscreenCanvas=="function",d=c?m:p;async function m(t,n){u.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),t.name);var r=await self.createImageBitmap(t),a=r.height,i=r.width,l=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:i,height:a},n),s=l.outputHeight,c=l.outputWidth,d=new self.OffscreenCanvas(c,s),m=_({canvas:d,inputWidth:i,inputHeight:a,outputWidth:c,outputHeight:s,image:r});return m}async function p(e,t){u.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),e.name);var n=await o("WABlobToImage").blobToImage(e),r=n.image,a=n.releaseImageMemory,i=r.height,l=r.width,c=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:l,height:i},t),d=c.outputHeight,m=c.outputWidth,p=document.createElement("canvas"),f=_({canvas:p,inputWidth:l,inputHeight:i,outputWidth:m,outputHeight:d,image:r});return a(),f}function _(e){var t=e.canvas,n=e.image,r=e.inputHeight,o=e.inputWidth,a=e.outputHeight,i=e.outputWidth;t.width=i,t.height=a;var l=t.getContext("2d");l.fillStyle="rgb(255,255,255)",l.fillRect(0,0,t.width,t.height),l.drawImage(n,0,0,o,r,0,0,i,a);var s=l.getImageData(0,0,i,a);return s}l.canDecodeWithoutDOM=c,l.decodeImage=d,l.decodeImageWithoutDOM=m,l.decodeImageWithDOM=p}),98);
__d("WAByteArray",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=t,r=new Uint8Array(e),o=e-1;o>=0;o--)r[o]=n&255,n>>>=8;return r}function l(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function s(e,t){if(!e||!t)return!1;var n=new Uint8Array(e),r=new Uint8Array(t),o=n.length,a=r.length;if(o!==a)return!1;for(var i=0;i<o;i++)if(n[i]!==r[i])return!1;return!0}i.intToBytes=e,i.uint8ArrayToBuffer=l,i.compareArrayBuffer=s}),66);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=null,l=new(e||(e=n("Promise")))(function(e,n){t=setTimeout(function(){n(new(o("WACustomError")).TimeoutError(i)),clearTimeout(t)},a)});return e.race([r,l]).finally(function(){clearTimeout(t)})};l.promiseTimeout=s}),98);
__d("WAMediaWasmWorkerClient",["FBLogger","QPLUserFlow","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WorkerBundleResource","WorkerClient","WorkerMessagePort"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M=o("WorkerBundleResource").createDedicatedWebWorker(r("WAMediaWasmWorkerResource")),w="media_platform",A=function(){return r("FBLogger")(w).tags(["WAMediaWasmWorkerClient"])},F=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(M,"WAMediaWasmWorker");o("WorkerClient").init(F),A().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."]))),F.addMessageListener("log",function(e){var t=e.logType,n=e.message;switch(t){case"dev":A().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),n);break;case"error":A().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),n);break;default:}}),F.addMessageListener("qpl",function(e){O(e)});function O(e){var t=e.action,n=e.event;switch(t.type){case"point":{r("QPLUserFlow").addPoint(n,t.pointName,{instanceKey:t.instanceKey});break}case"annotations":{r("QPLUserFlow").addAnnotations(n,t.annotations,{instanceKey:t.instanceKey});break}default:A().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unknown QPL action type from worker: ",""])),t.type)}}function B(e){var t=e.eventFlow,n=e.input;return z({operation:"webpCheck",input:o("WAByteArray").uint8ArrayToBuffer(n)},t)}function W(e){var t=e.eventFlow,n=e.input;return A().INFO(d||(d=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"]))),z({operation:"mp4RepairMux",input:o("WAByteArray").uint8ArrayToBuffer(n)},t)}async function q(e){var t=e.eventFlow,n=e.forceTranscode,r=e.input,a=e.supportsHevc;A().INFO(m||(m=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));var i=G();A().INFO(p||(p=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),i);var l=await j();if(!l.success)return o("WAResultOrError").makeError(l.error);var s=l.value,u=s.onMessageOnce("transcodeToMp4Response",function(e){return e.requestId===i}),c=o("WAByteArray").uint8ArrayToBuffer(r),d=c?[c]:void 0;s.postMessage({input:c,requestId:i,forceTranscode:n,supportsHevc:a,type:"transcodeToMp4Request",qplData:t.flowDetails},d),t==null||t.addPoint("sent_request_to_media_worker_start");var f=await u,g=f.output;return A().INFO(_||(_=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),i,g.success),g.success?(t==null||t.addPoint("sent_request_to_media_worker_end"),g):(t==null||t.addPoint("sent_request_to_media_worker_end"),t==null||t.addAnnotations({string:{errorMessage:g.error.errorMessage}}),o("WAResultOrError").makeError(g.error.errorType))}function U(e){var t=e.eventFlow,n=e.imageData,r=e.quality,a=e.useHdScanConfig;return z({operation:"progressiveJpegEncode",input:o("WAByteArray").uint8ArrayToBuffer(n.data),height:n.height,width:n.width,quality:r,useHdScanConfig:a},t)}async function V(e){var t=e.eventFlow,n=e.file,r=e.maxOutputResolution,o=e.quality,a=e.useHdScanConfig,i=await n.arrayBuffer();return z({operation:"progressiveJpegEncodeWithFile",input:i,fileName:n.name,fileType:n.type,quality:o,useHdScanConfig:a,maxOutputWidth:r==null?void 0:r.width,maxOutputHeight:r==null?void 0:r.height},t)}function H(e){A().INFO(f||(f=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),e),F.postMessage({type:"prewarm",operation:e})}var G=(function(){var e=0;return function(){return++e}})();async function z(e,t){var n=G();A().INFO(g||(g=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),n);var r=await j(t);if(!r.success)return r;var a=r.value,i=a.onMessageOnce("mediaOperationResponse",function(e){return e.requestId===n}),l=e.input?[e.input]:void 0;a.postMessage(babelHelpers.extends({},e,{requestId:n,type:"mediaOperationRequest"}),l),t==null||t.addPoint("sent_request_to_media_worker_start");var s=await i,u=s.output;return u.success?(A().INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),n),t==null||t.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:u.value.isOpfsSyncSupported}}),o("WAResultOrError").makeResult(u.value.bytes)):(A().MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),n,u.error.errorMessage),t==null||t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(u.error.errorType))}function j(e){e==null||e.addPoint("get_connected_worker_port_start");var t=3e4;return o("WAPromiseTimeout").promiseTimeout(F.fullyConnected,t).then(function(t){return e==null||e.addPoint("get_connected_worker_port_end"),o("WAResultOrError").makeResult(t)}).catch(function(t){return e==null||e.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:t instanceof o("WACustomError").TimeoutError?"timeout":"runtime-error"}}),t instanceof o("WACustomError").TimeoutError?o("WAResultOrError").makeError("worker-connection-timeout"):(A().MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),t),o("WAResultOrError").makeError("worker-connection-runtime-error"))})}async function K(e){var t,n,r=e.file,a=e.maxDimension,i=e.thumbnailBlobByteSizeLimitBytes,l=e.thumbnailQualityPercentageWhenAboveByteSizeLimit,s=G();A().INFO(b||(b=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),s);var u=await j();if(!u.success)return u;var c=u.value,d=c.onMessageOnce("mediaGenerateImageThumbnailResponse",function(e){return e.requestId===s}),m=await r.arrayBuffer(),p=m?[m]:void 0;c.postMessage({input:m,fileName:r.name,fileType:r.type,maxDimension:a,requestId:s,thumbnailBlobByteSizeLimitBytes:i,thumbnailQualityPercentageWhenAboveByteSizeLimit:l,type:"mediaGenerateImageThumbnailRequest"},p);var _=await d;return A().INFO(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),s,_.output.success),_.output.success?o("WAResultOrError").makeResult(_.output.value):(A().MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),s,(t=_.output.error)==null?void 0:t.errorMessage),Promise.reject((n=_.output.error)==null?void 0:n.errorMessage))}async function Q(e,t){A().INFO(R||(R=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var n=G(),r=await j();if(!r.success)return o("WAResultOrError").makeError({errorName:"port-init",errorMessage:r.error});var a=r.value,i=a.onMessageOnce("mediaStorageShadowTestResponse",function(e){return e.requestId===n});a.postMessage({input:e,requestId:n,storageType:t,type:"mediaStorageShadowTestRequest"});var l=await i,s=l.output;return s.success?(A().INFO(L||(L=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),n),o("WAResultOrError").makeResult(s.value)):(A().MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),t,s.error.errorMessage),o("WAResultOrError").makeError({errorName:s.error.errorName,errorMessage:s.error.errorMessage}))}async function X(e){var t=e.eventFlow,n=e.input,r=e.mediaType,a=e.rawMimeType,i=G();A().INFO(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),i);var l=await j(t);if(!l.success)return o("WAResultOrError").makeError({errorName:l.error});var s=l.value,u=s.onMessageOnce("kaleidoscopeClassifyResponse",function(e){return e.requestId===i});s.postMessage({mediaType:r,rawMimeType:a,input:n,requestId:i,type:"kaleidoscopeClassifyRequest"}),t.addPoint("sent_request_to_media_worker_start");var c=await u,d=c.output;return d.success?(A().INFO(I||(I=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),i),t==null||t.addPoint("sent_request_to_media_worker_end"),d):(t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError({errorName:d.error}))}async function Y(e){var t=G();A().INFO(T||(T=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashInWorker[","]: sending ","B to worker"])),t,e.byteLength);var n=await j();if(!n.success)return{transferredBuffer:e,result:n};var r=n.value,a=r.onMessageOnce("calculateFilehashResponse",function(e){return e.requestId===t});r.postMessage({buffer:e,requestId:t,type:"calculateFilehashRequest"},[e]);var i=await a,l=i.output,s=i.transferredBuffer;return l.success?(A().INFO(D||(D=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashInWorker[","]: received result from worker"])),t),{transferredBuffer:s,result:o("WAResultOrError").makeResult({filehash:l.value})}):(A().MUSTFIX(x||(x=babelHelpers.taggedTemplateLiteralLoose(["calculateFilehashInWorker[","]: failed: ",""])),t,l.error.errorMessage),{transferredBuffer:s,result:o("WAResultOrError").makeError(l.error.errorType)})}async function J(e,t,n){var r=G();A().INFO($||($=babelHelpers.taggedTemplateLiteralLoose(["hmacSha256InWorker[","]: sending ","B to worker"])),r,t.byteLength);var a=await j();if(!a.success)return{transferredKeyBuffer:e,transferredBuffer:t,result:a};var i=a.value,l=i.onMessageOnce("calculateHmacSha256Response",function(e){return e.requestId===r});i.postMessage({keyBuffer:e,buffer:t,length:n,requestId:r,type:"calculateHmacSha256Request"},[e,t]);var s=await l,u=s.output,c=s.transferredBuffer,d=s.transferredKeyBuffer;return u.success?(A().INFO(P||(P=babelHelpers.taggedTemplateLiteralLoose(["hmacSha256InWorker[","]: received result from worker"])),r),{transferredKeyBuffer:d,transferredBuffer:c,result:o("WAResultOrError").makeResult({hmac:u.value})}):(A().MUSTFIX(N||(N=babelHelpers.taggedTemplateLiteralLoose(["hmacSha256InWorker[","]: failed: ",""])),r,u.error.errorMessage),{transferredKeyBuffer:e,transferredBuffer:t,result:o("WAResultOrError").makeError(u.error.errorType)})}l.webpCheckInWorker=B,l.mp4RepairMuxInWorker=W,l.transcodeToMp4InWorker=q,l.progressiveJpegEncodeInWorker=U,l.progressiveJpegEncodeInWorkerWithFile=V,l.prewarmMediaWasmWorker=H,l.getConnectedWorkerPortWithTimeout=j,l.generateImageThumbnailInWorker=K,l.runMediaStorageShadowTestWasmWorker=Q,l.kaleidoscopeClassifyInWorker=X,l.calculateFilehashInWorker=Y,l.hmacSha256InWorker=J}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","cometIsMimeTypeForMedia","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=12e4,f=o("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),g=85,h=["image/heic"];function y(e,t,n,a){var i;a===!0?i={height:r("justknobx")._("187"),width:r("justknobx")._("187")}:i={height:r("justknobx")._("2144"),width:r("justknobx")._("2144")};var l;t?l=e.type==="image/webp"?Promise.resolve(e):S(e,"image/webp",t,n,i):l=e.type==="image/gif"?Promise.resolve(e):S(e,"image/jpeg",!1,n,i);var s=e.type==="image/gif";return s?l.then(function(e){return Promise.all([o("MAWGetImageSpec").getImageSpec(e),e])}).then(async function(n){var r=n[0],a=n[1];return{file:a,imageSpec:r,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:null,type:v(e,t)}}):l.then(function(t){return Promise.all([k(e,r("justknobx")._("2033")),o("MAWGetImageSpec").getImageSpec(t),t])}).then(async function(n){var r=n[0],a=n[1],i=n[2];return Promise.resolve({file:i,imageSpec:a,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(i),thumbnailUrlAndSpec:r,type:v(e,t)})})}async function C(e,n){var a=t.URL.createObjectURL(e),i=n===!0?r("justknobx")._("2545"):r("justknobx")._("2033"),l=await o("MAWImageUtils").urlToThumbnailSpec(a,i),s={height:l.height,width:l.width};return{file:e,imageSpec:s,thumbnailSpec:l,type:v(e,n),url:a}}function b(e,t){return o("MAWGetImageSpec").getImageSpec(e).then(function(n){return Promise.resolve({file:e,imageSpec:n,stickerReceiverFetchId:t,type:"sticker"})})}function v(e,t){return t===!0?"sticker":e.type==="image/gif"?"animated_image":"image"}async function S(t,n,r,a,i){f.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),t.name);var l=o("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",t);l.addAnnotations({int:{total_number_of_files:a!=null?a:1},string:{targetMimetype:n}});var u=function(){return L(t,n,g,r,i).then(function(e){return e.success?e.value:Promise.reject("runtime-error")}).catch(function(e){return f.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(e)),l.addPoint("native_encode_failure",{string:{native_encode_error:e.toString()}}),null})},c=n==="image/jpeg"?await o("WAPromiseTimeout").promiseTimeout(E(t,g,l,i).then(function(e){return e.success?e.value:Promise.reject(e.error)}),_).catch(function(e){return e instanceof o("WACustomError").TimeoutError?l.addPoint("mozjpeg_encode_timeout"):l.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:e.toString()}}),u()}):await u();if(c==null)throw l.endFail("unable_to_transcode_image"),f.mustfixThrow("unable to transcode image");return l.endSuccess({int:{compressed_file_size:c.size}}),c}function R(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToThumbnail(r,n)}function L(e,n,r,a,i){f.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var l=t.URL.createObjectURL(e),s=e.name;return o("MAWImageUtils").urlToFile(l,n,r,a,i).then(function(e){var t=e.blob;return f.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),t.size),o("WAResultOrError").makeResult(new File([t],s,{type:n}))})}async function E(e,t,n,r){f.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),e.name),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode"),n.addPoint("prewarm_worker_started");var a;if(o("WADecodeImage").canDecodeWithoutDOM&&(a=await o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:n,file:e,maxOutputResolution:r,quality:t,useHdScanConfig:!0})),a==null||!a.success&&a.error==="decode-image-error"){var i=await o("WADecodeImage").decodeImageWithDOM(e,r).catch(function(e){throw n.addPoint("image_decode_failure"),e});n.addPoint("image_decode_success"),a=await o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:n,imageData:i,quality:t,useHdScanConfig:!0})}return a.success?(n.addPoint("pjpeg_encode_success"),f.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),a.value.byteLength),o("WAResultOrError").makeResult(new File([a.value],e.name,{type:"image/jpeg"}))):a}function k(e,n){var a=async function(){var r=t.URL.createObjectURL(e),a=await o("MAWImageUtils").urlToThumbnail(r,n);return t.URL.revokeObjectURL(r),a};if(!o("WADecodeImage").canDecodeWithoutDOM)return a();var i=r("justknobx")._("2338")*1024,l=r("justknobx")._("2340");return o("WAPromiseTimeout").promiseTimeout(o("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:n,thumbnailBlobByteSizeLimitBytes:i,thumbnailQualityPercentageWhenAboveByteSizeLimit:l}).then(function(e){if(!e.success)throw f.mustfixThrow("urlToFileInWorker error: "+e.error);return{height:e.value.height,jpegThumbnail:e.value.blob,width:e.value.width}}).catch(function(e){throw f.catching(e).MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"]))),e}),_).catch(function(e){return a()})}function I(e){return e==="image/gif"||e==="image/webp"?!0:o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e)?!h.includes(e):!1}l.imagePreprocess=y,l.optimisticImagePreprocess=C,l.stickerPreprocess=b,l.getJpegThumbnailInfo=R,l.generateImageThumbnailInWorkerWithFallback=k,l.isSupportedImageFileType=I}),98);
__d("WAWebDataUrlToBlob",["err"],(function(t,n,r,o,a,i,l){var e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function s(t){var n=t.match(e);if(!n)throw r("err")("invalid data URI");var o=n[2]?n[1]:"text/plain"+(n[3]||";charset=US-ASCII"),a=!!n[4],i=t.slice(n[0].length),l;a?l=atob(i):l=decodeURIComponent(i);for(var s=new ArrayBuffer(l.length),u=new Uint8Array(s),c=0;c<l.length;c+=1)u[c]=l.charCodeAt(c);return new Blob([u],{type:o})}l.dataURLtoBlob=s}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s="image/jpeg",u=100,c=r("justknobx")._("2338")*1024,d=r("justknobx")._("2340"),m=r("justknobx")._("2545");function p(t,o){o===void 0&&(o=!0);var a;return new(e||(e=n("Promise")))(function(e,n){a=new Image;var i=/^(?:data|blob):/.test(t);o&&!i&&a.setAttribute("crossOrigin","anonymous"),a.onload=e,a.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))},a.onerror=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))},a.src=t}).then(function(){return a})}function _(t,r,a,i){if(a===void 0&&(a=!1),t.toBlob)return new(e||(e=n("Promise")))(function(e){var n=i==null?void 0:i/100;t.toBlob(e,r,n)}).then(function(o){var i=c,l=d/100;return a&&o.size>=i?new(e||(e=n("Promise")))(function(e){t.toBlob(e,r,l)}):o});o("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var l=o("WAWebDataUrlToBlob").dataURLtoBlob;return(e||(e=n("Promise"))).resolve(l(t.toDataURL(r))).then(function(o){var i=c,s=d/100;return a&&o.size>=i?(e||(e=n("Promise"))).resolve(l(t.toDataURL(r,s))):o})}function f(t,a,i,l,s){var u=p(t);return u.then(function(e){var t=e.naturalWidth,n=e.naturalHeight,r=o("WACalculateBoundOutputSize").calculateBoundOutputSize({height:n,width:t},s),u=r.outputHeight,c=r.outputWidth,d=document.createElement("canvas");d.width=c,d.height=u;var m=d.getContext("2d");return l!==!0&&C(d),m.drawImage(e,0,0,t,n,0,0,c,u),_(d,a,!1,i).then(function(e){return{blob:e,height:u,width:c}})}).catch(function(t){return(e||(e=n("Promise"))).reject(t!=null?t:r("err")("Error loading image from URL"))})}function g(e,t){return p(e).then(function(e){var n=document.createElement("canvas"),r=e.naturalWidth,a=e.naturalHeight,i=n.getContext("2d"),l=b(a,r,t);n.width=l.width,n.height=l.height;var u=n.width,c=n.height;return y(n),i.drawImage(e,0,0,u,c),_(n,s,!0).then(function(e){return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(function(e){return{height:c,jpegThumbnail:e,width:u}})})})}function h(e,t){return p(e).then(function(e){var n=b(e.naturalHeight,e.naturalWidth,t);return{height:n.height,width:n.width}})}function y(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function C(e){var t=e.getContext("2d");t.fillStyle="rgb(255,255,255)",t.fillRect(0,0,e.width,e.height)}function b(e,t,n){var r=t!=null?t:n,o=e!=null?e:n;return r>o?r>n&&(o*=n/r,r=n):o>n&&(r*=n/o,o=n),{height:Math.round(Math.max(o,1)),width:Math.round(Math.max(r,1))}}function v(e){return p(e).then(function(e){return{height:e.naturalHeight,width:e.naturalWidth}})}function S(t,a,i){var l=o("MAWAnimatedImageThumbnailStore").getThumbnailSpec(t);if(l)return(e||(e=n("Promise"))).resolve(l);var s=f(t,"image/gif",void 0,void 0,void 0);return s==null?null:s.then(function(e){var n=new File([e.blob],"gif",{type:"image/gif"});return o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(n,Math.max(i!=null?i:e.width,a!=null?a:e.height)).then(function(e){return o("MAWAnimatedImageThumbnailStore").setThumbnailSpec(t,e),e})}).catch(function(e){throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",t,e)})}function R(t){var r=t==null?void 0:t.file,a=t==null?void 0:t.width,i=t==null?void 0:t.height;if(r==null||a==null||i==null)return(e||(e=n("Promise"))).resolve(t);var l=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(r.type,!0),s=l.mediaType;return s!==o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=n("Promise"))).resolve(t):o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(r,Math.max(a,i)).then(function(e){var t=new File([e.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:t,height:e.height,width:e.width}})}l.TYPE_JPEG=s,l.IMG_THUMB_MAX_EDGE=u,l.STICKER_THUMBNAIL_MAX_SIZE=m,l.canvasToBlob=_,l.urlToFile=f,l.urlToThumbnail=g,l.urlToThumbnailSpec=h,l.boundHeightWidth=b,l.urlToImageSpec=v,l.generateGIFThumbnail=S,l.generatePreviewBlobForShare=R}),98);
__d("MAWGetImageSpec",["MAWImageUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToFile(r,n!=null?n:e.type).then(function(e){var t=e.height,n=e.width;return{height:t,width:n}})}async function s(e){var n=t.URL.createObjectURL(e),r=await o("MAWImageUtils").urlToImageSpec(n);return t.URL.revokeObjectURL(n),r}l.getImageSpec_DEPRECATED=e,l.getImageSpec=s}),98);
__d("WAHashUtils",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function s(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function u(e){return e}function c(e){return e}function d(e){return""+e.slice(0,3)}l.toPlaintextHash=e,l.toCiphertextHash=s,l.stringToPlaintextHash=u,l.toHashedPlaintextHash=c,l.sanitisePlaintextHash=d}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=!0);var n=e,r=o("MAWCurrentUser").getID(),a=e.author,i=e.externalId,l=e.msgId,s=e.threadJid;if(s==null)return null;var u=n.content,c=n.sortOrderMs,d={chatJid:s,externalId:i,msg:{msgId:l,sender:o("WAJids").authorToUserId(a,r),ts:e.canonicalTs},sortOrderMs:c},m=u;return babelHelpers.extends({},d,{msg:babelHelpers.extends({},d.msg,{content:m!=null?o("MAWVault").isVaulted(m)?t?m:o("MAWVault").unvault(m):t?o("MAWVault").vault(m):m:void 0})})}var s="message_content_search",u="non_message_content_search";l.createBridgeSearchMsg=e,l.MESSAGE_CONTENT_SEARCH=s,l.NON_MESSAGE_CONTENT_SEARCH=u}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0},s={snippets:e},u=null,c=function(t,n,a){var e="maw_cache_service",i=new(o("WormEAR")).WormEAR(a,e,n),l=new(o("WormIDbDriver")).WormIDbDriver(t,e,a,i,o("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:m});return new(o("Worm")).WormDatabase(l,r("qpl")._(1056840657,"2716"))};function d(){return u!==null||(u=new Promise(async function(e,t){try{var n=c(o("MAWIndexedDbMetadata").MAWcacheServiceDbName(o("MAWCurrentUser").getID()),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),s);await n.init(),e(n)}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),u=null,t(a)}})),u}function m(e){if(e instanceof o("WormEAR").DecryptionError){var t=e;r("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",t.store),r("promiseDone")(d().then(function(e){return e.runInTransaction([t.store],"readwrite",function(e){return e.stores[t.store].clear()},"delete-corrupted-entity")}).then(function(){r("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",t.store)}).catch(function(e){var n=r("getErrorSafe")(e);r("FBLogger")("MAWCacheService").catching(n).mustfix("Failed to delete corrupted store %s, err: %s",t.store,n.message)}))}}function p(e){return e.map(function(e){var t=e[0],n=e[1];return n})}async function _(){var e=await d();return e.dump({snippets:{customFields:{id:o("WormDump").wormNonSensitiveField,key:o("WormDump").wormNonSensitiveField,timestamp:o("WormDump").wormNonSensitiveField,value:function(t){var e;return{snippet:(e=o("WormDump")).wormRedact(t.snippet),snippetMsgAckLevel:e.wormNonSensitiveField(t.snippetMsgAckLevel),snippetMsgId:e.wormNonSensitiveField(t.snippetMsgId),snippetNewestIncomingMsgs:e.wormNonSensitiveField(t.snippetNewestIncomingMsgs),snippetReactionId:e.wormRedact(t.snippetReactionId)}}}}})}l.getOrSetupMAWCacheDB=d,l.convertCacheValueToDBRawValue=p,l.getDbDump=_}),98);
__d("MAWCacheServiceQPL",["ExecutionEnvironment","MAWCurrentUser","MAWQplProxy","QPLUserFlow","performanceAbsoluteNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set,c=new Set,d=3e3,m=r("qpl")._(1056836703,"2955");function p(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(c.has(t))return;f(t),o("MAWQplProxy").startQplUserFlow(m,{},{callBridgeWithTimestamp:!0,providedInstanceKey:t})}else{if(u.has(t))return;_(t),r("QPLUserFlow").start(m,{annotations:{string:{service:n}},instanceKey:t})}}function _(e){u.add(e)}function f(e){c.add(e)}function g(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQplPointThroughBridge(m,"worker@"+i+n,{instanceKey:t},!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();a==="realtime-update"?window.setTimeout(function(){r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t,timestamp:p})},d):r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t})}}function h(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(!c.has(t))return;o("MAWQplProxy").sendQPLAnnotationsThroughBridge(m,n,t)}else{if(!u.has(t))return;r("QPLUserFlow").addAnnotations(m,n,{instanceKey:t})}}function y(t){var n=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(n){if(!c.has(t))return;c.delete(t),o("MAWQplProxy").sendQPLSuccessThroughBridge(m,{},t,!0)}else{if(!u.has(t))return;var a=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endSuccess(m,{instanceKey:t,timestamp:a})},d)}}function C(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQPLFailThroughBridge(m,"worker@"+i+n,{},t,!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endFailure(m,"ui@"+n,{instanceKey:t,timestamp:p})},d),u.delete(t)}}function b(e){return e?e.replace(/-/g,"_")+"_":""}function v(e){return o("MAWCurrentUser").isEmployee()||o("MAWCurrentUser").isTestUser()?e:void 0}var S={addAnnotationsQPL:h,addPointQPL:g,endFailureQPL:C,endSuccessQPL:y,redactKeysForNonEmployee:v,registerInstanceKeyInUI:_,registerInstanceKeyInWorker:f,startQPL:p};l.default=S}),98);
__d("MAWCacheServiceUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_cache_service_broadcast",s=typeof window!="undefined"?window:self,u=function(){return s.BroadcastChannel?new s.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},c={concurrency:1,maxTaskLimit:1,maxThrottleMs:500};function d(e){return"maw-cache-service-"+e}function m(e,t){var n=new Set,r=[];return e.forEach(function(e){var o=t(e);if(n.has(o)){r.push(e);return}n.add(o)}),r}l.MAW_CACHE_SERVICE_BROADCAST_CHANNEL=e,l.globalScope=s,l.getMAWCacheServiceBroadcastChannel=u,l.SCHEDULER_CONFIG=c,l.getSchedulerName=d,l.findDuplicates=m}),98);
__d("MAWDbXMA",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(e){return e}function c(t){return(e||(e=o("I64"))).to_float(t)}l.convertNumbersToXMAIds=s,l.convertNumberToXMAId=u,l.convertXMAId64ToXMAId=c}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(await(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=await e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:await e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:await e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWEBLSInWorkerSwitch",["MAWEBEnabledStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager,s=e;l.default=s}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$MAWCombinedStateManager$p_1=t,r.$MAWCombinedStateManager$p_2=n,r.$MAWCombinedStateManager$p_3=null,r.$MAWCombinedStateManager$p_4=!1,r.$MAWCombinedStateManager$p_1.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_2.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_5(),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){var t=e.prototype.isEnabled.call(this);return this.$MAWCombinedStateManager$p_6(),t},n.$MAWCombinedStateManager$p_6=function(){var e=this.$MAWCombinedStateManager$p_1.isEnabled(),t=this.$MAWCombinedStateManager$p_2.isEnabled(),n=e!==t,r=e?"enabled":"disabled",a=t?"enabled":"disabled",i=n?"mismatch":"match";if(n&&!this.$MAWCombinedStateManager$p_4)this.$MAWCombinedStateManager$p_3=Date.now(),this.$MAWCombinedStateManager$p_4=!0;else if(this.$MAWCombinedStateManager$p_4&&this.$MAWCombinedStateManager$p_3!=null){var l=this.$MAWCombinedStateManager$p_3,s=Date.now()-l;this.$MAWCombinedStateManager$p_4=n,this.$MAWCombinedStateManager$p_3=n?Date.now():null;var u=this.$MAWCombinedStateManager$p_7(s);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.duration_bucket."+u});var c=n?"failed":"success";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.result."+c})}o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch."+i+"."+r+"."+a})},n.$MAWCombinedStateManager$p_7=function(t){return t<100?"under_100ms":t<500?"100_to_500ms":t<1e3?"500ms_to_1s":t<5e3?"1s_to_5s":t<1e4?"5s_to_10s":"over_10s"},n.$MAWCombinedStateManager$p_5=function(){this.set(this.$MAWCombinedStateManager$p_1.isEnabled()&&this.$MAWCombinedStateManager$p_2.isEnabled()),this.$MAWCombinedStateManager$p_6()},t})(o("MAWEBEnabledStateManager").MAWEBEnabledStateManager),s=new e(r("MAWEBSwitch"),r("MAWEBLSInWorkerSwitch"));l.MAWCombinedStateManager=e,l.MAWEBCombinedSwitch=s}),98);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a,i,l,s,u){i===void 0&&(i=1);try{var c=await o("MAWKeychainCrypto").getAccountKeys(i),d=await Promise.all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),Promise.all(c.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,n).catch(function(){return null})}))]),m=d[0],p=d[1],_=await Promise.all(p.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(m,e).catch(function(){return null})})),f=_.filter(Boolean);if(f.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:f,version:a}}catch(t){var g=null,h=null,y=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&y!=null&&(g=y.userKeyBase===r("MessengerWebInitData").userKeyBase,h=y.fbId===o("MAWCurrentUser").getID());var C=o("MAWWebInitDataHelpers").getAccountKeysString(i),b=C&&C[0]!=null?await o("MAWKeychainCrypto").generateHashString(C[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",l!=null,C!=null,l===b,s!=null,r("MessengerWebInitData").userKeyBase!=null,s===await o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase),u,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,g,h,i),t}}l.default=s}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},u={global_ear:s(),maw_ear:s()},c=null,d=(function(){var e=Object.keys(u).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=c)==null||t.updateState()}}})();function m(e){u[e]=s(),d.set(e,"none")}function p(e,t){d.set(e,t)}function _(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var f={global_ear:function(){return null},maw_ear:function(){return null}},g=function(t){return f[t]()},h=function(t,n){f[t]=function(){return n}},y=function(t,n){h(t,n),L(t).dbReady.resolve()},C={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},b=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});async function v(t,n,a){var i;if(a===void 0&&(a=B),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",t),c=F(t),d.is(t,"success")&&L(t).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(R(t));var l=o("MAWCurrentUser").getID(),s=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+l);s.onEventReceive("notifyEarKeychainV2",N);var u=(e||(e=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";a(t+"_ear_init_start",{string:(i={},i["initFlow_"+t+"_"+u]=n,i)});try{var m,p=await O(s,t,void 0,a);a(t+"_ear_import_end");for(var _ of p)L(t).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return P(t),b(t,l).listenToRequest(function(){return JSON.stringify(Array.from(L(t).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),a(t+"_ear_init_end",{string_array:(m={},m[t+"_randomisedVersionKeys"+u]=S(t).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),m)}),d.set(t,"success"),o("WAResultOrError").makeResult(R(t))}catch(e){return d.set(t,"failure"),a(t+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",t),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(e))}}function S(e){return Array.from(L(e).databaseEncryptionKeys.entries())}function R(e){return L(e).latestVersion}function L(e){return u[e]}function E(t,n){var a=n!=null?n:R(t),i=L(t).databaseEncryptionKeys.get(a);if(i==null){r("promiseDone")(D(t).then(function(e){var t=e.map(function(e){return e.version}).includes(a);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,a,e.length)}));var l=R(t),s=Array.from(L(t).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",a,l,L(t).databaseEncryptionKeys.get(l)==null,L(t).databaseEncryptionKeys.size,Math.max.apply(Math,s),d.get(t),(e||(e=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+a+" was null.")}return{dbEntry:i.dbEntry,keys:i.keys,randomisedVersion:i.dbEntry.randomisedVersion,version:a}}function k(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var I=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function T(e){if(e.length===0)return{reason:I.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:I.EXPIRED_KEY,result:!0}}function D(e){var t=$(e,"readonly");return new Promise(function(n,r){t.onabort=function(){return r(t.error)},t.onerror=function(){return r(t.error)};var o=t.objectStore(C[e]).getAll();o.onsuccess=function(){return n(o.result)},o.onerror=function(){return r(o.error)}}).then(x)}function x(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function $(e,t){var n=g(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(C[e],t,{durability:"strict"})}var P=function(t){var e=Array.from(L(t).databaseEncryptionKeys.keys());e.length>0?L(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},N=function(n){var t=n.namespace,o=n.version;r("promiseDone")((async function(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",t),await L(t).dbReady.getPromise();var n=(await D(t)).find(function(e){return e.version===o});if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var a=await k(n);L(t).databaseEncryptionKeys.set(a.version,{dbEntry:n,keys:a.keys}),P(t),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",t)}catch(n){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(n)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(e||(e=r("ExecutionEnvironment"))).isInWorker,t)}})())};function M(e){return d.get(e)!=="none"}function w(e){return d.get(e)}function A(e){return d.is(e,"success")?(L(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function F(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:A(e).toString(),latestVersion:R(e).toString()},reason:d.get(e),state:(function(){switch(d.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}async function O(t,n,o,a){var i=await r("MAWEARGenNewKeychainCryptoKey")();a(n+"_ear_raw_key_generated");var l=await new Promise(function(l,s){var u=$(n,"readwrite");u.onerror=function(){return s(u.error)},u.onabort=function(){return s(u.error)};var c=u.objectStore(C[n]).getAll();c.onerror=function(){return s(c.error)},c.onsuccess=function(){var d;a(n+"_ear_keys_fetched");var m=x(c.result),p=T(m),f=p.reason,g=p.result;if((o==null?void 0:o.forceKeyRotation)!==!0&&!g)return l(m);var h=(o==null?void 0:o.forceKeyRotation)===!0?I.FORCE_KEY_ROTATION:f!=null?f:I.UNKNOWN,y=m.map(function(e){return e.version}),b=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),b,n,(e||(e=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},i,{randomisedVersion:_(m),source:h,version:b+1});a(n+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:n,version:v.version}),a(n+"_ear_gen_key_end"),l(m)};var S=u.objectStore(C[n]).add(v);S.onerror=function(){return s(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});a(n+"_ear_import_start");var s=await Promise.allSettled(l.map(function(e){return k(e).then(function(t){return{entry:e,result:t}})})),u=s[s.length-1];if(u.status==="rejected"){var c,d=(c=o==null?void 0:o.corruptedEARRetryCount)!=null?c:0;if(d>=1)throw u.reason;return O(t,n,{corruptedEARRetryCount:d+1,forceKeyRotation:!0},a)}return s.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}var B=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),W(t,n)},W=function(n,a){var t=r("qpl")._(25310776,"6155");(e||(e=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(t,"backend_"+n,{annotations:a}):(r("QPLUserFlow").addPoint(t,"ui_"+n),a!=null&&r("QPLUserFlow").addAnnotations(t,a))},q=function(t,n){return b(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);L(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),P(t),d.set(t,"success"),!0},function(){return!1})};l.InitStatus=d,l.resetKeychain__TEST_ONLY_DO_NOT_USE=m,l.setInitStatus__TEST_ONLY_DO_NOT_USE=p,l.generateNewRandomisedVersionNumber=_,l.setNamespaceSourceDbWithoutMarkingDbReady=h,l.setNamespaceSourceDbAndMarkAsReady=y,l.getEncryptionKeysTabCommunication=b,l.init=v,l.getLatestVersion=R,l.getKeychain=L,l.getDbEncryptionKey=E,l.isKeychainSettled=M,l.getKeychainInitStatus=w,l.isKeychainInitialised=A,l.logMawInitPoint=W,l.importKeysFromOtherTab=q}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return _}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15740")}l.isFbProfileDirectoryItemXmaEnabled=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]),l=e;i.default=l}),66);
__d("MAWMpsMigrationStatus",["ODS"],(function(t,n,r,o,a,i,l){"use strict";var e,s={},u=new Set;function c(t,n){s[t]=n,u.has(t)||((e||(e=o("ODS"))).bumpEntityKey(9819,"worm.db_migration",t+".isMigrated."+String(n)),u.add(t))}function d(e){return s[e]}l.setDbMigrationState=c,l.isDbMigrationReady=d}),98);
__d("MAWMpsGating",["MAWMpsMigrationStatus","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("10465")}function s(){return o("MAWMpsMigrationStatus").isDbMigrationReady("reverb-populate-media-tags")===!0&&(e()||r("gkx")("15207"))}l.isFullMpsEnabled=e,l.isMpsMediaGalleryEnabled=s}),98);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i,l){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.VIDEO&&l===!0?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&e.replyAttachmentPlaintextHash==null?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","WAArmadilloXMA.pb","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function u(e){var t=e.fbTargetType,n=e.silentExposure;if(t!=null&&s.has(t))return!0;var a=n!=null?n:!1;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.GEN_AI_RICH_RESPONSE:return r("gkx")("12661");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return a?r("gkx")("9338"):r("gkx")("9339");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return o("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:return r("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(t)),!1}}l.FB_FULLY_SUPPORTED_TARGET_TYPES=s,l.isFBSupportedTargetType=u}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e,n,r;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption,this.gifPlayback=(n=(r=this.payload)==null||(r=r.ancillary)==null?void 0:r.gifPlayback)!=null?n:!1},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("MAWSendFileMsgTypes",["WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return o("WAStanzaUtils").toStanzaId(e)}l.toOfflineAttachmentIDFromStanzaId=e,l.toOfflineAttachmentIDFromString=s}),98);
__d("MAWSupportedDocumentTypes",[],(function(t,n,r,o,a,i){"use strict";var e=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function l(t){if(t==null)return!1;var n=t.includes(".")?t.split(".").pop():null;return n!=null&&!e.includes(n)}i.isAllowedType=l}),66);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).of_float(t*1e3)}function u(e){var t=Number(e);return t<=o("WATimeUtils").MAX_INT&&t!==-1e3&&t!==0}function c(t){return u(t)?(Number(t)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(t)),s(t)):(e||(e=o("I64"))).of_float(t)}function d(e,t){var n=Date.now(),r=n-t*24*60*60*1e3,a=o("WATimeUtils").castMilliSecondsToUnixTime(r);return e>=a}function m(e){if(e!=null)return u(e)?(Number(e)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(e)),o("WATimeUtils").castToMillisTime(e*1e3)):e}var p=(e||(e=o("I64"))).of_string("9999999999999"),_=Number.MAX_VALUE;l.toTimestamp=s,l.millisTimeToTimestamp=c,l.isTimestampNewerThanXDays=d,l.ensureValidMillisTime=m,l.MAX_TIMESTAMP_MS=p,l.MAX_TIMESTAMP=_,l.MIN_TIMESTAMP_MS=e.zero}),98);
__d("MAWUICacheServicesBase",["FBLogger","MAWCacheServiceDB","MAWCacheServiceQPL"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"];function s(e){return e+"_mps_reactive"}var u=(function(){function t(e){this.$1=new Map,this.QPLMetadata=new Map,this.$2=e}var n=t.prototype;return n.resetInMemoryCache=function(t,n){var e=this.$1.get(t);e!=null&&(n==null||n.length===0||(r("FBLogger")("MAWUICacheServices").info("Reset in memory cache. Namespace: %s",t),n.forEach(function(t){e.delete(t)})))},n.updateInMemoryCacheAndTriggerCallback=function(t,n,o,a,i){this.$3(t,n);var e=this.$2[t];e!=null&&(a!=null&&(r("MAWCacheServiceQPL").addPointQPL(a,"triggering_callback",o),(o==="cache-invalidation"||o==="realtime-update"||o==="from-scratch"&&this.QPLMetadata.get(a)==="all-from-scratch"||o==="in-memory"&&i===!0)&&(r("MAWCacheServiceQPL").endSuccessQPL(a),this.QPLMetadata.delete(a))),e.onCacheChange(n,o))},n.checkInMemoryCacheAndTriggerCallback=function(t,n,o){var e=this,a=[],i=[];n.forEach(function(n){var r=e.$4(t,n);r==null?a.push(n):i.push([n,r])});var l=a.length===0;return l&&o!=null&&r("MAWCacheServiceQPL").addPointQPL(o,"all_in_memory"),i.length>0&&this.updateInMemoryCacheAndTriggerCallback(t,i,"in-memory",o,l),a},n.checkPersistedCacheAndTriggerCallback=async function(n,a,i){var t=await o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),l=await t.runInTransaction([n],"readonly",function(e){return Promise.all(a.map(function(t){return e.stores[n].getByIndex("key",[s(t)])}))},"read_from_persisted_"+n),u=[],c=[];return l.forEach(function(t,n){if(t==null)u.push(a[n]);else{var r=t.id,o=babelHelpers.objectWithoutPropertiesLoose(t,e);c.push([a[n],o])}}),i!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(i,{int:{numPersistedHit:c.length,numPersistedMiss:u.length}}),u.length===0&&i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"all_in_persisted"),c.length>0&&this.updateInMemoryCacheAndTriggerCallback(n,c,"persisted",i),u},n.$3=function(t,n){var e,r=(e=this.$1.get(t))!=null?e:new Map;n.forEach(function(e){var t=e[0],n=e[1];r.set(t,n)}),this.$1.set(t,r)},n.$4=function(t,n){var e=this.$1.get(t);if(e==null)return null;var r;return(r=e.get(n))!=null?r:null},t})();l.adjustCacheKey=s,l.MAWUICacheServicesBase=u}),98);
__d("MNLSXMALayoutType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28,CONDENSED_LINK:29,DOODLE_SPACE:30,DIRECT_EVENT:31});i.default=e}),66);
__d("MWPMiniSearch",["minisearch"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e={fuzzy:0,prefix:!0};return{fields:["content"],searchOptions:e}}function s(t){t===void 0&&(t=function(){return{}});var n;function o(){n=new(r("minisearch"))(babelHelpers.extends({},e(),t()))}return{getInstance:function(){return n==null&&o(),n}}}l.createMiniSearchSingleton=s}),98);
__d("MessagingAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});i.default=e}),66);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("MpsOverBridge",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){this.loadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessage",e)},this.loadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessages",e)},this.batchLoadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessages",e)},this.batchLoadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessage",e)},this.debugDbDump=function(){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsDebugDbDump")},this.copMps={loadBatchMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadBatchMsgsIntoMaw",t)},loadMoreMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMoreMsgsIntoMaw",t)},loadMsgIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMsgIntoMaw",t)}}},s;function u(){return s==null&&(s=new e),s}l.mps=u}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("4194303");function u(){return(e||(e=o("I64"))).to_string(c())}function c(){var t=o("XPlatReactCrypto").getRandomValues(new Uint8Array(8)),n=new DataView(t.buffer),r=(e||(e=o("I64"))).add(e.lsl_(e.of_int32(n.getUint32(0)),32),e.of_int32(n.getUint32(4)));return d(Date.now(),r)}function d(t,n){return(e||(e=o("I64"))).and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(n,s)),e.max_int)}function m(t){for(var n=c(),r=[],a=0;a<t.length;a++)r.push([t[a],(e||(e=o("I64"))).to_string(n)]),n=p(n);return r}function p(t,n){n===void 0&&(n=(e||(e=o("I64"))).one);var r=_(t),a=f(t);return d(r,(e||(e=o("I64"))).add(a,n))}function _(t){return(e||(e=o("I64"))).to_float(e.lsr_(t,22))}function f(t){return(e||(e=o("I64"))).and_(t,s)}l.createOfflineThreadingID=u,l.createForItemsInOrder=m,l.createNewFromExisting=p,l.extractTimestamp=_}),98);
__d("ReStoreLocalStorageQuotaExceed",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="Failed to execute 'setItem' on 'Storage'",s="ReStoreLocalStorageQuotaExceed";function u(){try{var t=window.localStorage,n=[],o=[];if(t!=null&&t.length!==0){for(var a in t)if(n.length===0&&o.length===0&&a.includes("falco_queue_log")&&o.push(a),!!Object.prototype.hasOwnProperty.call(t,a)){var i=((t[a]||"").length+a.length)*2;i/1024>2e3&&n.push(a)}}return r("FBLogger")("messenger_web").mustfix(e+": QuotaExceeded - trying to clean up %s or %s",n.join(","),o.join(",")),n.length!==0?n:o}catch(e){return r("FBLogger")("messenger_web").mustfix("Error getting local storage big values for cleanup."),[]}}function c(){try{var e=window.localStorage,t=u();t.forEach(function(t){e.removeItem(t)})}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("maw_db").mustfix("Couldn't remove vals from localStorage",n.message)}}var d=(function(t){function n(n){var r,o=e+": "+n+"; Keys to delete: "+u().join(",");return r=t.call(this,o)||this,r.message=o,r.name=s,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));l.ERROR_NAME=s,l.getLocalStorageValuesToRemoveOnExceed=u,l.clearLocalStorageBigValues=c,l.ReStoreLocalStorageQuotaExceed=d}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,!1)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isConnected=function(){return this.get()},n.waitForConnection=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager),s=new e;l.WACommsConnectionState=s}),98);
__d("WAMediaQplHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e<0||e>1e3*1024*1024?"invalid_size":e===0?"size equal to 0KB":e<=1*1024?"size lower than 1 KB":e<=50*1024?"size between 1 KB and 50 KB":e<=100*1024?"size between 50 KB and 100 KB":e<=500*1024?"size between 100 KB and 500 KB":e<=1*1024*1024?"size between 500 KB and 1 MB":e<=2*1024*1024?"size between 1 MB and 2 MB":e<=5*1024*1024?"size between 2 MB and 5 MB":e<=10*1024*1024?"size between 5 MB and 10 MB":e<=20*1024*1024?"size between 10 MB and 20 MB":e<=25*1024*1024?"size between 20 MB and 25 MB":e<=30*1024*1024?"size between 25 MB and 30 MB":e<=50*1024*1024?"size between 30 MB and 50 MB":e<=75*1024*1024?"size between 50 MB and 75 MB":e<=100*1024*1024?"size between 75 MB and 100 MB":"size above 100 MB"}i.convertIntegerSizeToStringBucket=e}),66);
__d("WorkerSchedulerError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,"Task execution exceeds timeout "+t+":"+n)||this,r.name="WorkerSchedulerTimeoutError",r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.WorkerSchedulerTimeoutError=e}),66);
__d("WorkerSchedulerPriority",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=1,s=0;i.BACKGROUND_PRIORITY=e,i.REGULAR_PRIORITY=l,i.BLOCKING_PRIORITY=s}),66);
__d("WorkerScheduler",["$InternalEnum","Promise","QPLFlow","QuickPerformanceLogger","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerSchedulerError","WorkerSchedulerPriority","err","getSafeQplErrorMessage","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v=o("WATagsLogger").TAGS(["WorkerScheduler"]),S=0,R=100,L=3e4,E=10,k=6e4,I=n("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),T=(function(){function t(e,t){var n;this.$3=!1,this.$4=new Map,this.$5=new Map,this.$6=new Map,this.$7=[new Set,new Set,new Set],this.$8=[new(n=o("WAResolvable")).Resolvable,new n.Resolvable,new n.Resolvable],this.$9=new n.Resolvable,this.$1=e,this.config=t,this.$2=v.TAGS([e])}var a=t.prototype;return a.waitUntilEndReached=function(){return this.$9.promise},a.waitUntilBlockingEnded=function(){return this.$8[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].promise},a.waitUntilRegularEnded=function(){return this.$8[o("WorkerSchedulerPriority").REGULAR_PRIORITY].promise},a.waitUntilBackgroundEnded=function(){return this.$8[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].promise},a.getDebugState=function(){var e=this,t=Date.now();return{activeTasks:Array.from(this.$6.entries()).map(function(n){var r=n[0],o=n[1],a=e.$5.get(r);return!a||a.startTime==null?null:{executionTimeMs:t-a.startTime,priority:o,task:a.name,waitTimeMs:t-a.scheduledTime}}).filter(Boolean),pendingTasksByPriority:this.$7.map(function(n){var r=[];return n.forEach(function(n){var o=e.$5.get(n);o&&r.push({task:o.name,waitTimeMs:t-o.scheduledTime})}),r})}},a.$10=function(){if(this.$6.size<this.config.maxTaskLimit){var e=this.pendingTasksTick({increaseCounter:!1,lowestTier:this.$3?o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:o("WorkerSchedulerPriority").BLOCKING_PRIORITY,tasksToPick:1,tickDelta:0}),t=e.candidates,n=x.getHighestActivePriority();t.length>0&&this.maybeStartTask(t[0].id,n)}},a.runTask=function(t){return this.task(t).run()},a.task=function(t){var e,n=this.$1+":"+t.name+":"+S++,r=(e=t.priority)!=null?e:o("WorkerSchedulerPriority").REGULAR_PRIORITY,a=this.$11(n,{annotations:t.annotations,customFlags:t.customFlags,eventSamplingRate:t.eventSamplingRate,fn:t.fn,name:t.name,priority:r});return this.$4.set(n,a),a.publicApi},a.$12=function(t){var e=this.$4.get(t);return e==null?(b||(b=n("Promise"))).reject(r("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled")):(e.publicApi.status=I.SCHEDULED,this.$5.set(t,e),this.$7[e.priority].add(t),this.$13(e.priority),e.metric.addPoint("schedule_start"),x.scheduleTimerIfNeeded(),this.$10(),e.resolvable.promise)},a.$11=function(n,r){var t,a,i,l=this,s=new(o("WAResolvable")).Resolvable,u=o("QPLFlow").startQplFlowWithCoinflip($,r.eventSamplingRate!=null?r.eventSamplingRate:this.config.defaultSamplingRate,{annotations:{bool:babelHelpers.extends({},(t=r.annotations)==null?void 0:t.bool,r.customFlags),int:babelHelpers.extends({},(a=r.annotations)==null?void 0:a.int,{originalPriority:r.priority}),string:babelHelpers.extends({},(i=r.annotations)==null?void 0:i.string,{name:r.name,scheduler:this.$1,workerID:self!=null&&"worker_id"in self?self.worker_id:void 0})}}),c={fn:r.fn,id:n,loggingParams:{},maxTickDelta:0,metric:u,name:r.name,priority:r.priority,publicApi:{cancel:function(){return c.publicApi.status!==I.CREATED&&c.publicApi.status!==I.SCHEDULED?!1:(l.$14(n,I.CANCELLED),l.$4.delete(n))},id:n,name:r.name,promise:s.promise,promote:function(n){return l.$2.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Promoting "," from "," to ",""])),c.id,c.priority,n),(c.publicApi.status===I.CREATED||c.publicApi.status===I.SCHEDULED)&&c.priority>n?(l.$15(c,n),!0):!1},run:function(){return l.$12(n)},status:I.CREATED},resolvable:s,scheduledTime:Date.now(),startTime:null,tickCounter:0,waitCounter:0};return c},a.$14=function(t,n){var e=this.$5.get(t),r=e==null?void 0:e.publicApi.status;if(!(e==null||r===I.COMPLETED||r===I.FAILED||r===I.STUCK)){this.$5.delete(t),this.$6.delete(t),e.publicApi.status=n;var a=[this.$7[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").REGULAR_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].size===0];this.$6.forEach(function(e){a[e]=!1}),a[o("WorkerSchedulerPriority").BLOCKING_PRIORITY]&&a[o("WorkerSchedulerPriority").REGULAR_PRIORITY]&&a[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY]&&this.$9.resolve();for(var i=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;i<=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY;i++)a[i]&&this.$8[i].resolve()}},a.maybeStartTask=function(t,n){var e=this.$5.get(t);if(e==null){this.$2.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""])),t,this.$1);return}if(n==null||this.$3===!0)return this.$16(e);if(!(n<e.priority))return this.$16(e)},a.$16=function(t){var e=this;this.$7[t.priority].delete(t.id),this.$6.set(t.id,t.priority),this.$2.TAGS([t.name]).LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Started: ",", priority: ",""])),t.id,t.priority),t.startTime=Date.now(),t.publicApi.status=I.RUNNING,t.metric.addPoint("schedule_end",{int:{priorityTier:t.priority,waitTicks:t.waitCounter}}),t.metric.addPoint("run_start",{int:{startPriority:t.priority}});var r;try{r=t.fn({metric:t.metric})}catch(e){r=(b||(b=n("Promise"))).reject(e)}this.config.warnTaskLimit!=null&&this.$6.size>=this.config.warnTaskLimit&&this.$6.entries().forEach(function(t){var n=t[0],r=t[1],o=e.$5.get(n);o!=null&&o.metric.addAnnotations({bool:{exceedsWarnLimit:!0}})}),r.then(function(n){t.resolvable.resolve(n),e.$2.TAGS([t.name]).LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""])),t.id),t.metric.addPoint("run_end",{int:{executionTicks:t.tickCounter}}),e.$14(t.id,I.COMPLETED),t.metric.endSuccess({int:{maxTickDeltaMs:t.maxTickDelta}}),e.$10()}).catch(function(n){t.resolvable.reject(n),e.$2.TAGS([t.name]).WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""])),t.id),t.metric.addPoint("run_fail"),e.$2.TAGS([t.name]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Debug params: "," failed: ",""])),t.loggingParams,n),e.$14(t.id,I.FAILED),t.metric.endFail("runtime",{int:{maxTickDeltaMs:t.maxTickDelta},string:{jsError:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(n)}}),e.$10()})},a.$13=function(t){for(var e=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;e<=t;e++)this.$8[e].resolveWasCalled()&&(this.$8[e]=new(o("WAResolvable")).Resolvable);this.$9.resolveWasCalled()&&(this.$9=new(o("WAResolvable")).Resolvable)},a.getHighestActivePriority=function(){var e=this,t=null;return this.$6.forEach(function(n,r){var o=e.$5.get(r);if(o==null){v.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),r,e.$1),e.$6.delete(r);return}(t==null||t>o.priority)&&(t=o.priority)}),t},a.activeTasksTick=function(t){var e=this,n=null;return this.$6.forEach(function(r,a){var i=e.$5.get(a);if(i==null){v.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),a,e.$1),e.$6.delete(a);return}i.tickCounter++,i.maxTickDelta=Math.max(t,i.maxTickDelta),(n==null||n>i.priority)&&(n=i.priority),i.tickCounter>e.config.ticksToTimeout&&i.publicApi.status===I.RUNNING&&(v.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""])),i.name),e.$14(i.id,I.STUCK),e.config.shouldContinueAfterTimeout||i.resolvable.reject(new(o("WorkerSchedulerError")).WorkerSchedulerTimeoutError(e.$1,i.id)),i.metric.endCancel(113,{int:{maxTickDeltaMs:i.maxTickDelta}}))}),n},a.$15=function(t,n){function e(){switch(r){case o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:return o("WorkerSchedulerPriority").REGULAR_PRIORITY;case o("WorkerSchedulerPriority").REGULAR_PRIORITY:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY;default:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY}}var r=t.priority,a=n!=null?n:e();a!==r&&(t.metric.addPoint("promote_to_"+a),this.$7[r].delete(t.id),t.priority=a,this.$7[a].add(t.id))},a.pendingTasksTick=function(t){for(var e=this,n=t.increaseCounter,r=t.lowestTier,a=t.tasksToPick,i=t.tickDelta,l=[],s=!0,u=function(r){s&&(s=e.$7[r].size===0),e.$7[r].forEach(function(t){var s=e.$5.get(t);if(s==null){v.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""])),t,e.$1),e.$7[r].delete(t);return}n&&(s.waitCounter++,s.maxTickDelta=Math.max(i,s.maxTickDelta),s.priority>o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=e.config.throttleTicks&&e.$15(s),s.priority===o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=x.maxWaitTicksMultiplierForFinalPromotion*e.config.throttleTicks&&(v.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"])),e.$1,s.name),e.$15(s))),!(l.length>=a)&&(e.$6.size+l.length>=e.config.maxTaskLimit||l.push(s))})},c=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;c<=r;c++)u(c);return{candidates:l.map(function(e){return{id:e.id,priority:e.priority}}),isEmpty:s}},a.TEST_ONLY_ignore_delays=function(){this.$3=!0},t})(),D=(function(){function e(){var e=this;this.$1=new Map,this.tickFrequencyMs=R,this.maxThrottleMs=k,this.maxWaitTicksMultiplierForFinalPromotion=E,this.$2=null,this.$3=new(o("WAShiftTimer")).ShiftTimer(function(){var t=!1;try{var n,r=o("WATimeUtils").performanceAbsoluteNow();t=e.$4(r-((n=e.$2)!=null?n:r))}catch(e){v.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""])),e)}finally{t===!1?(e.$2=o("WATimeUtils").performanceAbsoluteNow(),e.$3.onOrBefore(e.tickFrequencyMs)):e.$2=null}}),this.$5=new Map}var t=e.prototype;return t.getHighestActivePriority=function(){var e=null;return this.$5.forEach(function(t){var n=t.getHighestActivePriority();e!=null&&n!=null&&e<n&&(e=n),e==null&&n!=null&&(e=n)}),e},t.$4=function(t){var e,n=!0,r=null;this.$5.forEach(function(e){var n=e.activeTasksTick(t);r!=null&&n!=null&&r<n&&(r=n),r==null&&n!=null&&(r=n)});var a=[[],[],[]];this.$5.forEach(function(e){var r=e.pendingTasksTick({increaseCounter:!0,lowestTier:o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,tasksToPick:e.config.concurrency,tickDelta:t}),i=r.candidates,l=r.isEmpty;n&&(n=l),i.forEach(function(t){a[t.priority].push({id:t.id,scheduler:e})})});var i=(e=a.find(function(e){return e.length>0}))!=null?e:[];for(var l of i){var s=l.id,u=l.scheduler;u.maybeStartTask(s,r)}return n},t.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)},t.newScheduler=function(t,n){var e=this.$5.get(t);return e||(e=new T(t,n),this.$5.set(t,e),e)},t.TEST_ONLY_reset=function(){this.$5=new Map,this.$1=new Map},e})(),x=new D,$=r("qpl")._(1056838280,"1566");function P(e,t){var n,r,o,a,i;return x.newScheduler(e,{concurrency:(n=t.concurrency)!=null?n:1,defaultSamplingRate:(r=t.defaultSamplingRate)!=null?r:1e4,maxTaskLimit:t.maxTaskLimit,shouldContinueAfterTimeout:(o=t.shouldContinueAfterTimeout)!=null?o:!1,throttleTicks:Math.round(((a=t.maxThrottleMs)!=null?a:x.maxThrottleMs)/x.tickFrequencyMs),ticksToTimeout:Math.round(((i=t.timeoutMs)!=null?i:L)/x.tickFrequencyMs),warnTaskLimit:t.warnTaskLimit})}function N(e){e.tickFrequencyMs!=null&&(x.tickFrequencyMs=e.tickFrequencyMs),e.maxThrottleMs!=null&&(x.maxThrottleMs=e.maxThrottleMs),e.maxWaitTicksMultiplierForFinalPromotion!=null&&(x.maxWaitTicksMultiplierForFinalPromotion=e.maxWaitTicksMultiplierForFinalPromotion),e.qplEventType!=null&&($=e.qplEventType),(C||(C=r("QuickPerformanceLogger"))).setAlwaysOnSampleRate($,1)}function M(){x.TEST_ONLY_reset()}l.BACKGROUND_PRIORITY=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,l.BLOCKING_PRIORITY=o("WorkerSchedulerPriority").BLOCKING_PRIORITY,l.REGULAR_PRIORITY=o("WorkerSchedulerPriority").REGULAR_PRIORITY,l.SchedulerExecutionState=I,l.makeScheduler=P,l.configWorkerScheduler=N,l.TEST_ONLY_reset=M}),98);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t!=null&&(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP))}l.default=u}),98);
__d("last",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;if(Array.isArray(e)||typeof e=="string")e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;return t?t.value:null}i.default=e}),66);/*FB_PKG_DELIM*/
__d("EBDeps",["FBLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){if(e==null)throw r("err")("EBDeps is not initialized");return e}function u(t,n){if(e==null){var o={},a=function(a){var e=t[a];if(e==null)return 1;e instanceof Function?o[a]=function(){r("FBLogger")("wmi_eb").info("EBDeps: function %s, reason %s",a,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e.apply(t,i)}:(r("FBLogger")("wmi_eb").info("EBDeps: %s is not function",a),o[a]=e)};for(var i of Object.keys(t))a(i);e=o}}l.getDeps=s,l.setDeps=u}),98);
__d("LSEncryptedBackupsBackupTenancy",[],(function(t,n,r,o,a,i){var e=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});i.default=e}),66);
__d("WAPubSub",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.publish=function(t){this.$1.forEach(function(e){return e(t)})},t.subscribe=function(t){var e=this;return this.$1.add(t),function(){e.$1.delete(t)}},e})(),s=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.publish=function(t,n){var e=this.$2(t);e.forEach(function(e){return e(n)})},t.$2=function(t){(!this.$1.has(t)||this.$1.get(t)==null)&&this.$1.set(t,new Set);var e=this.$1.get(t);if(e==null)throw r("err")("Key space should not be null");return e},t.subscribe=function(t,n){var e=this.$2(t);return e.add(n),function(){e.delete(n)}},e})();function u(){return new e}l.WAPubSub=e,l.WAKeyedPubSub=s,l.simplePubSub=u}),98);
__d("WAGenericStateManager",["Promise","WAPubSub"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$2=o("WAPubSub").simplePubSub(),this.$1=e}var r=t.prototype;return r.onSet=function(t){return this.$2.subscribe(t)},r.set=function(t){return this.$1=t,this.$2.publish(t),this.$1},r.get=function(){return this.$1},r.waitForValue=function(r){var t=this;return this.$1===r?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e){var n=t.onSet(function(t){t===r&&(n(),e())})})},t})();l.WAGenericStateManager=s}),98);
__d("MAWEBEnabledStateManager",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,null)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){return this.get()===!0},n.waitForEBEnabled=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager);l.MAWEBEnabledStateManager=e}),98);
__d("MAWEBSwitch",["ExecutionEnvironment","MAWEBEnabledStateManager","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EBIsEbEnabledSubscriber").__setRef("MAWEBSwitch"),u=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager;(e||(e=r("ExecutionEnvironment"))).isInMainThread===!0&&s.load().then(function(e){return e.subscribeToEbChanges(function(e){u.set(e)})});var c=u;l.default=c}),98);
__d("MAWEncryptedBackupUtils",["FBLogger","I64","LSAuthorityLevel","LSDict","LSIntEnum","LSShape","LSVec","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.secure_encrypted_backups_client_state)).then(function(e){return c(e,t)})}function c(t,n){var a;if(t==null){n!=null&&n.addPoint("get_backup_tenancy_null_client_state_row");return}var i=(a=t.backupTenancy)!=null?a:(e||(e=o("I64"))).one,l=t.authorityLevel;if(n!=null&&n.addPoint("get_backup_tenancy",{int:{authorityLevel:(e||(e=o("I64"))).to_int32(l!=null?l:(e||(e=o("I64"))).zero),backupTenancy:e.to_int32(i!=null?i:(e||(e=o("I64"))).zero)}}),i!=null&&(e||(e=o("I64"))).equal((s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),l))return i}function d(e,t){var n=new Set,o=e.length;for(var a of e.entries()){var i=a[0],l=a[1];n.has(l)&&r("FBLogger")("wmi_eb").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",t,i,o),n.add(l)}}function m(t){var n=t.map(function(t){var n=t.toplevelProtobuf,a=o("LSShape").ofRecord({decrypted_protobuf:n.decryptedProtobuf,protobuf_timestamp_ms:(e||(e=o("I64"))).of_float(n.protobufTimestampMS)}),i=new(r("LSDict"));return t.supplementalProtobufs.forEach(function(t,n){i.set(n,o("LSShape").ofRecord({decrypted_protobuf:t.decryptedProtobuf,protobuf_timestamp_ms:(e||(e=o("I64"))).of_float(t.protobufTimestampMS)}))}),o("LSShape").ofRecord({otid:t.otid,supplemental_protobufs:i,tags:t.tags,toplevel_protobuf:a})});return r("LSVec").ofArray(n)}function p(t){var n=r("LSVec").toArray(t),a=n.map(function(e){return o("LSShape").toRecord(e)});return a.map(function(t){var n=o("LSShape").toRecord(t.toplevel_protobuf),r={decryptedProtobuf:n.decrypted_protobuf,protobufTimestampMS:(e||(e=o("I64"))).to_float(n.protobuf_timestamp_ms)},a=new Map,i=t.supplemental_protobufs;return i.forEach(function(t,n){var r=o("LSShape").toRecord(t);a.set(n,{decryptedProtobuf:r.decrypted_protobuf,protobufTimestampMS:(e||(e=o("I64"))).to_float(r.protobuf_timestamp_ms)})}),{otid:t.otid,supplementalProtobufs:a,tags:t.tags,toplevelProtobuf:r}})}l.getBackupTenancy=u,l.getBackupTenancyFromClientStateRow=c,l.logIfDuplicateMessagesFoundInRestore=d,l.convertJSTypesToLSTypesForRestoreJob=m,l.convertLSTypesToJSTypesForRestoreJob=p}),98);
__d("EBIsEbEnabled",["EBDeps","FBLogger","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBSwitch","MAWEncryptedBackupUtils","WAResultOrError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){return o("MAWEncryptedBackupUtils").getBackupTenancy(t,n).then(function(t){return t!=null&&(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}function c(){try{return o("WAResultOrError").makeResult(r("MAWEBSwitch").isEnabled())}catch(e){return r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Failed to check EB enabled"),o("WAResultOrError").makeResult(!1)}}async function d(){var e=await o("EBDeps").getDeps().getLSDB();return u(e.tables)}l.isEbEnabledLS=u,l.isEbEnabledEbSwitch=c,l.isEBEnabled=d}),98);
__d("InstagramMediaProductTypeName",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LIVE:"live",FEED:"feed",STORY:"story",DIRECT:"direct",IGTV:"igtv",NAMETAG:"nametag",DIRECT_AUDIO:"direct_audio",CAROUSEL_ITEM:"carousel_item",CAROUSEL_CONTAINER:"carousel_container",PROFILE_PIC:"profile_pic",AD:"ad",AR_EFFECT_PREVIEW:"ar_effect_preview",DIRECT_PERMANENT:"direct_permanent",SELFIE_STICKER:"selfie_sticker",COWATCH_LOCAL:"cowatch_local",CLIPS:"clips",GUIDE_MEDIA_FACADE:"guide_media_facade",FUNDRAISER_COVER:"fundraiser_cover",LIVE_ARCHIVE:"live_archive",HIGHLIGHT_POST_FACADE:"highlight_post_facade",DIRECT_THREAD:"direct_thread",SCHEDULED_LIVE:"scheduled_live",RATINGS_AND_REVIEWS:"ratings_and_reviews",DIRECT_HEADMOJI:"direct_headmoji",CLIPS_PREVIEW:"clips_preview",REPOST_MEDIA_FACADE:"repost_media_facade",STORY_INTERACTION_RESPONSE:"story_interaction_response",MEDIA_KIT:"media_kit",TEXT_POST:"text_post",NOTE_AUDIO:"note_audio",DIRECT_MESSAGE_COMMENT_FACADE:"direct_message_comment_facade"}),l=e;i.default=l}),66);
__d("IGDThreadTTLCUtils",["IGDInstamadilloUtils","InstagramMediaProductTypeName","LSThreadBitOffset","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=[225,235,226,227,228,229,230,231,232,233,234,236];function s(e,t){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:o("LSThreadBitOffset").has(t,e)}function u(e){return s(e,225)}function c(e){return!r("gkx")("2400")||!o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?!1:s(e,235)}function d(e){return s(e,226)}function m(e){return s(e,227)}function p(e){return s(e,228)}function _(e){return s(e,229)}function f(e){return s(e,230)}function g(e){return s(e,231)}function h(e){return s(e,232)}function y(e){return s(e,233)}function C(e){return s(e,234)}function b(e){return s(e,236)}function v(e){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:S(e)}function S(t){return t==null?!1:e.some(function(e){return o("LSThreadBitOffset").has(e,t)})}function R(e,t){var n=e.isDisappearingModeSettingOn,o=e.isTTLCClipEnabled,a=e.isTTLCGenericXMAShareEnabled,i=e.isTTLCMediaShareEnabled,l=e.isTTLCStoryShareEnabled,s=r("InstagramMediaProductTypeName").cast(t);if(s==null||n||!r("qex")._("954"))return!1;switch(s){case"feed":case"carousel_container":case"ad":return i;case"clips":return o;case"story":return l;case"live":return a;default:return!1}}function L(e){return new Map([["Text",u(e)],["Clip",d(e)],["Reel Share",m(e)],["Media Share",p(e)],["Story Share",_(e)],["Link",f(e)],["Generic XMA",g(e)],["Profile",b(e)],["Image",h(e)],["Video",y(e)],["Audio",C(e)],["Gif/Sticker/Avatar",void 0],["Raven",void 0],["Media Collection",void 0],["Calling",c(e)],["Rest of Message Types",void 0]])}function E(e){return{is_instamadillo_ttlc:String(v(e)),is_instamadillo_ttlc_audio:String(C(e)),is_instamadillo_ttlc_clip:String(d(e)),is_instamadillo_ttlc_generic_xma:String(g(e)),is_instamadillo_ttlc_image:String(h(e)),is_instamadillo_ttlc_link:String(f(e)),is_instamadillo_ttlc_media_share:String(p(e)),is_instamadillo_ttlc_profile:String(b(e)),is_instamadillo_ttlc_reel_share:String(m(e)),is_instamadillo_ttlc_story_share:String(_(e)),is_instamadillo_ttlc_text:String(u(e)),is_instamadillo_ttlc_video:String(y(e))}}function k(e){return{is_instamadillo_ttlc:v(e),is_instamadillo_ttlc_audio:C(e),is_instamadillo_ttlc_clip:d(e),is_instamadillo_ttlc_generic_xma:g(e),is_instamadillo_ttlc_image:h(e),is_instamadillo_ttlc_link:f(e),is_instamadillo_ttlc_media_share:p(e),is_instamadillo_ttlc_profile:b(e),is_instamadillo_ttlc_reel_share:m(e),is_instamadillo_ttlc_story_share:_(e),is_instamadillo_ttlc_text:u(e),is_instamadillo_ttlc_video:y(e)}}function I(e,t){if(e==null)return!1;switch(e.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":return p(t);case"XMSGIgReceiverFetchXmaProfileFetchParams":return g(t);case"XMSGIgReceiverFetchXmaClipFetchParams":return d(t);default:return!1}}function T(e){return e==null?!1:o("LSThreadBitOffset").has(261,e)}l.isInstamadilloTTLCTextEnabled=u,l.isInstamadilloTTLCCallingEnabled=c,l.isInstamadilloTTLCClipEnabled=d,l.isInstamadilloTTLCReelShareEnabled=m,l.isInstamadilloTTLCMediaShareEnabled=p,l.isInstamadilloTTLCStoryShareEnabled=_,l.isInstamadilloTTLCLinkEnabled=f,l.isInstamadilloTTLCGenericXmaEnabled=g,l.isInstamadilloTTLCImageEnabled=h,l.isInstamadilloTTLCVideoEnabled=y,l.isInstamadilloTTLCAudioEnabled=C,l.isInstamadilloTTLCProfileEnabled=b,l.isIGDTTLCEnabledForThread=v,l.threadHasInstamadilloTTLCCapability=S,l.isIGDTTLCEnabledForIGDCandidate=R,l.getTtlcMessageTypeMap=L,l.getTTLCLoggingExtraData=E,l.getTTLCBooleanAnnotations=k,l.isXmaReceiverFetchTTLCEnabled=I,l.isInstamadilloOptionalE2EE=T}),98);
__d("IGDInstamadilloUtils",["IGDThreadTTLCUtils","LSThreadBitOffset","gkx","isInstamadillo"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e==null?void 0:e.transportKey)==="Instamadillo"}function s(e){return e==null?!1:o("LSThreadBitOffset").has(214,e)}function u(e){return e==null?!1:o("LSThreadBitOffset").has(212,e)}function c(e){return e==null?!1:o("LSThreadBitOffset").has(38,e)}function d(e){return e==null?!1:o("LSThreadBitOffset").has(211,e)}function m(e){var t=s(e),n=p(e);return n||t}function p(e){if(r("gkx")("6650"))return!1;var t=c(e),n=s(e),a=o("IGDThreadTTLCUtils").threadHasInstamadilloTTLCCapability(e);return t&&(n||a)}function _(t,n){var r=e(t)&&t.ephemeralExpirationTs!=null;return n&&r||!n&&!r}function f(t){var n=e(t);return n?r("isInstamadillo")():!0}l.isInstamadilloMessage=e,l.isInstamadilloCutover=s,l.isInstamadilloDMToggleEnabled=u,l.isIGDDisappearingModeEnabled=c,l.isInstamadilloTransportEnabled=d,l.isInstamadilloHardblockEnabled=m,l.isDMHardblockedEnabled=p,l.shouldRenderMessageReply=_,l.canMutateIGDMessage=f}),98);
__d("IGDRouteProvider.react",["react","useCurrentRoute"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext;function m(e){var t,n=e==null||(t=e.params)==null?void 0:t.thread_key;return n!=null&&typeof n=="string"?n:null}var p=c();function _(e){var t=e.children,n=r("useCurrentRoute")(),o=m(n);return s.jsx(p.Provider,{value:o,children:t})}_.displayName=_.name+" [from "+i.id+"]";function f(){return d(p)}l.IGDRouteContextProvider=_,l.useThreadKeyFromCurrentRoute=f}),98);
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e||(e=o("react"))).useEffect;function d(e){return babelHelpers.extends({},o("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(e),{is_dm:o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e),is_instamadillo:o("IGDInstamadilloUtils").isInstamadilloTransportEnabled(e),is_instamadillo_tlc:o("IGDInstamadilloUtils").isInstamadilloCutover(e)})}function m(e,t){var n,r=o("IGDInstamadilloUtils").isInstamadilloCutover(e),a=o("IGDInstamadilloUtils").isInstamadilloTransportEnabled(e),i=o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e);t.addAnnotationBoolean("is_instamadillo",a),t.addAnnotationBoolean("is_instamadillo_tlc",r),t.addAnnotationBoolean("is_dm",i),t.addAnnotationBoolean("is_instamadillo_ttlc",(n=o("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_audio",n.isInstamadilloTTLCAudioEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_clip",n.isInstamadilloTTLCClipEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",n.isInstamadilloTTLCGenericXmaEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_image",n.isInstamadilloTTLCImageEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_link",n.isInstamadilloTTLCLinkEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_media_share",n.isInstamadilloTTLCMediaShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_profile",n.isInstamadilloTTLCProfileEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",n.isInstamadilloTTLCReelShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_story_share",n.isInstamadilloTTLCStoryShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_text",n.isInstamadilloTTLCTextEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_video",n.isInstamadilloTTLCVideoEnabled(e))}function p(e){o("Int64Hooks").useEffectInt64(function(){r("InteractionTracing").getPendingInteractions().forEach(function(t){m(e,t)})},[e])}var _=new Set;function f(e){o("Int64Hooks").useEffectInt64(function(){var t=(s||(s=o("I64"))).to_string(e.threadKey);return r("InteractionTracing").getPendingInteractions().forEach(function(n){var r=_.has(t);n.addAnnotationBoolean("is_thread_visited",r),n.addAnnotation("thread_key",(s||(s=o("I64"))).to_string(e.threadKey)),e.consistentThreadFbid!=null&&n.addAnnotation("consistent_thread_fbid",(s||(s=o("I64"))).to_string(e.consistentThreadFbid)),n.addAnnotationInt("thread_type",(u||(u=o("LSIntEnum"))).toNumber(e.threadType)),e.threadSubtype!=null&&n.addAnnotation("thread_subtype",(s||(s=o("I64"))).to_string(e.threadSubtype))}),function(){_.add(t)}},[e])}function g(){var e=o("IGDRouteProvider.react").useThreadKeyFromCurrentRoute();c(function(){r("InteractionTracing").getPendingInteractions().forEach(function(t){if(e==null){t.addAnnotationInt("rendered_direct_null_state",1),t.addAnnotationInt("has_thread_key",0);return}t.addAnnotationInt("has_thread_key",1),t.addAnnotationInt("rendered_direct_null_state",0)})},[e])}l.getInstamadilloBooleanAnnotations=d,l.addInstamadilloAnnotationsToInteractionTrace=m,l.useAddInstamadilloAnnotationsToInteractionTraces=p,l.useAddThreadAnnotationToInteractionTraces=f,l.useAddThreadRouteAnnotations=g}),98);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,r){return new(u||(u=n("Promise")))(function(n,a){var i=o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(r).subscribe(function(t,r){if(r.operation!=="delete"&&(e||(e=o("I64"))).equal(r.value.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2)))return i(),n()})})}function d(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(n)).then(function(r){if(!(r!=null&&(e||(e=o("I64"))).equal(r.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))))return c(t,n)})}function m(e){return c(e,(s||(s=o("LSIntEnum"))).ofNumber(1))}l.maybeWaitForSyncGroup=d,l.use=m}),98);
__d("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyE2EEMetadataThreadExistsV2","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyE2EEMetadataThreadExistsV2"),a.threadType,a.threadKey,a.authorityLevel);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWReliabilityMonitor",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["PENDING","OK","ERROR","UNKNOWN"]),l=(function(){function e(){this.$1=new Map,this.$2=new Map,this.$3=[]}var t=e.prototype;return t.startMonitoring=function(t,n){var e=new u(t,n,this);return this.$1.set(t,e),this.recordReport(e),e},t.stopMonitoring=function(t){this.$1.delete(t.identifier),this.$2.delete(t.identifier)},t.recordReport=function(t){this.$2.set(t.identifier,babelHelpers.extends({},t.selfAssessmentFn(),{identifier:t.identifier,timestamp:Date.now()})),this.$4()},t.onAggregatedReportChange=function(t){this.$3.push(t)},t.$4=function(){var e=this.getAggregatedReportEntity();this.$3.forEach(function(t){return t(e)})},t.getAggregatedReportEntity=function(){return new s(this.$2)},t.triggerAllSelfAssessments=function(){var e=this;this.$1.forEach(function(t){e.recordReport(t)})},t.getAggregatedReport=function(){return this.triggerAllSelfAssessments(),this.$2},t.TEST_ONLY_reset=function(){this.$1.clear(),this.$2.clear(),this.$3=[]},e})(),s=(function(){function e(e){this.$1=e}var t=e.prototype;return t.toAckPayloadFormat=function(){return Array.from(this.$1.values())},t.toString=function(){var e=Object.fromEntries(this.$1);return JSON.stringify(e)},e})(),u=(function(){function e(e,t,n){this.identifier=e,this.selfAssessmentFn=t,this.$1=n}var t=e.prototype;return t.stopMonitoring=function(){this.$1.stopMonitoring(this)},t.updateState=function(){this.$1.recordReport(this)},e})(),c=new l;i.HealthReportState=e,i.ReliabilityAggregatedReport=s,i.ReportableModule=u,i.MAWReliabilityMonitorSingleton=c}),66);
__d("MAWSetupWorkerAuxStateForLogging",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=[],s=3,u={getWorkerAge:function(){if(u.workerStartTime!=null)return Math.floor((Date.now()-r("nullthrows")(u.workerStartTime))/1e3)},restartMessageTypes:[],restartReasons:[],workerStartTime:null,workerTerminatedPermanently:!1};function c(){u.workerStartTime=Date.now()}function d(t){e.push(t),e.length>s&&e.shift()}function m(){return e.join(",")}l.HEART_BEAT_HISTORY=e,l.WorkerLifeCycleState=u,l.resetWorkerCreationTime=c,l.addWorkerHeartbeatToHistory=d,l.getHeartbeatHistoryAsString=m}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","QuickPerformanceLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e={},e[o("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,e[o("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,e[o("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,e);(function(){Object.keys(d).forEach(function(e){o("MAWMIC").addIntAnnotation(e,0)})})();function m(e){o("MAWMIC").addIntAnnotation(e,++d[e])}function p(){return d.occamadilloBatchesSentToWorker}var _=new(r("Deferred")),f=new Set,g=new Set,h=new Set,y=new Set;function C(e){var t=e.callingSource;y.add((c||(c=o("LSIntEnum"))).toNumber(t)),o("MAWMIC").addIntArrayAnnotation(o("MAWMICSchema").ANNOTATIONS.occamadilloCallingSources,Array.from(y))}var b=null;function v(e){if(o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_start),f.has(e)){m(o("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}g.add(e),o("LSPlatformLsInitLog").LsSync.isRunning()&&h.add(e),b=(s||(s=r("QuickPerformanceLogger"))).currentTimestamp(),f.add(e),o("MAWMIC").addIntAnnotation("occamadilloThreadCount",f.size),o("LSPlatformLsInitLog").LsSync.hasEnded()&&m(o("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync)}function S(){o("MAWMIC").addBoolAnnotation("threadMappingAcked",!0)}async function R(e){if(r("gkx")("2661"))await _.getPromise();else{var t=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton;await o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(t,(c||(c=o("LSIntEnum"))).ofNumber(95))}g.delete(e),h.delete(e),o("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",f.size-g.size),E()}function L(){_.resolve(),E()}function E(){if(o("MAWMIC").addIntAnnotation("occamadilloThreadCount",f.size),o("LSPlatformLsInitLog").LsSync.hasEnded()&&h.size===0){o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end);return}g.size===0&&o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end)}l.incrementCounter=m,l.getBatchesSentNumber=p,l.markThreadPassedToNativeOp=C,l.addPendingThread=v,l.markBridgeCallAcked=S,l.removePendingThread=R,l.completeSync=L,l.maybeEndOccamadilloThreadMapping=E}),98);
__d("MAWInitError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.error=void 0,r.name="MAWInitError",r.message=t,r.error=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MAWInitError=e}),66);
__d("MAWInit",["MAWCurrentUser","MAWInitError","MAWMIC","MWQPLJoinId","MultipleTabsLogger","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","gkx","qpl","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(25310776,"6155"),u=!1,c=[],d=[],m=!1;function p(){m||(m=!0,r("QPLUserFlow").addAnnotations(s,{bool:{armadillo_init_sync_api_improvements:r("gkx")("24025"),isArmadilloPublicLaunchUser:r("gkx")("23405"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}}))}var _=!1,f=function(){return document.visibilityState!==void 0?document.visibilityState==="hidden":document.hidden},g=function(){y("visibility_change_"+(f()?"hidden":"visible"))};function h(){_||(o("MAWMIC").addPoint("maw_init_start"),_=!0,r("QPLUserFlow").start(s,babelHelpers.extends({annotations:{bool:{initiallyHidden:f()},string:{hostname:window.location.hostname}},cancelOnUnload:!0},o("MWQPLJoinId").allowJoinId?{joinOptions:{joinId:o("MWQPLJoinId").MWQPLJoinId}}:{})),r("QPLUserFlow").addAlignmentPointForJoin(s,0,{requestId:o("MWQPLJoinId").MWQPLJoinId}),o("MultipleTabsLogger").addAnnotationToQPLEvent(s),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){r("QPLUserFlow").addAnnotations(s,e)}),p(),document.addEventListener("visibilitychange",g),c.forEach(function(e){return e()}),d.forEach(function(e){return e()}),c.splice(0,c.length),d.splice(0,d.length))}function y(t,n){if(!_||u){if(!_&&n!=null&&n.allowEarlyLogPoints){var o=(e||(e=r("QuickPerformanceLogger"))).currentTimestamp();d.push(function(){r("QPLUserFlow").addPoint(s,t,{timestamp:o})})}return}p(),r("QPLUserFlow").addPoint(s,t)}function C(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{bool:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{bool:(o={},o[e]=t,o)})}function b(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{string:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{string:(o={},o[e]=t,o)})}function v(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{string_array:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{string_array:(o={},o[e]=t,o)})}function S(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{int:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{int:(o={},o[e]=t,o)})}function R(){p(),u=!0,m=!1,document.removeEventListener("visibilitychange",g)}function L(e,t){R();var n=t instanceof o("MAWInitError").MAWInitError&&t.error?t.error:t;r("QPLUserFlow").addAnnotations(s,{string:{errorDescription:n==null?void 0:n.message}}),r("QPLUserFlow").endFailure(s,e,{error:n}),o("MAWMIC").fail(e,n)}function E(e,t){R(),r("QPLUserFlow").addAnnotations(s,{string:{cancelReason:e}}),t&&r("QPLUserFlow").markError(s,"maw_init_cancel_with_error",{error:t}),r("QPLUserFlow").endCancel(s),o("MAWMIC").addStringAnnotation("mawInitCancelReason",e),o("MAWMIC").cancel("maw_init_cancel",t),r("QPLUserFlow").addAnnotations(r("qpl")._(29818881,"6702"),{string:{maw_cancel_reason:e,maw_error_message:t==null?void 0:t.message}})}function k(t){u||(R(),o("MAWMIC").addStringAnnotation("mawInitDropReason",t),(e||(e=r("QuickPerformanceLogger"))).markerDrop(s))}function I(){R(),r("QPLUserFlow").endSuccess(s),o("MAWMIC").addPoint("maw_init_end")}async function T(e,t){var n=e+"_start",r=e+"_end";y(n);var o=await t();return y(r),o}var D={isCompleted:function(){return u}},x={addBoolAnnotation:C,addIntAnnotation:S,addStringAnnotation:b,addStringArrayAnnotation:v,cancel:E,drop:k,endSuccess:I,fail:L,logPoint:y,measurePerformance:T,start:h};l.MAWInitState=D,l.MAWInit=x}),98);
__d("MAWStartupLoggingUtils",["FBLogger","MAWInit","MAWMIC","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a,i=(a=t==null?void 0:t.message)!=null?a:"";i.indexOf("Failed to execute 'importScripts'")>=0?o("MAWInit").MAWInit.fail("import_scripts_failure",r("getErrorSafe")(t)):o("MAWInit").MAWInit.fail("worker_error",r("getErrorSafe")(t)),r("FBLogger")("messenger_web").mustfix("[MAWWebWorkerSingletonAsync: "+e+"]: %s:%s:%s:%s:%s:%s:%s",JSON.stringify(t==null?void 0:t.message),t==null?void 0:t.lineno,t==null?void 0:t.colno,t==null?void 0:t.filename,JSON.stringify(t,window.Object.getOwnPropertyNames(t)),t==null?void 0:t.name,n)}function s(e){var t=function(o){var n=o==null?void 0:o.data;if(typeof n=="object")if((n==null?void 0:n.type)==="importScripts_error"){var a,i,l,s,u;e.removeEventListener("message",t);var c=r("FBLogger")("messenger_web");c=c.addMetadata("FBLOGGER","ERROR_STACK",(a=typeof(n==null?void 0:n.stack)=="string"?n==null?void 0:n.stack:JSON.stringify(n==null?void 0:n.stack))!=null?a:"no_stack");var d=n!=null?n:{},m=d.error_code,p=d.error_msg,_=d.error_name,f=d.source,g=n==null?void 0:n.perfEntry,h=typeof g=="object"&&g!=null?g:{},y=h.duration,C=h.encodedBodySize,b=h.responseStatus,v=h.transferSize;c.mustfix("[MAWWebWorkerSingletonAsync Script Import Error Details]: %s:%s:%s || errCode:%s || respStatus:%s || encBodySize:%s || duration:%s || transferSize:%s",f!=null&&JSON.stringify(f)||"no_source",_!=null&&JSON.stringify(_)||"no_name",p!=null&&JSON.stringify(p)||"no_msg",m!=null&&JSON.stringify(m)||"none",(i=JSON.stringify(b))!=null?i:"none",(l=JSON.stringify(C))!=null?l:"none",(s=JSON.stringify(y))!=null?s:"none",(u=JSON.stringify(v))!=null?u:"none")}else(n==null?void 0:n.type)==="importScripts_success"&&e.removeEventListener("message",t)};e.addEventListener("message",t)}var u=new Set(["worker_connection_established","worker_init_point_hsdp_end","worker_init_point_hblp_end","get_worker_rev_ack_received","old_worker_shutdown_end","old_worker_shutdown_start"]);function c(e){var t=e.data.annotations;if(t!=null){var n={allowEarlyAnnotations:!0};Object.keys(t).forEach(function(e){var r,a=(r=t[e])!=null?r:{};Object.entries(a).forEach(function(t){var r=t[0],a=t[1],i="workerInit"+r.charAt(0).toUpperCase()+r.substring(1);e==="int"&&typeof a=="number"?(o("MAWInit").MAWInit.addIntAnnotation(i,a,n),o("MAWMIC").addIntAnnotation(i,a)):e==="string"&&typeof a=="string"?(o("MAWInit").MAWInit.addStringAnnotation(i,a,n),o("MAWMIC").addStringAnnotation(i,a)):e==="bool"&&typeof a=="boolean"&&(o("MAWInit").MAWInit.addBoolAnnotation(i,a,n),o("MAWMIC").addBoolAnnotation(i,a))})})}var r={allowEarlyLogPoints:!0};if(e.type==="point"){if(u.has(e.data.event)){var a="worker_"+e.data.event;o("MAWInit").MAWInit.logPoint(a,r),o("MAWMIC").addPoint(a)}}else e.type==="end"&&(e.data.cancel===!0?o("MAWInit").MAWInit.logPoint("worker_creation_cancel",r):e.data.errorName!=null&&(o("MAWInit").MAWInit.addStringAnnotation("errorDescription",e.data.errorName,{allowEarlyAnnotations:!0}),o("MAWInit").MAWInit.logPoint("worker_creation_fail",r)))}l.logWorkerError=e,l.setImportScriptsErrorListener=s,l.logSharedWorkerQPLEvents=c}),98);
__d("MAWWorkerWatchdogRecovery",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}i.setRecoveryForWatchdog=l,i.getWorkerRecoveryForWatchdog=s}),66);
__d("SharedWorkerDevChangeManager",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=!1,s=new Set;function u(e,t){var n=t.storageWorkerResource,r=t.tabResource;return!0}function c(e){return!1}function d(e){}l.shouldUseStorageWorkerForDev=u,l.shouldUpgradeWorkerForDevExperimental=c,l.trackCreatedWorker=d}),98);
__d("SharedWorkerEventManager",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=function(n){var e,o,a;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="console"&&typeof((o=n.data)==null?void 0:o.response)=="object"&&((a=n.data)==null?void 0:a.response)!=null){var i=n.data.response,l=i.args,s=i.method;if(typeof s!="string"||!["log","error","info","debug","warn"].includes(s)){r("FBLogger")("worker").mustfix("Unexpected console method: %s",String(s));return}if(!Array.isArray(l)){r("FBLogger")("worker").mustfix('Expected console args "%s" to be an array',JSON.stringify(l));return}t({method:s,args:l})}},o=e.port;return o.addEventListener("message",n),function(){return o.removeEventListener("message",n)}}function s(e,t){var n=function(n){var e;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="sw-uncaught-error"){var r,o,a=typeof((r=n.data)==null?void 0:r.e)=="object"?(o=n.data.e)!=null?o:{}:{},i=a.colno,l=a.error,s=a.filename,u=a.lineno,c=a.message;t({error:l instanceof Error?l:null,errorObject:{lineno:typeof u=="number"?u:null,colno:typeof i=="number"?i:null,filename:typeof s=="string"?s:null,message:typeof c=="string"?c:null}})}},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function u(e,t,n){var o=function(o){var e;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="sw-get-rev"&&typeof o.data.response=="object"){var a,i;t==null||t.markPoint("get_worker_rev_ack_received");var l=typeof o.data=="object"&&typeof((a=o.data)==null?void 0:a.response)=="object"?(i=o.data)==null?void 0:i.response:{},s=l==null?void 0:l.workerRevision,u=l==null?void 0:l.spinTime,c=l==null?void 0:l.workerChecksum;if(s==null||typeof s!="number"){t==null||t.addAnnotations({string:{malformedData:"rev is non-number"}}),r("FBLogger")("worker").mustfix("Expected worker rev to be non-null number, but instead received: %s",String(s));return}if(u==null||typeof u!="number"){t==null||t.addAnnotations({string:{malformedData:"spin_time is non-number"}}),r("FBLogger")("worker").mustfix("Expected worker spin time to be non-null number, but instead received: %s",String(u));return}n({rev:s,spinTime:u,workerChecksum:typeof c=="string"?c:void 0})}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function c(e,t,n){var r=function(a){var o;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="sw-shutdown"&&typeof a.data.response=="object"){var i,l,s,u,c,d,m=typeof((i=a.data.response)==null?void 0:i.reason)=="string"?(l=a.data.response)==null?void 0:l.reason:null,p=typeof((s=a.data.response)==null?void 0:s.workerID)=="string"?(u=a.data.response)==null?void 0:u.workerID:null,_=typeof((c=a.data.response)==null?void 0:c.isInitialized)=="boolean"?(d=a.data.response)==null?void 0:d.isInitialized:null;t({reason:m,workerID:p,isInitialized:_}),(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function d(e,t){e.port.addEventListener("message",function(e){var n,r,o;typeof e.data=="object"&&((n=e.data)==null?void 0:n.type)==="sw-uptime-tracking"&&typeof((r=e.data)==null?void 0:r.response)=="object"&&typeof((o=e.data)==null||(o=o.response)==null?void 0:o.trackerID)=="number"&&t({trackerID:e.data.response.trackerID})})}function m(e,t,n){var o=function(o){var e,a;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="execute-worker-ack"&&typeof((a=o.data)==null?void 0:a.response)=="object"){var i,l,s,u=typeof o.data=="object"&&typeof((i=o.data)==null?void 0:i.response)=="object"?(l=(s=o.data)==null?void 0:s.response)!=null?l:{}:{},c=u.error,d=u.errorGettingSiteData,m=u.firstInit,p=u.spinMode,_=u.spinTime,f=u.workerRevision;if(typeof m!="boolean"){t==null||t.addAnnotations({string:{malformedData:"firstInit is non-boolean"}}),r("FBLogger")("worker").mustfix("Expected firstInit to be a boolean, but instead received: %s",String(m));return}var g=d!=null?d:c;if(typeof g=="string")return n({err:g,isFirstInit:m});if(typeof f=="number"&&typeof p=="number"&&typeof _=="number")return n({workerRev:f,workerSpinTime:_,workerSpinMode:p,isFirstInit:m});t==null||t.addAnnotations({string:{malformedData:"workerRevision, spinMode, and/or spinTime are non-numbers"}}),r("FBLogger")("worker").mustfix("Expected workerRevision, spinMode, and spinTime to be non-null number, but instead received: %s %s %s",String(f),String(p),String(_))}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function p(e,t,n,o){var a=function(l){var i,s;if(typeof l.data=="object"&&((i=l.data)==null?void 0:i.type)==="execute-worker-imports"&&typeof((s=l.data)==null?void 0:s.response)=="object"){var u,c,d;(o==null?void 0:o.once)===!0&&e.port.removeEventListener("message",a),t==null||t.markPoint("bundle_imports_ack");var m=typeof l.data=="object"&&typeof((u=l.data)==null?void 0:u.response)=="object"?(c=(d=l.data)==null?void 0:d.response)!=null?c:{}:{},p=m.attempts,_=m.err;if(_!=null&&typeof _!="string"){t==null||t.addAnnotations({string:{malformedData:"err is neither null or a string"}}),r("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(_));return}if(p!=null&&typeof p!="number"){t==null||t.addAnnotations({string:{malformedData:"attempts is neither null or a number"}}),r("FBLogger")("worker").mustfix("Expected attempts to be a number or null, but instead receieved: %s",String(p));return}n({err:_,attempts:p})}},i=e.port;return i.addEventListener("message",a),function(){return i.removeEventListener("message",a)}}function _(e,t,n){var o=function(o){var e;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="ww-hrp-init"){var a,i,l;t==null||t.markEventEnd("hrp_init");var s=typeof o.data=="object"&&typeof((a=o.data)==null?void 0:a.response)=="object"?(i=(l=o.data)==null?void 0:l.response)!=null?i:{}:{},u=s.err;if(u!=null&&typeof u!="string"){t==null||t.addAnnotations({string:{malformedData:"err is neither null or a string"}}),r("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(u));return}n({err:u})}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function f(e,t){var n=function(n){var e,r,o;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="worker-init-mark"&&typeof((r=n.data)==null?void 0:r.response)=="object"&&typeof((o=n.data)==null||(o=o.response)==null?void 0:o.point)=="string"){var a;t((a=n.data)==null||(a=a.response)==null?void 0:a.point)}},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function g(e,t,n){var r=function(a){var o,i,l;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="self-terminate"&&typeof((i=a.data)==null?void 0:i.response)=="object"&&typeof((l=a.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c,d,m,p,_,f=(s=a.data)==null||(s=s.response)==null?void 0:s.from,g=typeof((u=a.data)==null||(u=u.response)==null?void 0:u.reason)=="string"?(c=a.data)==null||(c=c.response)==null?void 0:c.reason:"unknown",h=typeof((d=a.data)==null||(d=d.response)==null?void 0:d.workerID)=="string"?(m=a.data)==null||(m=m.response)==null?void 0:m.workerID:"unknown",y=typeof((p=a.data)==null||(p=p.response)==null?void 0:p.error)=="string"?(_=a.data)==null||(_=_.response)==null?void 0:_.error:void 0;(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r),t(f,g,h,y)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function h(e,t){var n=t!=null?t:{},r=n.reason,o=n.upgrade;e.port.postMessage({type:"sw-shutdown",args:[{reason:r,upgrade:o}]})}function y(e){e.port.postMessage({type:"sw-get-rev",args:[]})}function C(e,t){var n=t!=null?t:{},r=n.isDev,o=n.jsModuleResource;e.port.postMessage({type:"execute-worker",args:[o!=null?o:{},r]})}var b=["no-hrp","initialized","processed"];function v(e,t,n){var r=function(a){var o,i,l;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="connection-ack"&&typeof((i=a.data)==null?void 0:i.response)=="object"&&typeof((l=a.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c,d,m,p=typeof((s=a.data)==null||(s=s.response)==null?void 0:s.workerID)=="string"?(u=a.data)==null||(u=u.response)==null?void 0:u.workerID:void 0,_=typeof((c=a.data)==null||(c=c.response)==null?void 0:c.hrpStatus)=="string"?(d=a.data)==null||(d=d.response)==null?void 0:d.hrpStatus:void 0;t((m=a.data)==null||(m=m.response)==null?void 0:m.from,p,_!=null&&b.includes(_)?_:void 0),(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function S(e,t){var n=function(n){t(n.data)},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function R(e){e.port.postMessage({type:"ww-connection-ack"})}function L(e,t,n){var r=t.hrp,o=t.isDev,a=t.js_env;e.port.postMessage({type:"ww-hrp-init",hrp:r,is_dev:o,js_env:a,tiered:!0})}function E(e,t){var n=t.trackerID;e.port.postMessage({type:"sw-uptime-tracking",args:{trackerID:n}})}function k(t){var n=e(t,function(e){var t,n=e.args,r=e.method;(t=console)[r].apply(t,n)}),o=s(t,function(e){var t=e.error,n=e.errorObject;t!=null?r("FBLogger")("worker").catching(t).mustfix("Shared Worker uncaught error."):r("FBLogger")("worker").mustfix("Shared Worker uncaught error with no Error object. %s:%d:%d:%s",n.message,n.lineno,n.colno,n.filename)});return function(){n(),o()}}l.registerLogFowardingListener=e,l.registerUncaughtErrorForwardingListener=s,l.registerGetWorkerRevListener=u,l.registerWorkerShutdownListener=c,l.registerUptimeTrackerListener=d,l.registerExecuteWorkerAckListener=m,l.registerExecuteWorkerImportsListener=p,l.registerHrpInitListener=_,l.registerWorkerInitPointsListener=f,l.registerWorkerSelfTerminationListener=g,l.emitWorkerShutdown=h,l.emitGetRev=y,l.emitExecuteWorker=C,l.registerConnectionAckListener=v,l.registerAnyMessageListener=S,l.emitConnectionAckRequest=R,l.emitHrpInit=L,l.emitUptimeTracking=E,l.registerForwardListeners=k}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Run","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e){r("FBLogger")("messenger_web").mustfix(e)}function s(t,n){var a="Failed to execute 'request' on 'LockManager'",i="Lock broken by another request with the 'steal' option.",l=function(t,n,r){var e=t.get(n);if(e!=null)return e;var o=r();return t.set(n,o),o};try{var s=o("LocalStorageWrapper").getStorage(e),u=function(r,a){o("LocalStorageWrapper").setItemGuarded(s,r,a,e,n==null?void 0:n.onQuotaExceeded)},c=function(n){o("LocalStorageWrapper").removeItemGuarded(s,n,e)},d=function(n){return o("LocalStorageWrapper").getItemGuarded(s,n,e)},m=(function(){function e(e,t){this.lockName=e,this.tabId=t,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var t=e.prototype;return t.run=function(t){return this.$1(t,0)},t.$1=function(t,n){var e=this,o=function(o){return window.requestAnimationFrame(function(){return e.$1(t,n+1).then(o)})},a=function(t){return d(t)==null};return u(this.lockA,this.tabId),new Promise(function(i){var l=function(){try{t(),i()}finally{c(e.lockB),c(e.lockA)}};a(e.lockB)||n>10?(n>10&&r("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),u(e.lockB,e.tabId),d(e.lockA)===e.tabId?l():window.requestAnimationFrame(function(){d(e.lockB)===e.tabId?l():o(i)})):o(i)})},e})(),p=(function(){function e(t){this.tabId=t,this.lock=new m(e.tabsKey,t),r("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(t){return e.isAlive(t)})}e.isAlive=function(n){var t=d(e.$3(n));return t==null?!1:Date.now()-parseFloat(t)<1e3};var t=e.prototype;return t.keepOnlyTabs=async function(n){await this.lock.run(function(){var t,r=JSON.parse((t=d(e.tabsKey))!=null?t:"[]").filter(n);r.length>0?u(e.tabsKey,JSON.stringify(r)):c(e.tabsKey)})},t.$2=function(){var t=e.$3(this.tabId);u(t,Date.now().toString());var n=r("setInterval")(function(){u(t,Date.now().toString())},500);o("Run").onUnload(function(){r("clearInterval")(n),c(t)})},t.$1=async function(){var t=this;await this.lock.run(function(){var n,r=JSON.parse((n=d(e.tabsKey))!=null?n:"[]");u(e.tabsKey,JSON.stringify([].concat(r,[t.tabId])))}),o("Run").onUnload(function(){return r("promiseDone")(t.keepOnlyTabs(function(e){return e!==t.tabId}))})},e.$3=function(t){return"$navigator.heartbeat-"+t},e})();p.tabsKey="$navigator.heartbeat-tabs";var _=(function(){function e(t,n){var a=this;this.requests=new Map,this.name=t,this.tabId=n,this.queueKey=e.storagePrefix+"-"+t+"-q",this.currentOwnerKey=e.storagePrefix+"-"+t+"-o",this.lock=new m(e.storagePrefix+"-"+t,this.tabId),o("Run").onUnload(function(){r("promiseDone")(a.keepOnlyRequests(function(e){return(e==null?void 0:e.t)!==a.tabId}))})}var t=e.prototype;return t.enqueue=async function(t,n,o){var e=this,a=r("uuidv4")().toString(),i={t:this.tabId,u:a},l=function(){t(null),e.markRequestReleased(a)},s=function(){t(a),e.markRequestReleased(a)};if(this.requests.set(a,[function(){return t(a)},function(){n(),e.markRequestReleased(a)}]),(o==null?void 0:o.signal)!=null&&(o.signal.onabort=function(){r("promiseDone")(e.keepOnlyRequests(function(e){return(e==null?void 0:e.u)!==a})),s()},o.signal.aborted))return s();await this.lock.run(function(){var t=e.getOwner();if((o==null?void 0:o.steal)===!0&&e.$1(t==null?void 0:t.u),t==null||(o==null?void 0:o.steal)===!0||!p.isAlive(t.t))e.$2(e.currentOwnerKey,babelHelpers.extends({},i,(o==null?void 0:o.steal)===!0?{s:!0}:{})),e.$3(a);else if((o==null?void 0:o.ifAvailable)!==!0){var n=e.getQueue();n.push(i),e.$2(e.queueKey,n)}else l()})},t.dequeue=async function(n){var t=this,r,o=null;await this.lock.run(function(){var r=t.getOwner();if(!((r==null?void 0:r.t)!==t.tabId||(r==null?void 0:r.u)!==n)){var a=t.getQueue(),i=e.getNextOwner(a),l=i[0],s=i[1];o=l,t.$2(t.currentOwnerKey,l),t.$2(t.queueKey,s)}}),this.$3((r=o)==null?void 0:r.u)},t.storageChangedOnOtherTab=async function(t,n){var e=this;t==="o"&&await this.lock.run(function(){var t=e.getOwner();if(t!=null&&(e.$3(t==null?void 0:t.u),t.s===!0)){var r=n==null?void 0:n.oldValue;if(r!=null){var o=JSON.parse(r);o.t===e.tabId&&e.$1(o.u)}}})},t.getQueue=function(){var e;return(e=this.$4(this.queueKey))!=null?e:[]},t.getOwner=function(){return this.$4(this.currentOwnerKey)},e.getQueueNameAndStorageType=function(n){if(!n.startsWith(e.storagePrefix))return null;var t=n.slice(e.storagePrefix.length+1,n.length-2),o=n.charAt(n.length-1);switch(o){case"q":case"o":case"a":case"b":break;default:throw r("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+n)}return[t,o]},e.getNextOwner=function(t){for(var e=0;e<t.length;e+=1)if(p.isAlive(t[e].t))return[t[e],t.slice(e+1)];return[null,[]]},t.$4=function(t){var e=d(t);return e!=null?JSON.parse(e):null},t.$2=function(t,n){var e=n==null||Array.isArray(n)&&n.length===0?null:JSON.stringify(n);e==null?c(t):u(t,e)},t.keepOnlyRequests=async function(n){var t=this;await this.lock.run(function(){var r=t.getOwner(),o=t.getQueue().filter(n);if(n(r))t.$2(t.queueKey,o);else{var a=e.getNextOwner(o),i=a[0],l=a[1];t.$2(t.currentOwnerKey,i),t.$2(t.queueKey,l)}})},t.markRequestReleased=function(t){t!=null&&this.requests.delete(t)},t.$3=function(t){if(t!=null){var e=this.requests.get(t);if(e!=null){var n=e[0];n()}}},t.$1=function(t){if(t!=null){var e=this.requests.get(t);if(e!=null){var n=e[0],r=e[1];r()}}},e})();_.storagePrefix="$navigator.locks";var f=(function(){function t(t){this.$1=new Map,this.storage=o("LocalStorageWrapper").getStorage(e),this.tabId=t;var n=new p(this.tabId);r("promiseDone")(this.$2()),this.$3()}var n=t.prototype;return n.request=function(){for(var e=this,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return new Promise(function(t,l){r("promiseDone")((async function(t){var s=n[0],u=n.length===3?n[1]:null,c=n.length===2?n[1]:n[2];if(s.startsWith("-"))throw new DOMException("Names cannot start with '-'.",a);if((u==null?void 0:u.ifAvailable)===!0&&(u==null?void 0:u.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",a);var d=e.$4(s),m=await new Promise(function(e){r("promiseDone")(d.enqueue(e,function(){l(new DOMException(i,a))},u))});if((u==null||(t=u.signal)==null?void 0:t.aborted)===!0)throw new DOMException("The request was aborted.",a);try{var p;await c(m!=null?{mode:(p=u==null?void 0:u.mode)!=null?p:o("LockManager").LockMode.Exclusive,name:s}:null)}finally{m!=null&&await d.dequeue(m),d.markRequestReleased(m)}})(),t,l)})},n.query=function(){var e=[],t=[];for(var n of this.$5())if(n!=null){var r={mode:o("LockManager").LockMode.Exclusive,name:n.name};if(n.getOwner()!=null)e.push(r);else for(var a of n.getQueue())t.push(r)}return Promise.resolve({held:e,pending:t})},n.$4=function(t){var e=this;return l(this.$1,t,function(){return new _(t,e.tabId)})},n.$3=function(){var e=this;window.addEventListener("storage",function(t){var n,o=t.key;if(!(t.storageArea!==e.storage||o==null)){var a=_.getQueueNameAndStorageType(o);if(a!=null){var i=a[0],l=a[1];r("promiseDone")((n=e.$4(i))==null?void 0:n.storageChangedOnOtherTab(l,t))}}})},n.$2=async function(){await Promise.all(this.$5().map(function(e){return e==null?void 0:e.keepOnlyRequests(function(e){return e==null?!1:p.isAlive(e.t)})}))},n.$5=function(){var e=this;return s==null?[]:Object.keys(s).map(function(t){var n=_.getQueueNameAndStorageType(t);if(n!=null){var r=n[0];return e.$4(r)}})},t})();return new f(t)}catch(e){return null}}l.make=s}),98);
__d("supportsNativeWebLock",[],(function(t,n,r,o,a,i){"use strict";function e(){return self.LockManager!=null&&self.navigator.locks instanceof self.LockManager}i.default=e}),66);
__d("SharedWorkerLockManager",["Deferred","FBLogger","WebStorageLockManager","emptyFunction","pageID","promiseDone","setTimeout","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e="shared_worker_mutex",s=6e5;function u(e){var t,n=(t=window)==null||(t=t.navigator)==null?void 0:t.locks;if(n!=null)return n;var a=o("WebStorageLockManager").make(r("pageID"));return a!=null?(e==null||e.addAnnotations({bool:{fallback_lock_manager:!0}}),{request:function(t,n){return a.request(t,n)}}):null}function c(e,t,n){r("setTimeout")(function(){e.isSettled()||(t==null||t.endFailure("lock_timeout"),r("FBLogger")("worker").warn("[SharedWorkerLockManager]: lock timed out in %s ms",s),e.resolve(),n==null||n())},s)}function d(t,n){var o=n.onLockFail,a=n.onLockTimeout,i=n.workerQPLLogger,l=u(i);if(i==null||i.addAnnotations({bool:{native_locks:l!=null?r("supportsNativeWebLock")():null}}),l==null){i==null||i.markPoint("no_lock_manager"),r("FBLogger")("worker").warn("Unable to initialize lock manager"),t(r("emptyFunction"));return}i==null||i.markPoint("lock_requested");var s=new(r("Deferred"));r("promiseDone")(l.request(e,function(){return i==null||i.markPoint("lock_obtained"),c(s,i,a),t(function(){i==null||i.markPoint("lock_released"),s.resolve()}),s.getPromise()}),void 0,o)}l.withWorkerLock=d}),98);
__d("SharedWorkerLoggingUtils",["ErrorSerializer","FBLogger","ODS","QPLUserFlow","getErrorSafe","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){(e||(e=o("ODS"))).bumpEntityKey(6653,"shared_worker_infra","worker_self_termination."+n+"."+t),u(t,n,r,a,!0)}function u(e,t,n,o,a){a===void 0&&(a=!1);var i=r("qpl")._(931600201,"1438");r("QPLUserFlow").start(i),r("QPLUserFlow").endSuccess(i,{annotations:{string:{workerName:e,workerID:o,reason:n,location:t,pageID:r("pageID")},bool:{isSelfTermination:a}}})}function c(e,t,n,r,o,a){e==null||e.markEventEnd("execute_worker"),e==null||e.addAnnotations({int:{runningWorkerRev:o,runningWorkerSpinTime:t,runningWorkerSpinMode:a},string:{executeWorkerErr:n},bool:{isFirstInit:r}})}function d(e,t,n){var o,a,i,l,s,u,c=r("getErrorSafe")((o=t instanceof ErrorEvent&&(t==null?void 0:t.error))!=null?o:t);r("FBLogger")("worker").catching(c).warn("Worker %s onerror: %s type, %s message",n,String(t.type),r("ErrorSerializer").toReadableMessage(c)),e==null||e.addAnnotations({string_array:{onErrorHandler:[(a=JSON.stringify((i=c==null?void 0:c.message)!=null?i:t==null?void 0:t.message))!=null?a:"undefined",String((l=t==null?void 0:t.lineno)!=null?l:c==null?void 0:c.lineno),String((s=t==null?void 0:t.colno)!=null?s:c==null?void 0:c.colno),String((u=t==null?void 0:t.filename)!=null?u:c==null?void 0:c.filename)]}})}l.logSelfTermination=s,l.logShutdown=u,l.logExecuteAck=c,l.logSharedWorkerError=d}),98);
__d("validateSharedWorkerReference",["ConstUriUtils","isRelativeURL","isSameOrigin","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoize")(function(){return o("ConstUriUtils").getUri(window.location.href)});function s(t){var n=e(),a=o("ConstUriUtils").getUri(t),i=n!=null&&a!=null?r("isSameOrigin")(a,n):!1;return i||r("isRelativeURL")(t)}function u(e){if(e==null||typeof e!="object")return null;var t=e.rev,n=e.rsrcBundleUrl,r=e.sandboxOnlyChecksum,o=e.spin_time,a=e.url,i=e.version;return typeof t!="number"||typeof o!="number"||i!=null&&i!==1&&i!==2||!Number.isInteger(t)||!Number.isInteger(o)||typeof a!="string"||!s(a)||n!=null&&typeof n!="string"||r!=null&&typeof r!="string"?null:{rev:t,spin_time:o,url:a,version:i!=null?i:1,rsrcBundleUrl:n,sandboxOnlyChecksum:r}}l.default=u}),98);
__d("SharedWorkerStorageManager",["Deferred","FBLogger","Promise","WebAsyncStorage","promiseDone","validateSharedWorkerReference"],(function(t,n,r,o,a,i,l){"use strict";var e,s="__swbundle__",u={};function c(e){return""+s+e}function d(e){var t=new(r("Deferred"));return r("WebAsyncStorage").removeItem(c(e),function(n){if(n)return t.reject(n);u[e]=null,t.resolve()}),t.getPromise()}function m(e,t){var n=new(r("Deferred"));return r("WebAsyncStorage").setItem(c(e),t,function(r){if(r!=null)return n.reject(r);u[e]=t,n.resolve()}),n.getPromise()}function p(e){var t=new(r("Deferred"));return r("WebAsyncStorage").getItem(c(e),function(n,r){if(n)return t.reject(n);u[e]=r,t.resolve(r)}),t.getPromise()}function _(){return u}function f(e,t){return p(e).then(function(e){var t=r("validateSharedWorkerReference")(e);return t==null?null:t}).catch(function(n){throw r("FBLogger")("worker").catching(n).mustfix("Failed to getSharedWorkerReference for bundleName %s",e),t==null||t.addAnnotations({bool:{failedToGetSharedWorkerResource:!0}}),n})}function g(e,t){return d(e).catch(function(n){throw r("FBLogger")("worker").catching(n).mustfix("Failed to removeSharedWorkerReference for bundleName %s",e),t==null||t.addAnnotations({bool:{failedToDeleteSharedWorkerResource:!0}}),n})}function h(t,o,a){var i=r("validateSharedWorkerReference")(o);return i==null?(r("FBLogger")("worker").mustfix('Failed to save worker reference for bundle "%s". Invalid reference: %s',t,JSON.stringify(o)),(e||(e=n("Promise"))).resolve()):m(t,i).catch(function(e){throw r("FBLogger")("worker").catching(e).mustfix("Failed to saveSharedWorkerReference for bundleName %s",t),a==null||a.addAnnotations({bool:{failedToSaveSharedWorkerResource:!0}}),e})}function y(e,t,n){var o=r("WebAsyncStorage").isOpenPromiseSettled();n==null||n.addAnnotations({bool:{isWebAsyncStorageIndexedDBOpened:o}}),o&&r("promiseDone")(r("WebAsyncStorage").isOperational(),function(e){n==null||n.addAnnotations({string:{idb_open_error:e.success===!1?e.error.message:"No IDB open error"}})});var a=new(r("Deferred"));return r("WebAsyncStorage").upsertAndSaveAtomic(c(e),function(e){var n=r("validateSharedWorkerReference")(e);return t(n)},function(t,o){if(n==null||n.markPoint("worker_reference_db_response"),t)return r("FBLogger")("worker").catching(t).mustfix("Failed to getOrUpdateWorkerReference for bundleName %s",e),a.reject(t);u[e]=o,a.resolve(o)}),a.getPromise()}l.SHARED_WORKER_STORAGE_KEY_BASE=s,l.getDebugState=_,l.getSharedWorkerReference=f,l.removeSharedWorkerReference=g,l.saveSharedWorkerReference=h,l.getOrUpdateWorkerReference=y}),98);
__d("createSharedWorkerV2BundleUrlExperimental",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","nullthrows","supportsModuleWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=r("supportsModuleWorker")(!0);return r("nullthrows")((t=r("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:n?"MODULE":"CLASSIC",name:e}))==null?void 0:t.toString())}l.default=e}),98);
__d("SharedWorkerMigrationUtils",["ConstUriUtils","Deferred","FBLogger","SharedWorkerEventManager","SharedWorkerStatusLock","SharedWorkerStorageManager","TrustedTypesWebWorkerScriptURLPolicy","clearTimeout","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){if(!r("supportsNativeWebLock")())return!0;var t=await self.navigator.locks.query();return t.held.some(function(t){return t.name===o("SharedWorkerStatusLock").getDynamicStringInitLockName(e)})}function s(){return r("supportsNativeWebLock")()}async function u(e){if(!r("supportsNativeWebLock")())return!0;var t=await self.navigator.locks.query();return t.held.some(function(t){return t.name===o("SharedWorkerStatusLock").getStatusLockName(e)})}async function c(e,t){if(!r("supportsNativeWebLock")())return!0;var n=await self.navigator.locks.query();return n.held.some(function(n){return n.name===o("SharedWorkerStatusLock").getWorkerIdStatusLockName(e,t)})}var d={SharedWorkerBundle:!0,MAWMainWebWorkerV2Bundle:!0};function m(e){var t;return(t=d[e])!=null?t:!1}async function p(t){if(!await e(t))return!1;var n=new(r("Deferred")),a=r("createSharedWorkerV2BundleUrlExperimental")(t),i=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),l=r("supportsModuleWorker")(!0)?new SharedWorker(i,{name:t,type:"module"}):new SharedWorker(i,t);return o("SharedWorkerEventManager").registerWorkerShutdownListener(l,function(e){n.resolve(!0)},{once:!0}),o("SharedWorkerEventManager").emitWorkerShutdown(l,{upgrade:!1,reason:"dynamic_string_worker_rollback"}),l.port.start(),n.getPromise()}function _(e){var t=o("ConstUriUtils").getUri(e);return t!=null&&t.getQueryParam("hash")!=null}async function f(t){var n=t.logger,a=t.name;try{var i=await Promise.all([u(a),e(a)]),l=i[0],s=i[1];if(!l||r("supportsNativeWebLock")()&&s){n.markPoint("legacy_termination_skipped"),n.addAnnotations({bool:{dynamicStringWorkerAlreadyRunning:s,workerAlreadyRunning:l,native_locks:r("supportsNativeWebLock")()}});return}var c=await o("SharedWorkerStorageManager").getSharedWorkerReference(a);if(n.markPoint("storage_read"),n.addAnnotations({bool:{storageResourceSet:c!=null}}),c==null)return;try{await o("SharedWorkerStorageManager").removeSharedWorkerReference(a),n.markPoint("storage_cleaned")}catch(e){n.markPoint("storage_error"),n.addAnnotations({string:{storageError:String(e)}}),r("FBLogger")("worker").catching(r("getErrorSafe")(e)).mustfix("Failed to remove reference from storage.")}var d=_(c.url);if(n.markPoint(d?"legacy_termination_start":"termination_skipped"),d){var m=new(r("Deferred")),p=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(c.url),f=r("supportsModuleWorker")(!0)?new SharedWorker(p,{name:a,type:"module"}):new SharedWorker(p,a),g=function(){n.markPoint("legacy_termination_end"),m.resolve(!0)};o("SharedWorkerEventManager").registerWorkerShutdownListener(f,g,{once:!0}),o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(f,g,{once:!0}),f.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(f,{upgrade:!1,reason:"maw-request-refresh"});var h=r("setTimeout")(function(){n.markPoint("legacy_termination_timeout"),m.reject(r("err")("Failed to close Shared Web Worker properly. SelfTerminationTimeout was exceeded."))},1e3);await m.getPromise(),r("clearTimeout")(h)}}catch(e){n.markPoint("legacy_check_and_termination_error"),n.addAnnotations({string:{legacyCheckError:String(e)}}),r("FBLogger")("worker").catching(r("getErrorSafe")(e)).mustfix("Failed to check storage and possibly terminate legacy worker.")}}l.isDynamicStringWorkerRunning=e,l.supportsNativeWebLocks=s,l.isStatusLockHeld=u,l.isWorkerIdStatusLockHeld=c,l.shouldCheckForDynamicStringWorker=m,l.maybeTerminateDynamicStringWorker=p,l.isLegacyWorkerURL=_,l.checkStorageAndTerminateLegacyWorker=f}),98);
__d("SharedWorkerUptimeTracker",["FBLogger","ODS","SharedWorkerEventManager","clearInterval","performanceNow","setInterval","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=1e4,c=45e3,d=new Map;function m(e){return Math.floor(((s||(s=r("performanceNow")))()-e)/1e3)}function p(t,n){var a=0,i={};return o("SharedWorkerEventManager").registerUptimeTrackerListener(t,function(t){var r=t.trackerID,a=i[r];a!=null&&((e||(e=o("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+n,1,0),e.bumpEntityKey(6653,"shared_worker_infra","worker_uptime_elapsed_time_to_response_sec."+m(a.createdMs)+"."+n),delete i[r])}),r("setInterval")(function(){var l=a++;r("setTimeout")(function(){var e=i[l];e!=null&&delete i[l]},c),i[l]={createdMs:(s||(s=r("performanceNow")))()},(e||(e=o("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+n,0,1),o("SharedWorkerEventManager").emitUptimeTracking(t,{trackerID:l})},u)}function _(e,t){if(d.has(t)){r("FBLogger")("worker").mustfix('Uptime tracking for worker "%s" already started.',t);return}d.set(t,{intervalID:p(e,t)})}function f(e){var t=d.get(e);t!=null&&(r("clearInterval")(t.intervalID),d.delete(e))}l.startUptimeTracking=_,l.stopUptimeTracking=f}),98);
__d("buildSharedWorkerInitQPLLogger",["QPLUserFlow","SiteData","checkForIndexedDbSupported","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(931595918,"2062"),s=0;function u(t){var n=!1,o=!1,a=s++;function i(i){var l=i.callReason,s=i.experimental_init,u=i.migrationEnabled,c=i.version,d=i.workerName;if(!(n||o)){n=!0;var m={int:{version:c,clientRev:r("SiteData").client_revision},bool:{isDev:!1,supportsIDB:r("checkForIndexedDbSupported")(),experimental_init:s!=null?s:!1,migrationEnabled:u!=null?u:!1},string:{workerName:d,hostname:window.location.hostname,callReason:l,pageID:r("pageID")}};r("QPLUserFlow").start(e,{onFlowTimeout:function(){r("QPLUserFlow").addAnnotations(e,{bool:{setupTimeout:!0}},{instanceKey:a}),o=!0},cancelOnUnload:!0,annotations:m,timeoutInMs:66e4,instanceKey:a}),t==null||t({type:"start",data:{annotations:m}})}}function l(i,l){var s=i+"_start";t==null||t({type:"point",data:{annotations:l,event:s}}),!(!n||o)&&r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a})}function u(i,l){var s=i+"_end";t==null||t({type:"point",data:{annotations:l,event:s}}),!(!n||o)&&(r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}}))}function c(i,l){t==null||t({type:"point",data:{annotations:l,event:i}}),!(!n||o)&&r("QPLUserFlow").addPoint(e,i,{data:l,instanceKey:a})}function d(i){t==null||t({type:"end",data:{annotations:i}}),!(!n||o)&&(r("QPLUserFlow").endSuccess(e,{annotations:i,instanceKey:a}),o=!0)}function m(i,l){t==null||t({type:"end",data:{errorName:i,annotations:l}}),!(!n||o)&&(r("QPLUserFlow").endFailure(e,i,{annotations:l,instanceKey:a}),o=!0)}function p(i){t==null||t({type:"end",data:{annotations:i,cancel:!0}}),!(!n||o)&&(r("QPLUserFlow").endCancel(e,{annotations:i,instanceKey:a}),o=!0)}function _(i){t==null||t({type:"annotate",data:{annotations:i}}),!(!n||o)&&r("QPLUserFlow").addAnnotations(e,i,{instanceKey:a})}return{start:i,endFailure:m,addAnnotations:_,endSuccess:d,endCancel:p,markEventStart:l,markEventEnd:u,markPoint:c}}l.default=u}),98);
__d("buildSharedWorkerTerminateQPLLogger",["QPLUserFlow","SiteData","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(931600201,"1438"),s=0;function u(t){var n=!1,o=!1,a=s++;function i(i){var l=i.callReason,s=i.workerName;if(!(n||o)){n=!0;var u={int:{clientRev:r("SiteData").client_revision},bool:{isDev:!1},string:{workerName:s,hostname:window.location.hostname,callReason:l,pageID:r("pageID")}};r("QPLUserFlow").start(e,{onFlowTimeout:function(){r("QPLUserFlow").addAnnotations(e,{bool:{setupTimeout:!0}},{instanceKey:a}),o=!0},cancelOnUnload:!0,annotations:u,timeoutInMs:3e4,instanceKey:a}),t==null||t({type:"start",data:{annotations:u}})}}function l(i,l){if(!(!n||o)){var s=i+"_start";r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}})}}function u(i,l){if(!(!n||o)){var s=i+"_end";r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}})}}function c(i,l){!n||o||(r("QPLUserFlow").addPoint(e,i,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:i}}))}function d(i){!n||o||(r("QPLUserFlow").endSuccess(e,{annotations:i,instanceKey:a}),t==null||t({type:"end",data:{annotations:i}}),o=!0)}function m(i,l){!n||o||(r("QPLUserFlow").endFailure(e,i,{annotations:l,instanceKey:a}),t==null||t({type:"end",data:{errorName:i,annotations:l}}),o=!0)}function p(i){!n||o||(r("QPLUserFlow").endCancel(e,{annotations:i,instanceKey:a}),t==null||t({type:"end",data:{annotations:i,cancel:!0}}),o=!0)}function _(i){!n||o||(r("QPLUserFlow").addAnnotations(e,i,{instanceKey:a}),t==null||t({type:"annotate",data:{annotations:i}}))}return{start:i,endFailure:m,addAnnotations:_,endSuccess:d,endCancel:p,markEventStart:l,markEventEnd:u,markPoint:c}}l.default=u}),98);
__d("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/static_resources/sharedworker/init_script/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("getSharedWorkerHash",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("uuidv4")()}l.default=e}),98);
__d("createSharedWorkerBundleUrl",["XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;return r("nullthrows")((e=r("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder").buildUri({hash:r("getSharedWorkerHash")()}).addQueryParams(r("getWorkerInitScriptSPINParams")()))==null?void 0:e.toString())}l.default=e}),98);
__d("createSharedWorkerV2BundleUrl",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","justknobx","nullthrows","supportsModuleWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("supportsModuleWorker")(!0),n=r("getWorkerInitScriptSPINParams")();return n.set("hash",r("getSharedWorkerHash")()),n.set("use_broadcast",r("justknobx")._("4177")),r("nullthrows")((e=r("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:t?"MODULE":"CLASSIC"}))==null||(e=e.addQueryParams(n))==null?void 0:e.toString())}var s=function(){return e()};l.createSharedWorkerV2BundleUrl=s}),98);
__d("handleWorkerWriteError",["FBLogger","WebStorageCleanupReason"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e instanceof Error){r("FBLogger")("worker").catching(e).mustfix("Error occured checking in shared worker reference");return}if(e==="writes disabled"){var t;r("FBLogger")("worker").warn("Writes to WebAsyncStorage is disabled. Unable to save shared worker reference. Reason: %s",(t=o("WebStorageCleanupReason").getLastCleanupReason())!=null?t:"n/a");return}r("FBLogger")("worker").mustfix("Error occured checking in shared worker reference: %s",JSON.stringify(e))}l.default=e}),98);
__d("SharedWorkerInitFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4266"),s=o("FalcoLoggerInternal").create("shared_worker_init",e),u=s;l.default=u}),98);
__d("logSharedWorkerInitStep",["SharedWorkerInitFalcoEvent","SiteData","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("uuidv4")();function s(t,n,o,a){r("gkx")("21115")&&r("SharedWorkerInitFalcoEvent").log(function(){return{client_id:e,bundle_name:t,client_rev:String(r("SiteData").client_revision),local_shared_worker_ref:n!=null?{bundle_url:n.url,rev:String(n.rev),spin_time:String(n.spin_time)}:null,new_shared_worker_ref:o!=null?{bundle_url:o}:null,init_step:a}})}l.default=s}),98);
__d("SharedWorkerBundleResource",["BootloaderPreloader","Deferred","FBLogger","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLockManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerStorageManager","SharedWorkerUptimeTracker","SharedWorkerV2ResourceExperimental","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerBundleUrl","createSharedWorkerV2BundleUrl","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","gkx","handleWorkerWriteError","justknobx","logSharedWorkerInitStep","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3,s="shared_worker_broadcast_channel",u=(function(e){function t(t){var n;return n=e.call(this)||this,n.name="SelfTerminationError",n.message="Worker self terminated with the reason: "+t,n.reason=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function c(e,t,n,a){a==null||a.markEventStart("shared_worker_construct");var i=new SharedWorker(r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),t);a==null||a.markEventEnd("shared_worker_construct"),i.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(a,e,t)});var l=new Set;o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(i,function(e,n,r){o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r)},{once:!0});var s=0;o("SharedWorkerEventManager").registerConnectionAckListener(i,function(e,t){if(s++,l.has("worker_connection_established")){a==null||a.addAnnotations({int:{connectionAckNum:s}});return}l.add("worker_connection_established"),a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),a==null||a.markPoint("worker_connection_established")}),o("SharedWorkerEventManager").registerWorkerInitPointsListener(i,function(e){l.has(e)||(l.add(e),a==null||a.markPoint("worker_init_point_"+e))}),i.port.start(),o("SharedWorkerEventManager").registerExecuteWorkerImportsListener(i,a,function(e){var t=e.attempts,n=e.err;a==null||a.addAnnotations({string:{importsError:n},int:{importAttempts:t}}),a==null||a.markPoint(n==null?"bundle_imports_success":"bundle_imports_failure")});var u=new(r("Deferred"));return o("SharedWorkerEventManager").registerExecuteWorkerAckListener(i,a,function(e){var t=e.err,n=e.isFirstInit,i=e.workerRev,l=e.workerSpinMode,s=e.workerSpinTime;o("SharedWorkerLoggingUtils").logExecuteAck(a,s,t,n,i,l),t!=null||s==null||i==null?u.reject(r("err")(t!=null?t:"no worker rev or spin time")):u.resolve({rev:i,spinTime:s})}),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(i,{jsModuleResource:n,isDev:!1}),u.getPromise().then(function(e){var t=e.rev,n=e.spinTime;return{worker:i,rev:t,spinTime:n}})}function d(e,t,n){n==null||n.markEventStart("worker_constructor");var o=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),a=r("supportsModuleWorker")(!0)?new SharedWorker(o,{name:t,type:"module"}):new SharedWorker(o,t);return n==null||n.markEventEnd("worker_constructor",{string:{workerUrl:o.toString()}}),a}function m(e,t,n){var r=[],a=new Set;r.push(o("SharedWorkerEventManager").registerWorkerInitPointsListener(e,function(e){a.has(e)||(a.add(e),n==null||n.markPoint("worker_init_point_"+e))})),r.push(o("SharedWorkerEventManager").registerHrpInitListener(e,n,function(){}));var i=function(r){o("SharedWorkerLoggingUtils").logSharedWorkerError(n,r,t)};return e.addEventListener("error",i),r.push(function(){return e.removeEventListener("error",i)}),r}function p(e,t,n,a){o("SharedWorkerMigrationUtils").shouldCheckForDynamicStringWorker(t)&&(a==null||a.markEventStart("dynamic_string_worker_check"),r("promiseDone")(o("SharedWorkerMigrationUtils").maybeTerminateDynamicStringWorker(t),function(e){a==null||a.markEventEnd("dynamic_string_worker_check",{bool:{didTerminateDynamicStringWorker:e}})}));var i=d(e,t,a);o("SharedWorkerEventManager").registerConnectionAckListener(i,function(e,t,n){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t,hrpStatus:n}}),a==null||a.markPoint("worker_connection_established")});var l=new(r("Deferred"));return o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(i,function(e,n,r,i){a==null||a.addAnnotations({string:{selfTerminationError:i}}),o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r),l.reject(new u(n))},{once:!0}),m(i,t,a),i.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(i),a==null||a.markPoint("read_dynamic_data"),r("promiseDone")(T(n,!1,a).then(function(e){var t=e.hrp;a==null||a.markEventStart("hrp_init"),o("SharedWorkerEventManager").emitHrpInit(i,{hrp:t.hrp,js_env:t.js_env,isDev:!1},a)},function(e){var t=r("getErrorSafe")(e);a==null||a.addAnnotations({string:{hrpInitErr:t.toString()}})})),o("SharedWorkerEventManager").registerExecuteWorkerAckListener(i,a,function(e){var t=e.err,n=e.isFirstInit,i=e.workerRev,s=e.workerSpinMode,u=e.workerSpinTime;o("SharedWorkerLoggingUtils").logExecuteAck(a,u,t,n,i,s),t!=null||i==null||u==null?l.reject(r("err")(t!=null?t:"no worker rev or spin time")):l.resolve({rev:i,spinTime:u})}),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(i),l.getPromise().then(function(e){var t=e.rev,n=e.spinTime;return{worker:i,rev:t,spinTime:n}})}function _(e,t,n,a,i,l){var s=new(r("Deferred"));return o("SharedWorkerEventManager").registerGetWorkerRevListener(e,l,function(e){var u=e.rev,c=e.spinTime;r("promiseDone")(o("SharedWorkerStorageManager").saveSharedWorkerReference(n,{url:t,rev:u,spin_time:c,version:i.version,rsrcBundleUrl:i.getJSModuleBundleResource().url,sandboxOnlyChecksum:i.sandboxOnlyChecksum},l).then(function(){return o("SharedWorkerStorageManager").getSharedWorkerReference(n,l)}).then(function(e){r("logSharedWorkerInitStep")(n,e,i.resourceUrlForLogging,"after_worker_reference_save")}),function(){l.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!0}}),s.resolve(),a()},function(e){l.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!1}}),s.reject(e),r("handleWorkerWriteError")(e),a()})}),l.markEventStart("get_worker_rev"),o("SharedWorkerEventManager").emitGetRev(e),s.getPromise()}function f(e,t,n,a){a===void 0&&(a=null);var i=[],l=function(r,a,l){i.forEach(function(e){return e()}),t(r,a,l),o("SharedWorkerUptimeTracker").stopUptimeTracking(n)};i.push(o("SharedWorkerEventManager").registerForwardListeners(e)),i.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(e){var t=e.reason,r=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(n,null,t,r);var a=t==="dynamic_string_worker_rollback"?"requested-upgrade":t;l(a,r,"sw-shutdown")})),i.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(e,function(e,t,n){l(t,n,"self-terminate")})),o("SharedWorkerDevChangeManager").trackCreatedWorker(n),o("SharedWorkerUptimeTracker").startUptimeTracking(e,n),r("logSharedWorkerInitStep")(n,null,null,"create_worker_end")}async function g(e,t,n,a,i,l){l.addAnnotations({string:{initFlow:"use_existing_ref"}}),r("logSharedWorkerInitStep")(e,null,null,"using_existing_worker_ref");var s=o("SharedWorkerMigrationUtils").isLegacyWorkerURL(t.url),u=await(t.version===2?s?p(t.url,e,n.getJSModuleBundleResource(),l):o("SharedWorkerV2ResourceExperimental").startV2Worker(t.url,e,n.getJSModuleBundleResource(),l):c(t.url,e,n.getJSModuleBundleResource(),l)),d=u.worker;return a(),t.version===2&&!s&&_(d,t.url,e,a,n,l),f(d,i,e),d}async function h(e,t,n,a){n.markPoint("terminate_on_upgrade");var i=new(r("Deferred")),l=o("SharedWorkerMigrationUtils").isStatusLockHeld(e);if(await o("SharedWorkerMigrationUtils").isDynamicStringWorkerRunning(e)&&r("supportsNativeWebLock")()&&a===!1)i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"not_needed_for_dynamic_string"}});else if(self.BroadcastChannel!=null){var s=k(e);s.postMessage({type:"terminate",reason:"requested-upgrade",pageID:r("pageID")}),i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"broadcast"}})}else if(await l){var u;t.version===2&&r("supportsModuleWorker")(!0)?u=new SharedWorker(t.url,{name:e,type:"module"}):u=new SharedWorker(t.url,e),o("SharedWorkerEventManager").registerWorkerShutdownListener(u,function(e){var t=e.isInitialized,l=e.workerID;a?r("setTimeout")(function(){n.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:l},bool:{oldWorkerWasInitialized:t}}),i.resolve()},o("SharedWorkerV2ResourceExperimental").DELAY_FOR_WORKER_SHUTDOWN_MS):(n.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:l},bool:{oldWorkerWasInitialized:t}}),i.resolve()),n.addAnnotations({string:{oldWorkerShutdown:"success"}})},{once:!0}),n.markEventStart("old_worker_shutdown"),u.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(u,{upgrade:!0})}else i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"not_needed"}});a===!0?await i.getPromise():i.resolve()}async function y(e,t,n,r,o,a,i){return a.addAnnotations({string:{initFlow:"upgrade_worker_ref"}}),await h(e,t,a,i),b(e,n,r,o,a,"upgrading_worker_ref")}function C(e,t,n,r,o){return o.addAnnotations({string:{initFlow:"new_worker_ref"}}),b(e,t,n,r,o,"new_worker_ref")}async function b(e,t,n,a,i,l){r("logSharedWorkerInitStep")(e,null,null,l),await o("SharedWorkerMigrationUtils").isStatusLockHeld(e)&&r("FBLogger")("worker").info("Trying to create a worker %s while old one is still running",e);var s=await t.createSharedWorker(),u=s[0],c=s[1].worker;return l==="upgrading_worker_ref"&&await o("SharedWorkerStorageManager").removeSharedWorkerReference(e,i),await _(c,u,e,n,t,i),f(c,a,e),c}function v(e,t){var n=o("SharedWorkerDevChangeManager").shouldUseStorageWorkerForDev(e.name,{storageWorkerResource:t,tabResource:e}),a=t.rev,i=t.spin_time,l=t.version;return a>=r("SiteData").client_revision&&(e.version===l||i>=r("SiteData")[r("StaticSiteData").spin_time_key])&&n}async function S(e,t,n,a,i,l){a.markEventStart("create_worker");var s=e.name;o("SharedWorkerUptimeTracker").stopUptimeTracking(s),a.addAnnotations({bool:{workerAlreadyRunning:r("supportsNativeWebLock")()?await o("SharedWorkerMigrationUtils").isStatusLockHeld(s):null}});var u=r("supportsNativeWebLock")()?await o("SharedWorkerMigrationUtils").isStatusLockHeld(s):!0;if(!i&&e.version===2)return P(e,t,n,a,l);var c=await o("SharedWorkerStorageManager").getSharedWorkerReference(s,a);r("logSharedWorkerInitStep")(s,c,e.resourceUrlForLogging,"create_worker_start");var d=c!=null&&o("SharedWorkerMigrationUtils").isLegacyWorkerURL(c==null?void 0:c.url),m=i&&u===!1&&d;if(c==null||m)return C(s,e,t,n,a);var p=c.rev,_=c.spin_time,f=c.version;return a.addAnnotations({int:{storageWorkerSpinTime:_,storageWorkerVersion:f,storageWorkerRev:p}}),v(e,c)?g(s,c,e,t,n,a):y(s,c,e,t,n,a,i)}function R(e,t,n){var a=n!=null?n:{},i=a.onQPLEvent,l=a.reason,s=e.name,u=r("buildSharedWorkerInitQPLLogger")(i);u.start({version:1,workerName:s,callReason:l});var d=new(r("Deferred"));return o("SharedWorkerLockManager").withWorkerLock(function(n){var o;r("promiseDone")(S({name:s,version:1,resourceUrlForLogging:(o=e.url)!=null?o:"",getJSModuleBundleResource:function(){return e},createSharedWorker:async function(){var t=r("createSharedWorkerBundleUrl")();return[t,await c(t,s,e,u)]}},n,t,u,!1),function(e){u.markEventEnd("create_worker"),u.endSuccess(),d.resolve(e)},function(e){var t=typeof e=="string"?r("err")(e):e;u.endFailure("worker_init_failure",{string:{workerInitFailureReason:t.message,errorName:t.name}}),d.reject(t),n()})},{workerQPLLogger:u,onLockTimeout:function(){return d.reject(r("err")("Worker lock timeout"))}}),d.getPromise()}function L(e,t,n,a){a===void 0&&(a=0);var i=e.name,l=n!=null?n:{},s=l.onQPLEvent,c=l.reason,d=r("buildSharedWorkerInitQPLLogger")(s);d.start({version:2,workerName:i,callReason:c,experimental_init:n==null?void 0:n.useDynamicStringInit}),d.addAnnotations({bool:{usingModuleWorker:r("supportsModuleWorker")(!0)}});var m=new(r("Deferred")),_=function(s){r("promiseDone")(S({name:i,version:2,getJSModuleBundleResource:function(){return e},sandboxOnlyChecksum:e.sandboxOnlyChecksum,createSharedWorker:(n==null?void 0:n.useDynamicStringInit)===!0?async function(){var t=r("createSharedWorkerV2BundleUrlExperimental")(i);return[t,await o("SharedWorkerV2ResourceExperimental").startV2Worker(t,i,e,d)]}:async function(){var t=o("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl();return[t,await p(t,i,e,d)]}},s,t,d,(n==null?void 0:n.useDynamicStringInit)===!0,a),function(e){d.markEventEnd("create_worker"),d.endSuccess(),m.resolve(e)},function(e){var t=typeof e=="string"?r("err")(e):e;m.reject(t),s()})};return o("SharedWorkerLockManager").withWorkerLock(_,{workerQPLLogger:d,onLockTimeout:function(){return m.reject(r("err")("Worker lock timeout"))},onLockFail:function(t){m.reject(t)}}),m.getPromise().catch(function(o){if(o instanceof u&&a<2)return d.endCancel({string:{workerInitCancelReason:o.message},int:{workerInitRetry:a}}),new Promise(function(o,i){r("setTimeout")(function(){r("promiseDone")(L(e,t,n,a+1),o,i)},a===0?200:500)});throw d.endFailure("worker_init_failure",{string:{workerInitFailureReason:o.message,errorName:o.name}}),o})}async function E(t,n,a){var i=n!=null?n:t.name,l=new(r("Deferred")),s=r("buildSharedWorkerTerminateQPLLogger")();if(s.start({workerName:i}),r("promiseDone")(r("supportsNativeWebLock")()?o("SharedWorkerMigrationUtils").isStatusLockHeld(i):Promise.resolve(void 0),function(e){return s.addAnnotations({bool:{workerAlreadyRunning:e}})}),s.addAnnotations({string:{reason:a,terminatingPageId:r("pageID")}}),self.BroadcastChannel!=null){var u=k(i);return u.postMessage({type:"terminate",reason:a,pageID:r("pageID")}),r("promiseDone")(o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s).then(function(){s.endSuccess(),l.resolve()})),l.getPromise()}return o("SharedWorkerLockManager").withWorkerLock(function(e){r("promiseDone")(o("SharedWorkerStorageManager").getSharedWorkerReference(i,s).then(function(e){if(s.markPoint("read_worker_reference",{int:{storageWorkerVersion:e==null?void 0:e.version},bool:{storageReferenceExists:e!=null}}),e!=null){var n=o("SharedWorkerMigrationUtils").isLegacyWorkerURL(e.url);s.addAnnotations({bool:{isLegacy:n}});var r=e.version===2?n?p(e.url,i,t,void 0).then(function(e){var t=e.worker;return t}):o("SharedWorkerV2ResourceExperimental").startV2Worker(e.url,i,t,void 0).then(function(e){var t=e.worker;return t}):c(e.url,i,t).then(function(e){var t=e.worker;return t}),a=Promise.resolve(null);return a.then(function(){return r})}return s.markPoint("storage_resource_empty"),null}),function(t){try{if(e(),o("SharedWorkerUptimeTracker").stopUptimeTracking(i),t==null){s.endSuccess(),l.resolve();return}o("SharedWorkerEventManager").registerWorkerShutdownListener(t,function(e){var t=e.isInitialized,n=e.workerID;s.markPoint("worker_shut_down",{string:{workerID:n},bool:{wasInitialized:t}});var a=o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s);r("promiseDone")(a,function(){return s.endSuccess()},function(e){s.endFailure("failed_to_remove_worker_reference",{string:{errorDescription:e.toString()}})}),l.resolve()},{once:!0}),o("SharedWorkerEventManager").emitWorkerShutdown(t,{reason:a})}catch(e){s.endFailure("terminate_worker_failure",{string:{workerTerminateFailReason:e.message}}),l.reject(e.message)}},function(t){r("FBLogger")("worker").catching(r("getErrorSafe")(t)).mustfix("Failed to terminate worker"),s.endFailure("connect_to_worker_failure",{string:{workerTerminateFailReason:t.message}}),l.reject(t.message),e()})},{workerQPLLogger:s}),r("setTimeout")(function(){return l.reject()},e),l.getPromise()}function k(e){return new self.BroadcastChannel(s+"_"+e)}async function I(e){var t=await o("SharedWorkerStorageManager").getSharedWorkerReference(e.name);return t!=null}async function T(e,t,n){var a;n==null||n.markEventStart("load_hrp");var i=await o("WebWorkerV2DynamicData").readDynamicDataForWorker(e,t),l=i.data,s=i.time;n==null||n.markEventEnd("load_hrp");try{var u,c=r("justknobx")._("1979");n==null||n.markEventStart("prefetch_worker_scripts",{bool:{prefetchWorkerScripts:c},int:{resourcesCount:(u=l.hrp.allResources)==null?void 0:u.length}}),c&&o("BootloaderPreloader").preloadWorkerJSFromHRP(l.hrp)}catch(t){var d=r("getErrorSafe")(t);n==null||n.markPoint("prefetch_worker_scripts_fail",{string:{hrpInitErr:d.toString()}}),r("FBLogger")("worker").catching(d).warn("Failed to preload worker %s JS from HRP",e.name)}return n==null||n.markEventEnd("prefetch_worker_scripts"),{hrp:l,time:s,rev:(a=l.hrp.hsrp)==null||(a=a.hblp)==null||(a=a.consistency)==null?void 0:a.rev}}function D(e,t,n,a){return o("SharedWorkerStorageManager").getOrUpdateWorkerReference(e.name,function(o){if(n.markPoint("worker_reference_retrieved"),o==null)return t;var i=a!=null&&a>0&&r("gkx")("6579");return!i&&v(e,o)?o:(h(e.name,o,n,!1),t)},n)}function x(e,t){if(self.BroadcastChannel!=null){var n=k(e),o=function(n){var e=n.data;if(typeof e=="object"&&(e==null?void 0:e.type)==="terminate"){var o=typeof e.reason=="string"?e.reason:"unknown",a=typeof e.pageID=="string"?e.pageID:null;if(a!=null&&a===r("pageID")&&o==="requested-upgrade")return;t(o)}};return n.addEventListener("message",o),function(){return n.removeEventListener("message",o)}}return function(){}}function $(e,t,n,a){var i=new(r("Deferred"));return o("SharedWorkerStorageManager").getOrUpdateWorkerReference(e,function(e){return e==null||e.url!==t?(i.resolve("url-was-changed"),e):e.rev!==n||e.spin_time!==a?babelHelpers.extends({},e,{rev:n,spin_time:a}):e}).then(function(){i.resolve("success")}),i.getPromise()}async function P(e,t,n,a,i){if(e.version!==2)throw r("err")("Worker version must be 2");var l=e.name,s=await T(e.getJSModuleBundleResource(),!1,a),c=s.rev;if(c==null)throw r("err")("HRP rev or spin time is null");var p={url:o("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl(),rev:c,spin_time:s.time,version:e.version,rsrcBundleUrl:e.getJSModuleBundleResource().url,sandboxOnlyChecksum:e.sandboxOnlyChecksum},_=new(r("Deferred")),g=new(r("Deferred")),h=[];try{var y=function(t){g.reject(t),_.reject(t)};h.push(x(l,function(e){y(new u("broadcast-"+e))})),a==null||a.markEventStart("get_worker_reference");var C=await D(e,p,a,i);a==null||a.markEventEnd("get_worker_reference");var b=d(C.url,l,a);h.push(o("SharedWorkerEventManager").registerConnectionAckListener(b,function(e,t,n){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),_.resolve({hrpStatus:n!=null?n:"no-hrp",workerID:t})})),h.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(b,function(e,t,n,r){a==null||a.addAnnotations({string:{selfTerminationError:r}}),o("SharedWorkerLoggingUtils").logSelfTermination(l,e,t,n),y(new u(t))},{once:!0})),h.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(b,function(e){var t=e.reason,n=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(l,null,t,n),y(new u(t!=null?t:"sw-shutdown-unknown"))})),h.push.apply(h,m(b,l,a)),a.markEventStart("worker_connection"),b.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(b);var v=await _.getPromise(),S=v.hrpStatus,R=v.workerID;if(a.markEventEnd("worker_connection"),S==="no-hrp"){a==null||a.markPoint("read_dynamic_data");var L=p.rev>=C.rev,E=L?Promise.resolve(s):T(e.getJSModuleBundleResource(),!0,a);r("promiseDone")(E.then(function(e){a==null||a.markEventStart("hrp_init"),o("SharedWorkerEventManager").emitHrpInit(b,{hrp:e.hrp.hrp,js_env:e.hrp.js_env,isDev:!1},a)},function(e){var t=r("getErrorSafe")(e);a==null||a.markPoint("hrp_init_fail",{string:{hrpInitErr:t.toString()}}),y(t)}))}h.push(o("SharedWorkerEventManager").registerExecuteWorkerAckListener(b,a,function(e){var t=e.err,n=e.isFirstInit,i=e.workerRev,l=e.workerSpinMode,s=e.workerSpinTime;o("SharedWorkerLoggingUtils").logExecuteAck(a,s,t,n,i,l),t!=null||s==null||i==null?g.reject(r("err")(t!=null?t:"no worker rev or spin time")):g.resolve({workerRev:i,workerSpinTime:s})})),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(b);var k=await g.getPromise(),I=k.workerRev,P=k.workerSpinTime;a==null||a.markEventStart("update_worker_ref");var N=await $(l,C.url,I,P);if(a==null||a.markEventEnd("update_worker_ref",{string:{updateWorkerRef:N}}),N==="url-was-changed")throw o("SharedWorkerEventManager").emitWorkerShutdown(b,{reason:"url-was-changed"}),new u("url-was-changed");return t(),f(b,n,l,R),b}finally{h.forEach(function(e){return e()})}}l.SHARED_WORKER_BROADCAST_CHANNEL=s,l.SelfTerminationError=u,l.createPushSafeSharedWebWorkerAsync=R,l.createPushSafeSharedWebWorkerV2Async=L,l.terminateSharedWorker=E,l.doesSharedWorkerReferenceExist=I}),98);
__d("SharedWorkerV2ResourceExperimental",["Deferred","SharedWorkerBundleResource","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerUptimeTracker","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerV2BundleUrlExperimental","justknobx","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e=50,s=5e3,u=2e3;function c(e,t,n,a){return o("SharedWorkerDevChangeManager").shouldUpgradeWorkerForDevExperimental(e)&&!a?!0:t<r("SiteData").client_revision&&n<r("SiteData")[r("StaticSiteData").spin_time_key]}async function d(t,n,a){var i=t.name,l=r("buildSharedWorkerInitQPLLogger")(a==null?void 0:a.onQPLEvent);l.start({version:2,workerName:i,experimental_init:!0,callReason:a==null?void 0:a.reason,migrationEnabled:!0}),l.markEventStart("create_worker"),r("supportsNativeWebLock")()&&r("promiseDone")(o("SharedWorkerMigrationUtils").isStatusLockHeld(i).then(function(e){l.addAnnotations({bool:{workerAlreadyRunning:e}})})),(a==null?void 0:a.migratedWorker)===!0&&await o("SharedWorkerMigrationUtils").checkStorageAndTerminateLegacyWorker({name:i,logger:l});var s=await m(t,l),u=s.needsUpgrade,c=s.worker;return new Promise(function(a,s){var d=function(t){return a(_(t,i,l,n))};u?(o("SharedWorkerEventManager").registerWorkerShutdownListener(c,function(n){var o=n.isInitialized,a=n.workerID;l.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:a},bool:{oldWorkerWasInitialized:o}}),r("setTimeout")(function(){return m(t,l).then(function(e){var t=e.worker;return d(t)})},e)},{once:!0}),l.markEventStart("old_worker_shutdown"),o("SharedWorkerEventManager").emitWorkerShutdown(c,{upgrade:!0})):d(c)})}function m(e,t){var n=e.name,a=r("createSharedWorkerV2BundleUrlExperimental")(n),i=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),l=r("supportsModuleWorker")(!0)?"module":"classic",s=new SharedWorker(i,{name:n,type:l}),u=new Set;o("SharedWorkerEventManager").registerWorkerInitPointsListener(s,function(e){u.has(e)||(u.add(e),t==null||t.markPoint("worker_init_point_"+e))});var d=new(r("Deferred"));return o("SharedWorkerEventManager").registerGetWorkerRevListener(s,t,function(r){var o=r.rev,a=r.spinTime,i=r.workerChecksum,l=c(n,o,a,e.sandboxOnlyChecksum===i);d.resolve(l),l?t.addAnnotations({int:{oldWorkerRev:o,oldWorkerSpinTime:a}}):t.addAnnotations({int:{workerRev:o,workerSpinTime:a}})}),p(s,n,t),s.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(s),d.getPromise().then(function(e){return{worker:s,needsUpgrade:e}})}function p(e,t,n,r){return e.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(n,e,t)}),o("SharedWorkerEventManager").registerForwardListeners(e),o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(e,function(e,t,r,o){n.endFailure("worker_init_failure",{string:{selfTerminationError:o,selfTerminationReason:t}})},{once:!0}),o("SharedWorkerEventManager").registerConnectionAckListener(e,function(e,t){n==null||n.addAnnotations({string:{connectedFrom:e,workerID:t}}),n==null||n.markPoint("worker_connection_established")},{once:!0}),e}function _(e,t,n,a){return o("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(e){var n=e.reason,i=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(t,null,n,i),n==="requested-upgrade"?r("setTimeout")(function(){return a==null?void 0:a(n,i)},1e3):n==="dynamic_string_worker_rollback"?a==null||a("maw_request_refresh",i):a==null||a(n,i),o("SharedWorkerUptimeTracker").stopUptimeTracking(t)}),n.markEventEnd("create_worker"),n.endSuccess(),o("SharedWorkerUptimeTracker").startUptimeTracking(e,t),o("SharedWorkerDevChangeManager").trackCreatedWorker(t),e}function f(e,t,n,a,i){i===void 0&&(i=0);var l=n.name,s=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),c=r("supportsModuleWorker")(!0)?"module":"classic",d=new SharedWorker(s,{name:l,type:c});a==null||a.markPoint("shared_worker_construct_done"),a==null||a.addAnnotations({string:{workerUrl:s.toString()}});var m=new(r("Deferred")),p=[];p.push(o("SharedWorkerEventManager").registerConnectionAckListener(d,function(e,t){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),a==null||a.markPoint("worker_connection_established"),m.resolve()},{once:!0})),p.push(o("SharedWorkerEventManager").registerWorkerInitPointsListener(d,function(e){a==null||a.markPoint("worker_init_point_"+e)})),p.push(o("SharedWorkerEventManager").registerForwardListeners(d)),o("SharedWorkerEventManager").emitConnectionAckRequest(d),d.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(a,e,t)});var _=new(r("Deferred"));return p.push(o("SharedWorkerEventManager").registerGetWorkerRevListener(d,a,function(e){var t=e.rev,n=e.spinTime;a==null||a.addAnnotations({int:{initialWorkerRev:t,initialSpinTime:n}}),_.resolve({worker:d,rev:t,spinTime:n})})),p.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(d,function(e,n,r,i){a==null||a.addAnnotations({string:{selfTerminationError:i}}),o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r),_.reject(new(o("SharedWorkerBundleResource")).SelfTerminationError(n))},{once:!0})),p.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(d,function(e){var n=e.reason,r=e.workerID;a==null||a.addAnnotations({string:{shutdownReason:n}}),o("SharedWorkerLoggingUtils").logShutdown(t,null,n,r),_.reject(new(o("SharedWorkerBundleResource")).SelfTerminationError(n!=null?n:"unknownShutdown"))},{once:!0})),d.port.start(),i===0&&r("justknobx")._("1707")&&Promise.race([m.getPromise().then(function(){return"success"}),new Promise(function(e){r("setTimeout")(function(){e("timeout")},u)})]).then(function(r){if(r==="timeout"){var o=d,l=f(e,t,n,a,i+1);l.then(function(e){return _.resolve(e)}),p.forEach(function(e){return e()}),o.port.close()}}),_.getPromise()}async function g(e,t){var n=e.name,a=new(r("Deferred")),i=await o("SharedWorkerMigrationUtils").isStatusLockHeld(n),l=r("buildSharedWorkerTerminateQPLLogger")();if(!i){l.start({workerName:n}),l.markPoint("no_worker_running"),l.endSuccess();return}l.start({workerName:n}),l.addAnnotations({string:{reason:t,terminatingPageId:r("pageID")}});var u=r("createSharedWorkerV2BundleUrlExperimental")(n),c=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(u),d=r("supportsModuleWorker")(!0)?"module":"classic",m=new SharedWorker(c,{workerName:n,type:d});return l.markPoint("worker_created"),o("SharedWorkerEventManager").registerWorkerShutdownListener(m,function(e){var t=e.workerID;l.markPoint("worker_shut_down",{string:{workerID:t}}),l.endSuccess(),o("SharedWorkerUptimeTracker").stopUptimeTracking(n),a.resolve()},{once:!0}),m.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(m,{reason:t}),r("setTimeout")(function(){return a.reject()},s),a.getPromise()}l.DELAY_FOR_WORKER_SHUTDOWN_MS=e,l.createPushSafeSharedWebWorkerV2Async=d,l.startV2Worker=f,l.terminateSharedWorker=g}),98);
__d("MAWWebWorkerSingleton",["Deferred","MAWInit","MAWMIC","MAWStartupLoggingUtils","MAWWaitForBackendSetup","MAWWorkerWatchdogRecovery","Promise","SharedWorkerBundleResource","SharedWorkerMigrationUtils","SharedWorkerV2ResourceExperimental","WAResolvable","WebWorkerV2Resource","clearTimeout","cr:6600","err","gkx","promiseDone","setTimeout","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=function(t){s=t},c=function(){return s},d=g,m=new(o("WAResolvable")).Resolvable,p=null;function _(){return o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?o("SharedWorkerMigrationUtils").isStatusLockHeld(n("cr:6600").name):(e||(e=n("Promise"))).resolve(p!==null)}function f(){var t={isSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),nativeLocksSupported:o("SharedWorkerMigrationUtils").supportsNativeWebLocks(),workerCreationPromiseExists:p!==null};if(t.isSharedWorker!==!0)return(e||(e=n("Promise"))).resolve(t.workerCreationPromiseExists===!0?{data:t,tag:"dedicated_exists"}:{data:t,tag:"dedicated_not_exists"});if(t.nativeLocksSupported!==!0)return(e||(e=n("Promise"))).resolve({data:t,tag:"shared_unknown_locks_not_supported"});var r=o("MAWWaitForBackendSetup").getCurrentWorkerID();return(e||(e=n("Promise"))).all([o("SharedWorkerMigrationUtils").isStatusLockHeld(n("cr:6600").name),r!=null?o("SharedWorkerMigrationUtils").isWorkerIdStatusLockHeld(n("cr:6600").name,r):(e||(e=n("Promise"))).resolve(!1)]).then(function(e){var n=e[0],r=e[1];return t.sharedLockHeld=n,t.workerIdLockHeld=r,n&&r?{data:t,tag:"shared_exists_and_connected"}:n?{data:t,tag:"shared_exists_not_connected"}:r?{data:t,tag:"shared_only_unique_lock_held"}:{data:t,tag:"shared_not_exists"}})}function g(){p=null}function h(e){return p?(o("MAWMIC").addPoint(e+"_wait_on_worker_creation"),o("MAWInit").MAWInit.logPoint(e+"_wait_on_worker_creation"),p):(o("MAWInit").MAWInit.logPoint(e+"_create_worker_start"),o("MAWMIC").addPoint(e+"_create_worker_start"),p=(o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?y(e):C().then(function(e){return{worker:e,workerID:"dedicated"}})).then(function(t){var n=t.worker,r=t.workerID;return o("MAWMIC").addPoint(e+"_create_worker_end"),o("MAWInit").MAWInit.logPoint(e+"_create_worker_end"),{worker:n,workerID:r}},function(e){throw p=null,e}),p)}function y(e){var t=function(t,n,o){r("promiseDone")(m.promise.then(function(){return d(t,n,o)}))};o("MAWWorkerWatchdogRecovery").setRecoveryForWatchdog(t);var a=new(r("Deferred")),i=r("gkx")("7313");o("MAWMIC").addBoolAnnotation("migrationEnabled",i);var l=i?o("SharedWorkerV2ResourceExperimental").createPushSafeSharedWebWorkerV2Async(n("cr:6600"),t,{migratedWorker:!0,onQPLEvent:o("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:e}):o("SharedWorkerBundleResource").createPushSafeSharedWebWorkerV2Async(n("cr:6600"),t,{onQPLEvent:o("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:e,useDynamicStringInit:r("gkx")("8737")});return l.then(function(e){u(e),o("MAWMIC").addPoint("shared_worker_bundle_created");var t=r("setTimeout")(function(){o("MAWMIC").addPoint("shared_worker_connection_ack_timeout"),a.reject(r("err")("Worker connection ack timeout"))},1e4),n=function(n){var e,i,l;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="connection-ack"&&typeof((i=n.data)==null?void 0:i.response)=="object"&&typeof((l=n.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c=typeof((s=n.data)==null||(s=s.response)==null?void 0:s.workerID)=="string"?(u=n.data)==null||(u=u.response)==null?void 0:u.workerID:void 0;c!=null?(o("MAWMIC").addPoint("shared_worker_workerID_received"),o("MAWMIC").addStringAnnotation("workerID",c),t!=null&&r("clearTimeout")(t),a.resolve(c)):(o("MAWMIC").addPoint("shared_worker_null_workerID_received"),o("MAWMIC").addStringAnnotation("workerID","unknown"))}};return e.port.addEventListener("message",n),e.port.postMessage({type:"ww-connection-ack"}),e.addEventListener("error",function(e){o("MAWStartupLoggingUtils").logWorkerError("Shared Worker",e,"")}),a.getPromise().then(function(t){return{worker:e.port,workerID:t}})})}function C(){return(e||(e=n("Promise"))).resolve(o("WebWorkerV2Resource").createDedicatedV2WebWorker(n("cr:6600"))).then(function(e){var t=e.url,n=e.worker;return n.onerror=function(e){return o("MAWStartupLoggingUtils").logWorkerError("Dedicated Worker",e,t)},o("MAWStartupLoggingUtils").setImportScriptsErrorListener(n),n})}function b(e){d=e,m.resolve()}l.getSharedWorkerInstance__TEST_ONLY=c,l.doesWorkerExist=_,l.getWorkerHealthStatus=f,l.resetWorkerCreation=g,l.createWorkerIfNone=h,l.setOnCloseForWorkerInstance=b}),98);
__d("MAWWaitForBackendSetup",["ErrorSerializer","MAWInit","MAWInitError","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWebWorkerSingleton","Promise","err","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=new(e||(e=n("Promise")))(function(e,t){s=e,u=t}),d=!1,m=!1,p=!1,_=!1,f=null,g=s,h=u;function y(t){return new(e||(e=n("Promise")))(function(e,n){c.then(e).catch(function(e){var a=t+" rejected because backend setup failed: "+e.message+".",i=e instanceof o("MAWInitError").MAWInitError?e.error:null;i!=null&&(a=a.concat(" More error detail: "+r("ErrorSerializer").toReadableMessage(i))),n(r("err")(a))})})}function C(e,t){r("promiseDone")(y(t).then(function(){e()}))}function b(){_&&(c=new(e||(e=n("Promise")))(function(e,t){s=e,u=t}),_=!1,d=!1,g=s,h=u,m=!0,p=!1)}function v(e){d=!0,_=!0,p=!1,g==null||g(e)}function S(e){d=!1,_=!0,p=!1,h==null||h(e)}function R(){return d}function L(){return _}function E(){return m}function k(e){e!=null&&f!==e&&o("MAWSetupWorkerAuxStateForLogging").resetWorkerCreationTime(),f=e}function I(e){f==null||f!==e||T()}function T(){f=null,o("MAWWebWorkerSingleton").resetWorkerCreation(),b(),o("MAWInit").MAWInit.logPoint("reset_current_worker"),o("MAWMIC").addPoint("reset_current_worker")}function D(){return f}function x(){p=!0}function $(){return p}l.waitForBackendSetup=y,l.runAfterBackendSetup=C,l.resetBackendSetup=b,l.resolveBackendSetup=v,l.rejectBackendSetup=S,l.isBackendSetupSuccessful=R,l.isBackendSetupSettled=L,l.wasBackendSetupReset=E,l.setCurrentWorker=k,l.resetCurrentWorkerWithId=I,l.resetCurrentWorkerSkipIdCheck=T,l.getCurrentWorkerID=D,l.markBackendSetupStarted=x,l.isBackendSetupInProgress=$}),98);
__d("MAWWorkerEvent",["FBLogger","MAWMIC","MAWReliabilityMonitor","MAWSetupWorkerAuxStateForLogging","MAWTrackPendingOccamadilloThreads","MAWWaitForBackendSetup","MultipleTabsLogger","QPLUserFlow","getErrorSafe","pageID","performanceNow","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MAWBridgeObserver").__setRef("MAWWorkerEvent"),u=r("requireDeferred")("MAWWebWorkerSingleton").__setRef("MAWWorkerEvent"),c=new Set,d=new Set(["addEbUploadTrackingWorkerQPL","addMediaDownloadQpl","searchGetFTSRestoreSessionId","none"]),m=new Set(["bulkMaybeCreateOrUpdateThread","createOrUpdateThread"]),p=new Map,_=function(t){switch(t){case"sendAndReceive":return 1e4;case"fireAndForget":return 4e3;case"waitUntilCompleted":return 1e4;case"waitUntilPersisted":return 1e4;default:return 1e4}},f=function(n,o,a){var t=window.setTimeout(function(){E(n,"ack_timeout"),r("promiseDone")(s.load().then(function(t){t.notifyUnackedEvent({route:o,timestamp:(e||(e=r("performanceNow")))()})}))},_(a));return p.set(n,t),t},g=function(t){var e=p.get(t);e!=null&&(window.clearTimeout(e),r("promiseDone")(s.load().then(function(e){e.resetUnackedMessages()})),p.delete(t))};function h(e,t,n){c.has(n)||d.has(t)||(c.add(n),r("QPLUserFlow").start(r("qpl")._(1056842055,"807"),{annotations:{bool:{duringMIC:o("MAWMIC").duringMIC(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{key:n},string:{callType:e,event:t,pageID:r("pageID"),workerHeartbeatsOnStart:o("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:n}),o("MultipleTabsLogger").hasMultipleTabs().then(function(e){r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),{bool:{isMultiTabs:e}},{instanceKey:n})}),u.load().then(function(e){return e.getWorkerHealthStatus().then(function(e){r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),{string:{workerHealthStatusOnStart:e.tag}})})}))}function y(e){c.has(e)&&(c.delete(e),r("QPLUserFlow").endSuccess(r("qpl")._(1056842055,"807"),{instanceKey:e}))}function C(e,t){c.has(e)&&(c.delete(e),r("QPLUserFlow").endFailure(r("qpl")._(1056842055,"807"),"fail",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:t},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e}))}function b(e,t,n){c.has(e)&&(c.delete(e),r("QPLUserFlow").endFailure(r("qpl")._(1056842055,"807"),"timeout",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:t,workerHealthStatus:n.tag},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e}))}function v(e,t){c.has(e)&&r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),t,{instanceKey:e})}function S(e,t){if(c.has(e))try{if(Array.isArray(t)){var n,a=t.every(function(e){return typeof e=="object"&&e!=null&&"state"in e&&e.state===o("MAWReliabilityMonitor").HealthReportState.OK.valueOf()}),i=t.reduce(function(e,t){return typeof t=="object"&&t!=null&&"state"in t&&"identifier"in t&&"reason"in t&&t.state!==o("MAWReliabilityMonitor").HealthReportState.OK.valueOf()&&typeof t.state=="string"&&typeof t.reason=="string"&&typeof t.identifier=="string"&&e.push([t.identifier,t.state,t.reason].join(":")),e},[]);v(e,{bool:{workerHealthStatus:a},string:{error:(n=i[0])!=null?n:void 0},string_array:{errors:i}})}}catch(e){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Failed to log ack result annotations"),!1}}function R(e,t,n){if(typeof n=="object"&&typeof(n==null?void 0:n.timestamp)=="number"){var r=n.payload;g(e),E(e,"ack"),S(e,r),m.has(t)&&o("MAWTrackPendingOccamadilloThreads").markBridgeCallAcked()}}function L(e,t,n){d.has(t)||f(e,t,n),E(e,"send")}function E(e,t,n){c.has(e)&&r("QPLUserFlow").addPoint(r("qpl")._(1056842055,"807"),t,{instanceKey:e,timestamp:n})}l.getUnackedEventTimeout=_,l.logStart=h,l.logSuccess=y,l.logFailure=C,l.logTimeoutFailure=b,l.logAnnotations=v,l.logAck=R,l.logSend=L}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS","Random","WAHashStringToNumber"],(function(t,n,r,o,a,i,l){"use strict";var e,s=3185,u="armadillo_worker_runtime",c="getWorkerHeartbeat",d=10,m=new Array(d);function p(t,n,r){(e||(e=o("ODS"))).bumpEntityKey(s,u,t+"_"+n+"_"+r)}function _(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function f(t,n,r,a){p(n,r,"start"),r!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_start"),o("MAWWorkerEvent").logStart(t,r,a),m.length===d&&m.shift(),m.push(n+"_"+r))}function g(t){m.filter(Boolean).forEach(function(n){(e||(e=o("ODS"))).bumpEntityKey(s,u,n+t)})}function h(t,n,r){p(t,n,"success"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_success"),o("MAWWorkerEvent").logSuccess(r))}function y(t,n,r,a){p(t,n,"fail"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_fail"),o("MAWWorkerEvent").logFailure(a,r))}function C(t,n,r,a){p(t,n,"timeout"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_timeout"),o("MAWWorkerEvent").logTimeoutFailure(r,"Route timeout",a))}function b(){g("_before_unresponsive"),m.fill(null)}l.CAT_ID=s,l.ENT=u,l.HEARTBEAT_ROUTE=c,l.RECENT_ROUTES_NUM=d,l.getBridgeEventInstanceKey=_,l.routeStart=f,l.logRecentRoutes=g,l.routeSuccess=h,l.routeFail=y,l.routeTimeoutFail=C,l.logRecentBridgeEvents=b}),98);
__d("WACustomError",["fb-error"],(function(t,n,r,o,a,i,l){"use strict";function e(){return[r("fb-error").TAALOpcode.PREVIOUS_FRAME,r("fb-error").TAALOpcode.PREVIOUS_FRAME]}var s=(function(t){function n(n){var r;return r=t.call(this,n)||this,r.message=n,r.taalOpcodes=e(),r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error)),u=(function(e){function t(t,n){var r,o=n!=null&&n.length>0?n:p(t);return r=e.call(this,o)||this,r.name="AggregateError",r.errors=t,r}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(e){function t(t){var n;return n=e.call(this,t!=null?t:"TimeoutError")||this,n.name="TimeoutError",n}return babelHelpers.inheritsLoose(t,e),t})(s),d=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.name="HttpError",r.code=n,r}return babelHelpers.inheritsLoose(t,e),t})(s),m=(function(e){function t(t){var n;return n=e.call(this,t!=null?t:"UnimplementedMethod")||this,n.name="UnimplementedMethod",n}return babelHelpers.inheritsLoose(t,e),t})(s);function p(e){return e.length===0?"No errors":e.length===1?e[0].message:e.map(function(e){return"- "+e.message}).join("\n")}var _=!1;function f(e){if(e==null||e.name!=="QuotaExceededError")throw e;_=!0}function g(){return _}function h(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))}var y=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.inner=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));l.adjustTaalOpcodes=e,l.CustomError=s,l.AggregateError=u,l.TimeoutError=c,l.HttpError=d,l.UnimplementedMethod=m,l.supressQuotaExceededError=f,l.hasSupressedQuotaExceededError=g,l.obtainErrorSummary=h,l.WrappedError=y}),98);
__d("WAAbortError",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t!=null?t:"")||this,n.name="AbortError",n}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").CustomError),s="AbortError";function u(e){return function(t){if(t.name===s)return e(t);throw t}}l.AbortError=e,l.ABORT_ERROR=s,l.catchAbort=u}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r){return new(e||(e=n("Promise")))(function(e,n){if(r!=null&&r.aborted)throw new(o("WAAbortError")).AbortError;var a=setTimeout(i,t);r==null||r.addEventListener("abort",l);function i(){r==null||r.removeEventListener("abort",l),e()}function l(){r==null||r.removeEventListener("abort",l),clearTimeout(a),n(new(o("WAAbortError")).AbortError)}})}function u(t,r,o){return new(e||(e=n("Promise")))(function(e,n){var a=setTimeout(function(){try{e(o())}catch(e){n(e)}},r);t.then(function(t){clearTimeout(a),e(t)},function(e){clearTimeout(a),n(e)})})}function c(){return s(0)}l.delayMs=s,l.withTimeout=u,l.releaseToMainThread=c}),98);
__d("MAWMaybeWithTimeout",["MAWODSProxy","WAOdsEnums","WAPromiseDelays"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!0}function s(t,n,r,a){return e()?o("WAPromiseDelays").withTimeout(t.then(function(e){return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_NON_TIMEOUT,key:a!=null?a:"unknown"}),e}),n,function(){return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_TIMEOUT,key:a!=null?a:"unknown"}),r()}):t}l.maybeWithTimeout=s}),98);
__d("MAWTimedBridge",["MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=17e4;function u(t,n,r,a,i){return i===void 0&&(i=s),o("MAWWaitForBackendSetup").waitForBackendSetup(r).then(function(){return o("MAWMaybeWithTimeout").maybeWithTimeout(t(),i,function(){return o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(t){throw o("MAWBridgeLoggingUtils").routeTimeoutFail(n,r,a,t),o("WALogger").COUNT(e||(e=babelHelpers.taggedTemplateLiteralLoose(["route.",""])),r).tags("bridge_timeout"),new c("Bridge route "+r+" timed out, WorkerHealthStatus: "+t.tag)})},r)})}var c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="BridgeTimeoutError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));l.DEFAULT_MAW_BRIDGE_TIMEOUT_MS=s,l.bridgeTimeout=u,l.MAWBridgeTimeoutError=c}),98);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("1143");function u(t,r,a,i){return o("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var l=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(r);i!==!0&&o("MAWBridgeLoggingUtils").routeStart("fireAndForget",t,r,l),o("MAWTimedBridge").bridgeTimeout(function(){return new(e||(e=n("Promise")))(function(e){o("MAWBridge").getBridge().fireAndForget(t,r,a,i,{onAck:function(a){i!==!0&&(o("MAWWorkerEvent").logAck(l,r,a),o("MAWBridgeLoggingUtils").routeSuccess(t,r,l)),e()},onSend:function(t){var e=t.queueMsgs,n=t.queueSize;i!==!0&&(o("MAWWorkerEvent").logSend(l,r,"fireAndForget"),o("MAWWorkerEvent").logAnnotations(l,{int:{bridgeSize:n},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:l})})},t,r,l,s)},r)}l.fireAndForget=u}),98);
__d("MAWBridgeODSLogger",["ExecutionEnvironment","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){if(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_BRIDGE,key:(a?"sendAndReceive":"fireAndForget")+"."+t+"."+n+"."+((e||(e=r("ExecutionEnvironment"))).isInWorker?"worker":"ui")}),i!=null&&typeof i=="object"){var l=i.event;if(l!=null&&typeof l=="object"){var s=l==null?void 0:l.i;s!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_BRIDGE,key:"qpl."+t+"."+n+"."+s+"."+((e||(e=r("ExecutionEnvironment"))).isInWorker?"worker":"ui")})}}}l.logCrossWorkerPortalODS=s}),98);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWorkerEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(t),i=(r==null?void 0:r.isLoggingDisabled)!==!0,l=o("MAWTimedBridge").bridgeTimeout(function(){return i&&o("MAWBridgeLoggingUtils").routeStart("sendAndReceive",e,t,a),o("MAWBridge").getBridge().sendAndReceive(e,t,n,r==null?void 0:r.isLoggingDisabled,{onAck:function(n){i&&o("MAWWorkerEvent").logAck(a,t,n)},onSend:function(n){var e=n.queueMsgs,r=n.queueSize;i&&(o("MAWWorkerEvent").logSend(a,t,"sendAndReceive"),o("MAWWorkerEvent").logAnnotations(a,{int:{bridgeSize:r},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:a}).then(function(n){return i&&o("MAWBridgeLoggingUtils").routeSuccess(e,t,a),n}).catch(function(n){throw i&&o("MAWBridgeLoggingUtils").routeFail(e,t,n.message,a),n})},e,t,a,r==null?void 0:r.timeoutMs);return l}l.sendAndReceive=e}),98);
__d("MAWBundleResource",["MAWMainWebWorkerV2Resource"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MAWMainWebWorkerV2Resource")}),98);
__d("MAWJids",["I64","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WAJids").createJidUtils({platform:"msgr"}),u=s.toUserJid,c=function(n,r){var t=(e||(e=o("I64"))).to_string(n);return r?o("WAJids").toGroupJid(t):u(t)};function d(e){return c(e,!1)}function m(e){return c(e,!0)}var p=function(n){var t=o("WAJids").threadIdForChatJid(n);return(e||(e=o("I64"))).of_string(t)};function _(e){return o("WAJids").unsafeCoerceToChatJid(e)}l.jidUtils=s,l.toUserJid=u,l.convertIntJidToChatJid=c,l.convertIntJidToOneToOneChatJid=d,l.convertIntJidToGroupJid=m,l.convertChatJidToIntJid=p,l.threadIdToChatJid=_}),98);
__d("MAWMiActMappingTableAPI",["I64","LSMessagingThreadTypeUtil","MAWJids","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return t==null?Promise.resolve(null):o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))}function u(e,t,n){return s(e,t).then(function(e){var t=e==null?void 0:e.jid;return t==null?null:o("MAWJids").convertIntJidToChatJid(t,o("LSMessagingThreadTypeUtil").isGroup(n))})}function c(e,t){return m(e,t).then(function(e){return e==null?void 0:e.serverThreadKey})}function d(e,t){return t==null?Promise.resolve(null):o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table.index("jid")).getKeyRange(t))}function m(e,t){return d(e,o("MAWJids").convertChatJidToIntJid(t))}async function p(e,t){var n=t.intJid,r=t.threadKey,o=await s(e,r);return o!=null?o:d(e,n)}function _(t){return(e||(e=o("I64"))).le(t,e.zero)}function f(e,t){return e.tables.mi_act_mapping_table.subscribe(function(e,n){var r=e[0],o=e[1],a=e[2],i=n.operation;i==="delete"&&!_(o)&&t(o,r)})}l.getMappingRowForThreadKey=s,l.getChatJidForThreadKey=u,l.getThreadKeyForChatJid=c,l.getMappingRowForIntJid=d,l.getMappingRowForChatJid=m,l.getMappingRowForThreadKeyOrJid=p,l.subscribeToMappingDeletion=f}),98);
__d("MAWChatJid",["FBLogger","I64","MAWJids","MAWMiActMappingTableAPI","ReQL","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){try{return o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,o("MAWJids").convertChatJidToIntJid(t)).then(function(e){return e==null?void 0:e.serverThreadKey})}catch(e){var n=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(n).warn("Invalid chatJid: "+t),Promise.reject(n)}}function u(e,t,n){return s(e,t).then(function(e){if(e!=null)return e;throw r("FBLogger")("messenger_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",n)})}async function c(e,t){var n=await s(e,t);if(n!=null)return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(n))}function d(t,n){try{return o("MAWMiActMappingTableAPI").getMappingRowForIntJid(t,n).then(function(e){return e==null?void 0:e.serverThreadKey})}catch(t){var a=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").catching(a).warn("Invalid integer jid: "+(e||(e=o("I64"))).to_string(n)),Promise.reject(a)}}l.toThreadKeyMaybe=s,l.toThreadKey=u,l.toThreadMaybe=c,l.toThreadKeyMaybeForChatJidInteger=d}),98);
__d("WAShiftTimer",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$2=0,this.$3=0,this.ts=0,this.$4=0,this.$5=0,this.$6=0,this.$7=void 0,this.$8=function(){var e=t.$7,n=t.$1;t.$3=0,t.$2=0,t.ts=0,t.$4=0,t.$5=0,t.$6=0,t.$7=void 0,n(e)},this.onOrBefore=function(e,n){s(e);var r=Date.now(),o=r+e,a=t.$5;if(!(a!==0&&a<o)){var i=t.$6;i!==0&&o<i||(t.$5=o,t.$3===0&&(t.$2===0||o<t.ts)&&t.$9(o,e,n))}},this.forceRunNow=function(e){t.$2!==0&&clearTimeout(t.$2),t.$3!==0&&cancelAnimationFrame(t.$3),t.$7=e,t.$8()},this.cancel=function(){t.$2!==0&&clearTimeout(t.$2),t.$3!==0&&cancelAnimationFrame(t.$3),t.$2=0,t.$3=0,t.ts=0,t.$4=0,t.$5=0,t.$6=0,t.$7=void 0},this.$1=e}var t=e.prototype;return t.onOrBeforeRepaint=function(t){if(this.$3===0){var e=Date.now(),n=this.$6;if(!(n!==0&&e<n)){var r=this.$5;(r===0||e<r)&&(this.$5=e),this.$2!==0&&(clearTimeout(this.$2),this.$2=0),(!this.ts||this.ts>e)&&(this.ts=e),this.$7=t,this.$3=requestAnimationFrame(this.$8)}}},t.onOrAfter=function(t,n){s(t);var e=Date.now(),r=e+t,o=this.$6;if(!(o!==0&&r<o)){var a=this.$5;a!==0&&a<r||(this.$6=r,(this.$2===0||this.ts<r)&&this.$9(r,t,n))}},t.debounce=function(t,n){s(t),this.$10(Date.now(),t,n)},t.debounceAndCap=function(t,n,r){s(t),s(n);var e=Date.now(),o=e+n,a=this.$6,i=this.$5;(a===0||a<=o)&&(i===0||o<i)&&(this.$5=o),this.$10(e,t,r)},t.forceRunNowIfScheduled=function(){this.$2!==0?(clearTimeout(this.$2),this.$8()):this.$3!==0&&(cancelAnimationFrame(this.$3),this.$8())},t.isScheduled=function(){return this.$2!==0||this.$3!==0},t.$10=function(t,n,r){var e=t+n,o=this.$6;if(!(o!==0&&e<o)){var a=this.ts,i=this.$5;i!==0&&i<e?a<i&&this.$9(i,i-t,r):a<e&&this.$9(e,n,r)}},t.$9=function(t,n,r){if(this.$3!==0&&(cancelAnimationFrame(this.$3),this.$3=0),this.$7=r,this.ts=t,this.$2!==0){var e=t-this.$4;if(-16<e&&e<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,n),this.$4=t},e})();function s(e){if(!(e>=0))throw r("err")("ShiftTimer must be given delayMs >= 0")}l.ShiftTimer=e}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=1e3,u=(function(){function t(t,n,r){var a=this;this.$1=null,this.$6=Date.now(),this.$7=new(o("WAShiftTimer")).ShiftTimer(function(){var e=a.$1;e!=null&&(a.$1=null,a.$2(e))}),this.$2=n,this.$3=t,this.$5=r!=null?r:e,this.$4=this.$5}var n=t.prototype;return n.addEvent=function(t){var e=this.$1;if(this.$1=e?this.$3(e,t):[t],!this.$7.isScheduled()){var n=this.$4;if(n<1){var r=Date.now(),o=Math.max(r-this.$6,0)/s;n=Math.min(n+o,this.$5),this.$4=n,this.$6=r}var a;n>=1?(a=0,this.$4=n-1):(a=Math.ceil(s*(1-n)),this.$4=0),this.$7.onOrBefore(a)}},n.cancel=function(){this.$1=null,this.$7.cancel()},t})();l.BridgeBatcher=u}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){this.key=t,this.value=n,this.prev=null,this.next=null},u=(function(){function t(e){var t=this,n;this.$2=new Map,this.purgeNow=function(){for(var e=t.$6.prev;t.$4>t.$3&&e!==t.$5;e=e?e.prev:null){if(e==null)throw r("err")("The linked list is not constructed properly.");var n=e,o=n.key,a=n.value;t.$9(o,a)&&(t.delete(o),t.$10&&t.$10(o,a))}t.$8&&t.$8(t.$2)},this.$3=e.sizeLimit,this.$7=e.getSize,this.$8=e.onPurge,this.$9=(n=e.shouldEvict)!=null?n:function(){return!0},this.$10=e.onEvict,this.$11=e.onAdd,this.$12=e.onDelete,this.$4=0,this.$5=new s("placeholder-head",null),this.$6=new s("placeholder-tail",null),this.$5.next=this.$6,this.$6.prev=this.$5,this.$1=new(o("WAShiftTimer")).ShiftTimer(function(){return t.purgeNow()})}var n=t.prototype;return n.get=function(t){if(!this.$2.has(t))return null;var e=this.$2.get(t);if(e==null)return null;var n=e.prev,o=e.next;n&&(n.next=o),o&&(o.prev=n);var a=this.$5.next;if(a==null)throw r("err")("The linked list is not constructed properly.");return this.$5.next=e,a.prev=e,e.prev=this.$5,e.next=a,e.value},n.has=function(t){return this.$2.has(t)},n.touch=function(t){this.get(t)},n.put=function(n,r){if(this.$3!==0){if(this.$7(r)>this.$3){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."])));return}this.delete(n),this.$14(n,r),this.schedulePurge()}},n.$14=function(t,n){var e=new s(t,n);this.$2.set(t,e);var o=this.$5.next;if(o==null)throw r("err")("The linked list is not constructed properly.");this.$5.next=e,o.prev=e,e.prev=this.$5,e.next=o,this.$4+=this.$7(n),this.$11&&this.$11(t,n)},n.delete=function(t){if(this.$2.has(t)){var e=this.$2.get(t);if(e!=null){this.$4-=this.$7(e.value);var n=e.prev,r=e.next;n&&(n.next=r),r&&(r.prev=n),this.$2.delete(t),this.$12&&this.$12(t,e.value)}}},n.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()},n.schedulePurge=function(){this.$1.onOrBefore(1e3)},n.getCurrentSize=function(){return this.$4},n.getSizeLimit=function(){return this.$3},n.getPlaceholderHead=function(){return this.$5},n.forEach=function(t){if(this.$4!==0){var e=this.$6.prev;if(e==null)throw r("err")("The linked list is not constructed properly.");for(;e!=null&&e!==this.$5;)t(e.value),e=e.prev}},t})();l.LruCache=u}),98);
__d("WACrossWorkerPortal",["FBLogger","Promise","WABridgeBatcher","WALogger","WALruCache","WAPromiseManagement","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=["transferList"],s,u,c,d,m,p,_,f,g,h,y=(function(){function t(e,t,n,r,a){var i=this,l;if(this.port=null,this.$2=1,this.openRequests=new Map,this.listeners=new Set,(a==null?void 0:a.useLRUCache)===!0){var s,u=new(o("WALruCache")).LruCache({sizeLimit:(s=a.portalCacheSize)!=null?s:100,getSize:function(){return 1}});this.processedRequests={has:function(t){return u.has(t)},add:function(t){u.put(t,!0)}}}else{var c=new Set;this.processedRequests={has:function(t){return c.has(t)},add:function(t){c.add(t)}}}this.$1=e,this.clientId=r,this.config=a,this.sendStream=new(o("WABridgeBatcher")).BridgeBatcher(t,function(e){i.$3(e)},(l=this.config)==null?void 0:l.bridgeBatcherMaxTokens),n.forEach(function(t){e.setNamespaceHandler(t,i.$4(t))})}var a=t.prototype;return a.$5=function(){var e=this.clientId!=null?this.clientId+"_":"";return""+e+this.$2++},a.$6=function(t){var e=t.split("_");return e.length!==2?null:e[0]},a.addListener=function(t){var e=this;return this.listeners.add(t),function(){return e.listeners.delete(t)}},a.setPort=function(t){var e=this;o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]))),this.port=t,this.sendStream.cancel(),t.onmessage=function(n){if(e.port!==t){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"])));return}var r=n.data;!r||!Array.isArray(r)||r.forEach(function(n){e.$7(n,"incoming"),e.$8(t,n)})},this.openRequests.forEach(function(t){var n=t.request;e.sendStream.addEvent({type:"request",content:n})})},a.getBridge=function(){return this.$1},a.$4=function(t){var e=this;return function(n,r,o,a,i,l,s){e.$9(t,n,r,o,a,i,l,s)}},a.$9=function(t,n,o,a,i,l,s,u){var e,d,m=this.$5(),p=babelHelpers.extends({fromClientId:(e=this.clientId)!=null?e:void 0},u),_={requestId:m,expectsResponse:!!a,namespace:t,name:n,arg:o,transferList:l,silentLog:i,opts:p};if(((d=this.config)==null?void 0:d.onSendAcross)!=null)try{this.config.onSendAcross(t,n,_.expectsResponse,o)}catch(e){var f=r("getErrorSafe")(e);r("FBLogger")("wmi").catching(f).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onSendAcross"])))}this.openRequests.set(m,{request:_,resolver:a,eventCallbacks:s}),this.sendStream.addEvent({type:"request",content:_})},a.$10=function(t,n){t===this.port&&this.sendStream.addEvent({type:"result",content:n})},a.$3=function(n){var t=this,r=this.port;if(r){var o=[],a=[];for(var i of n)if(i.type==="request"){var l=i.content,s=l.transferList,u=babelHelpers.objectWithoutPropertiesLoose(l,e);s!=null&&(a=a.concat(s)),o.push({type:"request",content:u})}else o.push(i);r.postMessage(o,a.length>0?a:void 0);var c=n.map(function(e){var t,n,r,o=(t=(n=e.content.arg)==null?void 0:n.type)!=null?t:"";return""+((r=e.content.name)!=null?r:"")+(o?":"+o:"")}).filter(Boolean);n.forEach(function(e){var r;t.$7(e,"outgoing");var o=t.openRequests.get(e.content.requestId);(o==null||(r=o.eventCallbacks)==null?void 0:r.onSend)!=null&&o.eventCallbacks.onSend({queueSize:n.length,queueMsgs:c})})}},a.$7=function(t,n){this.listeners.forEach(function(e){return e(t,n)})},a.$8=function(t,a){var e=this;if(a.type==="request"){var i=a.content,l=i.arg,s=i.expectsResponse,u=i.name,c=i.namespace,g=i.opts,y=i.requestId,C=i.silentLog;if(C||o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""])),y,u),(g==null?void 0:g.toClientId)!=null&&g.toClientId!==this.clientId){C||o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," not intended for client ",""])),y,this.clientId);return}var b=this.$1,v={type:"result",content:{requestId:y,type:"handled",result:{payload:b.getAckPayoad(),timestamp:Date.now()},silentLog:C,opts:g}};if(this.$7(v,"outgoing"),t.postMessage([v]),s){var S=b.sendAndReceive(c,u,l,C,void 0,g).then(function(n){e.$10(t,{requestId:y,type:"success",result:n,silentLog:C,opts:g})},function(n){e.$10(t,{requestId:y,type:"error",result:String(n),silentLog:C,opts:g})});o("WAPromiseManagement").preventGarbageCollection(S)}else b.fireAndForget(c,u,l,C,void 0,g)}else{a.type;var R=a.content,L=R.requestId,E=R.result,k=R.silentLog,I=R.type,T=this.$6(L);if(T!==this.clientId||this.processedRequests.has(L))return;var D=this.openRequests.get(L);if(!D){o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""])),L);return}switch(I){case"success":case"error":{this.openRequests.delete(L),this.processedRequests.add(L);var x=D.resolver;x?x(I==="success"?E:(h||(h=n("Promise"))).reject(r("err")(E!=null?E:""))):o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast: ",""])),E);break}case"handled":try{var $;($=D.eventCallbacks)==null||$.onAck==null||$.onAck(E)}catch(e){var P=r("getErrorSafe")(e);o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onAck: ",""])),P.message)}D.resolver||(this.openRequests.delete(L),this.processedRequests.add(L));break}}},t})();function C(e,t,n,r,o){return new y(e,n,t,r,o)}function b(e){var t;(t=e.port)==null||t.close(),e.port=null,e.sendStream.cancel();var n=e.openRequests;e.openRequests=new Map;var r=e.getBridge();n.forEach(function(e){var t=e.request,n=e.resolver,a=t.arg,i=t.name,l=t.namespace,s=t.silentLog;o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""])),t.requestId),n?n(r.sendAndReceive(l,i,a,s)):r.fireAndForget(l,i,a,s)})}l.CrossWorkerPortal=y,l.attachPortal=C,l.killPortalAndSendPendingToBridge=b}),98);
__d("MAWCrossWorkerPortal",["FBLogger","MAWBridgeODSLogger","WACrossWorkerPortal","justknobx","pageID"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){if(e!=null)return e;var l=babelHelpers.extends({},i);return r("justknobx")._("5256")&&(l=babelHelpers.extends({},i,{onSendAcross:o("MAWBridgeODSLogger").logCrossWorkerPortalODS})),e=o("WACrossWorkerPortal").attachPortal(t,n,a,r("pageID"),l),e}function u(){if(e==null){r("FBLogger")("messenger_web").warn("Trying to kill portal before its setup");return}o("WACrossWorkerPortal").killPortalAndSendPendingToBridge(e)}l.getOrCreateCrossWorkerPortal=s,l.killPortalWhenWorkerTerminating=u}),98);
__d("MAWMiActGetMappingWithMawTypes",["I64","MAWJids","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=(e||(e=o("I64"))).to_string(t.jid),a=n?o("WAJids").toGroupJid(r):o("MAWJids").toUserJid(r);return{clientThreadPk:t.clientThreadPk,jid:a,serverThreadKey:t.serverThreadKey}}l.default=s}),98);
__d("MAWMiActThreadLifecycleState__DO_NOT_USE",[],(function(t,n,r,o,a,i){"use strict";var e={AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:"AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW",AUTHORITATIVE_THREAD_ONLY:"AUTHORITATIVE_THREAD_ONLY",CLIENT_PARTIAL_MI_THREAD:"CLIENT_PARTIAL_MI_THREAD",CLIENT_PARTIAL_MI_THREAD_WITH_ACT:"CLIENT_PARTIAL_MI_THREAD_WITH_ACT",JID_MISSING_MAPPING_ROW:"JID_MISSING_MAPPING_ROW",JID_MISSING_MI_THREAD:"JID_MISSING_MI_THREAD",MI_AND_ACT_THREAD_COMPLETE:"MI_AND_ACT_THREAD_COMPLETE",OPTIMISTIC_THREAD_NO_ACT:"OPTIMISTIC_THREAD_NO_ACT",OPTIMISTIC_THREAD_WITH_ACT:"OPTIMISTIC_THREAD_WITH_ACT",SERVER_PARTIAL_MI_THREAD:"SERVER_PARTIAL_MI_THREAD",THREAD_KEY_ONLY:"THREAD_KEY_ONLY"};i.MiActThreadStatesEnum=e}),66);
__d("MWLogSendToSentFailedError",["FBLogger","QuickPerformanceLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,o,a,i){var l,s,u,c,d,m,p,_,f=t.qplEventType,g=t.qplInstanceKey,h=(e||(e=r("QuickPerformanceLogger"))).getMarker(f,g),y=h==null||(l=h.annotations)==null||(l=l.bool)==null?void 0:l.is_secure;r("FBLogger")("messenger_web_messaging","send_to_sent_failed").blameToPreviousFrame().blameToPreviousFrame().warn("send_to_sent failed with reason: %s. Caught error message: %s. Additional description: %s. Secure? %s. Error Code: %s. Application Error: %s.",n,(s=o==null?void 0:o.message)!=null?s:"",(u=(c=h==null||(d=h.annotations)==null||(d=d.string)==null?void 0:d.error_description)!=null?c:h==null||(m=h.annotations)==null||(m=m.string)==null?void 0:m.errorType)!=null?u:"",y===!0?"secure":y===!1?"open":"unknown",(p=a==null?void 0:a.toString())!=null?p:"",(_=i==null?void 0:i.toString())!=null?_:"")}l.default=s}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share",NoteReply:"note_reply"});function l(t){var n=t.hasFile,r=n===void 0?!1:n,o=t.hasGif,a=o===void 0?!1:o,i=t.hasHotEmoji,l=i===void 0?!1:i,s=t.hasImage,u=s===void 0?!1:s,c=t.hasLinks,d=c===void 0?!1:c,m=t.hasNoteReply,p=m===void 0?!1:m,_=t.hasShare,f=_===void 0?!1:_,g=t.hasSticker,h=g===void 0?!1:g,y=t.hasVideo,C=y===void 0?!1:y,b=t.hasVoiceClip,v=b===void 0?!1:b,S=e.None;return u?S=e.Image:C?S=e.Video:l?S=e.HotEmoji:h?S=e.Sticker:a?S=e.Gif:v?S=e.Audio:r?S=e.File:f?S=e.Share:d?S=e.Link:p&&(S=e.NoteReply),S}i.AttachmentType=e,i.getAttachmentType=l}),66);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,i,l,s=o("MWChatInteraction").get((e||(e=o("I64"))).to_string(t)),u=s!=null?r("InteractionTracingMetrics").get(s):null,c=(n=u==null||(a=u.annotations.string)==null?void 0:a.inboxEntrypoint)!=null?n:u==null||(i=u.annotations.string)==null?void 0:i.entrypoint;if(c!=null&&c!=="unknown")return c;var d=o("MWChatInteraction").get("inbox_init");if(d!=null&&(e||(e=o("I64"))).equal(t,(e||(e=o("I64"))).of_string(d)))return"initInbox";var m=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN),p=m!=null?(l=r("InteractionTracingMetrics").get(m))==null||(l=l.annotations.string)==null?void 0:l.thread_id:null;return p===(e||(e=o("I64"))).to_string(t)?"auto_open":"unknown"}l.default=s}),98);
__d("MWMsgActionLogUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting",Edit:"edit",Bump:"bump",Retry:"retry"});function l(t){var n=t.hasEphemeralSetting,r=n===void 0?!1:n,o=t.hasGroupInvite,a=o===void 0?!1:o,i=t.hasReaction,l=i===void 0?!1:i,s=t.hasReply,u=s===void 0?!1:s,c=t.hasSenderKeyDistribution,d=c===void 0?!1:c,m=t.hasStoryReply,p=m===void 0?!1:m,_=t.isBump,f=_===void 0?!1:_,g=t.isEdit,h=g===void 0?!1:g,y=t.isForward,C=y===void 0?!1:y,b=t.isRetry,v=b===void 0?!1:b,S=t.isUnsend,R=S===void 0?!1:S,L=e.Send;return u?L=e.Reply:p?L=e.StoryReply:R?L=e.Unsend:l?L=e.Reaction:a?L=e.GroupInvite:r?L=e.EphemeralSetting:d?L=e.SenderKeyDistribution:h?L=e.Edit:C?L=e.Forward:f?L=e.Bump:v&&(L=e.Retry),L}i.ActionType=e,i.getActionType=l}),66);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("isStringNullOrEmpty")(e)?!1:r("URLMatcher").match(e)!=null}l.getHasLinks=e}),98);
__d("MWVersion",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("2");l.v2=s}),98);
__d("MWSharedS2SBaseAnnotations",["I64","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MWHasLinksUtil","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWPreloadableQueries","MWVersion","MultipleTabsLogger","ReQL","gkx","isStringNullOrEmpty","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e=["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isBump","isEdit","isForward","isRetry","isUnsend"],s=["db","threadKey"],u;async function c(t,n,a,i,l){var s=t.hasAttachment,c=s===void 0?!1:s,m=t.hasEphemeralSetting,p=t.hasGroupInvite,_=t.hasReaction,f=t.hasReply,g=t.hasSenderKeyDistribution,h=t.hasStoryReply,y=t.hasText,C=y===void 0?!1:y,b=t.isBump,v=t.isEdit,S=t.isForward,R=t.isRetry,L=t.isUnsend,E=babelHelpers.objectWithoutPropertiesLoose(t,e);l===void 0&&(l=!1);var k=o("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:m,hasGroupInvite:p,hasReaction:_,hasReply:f,hasSenderKeyDistribution:g,hasStoryReply:h,isBump:b,isEdit:v,isForward:S,isRetry:R,isUnsend:L}),I=o("MWMsgMediaTypeLogUtils").getAttachmentType(E),T=i!=null?parseInt(i,10):void 0;return isNaN(T)&&(T=void 0),{bool:{has_attachment:c,has_sticker:E.hasSticker,has_text:C,is_attachments_grouped:E.isAttachmentsGrouped,is_pwa:l,is_tlc_public_user:r("gkx")("24028"),use_maw_shared_worker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},int:{number_of_attachments:E.numberOfAttachments,number_of_grouped_attachments:E.numberOfGroupedAttachments,offline_threading_id:T},string:{action_type:k,attachment_type:I,entrypoint:d(n),message_type:C&&(!I||I===o("MWMsgMediaTypeLogUtils").AttachmentType.None)?"text":"non-text",multipleTabs:await o("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(u||(u=o("I64"))).to_string(o("MWVersion").v2),offline_threading_id:i,root_component:a}}}function d(e){var t;return(t=Object.keys(r("LSMessagingThreadAttributionType")).find(function(t){return r("LSMessagingThreadAttributionType")[t]===e}))!=null?t:"UNKNOWN"}async function m(e){var t=e.db,n=e.threadKey,r=babelHelpers.objectWithoutPropertiesLoose(e,s),a=t!=null&&n!=null?await o("ReQL").toArrayAsync(o("MWPreloadableQueries").getMediaStagingQuery(t,n)):[];return{mediaStagings:a,messageTypeParams:p(babelHelpers.extends({},r,{mediaStagings:a}))}}function p(e){var t=e.externalAttachmentUrl,n=e.hotEmojiSize,a=e.isBump,i=e.isEdit,l=e.isEphemeralSetting,s=e.isForward,u=e.isGroupInvite,c=e.isReaction,d=e.isRetry,m=e.isSenderKeyDistribution,p=e.isUnsend,_=e.mediaGroupInfo,f=e.mediaStagings,g=e.messageText,h=e.numberOfAttachments,y=e.reply,C=e.sentFromShareSheet,b=e.sticker,v=e.threadType,S=e.voiceClip,R=!r("isStringNullOrEmpty")(g),L=o("MWHasLinksUtil").getHasLinks(g),E=(h!=null?h:0)>0,k=S!=null;(k||t!=null)&&(E=!0);var I=!1,T=!1,D=!1,x=h,$=0,P;if(f!=null&&f.length>0){E=!0;for(var N of f){var M=N.mimeType;M.indexOf("image")!==-1&&(I=!0),M.indexOf("video")!==-1&&(T=!0),M.indexOf("application")!==-1&&(D=!0)}if(I&&v!=null){var w=o("LSMessagingThreadTypeUtil").isArmadilloSecure(v);P=!w}x=f.length}_!=null&&(P=!0,$=_.messagesAndAttachments.length);var A=n!=null,F=y!=null,O=y!=null,B=b!=null&&!A,W=!B&&t!=null,q=C===!0,U=c===!0,V=u===!0,H=l===!0,G=m===!0;return{hasAttachment:E,hasEphemeralSetting:H,hasFile:D,hasGif:W,hasGroupInvite:V,hasHotEmoji:A,hasImage:I,hasLinks:L,hasReaction:U,hasReply:F,hasSenderKeyDistribution:G,hasShare:q,hasSticker:B,hasStoryReply:O,hasText:R,hasVideo:T,hasVoiceClip:k,isAttachmentsGrouped:P,isBump:a!=null?a:!1,isEdit:i!=null?i:!1,isForward:s!=null?s:!1,isRetry:d!=null?d:!1,isUnsend:p!=null?p:!1,numberOfAttachments:x,numberOfGroupedAttachments:$}}l.getSendToSentBaseAnnotations=c,l.getEntrypointAnnotation=d,l.queryMediaStagingAndGetMessageTypeParams=m,l.getMessageTypeParams=p}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWSharedS2SBaseAnnotations","MultipleTabsLogger","cr:6985","gkx","isArmadillo","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({Text:"text",NonText:"non-text"});async function c(t){var a=t.attachmentTypeParams,i=t.composerEntrypoint,l=t.isPwa,s=t.messageOfflineThreadingId,u=t.source,c=t.thread,d=n("cr:6985")!=null?await n("cr:6985").isCutoverThreadKey(c.threadKey):!1,m=await o("MWSharedS2SBaseAnnotations").getSendToSentBaseAnnotations(a,u,i,s,l);return{bool:babelHelpers.extends({},m.bool,o("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(c),{is_community_event:c.eventStartTimestampMs!=null,is_cutover:r("isArmadillo")()&&d,is_message_request:o("LSMessagingThreadTypeUtil").isMessageRequest(c),is_secure:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType)}),int:babelHelpers.extends({},m.int),string:babelHelpers.extends({},m.string,{consistent_thread_fbid:c.consistentThreadFbid!=null?(e||(e=o("I64"))).to_string(c.consistentThreadFbid):null,original_entrypoint:r("MWGetOriginalEntrypoint")(c.threadKey),thread_id:(e||(e=o("I64"))).to_string(c.threadKey),thread_subtype:c.threadSubtype!=null?(e||(e=o("I64"))).to_string(c.threadSubtype):null,thread_type:e.to_string(c.threadType)})}}function d(e,t,n,a){m(e,t,r("MWGetOriginalEntrypoint")(n.threadKey),n.threadKey,n.consistentThreadFbid,n.threadType,n.threadSubtype,a),o("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(n,e)}function m(t,a,i,l,s,c,d,m){var p=a.hasEphemeralSetting,_=p===void 0?!1:p,f=a.hasFile,g=f===void 0?!1:f,h=a.hasGif,y=h===void 0?!1:h,C=a.hasGroupInvite,b=C===void 0?!1:C,v=a.hasHotEmoji,S=v===void 0?!1:v,R=a.hasImage,L=R===void 0?!1:R,E=a.hasLinks,k=E===void 0?!1:E,I=a.hasReaction,T=I===void 0?!1:I,D=a.hasReply,x=D===void 0?!1:D,$=a.hasSenderKeyDistribution,P=$===void 0?!1:$,N=a.hasShare,M=N===void 0?!1:N,w=a.hasSticker,A=w===void 0?!1:w,F=a.hasStoryReply,O=F===void 0?!1:F,B=a.hasText,W=B===void 0?!1:B,q=a.hasVideo,U=q===void 0?!1:q,V=a.hasVoiceClip,H=V===void 0?!1:V,G=a.isAttachmentsGrouped,z=a.isBump,j=z===void 0?!1:z,K=a.isEdit,Q=K===void 0?!1:K,X=a.isForward,Y=X===void 0?!1:X,J=a.isRetry,Z=J===void 0?!1:J,ee=a.isUnsend,te=ee===void 0?!1:ee,ne=a.numberOfAttachments,re=ne===void 0?0:ne,oe=a.numberOfGroupedAttachments,ae=oe===void 0?0:oe,ie=o("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:_,hasGroupInvite:b,hasReaction:T,hasReply:x,hasSenderKeyDistribution:P,hasStoryReply:O,isBump:j,isEdit:Q,isForward:Y,isRetry:Z,isUnsend:te}),le=o("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:g,hasGif:y,hasHotEmoji:S,hasImage:L,hasLinks:k,hasShare:M,hasSticker:A,hasVideo:U,hasVoiceClip:H,numberOfAttachments:re,numberOfGroupedAttachments:ae}),se=W&&(!le||le===o("MWMsgMediaTypeLogUtils").AttachmentType.None)?u.Text:u.NonText;o("MultipleTabsLogger").addAnnotationWithInteractionUuid(t.getTraceId()),t.addAnnotation("attachment_type",le),t.addAnnotation("action_type",ie),t.addAnnotation("message_type",se),t.addAnnotation("original_entrypoint",i),m!=null&&t.addAnnotation("root_component",m),t.addAnnotationInt("number_of_attachments",re),G!=null&&t.addAnnotationBoolean("is_attachments_grouped",G),t.addAnnotation("thread_id",(e||(e=o("I64"))).to_string(l)),s!=null&&t.addAnnotation("consistent_thread_fbid",(e||(e=o("I64"))).to_string(s)),t.addAnnotation("thread_type",e.to_string(c)),d!=null&&t.addAnnotation("thread_subtype",(e||(e=o("I64"))).to_string(d)),n("cr:6985")!=null&&r("promiseDone")(n("cr:6985").isCutoverThreadKey(l),function(e){t.addAnnotationBoolean("is_cutover",e)}),t.addAnnotationBoolean("is_secure",o("LSMessagingThreadTypeUtil").isArmadilloSecure(c)),t.addAnnotationBoolean("is_eb_enabled",r("MAWEBSwitch").isEnabled()),t.addAnnotationBoolean("use_maw_shared_worker",o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()),t.addAnnotationBoolean("is_pdb",!!r("gkx")("8483"))}function p(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2))?"media":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4))?"audio":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4096))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(134217728))?"sticker":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16384))?"gif":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(64))?"file":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1))?"text":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1024))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(536870912))?"XMA":"unknown"}l.MsgType=u,l.getSendToSentAnnotations=c,l.addSendMessageMetadataForInteractionTrace=d,l.addSendMessageMetadataForInteractionTraceWithThreadMetadata=m,l.getMessageTypeFromDisplayedContentType=p}),98);
__d("sendToSentQPLLogger",["LSDatabaseSingleton","LSIntEnum","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MWLogSendToSentFailedError","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","Network","QPLEvent","QPLUserFlow","QuickPerformanceLogger","Random","ReQL","WAExceededStorageQuota","WAGetStorageQplAnnotations","getSafeQplErrorMessage","gkx","interaction-tracing","justknobx","mergeDeep","pageID","performance","promiseDone","qpl","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=r("requireDeferred")("MAWWebWorkerSingleton").__setRef("sendToSentQPLLogger"),p=r("qpl")._(25313175,"1551"),_=new Map;function f(e,t){r("QPLUserFlow").addAnnotations(p,t,{instanceKey:e})}function g(e,t){r("QPLUserFlow").endCancel(p,{annotations:t!=null?t:{},instanceKey:e}),S(e)}function h(e,t,n,a){var i=a!=null?a.type:t;r("MWLogSendToSentFailedError")({qplEventType:p,qplInstanceKey:e},i,n,a==null?void 0:a.errorCode,a==null?void 0:a.applicationErrorCode),r("QPLUserFlow").endFailure(p,i,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),useSentBytesCache:r("gkx")("33008"),wasBackendSetupReset:o("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(n)},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},error:n,instanceKey:e}),S(e)}function y(e,t,n,o){e!=null&&r("QPLUserFlow").addPoint(p,t,{data:o,debugInfo:n,instanceKey:e})}function C(e){(c||(c=r("QuickPerformanceLogger"))).markerEnd(p,160,e),S(e)}function b(e,t){y(e,t?"network_connection_online":"network_connection_offline"),t||C(e)}function v(e){var t=r("interaction-tracing").NetworkStatusTracker.onChange(function(t){var n=t.online;b(e,n)});if(_.set(e,t),b(e,r("interaction-tracing").NetworkStatusTracker.isOnline()),r("Network").containsNetworkInformation()){var n=r("Network").getRTT();n!=null&&f(e,{int:{network_rtt:n}});var o=r("Network").getEffectiveType();o!=null&&f(e,{string:{network_effective_type:String(o)}});var a=r("Network").getBandwidth();a!=null&&f(e,{int:{network_bandwidth:a}});var i=r("Network").getType();i!=null&&f(e,{string:{network_connectivity_type:String(i)}})}}function S(e){var t;(t=_.get(e))==null||t.remove(),_.delete(e)}function R(e){window.navigator&&window.navigator.hardwareConcurrency&&f(e,{int:{hardware_concurrency:window.navigator.hardwareConcurrency}})}function L(t,n){t===void 0&&(t=!0);var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);return r("QPLUserFlow").start(E(n),{annotations:{bool:{backendSetupReady:o("MAWWaitForBackendSetup").isBackendSetupSuccessful(),wasBackendSetupReset:o("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{timeMsSinceSessionStart:(d||(d=r("performance"))).now()},string:{hostname:window.location.hostname,pageID:r("pageID"),workerHeartbeatsOnStart:o("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a}),r("promiseDone")(o("MAWMIC").getState().then(function(e){f(a,{string:{mic_state:e}})})),t&&r("promiseDone")(o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){f(a,e)})),r("promiseDone")((e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.tables.connectivity_status)).then(function(e){e&&f(a,{int:{connection_state_ls_transport:(s||(s=o("LSIntEnum"))).toNumber(e.internetConnectionState)}})})})),r("promiseDone")(m.load().then(function(e){return e.getWorkerHealthStatus().then(function(e){f(a,{string:{workerHealthStatusOnStart:e.tag}})})})),v(a),R(a),a}function E(e){if((u||(u=o("QPLEvent"))).getSamplingMethod(p)!==1||!k(e))return p;var t=(u||(u=o("QPLEvent"))).getSampleRate(p),n=r("justknobx")._("3946"),a=Math.max(1,Math.min(n,t));return{i:u.getMarkerId(p),m:u.getSamplingMethod(p),r:a}}function k(e){return e===o("MWMsgMediaTypeLogUtils").AttachmentType.Application||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Audio||e===o("MWMsgMediaTypeLogUtils").AttachmentType.File||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Gif||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Image||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Link||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Sticker||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Video||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Share}function I(e){r("QPLUserFlow").endSuccess(p,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota()}},instanceKey:e}),S(e)}function T(e,t,n,a,i,l){i===void 0&&(i=!0);var s=L(i);if(e==null)return s;var u=o("MWSharedS2SBaseAnnotations").getMessageTypeParams(babelHelpers.extends({},t,{threadType:e.threadType}));return r("promiseDone")(o("MWSharedMsgLogUtils").getSendToSentAnnotations({attachmentTypeParams:u,messageOfflineThreadingId:l,source:n,thread:e}),function(e){var t=r("mergeDeep")(e,a);f(s,t)}),s}var D=async function(t,n,o){var e=t+"_start",a=t+"_end";r("QPLUserFlow").addPoint(p,e,{instanceKey:n});var i=await o();return r("QPLUserFlow").addPoint(p,a,{instanceKey:n}),i};l.addSendToSentAnnotations=f,l.markSendToSentCancel=g,l.markSendToSentFail=h,l.markSendToSentPoint=y,l.markSendToSentStart=L,l.markSendToSentSuccess=I,l.markSendToSentStartWithAnnotation=T,l.measureSendToSentPerformance=D}),98);
__d("MAWMiActGetThreadLifecycleState__DO_NOT_USE",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActGetMappingWithMawTypes","MAWMiActMappingTableAPI","MAWMiActThreadLifecycleState__DO_NOT_USE","MAWThreadLoadingState","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){var i=(e||(e=o("LSIntEnum"))).toNumber(t.authorityLevel);if(i===r("LSAuthorityLevel").OPTIMISTIC)return n!=null?babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT}):{serverThreadKey:t.threadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT};if(i===r("LSAuthorityLevel").CLIENT_PARTIAL)return n!=null?babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT}):{serverThreadKey:t.threadKey,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD};if(i===r("LSAuthorityLevel").SERVER_PARTIAL)return{serverThreadKey:t.threadKey,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD};if(i===r("LSAuthorityLevel").AUTHORITATIVE){if(n==null)return{serverThreadKey:t.threadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW};var l=o("MAWThreadLoadingState").getActState(n)===o("MAWThreadLoadingState").ActState.IN_PROGRESS;if(l){var u=r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType));return{jid:u.jid,jidInt64:n.jid,serverThreadKey:u.serverThreadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY}}else return babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE})}throw r("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unknown thread lifecycle state for threadKey: %s, authorityLevel: %s, thread action: %s",(s||(s=o("I64"))).to_string(t.threadKey),i,a)}async function c(e,t,n){var r=await o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,t);if(r==null)return{jidInt64:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW};var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(r.serverThreadKey));return a==null?{jidInt64:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MI_THREAD}:u(a,r,n)}async function d(e,t,n){var r,a=await Promise.all([(r=o("ReQL")).firstAsync(r.fromTableAscending(e.threads).getKeyRange(t)),r.firstAsync(r.fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))]),i=a[0],l=a[1];return i==null?{serverThreadKey:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.THREAD_KEY_ONLY}:u(i,l,n)}async function m(e,t,n,r){var a=await c(e,t,r);return a.type===o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW&&n!=null?d(e,(s||(s=o("I64"))).of_string(n),"MAWBridgeOccamadilloVerifyThreadExistsHandler"):a}l.getThreadLifecycleStateByJid=c,l.getThreadLifecycleStateByThreadKey=d,l.getThreadLifecycleStateByJidOrThreadKey=m}),98);
__d("MAWMiActOnActThreadReadyInstrumentation",["QPLUserFlow","Random","WAHashStringToNumber","isOfflineThreadingId","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function s(e,t,n,o){r("QPLUserFlow").start(r("qpl")._(1056846543,"1530"),{annotations:{bool:{is_otid:r("isOfflineThreadingId")(n)},string:{apiName:o,description:t}},instanceKey:e})}function u(e,t){r("QPLUserFlow").addPoint(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function c(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function d(e){r("QPLUserFlow").endSuccess(r("qpl")._(1056846543,"1530"),{instanceKey:e})}function m(e,t){r("QPLUserFlow").endFailure(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}l.getOnActThreadReadyInstanceKey=e,l.startQPL=s,l.addPointQPL=u,l.addAnnotationsQPL=c,l.endSuccessQPL=d,l.endFailureQPL=m}),98);
__d("MAWVerifyThreadExistsUtils",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","isOfflineThreadingId"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=6e4,d=1e4;function m(e){if(u.size>d){r("FBLogger")("messenger_web").mustfix("MAWVerifyThreadExistsUtils: requestedThreadKeys size exceeded limit");return}u.has(e)&&(window.clearTimeout(u.get(e)),u.delete(e)),u.set(e,window.setTimeout(function(){u.delete(e)},c))}function p(e){return u.has(e)}function _(t,n,a){var i=n.threadKey;return i!=null&&m((e||(e=o("I64"))).to_string(i)),i!=null&&r("isOfflineThreadingId")(i)&&(e||(e=o("I64"))).equal(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&r("FBLogger")("messenger_web").warn("MAWVerifyThreadExistsUtils: runVerifyThreadExistsSproc called with offline thread key - callsite: %s",a),r("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(t,n)}l.isThreadRequested=p,l.runVerifyThreadExistsSproc=_}),98);
__d("MAWMiActOnActThreadReadyQueue",["ExecutionEnvironment","I64","LSPlatformLsInitLog","MAWInit","MAWMIC","MAWMiActOnActThreadReadyInstrumentation","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils","MWChatInteraction","MWFBLogger","clearTimeout","getErrorSafe","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]),p=new Map,_=3e4;function f(t,n,a,i,l,s){var u;if((d||(d=r("ExecutionEnvironment"))).isInBrowser){o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(s,"enqueue_by_thread_key_start");var f=(c||(c=o("I64"))).to_string(t),g=(u=p.get(f))!=null?u:[],h=r("setTimeout")(function(){var n=o("MWChatInteraction").getInteractionTraceForThreadKey((c||(c=o("I64"))).to_string(t));n==null||n.addMarkerPoint("timeout_when_waiting_for_act_thread","AppTiming"),n==null||n.addAnnotation("callsite_waiting_for_act_thread",i),n==null||n.addAnnotation("initial_thread_state",l),n==null||n.addAnnotationBoolean("is_mi_thread_requested",o("MAWVerifyThreadExistsUtils").isThreadRequested(f)),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(s,{bool:{during_mic:o("MAWMIC").duringMIC(),is_thread_requested:o("MAWVerifyThreadExistsUtils").isThreadRequested(f),ls_sync_has_ended:o("LSPlatformLsInitLog").LsSync.hasEnded(),maw_init_completed:o("MAWInit").MAWInitState.isCompleted()}}),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(s,"enqueue_by_thread_key_timeout"),m.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Took longer than "," ms to execute: "," in threadState: "," for threadKey: ",", onActThreadReady"])),_,i,l,f),a(l)},_);g.push({callback:n,description:i,telemetryInstanceKey:s,threadState:l,timeoutId:h}),p.set(f,g)}}function g(e,t,n,r){var a,i,l,s;if(!(e==null&&t==null)){var u=e!=null?t!=null?"both":"clientThreadKey":"authoritativeThreadKey",c=e==null?0:(a=(i=p.get(e))==null?void 0:i.length)!=null?a:0,d=t==null?0:(l=(s=p.get(t))==null?void 0:s.length)!=null?l:0;o("MAWThreadMappingQPL").addAnnotations({int:{authorativeThreadKeyCallbacksNum:d,clientThreadKeyCallbacksNum:c},string:{flushBasedOnKey:u,flushReason:r}},n),o("MAWThreadMappingQPL").addPoint("flush_awaiting_callbacks",n)}}async function h(e,t,n,a){var i=(c||(c=o("I64"))).to_string(e),l=p.get(i);if(!(l==null||l.length===0)){for(;l.length!==0;){var d=l.shift();if(d!=null){var _=d.callback,f=d.description,g=d.telemetryInstanceKey,h=d.threadState,y=d.timeoutId;o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(g,"enqueue_by_thread_key_end"),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(g,{string:{caller_identifier:n,processed_based_on_key:a}});try{m.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing queued "," for threadKey: ",""])),f,i),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(g),await _(e,t),r("clearTimeout")(y)}catch(e){r("clearTimeout")(y),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(g,"process_queue_on_act_thread_ready_failure"),m.catching(r("getErrorSafe")(e)).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error executing callback on ACT thread ready: ",", original threadState: ",", threadKey: ",""])),f,h,i)}}}p.delete(i)}}l.enqueueByThreadKey=f,l.logOnFlushQueue=g,l.processQueueOnActThreadReady=h}),98);
__d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE",["MAWThreadLoadingState","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]);async function c(t,n,r,a){var i=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(t,n);if(i==null)throw u.mustfixThrow("Missing thread key or MI mapping for jid: %s, thread action: %s, MI mapping state %s",r,n);return u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Executing ",", jid: ",""])),r,n),a(t,i)}async function d(e,t,n,r){var a=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t);if(a!=null)return u.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing ",", jid: ",""])),n,t),r(e,a)}l.onMiThreadExistsForJid__DO_NOT_USE=c,l.onMiThreadExistsForJidNoThrow__DO_NOT_USE=d}),98);
__d("hasDefaultThreadOneToOneCapabilityDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("hasDefaultThreadOneToOneCapability").__setRef("hasDefaultThreadOneToOneCapabilityDeferred");l.default=e}),98);
__d("useCometMessengerhasDefaultThreadOneToOneCapability",["FBLogger","hasDefaultThreadOneToOneCapabilityDeferred","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(7),a=c(!1),i=a[0],l=a[1],s;n[0]!==e||n[1]!==t?(s=function(){r("hasDefaultThreadOneToOneCapabilityDeferred").load().then(function(n){t==null?l(!1):n(t,e).then(function(e){l(e)}).catch(p)}).catch(m)},n[0]=e,n[1]=t,n[2]=s):s=n[2];var d;return n[3]!==e||n[4]!==i||n[5]!==t?(d=[e,i,t],n[3]=e,n[4]=i,n[5]=t,n[6]=d):d=n[6],u(s,d),i}function m(e){r("FBLogger")("messenger_web").warn("Error loading hasDefaultThreadOneToOneCapability. %s",e)}function p(){}l.default=d}),98);
__d("MAWThreadCutover",["I64","LSAuthorityLevel","LSContactBitOffset","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","WAJids","react-compiler-runtime","useCometMessengerhasDefaultThreadOneToOneCapability","useMAWCanThreadBeCutoverOnDemand","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=(u||(u=r("useReStore")))(),a=R(e),i=r("useCometMessengerhasDefaultThreadOneToOneCapability")(n,e),l=t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t);return l?!0:a||i}async function d(e){return await $(e)!=null}function m(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a,l;return t[0]!==n||t[1]!==e?(a=function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]),o("ReQLSuspense").useFirst(a,l,i.id+":62")!=null}function p(e){var t,n=(u||(u=r("useReStore")))(),a=(t=o("ReQLSuspense").useFirst(function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},[n,e],i.id+":74"))==null?void 0:t.showOpenMessageHistory;return a===!1}function _(e){var t=S(e);return p(t)}function f(e,t){return o("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(t)}function g(t,n){return o("ReQL").fromTableAscending(t.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,n)})}function h(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():f(n,e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":112"),c,d;return t[4]!==n||t[5]!==s?(c=function(){return s==null?o("ReQL").empty():g(n,s.jid)},d=[n,s],t[4]=n,t[5]=s,t[6]=c,t[7]=d):(c=t[6],d=t[7]),o("ReQLSuspense").useFirst(c,d,i.id+":120")}function y(e,t){return o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t.openThreadId)}function C(t){var n=b(t);if(!(n==null||(e||(e=o("I64"))).lt(n.authorityLevel,(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").SERVER_PARTIAL))))return n}function b(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a=h(e),l,s;return t[0]!==a||t[1]!==n?(l=function(){return a==null?o("ReQL").empty():y(n,a)},s=[n,a],t[0]=a,t[1]=n,t[2]=l,t[3]=s):(l=t[2],s=t[3]),o("ReQLSuspense").useFirst(l,s,i.id+":162")}function v(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():f(n,e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":174"),c=s==null?void 0:s.jid,d,m;t[4]!==n.tables.threads||t[5]!==c?(d=function(){return c!=null?o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(c):o("ReQL").empty()},m=[n.tables.threads,c],t[4]=n.tables.threads,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":183"),_=r("useMAWCanThreadBeCutoverOnDemand")(c);return _?p:void 0}function S(e){var t=h(e);if(t!=null)return t.openThreadId}function R(e){return h(e)!=null}function L(t,n){var r=o("WAJids").threadIdForChatJid(n);return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange((e||(e=o("I64"))).of_string(r))).then(function(e){return e!=null})}function E(){var e=o("react-compiler-runtime").c(3),t=(u||(u=r("useReStore")))(),n=o("MWPActor.react").useActor(),a;if(e[0]!==n||e[1]!==t.tables.contacts){var l,s=o("ReQLSuspense").first(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(n),i.id+":223");a=s!=null&&((l=o("LSContactBitOffset").has(75,s))!=null?l:!1),e[0]=n,e[1]=t.tables.contacts,e[2]=a}else a=e[2];return a}function k(){var e=o("react-compiler-runtime").c(7),t=(u||(u=r("useReStore")))(),n;e[0]!==t.tables.experiences_shared_state?(n=function(){return o("ReQL").fromTableAscending(t.tables.experiences_shared_state).getKeyRange(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},e[0]=t.tables.experiences_shared_state,e[1]=n):n=e[1];var a;e[2]!==t?(a=[t],e[2]=t,e[3]=a):a=e[3];var l=o("ReQLSuspense").useFirst(n,a,i.id+":238"),s;e[4]!==l||e[5]!==t?(s=o("MWEncryptedBackupsSharedState").getEntryValue({db:t,sharedStateRow:l,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}),e[4]=l,e[5]=t,e[6]=s):s=e[6];var c=s;return c!=null}function I(t){var n=o("react-compiler-runtime").c(7),a=(u||(u=r("useReStore")))(),l;n[0]!==t?(l=t!=null?(e||(e=o("I64"))).of_string(t):void 0,n[0]=t,n[1]=l):l=n[1];var s=l,c=m(s),d,p;return n[2]!==a||n[3]!==c||n[4]!==s?(d=function(){return c&&s!=null?o("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).filter(function(t){return(e||(e=o("I64"))).equal(t.jid,s)}).map(T):o("ReQL").empty()},p=[a,s,c],n[2]=a,n[3]=c,n[4]=s,n[5]=d,n[6]=p):(d=n[5],p=n[6]),o("ReQLSuspense").useFirst(d,p,i.id+":259")}function T(t){return(e||(e=o("I64"))).to_string(t.serverThreadKey)}function D(){return!0}function x(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":286"),c=s==null?void 0:s.armadilloThreadId,d,m;t[4]!==n.tables.mi_act_mapping_table||t[5]!==c?(d=function(){return c!=null?o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table.index("jid")).getKeyRange(c):o("ReQL").empty()},m=[c,n.tables.mi_act_mapping_table],t[4]=n.tables.mi_act_mapping_table,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":297");return p==null?void 0:p.serverThreadKey}async function $(t){var n=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t));if(r!=null){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,r.jid)}));return a}}l.useShouldHideE2eeAttribution=c,l.isCutoverThreadKey=d,l.useIsCutoverOpenThread=m,l.useIsDualThreadCutoverOpenThread=p,l.useIsDualThreadCutoverSecureThread=_,l.getMiActMappings=f,l.getCutoverThreadsByJid=g,l.useGetCutoverMapping=h,l.getThreadByCutoverThread=y,l.useOpenThreadIfExistsFromCutoverThread=C,l.useCutoverOpenThread=b,l.useODCutoverEligibleOpenOneToOneThread=v,l.useGetCutoverOpenThreadKey=S,l.useIsCutoverSecureThread=R,l.isCutoverSecureThreadFromChatJid=L,l.useIsCurrentUserCutoverUser=E,l.useGetHasUserRestoredBefore=k,l.useGetCutoverSecureThreadKey=I,l.useSupportedCutoverEnvironment=D,l.useCutoverSecureThreadKeyForOpenThreadKey=x,l.getCutoverThreadBySecureThreadKey=$}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,l=o("react-compiler-runtime").c(12),s=(e||(e=r("useReStore")))(),u,c;l[0]!==s||l[1]!==t?(u=function(){return t!=null?o("ReQL").fromTableAscending(s.tables.contacts,o("LSContactBitOffset").contactCapabilityFields).getKeyRange(t):o("ReQL").empty()},c=[s,t],l[0]=s,l[1]=t,l[2]=u,l[3]=c):(u=l[2],c=l[3]);var d=o("ReQLSuspense").useFirst(u,c,i.id+":34"),m;l[4]!==d?(m=d!=null&&o("LSContactBitOffset").has(76,d),l[4]=d,l[5]=m):m=l[5];var p=m,_,f;l[6]!==s||l[7]!==t?(_=function(){return t!=null?o("ReQL").fromTableAscending(s.tables.threads,["threadType"]).getKeyRange(t):o("ReQL").empty()},f=[s,t],l[6]=s,l[7]=t,l[8]=_,l[9]=f):(_=l[8],f=l[9]);var g=o("ReQLSuspense").useFirst(_,f,i.id+":53"),h;l[10]!==g?(h=g?o("LSMessagingThreadTypeUtil").isOpenOneToOne(g.threadType):!1,l[10]=g,l[11]=h):h=l[11];var y=h,C=((n=(a=o("ReQLSuspense").useFirst(function(){return t!=null?o("ReQL").fromTableAscending(s.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(t):o("ReQL").empty()},[s,t],i.id+":67"))==null?void 0:a.minMessageId)!=null?n:"")==="",b=o("MAWThreadCutover").useIsCutoverOpenThread(t),v=o("MAWThreadCutover").useIsCutoverSecureThread(t),S=b||v;return p&&y&&!C&&!S}l.default=s}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){s=e}function c(){if(s==null)throw r("err")("WaMsgr api called before set");return s}function d(){return c().qpl}function m(){var e;return(e=c().myJids)==null?void 0:e.deviceJid}function p(){var e;return(e=c().myJids)==null?void 0:e.userJid}function _(e){return o("WAJids").extractUserJid(e)===o("WAJids").extractUserJid(m())}function f(){return c().config}function g(){return c().dependencies}var h="WAOneQueue is not defined";function y(){var t=c().waOneQueue;if(t==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),h),r("err")(h);return t}function C(){return c().hmacKey}l.setGlobals=u,l.getWaQpl=d,l.getMyDeviceJid=m,l.getMyUserJid=p,l.isPeerDevice=_,l.getConfig=f,l.getDependencies=g,l.getWaOneQueue=y,l.getHMACKey=C}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID());if((e||(e=r("ExecutionEnvironment"))).isInWorker){var n=o("WAGlobals").getMyUserJid();return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:n===t?"same":"different"}),n}return t}l.getMyUserJid=s}),98);
__d("WADevToolMessageChannel",[],(function(t,n,r,o,a,i){"use strict";var e=new MessageChannel,l,s=function(){return e=new MessageChannel,l(e),e},u=function(){return e},c=function(n){l=n,l(e)};i.createNewChannel=s,i.getMostRecentChannel=u,i.onCreateNewChannel=c}),66);