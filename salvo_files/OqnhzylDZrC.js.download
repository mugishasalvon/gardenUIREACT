;/*FB_PKG_DELIM*/

__d("EBBase64Decode",["Base64Utils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","="),n=4-t.length%4;if(n<4)for(var r=0;r<n;r++)t+="=";return t}function s(t){return o("Base64Utils").toArrayBuffer(e(t))}l.default=s}),98);
__d("MEBEncryptionVersion",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,ENCRYPTION_KDF_WITH_VERSION:2,ENCRYPTION_KDF_WITH_NULL_SALT:3,ENCRYPTION_KDF_WITH_NULL_SALT_DF_CANARY:4,TEST_VERSION:99});i.default=e}),66);
__d("EBCryptoUtils",["Base64Utils","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","MEBEncryptionVersion","SymmetricEncryptionCreateEncryptedData","SymmetricEncryptionPaddingUtils","XPlatReactCrypto","err"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=2147483647,u="message_key_in_epoch",c="_",d="cipher_version",m="thread",p="message_thread",_="supplemental_enc_aad",f="kdf_info:mailbox_root_key_v2>supplemental_enc_key";function g(t,n,o,a,i){var l=o>=r("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT?null:h(a),s=y(t,o,a);if(s==null)throw i.endFailWithError("failed_to_derive_message_symmetric_key"),r("err")("Error in derive message symmetric key. info is null");return b(s,l,n,[e],i)}function h(e){try{return new TextEncoder().encode(e).buffer}catch(e){throw r("err")("Error in get blob from string with exception: ",e)}}function y(e,t,n){var r=C(e,t,n);return h(r)}function C(e,t,n){return t>=r("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT_DF_CANARY||t>=r("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT?[u,new TextDecoder().decode(e),d,t,m,n].join(c):t>=r("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_VERSION?[u,new TextDecoder().decode(e),d,t].join(c):[u,new TextDecoder().decode(e)].join(c)}function b(e,t,n,a,i){if(a.length<1||a.some(function(e){return e>s}))throw i==null||i.endFailWithError("invalid_key_lengths_for_derive_keys"),r("err")("Invalid key lengths for derive keys");var l=a.reduce(function(e,t){return e+t},0)*8;return o("XPlatReactCrypto").subtleImportKey("raw",n,"HKDF",!1,["deriveBits"]).then(function(n){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:e,name:"HKDF",salt:t!=null?t:new Uint8Array(10).buffer},n,l)}).then(function(e){for(var t=new Uint8Array(e),n=[],r=0,o=0,i=a.length;o<i;++o){var l=r+a[o];n.push(t.slice(r,l).buffer),r=l}return n}).catch(function(e){throw i==null||i.endFailWithError("exception_in_create_derived_keys",e),r("err")("Exception in create derived keys",e)})}function v(e,t,n,a,i){var l=o("Base64Utils").toArrayBuffer(n);return S(e,t,l).then(function(e){if(e==null)throw a==null||a.endFailWithError("symmetric_string_decryption_with_null_result"),r("err")("symmetric string decryption with null result");return e}).catch(function(e){throw a==null||a.endFailWithError("symmetric_string_decryption_failed_with_error",e),r("err")("symmetric string decryption failed with encryption version: "+(i!=null?i:"null")+" and error",e)})}function S(e,t,n){if(n.byteLength<o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes)throw r("err")("cipher text is invalid");var a=new Uint8Array(n),i=a.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),l=new(o("HChaCha20")).HChaCha20,s=a.slice(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer,u=l.hChaCha20Bytes(i.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,e);return o("XPlatReactCrypto").subtleImportKey("raw",u,"AES-GCM",!1,["decrypt"]).then(function(e){return o("XPlatReactCrypto").subtleDecrypt({additionalData:t,iv:new Uint8Array(i.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,s)}).then(function(e){var t=o("SymmetricEncryptionPaddingUtils").stripPadding(e);if(t==null)throw r("err")("Failed to strip padding for symmetric decryption");return t}).catch(function(e){throw r("err")("symmetric data decryption failed with error",e)})}async function R(e,t,n){var a=await r("SymmetricEncryptionCreateEncryptedData")(t,new TextEncoder().encode([p,n].join(c)).buffer,e),i=a[0];return i!=null?o("Base64Utils").fromArrayBuffer(i):null}l.KEY_LEN=e,l.MAX_INT_32=s,l.STRING_JOIN_SEPARATOR=c,l.MESSAGE_ENCYPTION_AAD=p,l.SUPPLEMENTAL_ENC_AAD=_,l.SUPPLEMENTAL_ENC_KEY_INFO=f,l.deriveMessageSymmetricKey=g,l.getBlobFromString=h,l.getInfoByEncryptionVersion=C,l.createDerivedKeys=b,l.symmetricEncryptionCreateDecryptedString=v,l.encryptThenBase64EncodeBlob=R}),98);
__d("EBEpochUtils",["Base64Utils","EBCryptoUtils","FBLogger","I64","PublicEncryptionCreateDecryptedData","PublicEncryptionCreateEncryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e,s="epoch_chaining",u="epoch_root_key",c="epoch_data_storage",d="epoch_data_metadata",m=18;function p(e){var t=new TextEncoder().encode("0").buffer;if(e==null||e.byteLength===0)return t;var n=new TextDecoder,o=n.decode(e),a=Number.parseInt(o,10);if(Number.isNaN(a))throw r("FBLogger")("messenger_web").mustfixThrow("currentEpochInt is NaN");var i=a+1;return new TextEncoder().encode(i.toString()).buffer}async function _(t,n,a){var i,l=[(i=o("EBCryptoUtils")).KEY_LEN,i.KEY_LEN],u=i.getBlobFromString([s,t,(e||(e=o("I64"))).to_string(n)].join(o("EBCryptoUtils").STRING_JOIN_SEPARATOR));if(u==null)throw r("FBLogger")("messenger_web").mustfixThrow("infoForEpochChaining is empty");var c=await o("EBCryptoUtils").createDerivedKeys(u,null,a,l);return{epoch_chaining_key:c[0],epoch_distribution_pre_shared_key:c[1]}}async function f(e,t,n,o,a,i){var l=await r("PublicEncryptionCreateDecryptedData")(e,t,n,o,h(a),i);return l[0]}async function g(e,t,n,o,a,i){var l=await r("PublicEncryptionCreateEncryptedData")(e,t,n,o,h(a),i);return l[0]}function h(e){return new TextEncoder().encode(["epoch_",e].join(o("EBCryptoUtils").STRING_JOIN_SEPARATOR)).buffer}async function y(e,t,n,r){var a=await o("EBCryptoUtils").createDerivedKeys(e,t,n,r);return a[0]}function C(e,t){var n=o("EBCryptoUtils").getBlobFromString(u);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("epochRootKey is empty");return y(n,e,t,[o("EBCryptoUtils").KEY_LEN])}function b(e,t){var n=new TextEncoder().encode("meb/debug/fingerprint/"+t).buffer;if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("blob type for which fingerprints are supported is empty");return y(n,null,e,[m])}async function v(e,t,n){var r=[o("EBCryptoUtils").KEY_LEN],a=o("Base64Utils").fromArrayBuffer(t),i=[e,a].join(o("EBCryptoUtils").STRING_JOIN_SEPARATOR),l=await o("EBCryptoUtils").createDerivedKeys(new TextEncoder().encode(i).buffer,null,n,r);return l.length===0?Promise.resolve():l[0]}function S(e){return v(c,e.epochAnonIdBlob,e.epochRootKeyBlob)}async function R(e,t){var n=await L(t,e,d);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("symmetricDecryptAndBase64Decode output is empty while decrypting backward edge");return o("Base64Utils").toArrayBuffer(n)}async function L(e,t,n){var a=new TextEncoder().encode(n).buffer;if(a==null)throw r("FBLogger")("messenger_web").mustfixThrow("aadBuffer is empty");var i=await o("EBCryptoUtils").symmetricEncryptionCreateDecryptedString(t,a,e);if(i==null)throw r("FBLogger")("messenger_web").mustfixThrow("decrypted_arraybuffer is empty");return new TextDecoder().decode(i)}l.getNextEpochId=p,l.generateEpochChainingAndDistributionPreSharedKey=_,l.decryptEpochKey=f,l.generateEncryptedEpochKey=g,l.deriveKey=y,l.generateEpochRootKey=C,l.getFingerPrint=b,l.createDerivedKeysForEpoch=v,l.deriveBackwardEdgeKey=S,l.decryptBackwardEdge=R}),98);
__d("LSEpochStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({ES_OPEN:1,ES_CLOSE:2});i.default=e}),66);
__d("MEBEpochDerivationResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:0,UNKNOWN_ERROR:1,EDGE_NEITHER_FORWARD_NOR_BACKWARD:2,FORWARD_DECRYPTION_FAILED:3,FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED:4,BACKWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED:5,BACKWARD_DECRYPTION_FAILED:6,MISSING_CLIENT_STATE:7,DEVICE_ID_MISMATCH:8,SOURCE_FINGERPRINT_MISMATCH:9,DEST_FINGERPRINT_MISMATCH:10,STORAGE_KEY_MISMATH:11,PSK_FINGERPRINT_MISMATCH:12,SOURCE_EPOCH_NOT_FOUND:13,FORWARD_EDGE_NOT_CONSECUTIVE:14,BACKWARD_EDGE_NOT_CONSECUTIVE:15,DERIVATION_DEST_EXISTS:16,DERIVATION_DEST_ANON_ID_EXISTS:17});i.default=e}),66);
__d("EBDeriveAndStoreEpochs",["Base64Utils","EBBase64Decode","EBEpochUtils","I64","LSAuthorityLevel","LSEpochStatus","MEBEpochDerivationResult","ReQL","WACryptoUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a,i){var l,s,u,c,d=await o("EBEpochUtils").getNextEpochId(i.epochAnonIdBlob),m=a==null||(l=a.to_epoch)==null?void 0:l.epoch_anon_id;if(m==null)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge target epoch anon id is null",resultCode:r("MEBEpochDerivationResult").FORWARD_EDGE_NOT_CONSECUTIVE});var p=r("EBBase64Decode")(m);if(new TextDecoder().decode(d)!==new TextDecoder().decode(p))return o("WAResultOrError").makeError({errorMessage:"epoch forward edge not consecutive",resultCode:r("MEBEpochDerivationResult").FORWARD_EDGE_NOT_CONSECUTIVE});var _=a==null||(s=a.from_epoch)==null?void 0:s.epoch_id,f=a==null||(u=a.from_epoch)==null?void 0:u.epoch_anon_id;if(_==null||f==null)return o("WAResultOrError").makeError({errorMessage:"fromEpochId or fromEpochAnonId is null",resultCode:r("MEBEpochDerivationResult").SOURCE_EPOCH_NOT_FOUND});var g=r("EBBase64Decode")(f),h=new TextDecoder().decode(g),y=await o("EBEpochUtils").generateEpochChainingAndDistributionPreSharedKey(h,(e||(e=o("I64"))).of_string(_),i.epochRootKeyBlob),C=y.epoch_distribution_pre_shared_key,b=await o("EBEpochUtils").getFingerPrint(C,"MEBCryptoPreSharedKey");if((n==null?void 0:n.psk_fingerprint)!==o("Base64Utils").fromArrayBuffer(b))return o("WAResultOrError").makeError({errorMessage:"epoch forward edge psk fingerprint mismatch",resultCode:r("MEBEpochDerivationResult").PSK_FINGERPRINT_MISMATCH});var v=n==null?void 0:n.epoch_storage_public_key;if(o("Base64Utils").fromArrayBuffer(t.epochStoragePublicKeyBlob)!==v)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge storage key mismatch",resultCode:r("MEBEpochDerivationResult").STORAGE_KEY_MISMATH});var S=n==null?void 0:n.auth_public_key;if(S==null)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge auth public key is null",resultCode:r("MEBEpochDerivationResult").FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});var R=a==null||(c=a.to_epoch)==null?void 0:c.epoch_anon_id;if(R==null)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge target epoch anon id is null",resultCode:r("MEBEpochDerivationResult").FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});var L=n==null?void 0:n.encrypted_entropy;if(L==null)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge encrypted entropy is null",resultCode:r("MEBEpochDerivationResult").FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});var E=r("EBBase64Decode")(S);if(E==null)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge auth public key is null",resultCode:r("MEBEpochDerivationResult").FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});var k=r("EBBase64Decode")(L);if(k==null)return o("WAResultOrError").makeError({errorMessage:"epoch forward edge encrypted entropy is null",resultCode:r("MEBEpochDerivationResult").FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});var I=r("EBBase64Decode")(R),T=new TextDecoder().decode(I),D=await o("EBEpochUtils").decryptEpochKey(t.epochStoragePublicKeyBlob,t.epochStoragePrivateKeyBlob,E,C,T,k);return D==null?o("WAResultOrError").makeError({errorMessage:"epoch forward edge entropy is null",resultCode:r("MEBEpochDerivationResult").FORWARD_DECRYPTION_FAILED}):o("WAResultOrError").makeResult(await o("EBEpochUtils").generateEpochRootKey(y.epoch_chaining_key,D))}async function u(e,t,n){var a,i=t==null||(a=t.to_epoch)==null?void 0:a.epoch_anon_id;if(i==null)return o("WAResultOrError").makeError({errorMessage:"toEpochId is null",resultCode:r("MEBEpochDerivationResult").BACKWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});var l=o("EBEpochUtils").getNextEpochId(r("EBBase64Decode")(i));if(!o("WACryptoUtils").arrayBuffersEqual(l,e.epochAnonIdBlob))return o("WAResultOrError").makeError({errorMessage:"epoch backward edge not consecutive",resultCode:r("MEBEpochDerivationResult").BACKWARD_EDGE_NOT_CONSECUTIVE});var s=await o("EBEpochUtils").deriveBackwardEdgeKey(e);return s==null?o("WAResultOrError").makeError({errorMessage:"epoch backward edge storage key is null",resultCode:r("MEBEpochDerivationResult").STORAGE_KEY_MISMATH}):o("WAResultOrError").makeResult(await o("EBEpochUtils").decryptBackwardEdge(s,n))}async function c(t,n){var a,l,c,d,m=await t.runInTransaction(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.secure_encrypted_backups_client_state))},"readwrite",void 0,void 0,i.id+":224");if(m==null)return o("WAResultOrError").makeError({errorMessage:"client state is missing",resultCode:r("MEBEpochDerivationResult").MISSING_CLIENT_STATE});var p=n==null||(a=n.from_epoch)==null?void 0:a.epoch_id;if(p==null)return o("WAResultOrError").makeError({errorMessage:"fromEpochId is null",resultCode:r("MEBEpochDerivationResult").SOURCE_EPOCH_NOT_FOUND});var _=await t.runInTransaction(function(t){return t.secure_encrypted_backups_epochs.get((e||(e=o("I64"))).of_string(p))},"readwrite",void 0,void 0,i.id+":242");if(_==null)return o("WAResultOrError").makeError({errorMessage:"source epoch is missing",resultCode:r("MEBEpochDerivationResult").SOURCE_EPOCH_NOT_FOUND});var f=n==null||(l=n.from_epoch)==null?void 0:l.epoch_anon_id;if(f==null)return o("WAResultOrError").makeError({errorMessage:"fromEpochId or fromEpochAnonId is null",resultCode:r("MEBEpochDerivationResult").SOURCE_EPOCH_NOT_FOUND});var g=r("EBBase64Decode")(f);if(new TextDecoder().decode(_.epochAnonIdBlob)!==new TextDecoder().decode(g))return o("WAResultOrError").makeError({errorMessage:"epoch derivation source epoch anon id mismatch",resultCode:r("MEBEpochDerivationResult").SOURCE_FINGERPRINT_MISMATCH});var h=n==null?void 0:n.from_epoch_fingerprint,y=await o("EBEpochUtils").getFingerPrint(_.epochRootKeyBlob,"MEBEpochRootKey");if(o("Base64Utils").fromArrayBuffer(y)!==h)return o("WAResultOrError").makeError({errorMessage:"epoch derivation source epoch fingerprint mismatch",resultCode:r("MEBEpochDerivationResult").SOURCE_FINGERPRINT_MISMATCH});var C=n==null?void 0:n.forward_edge,b;if(C!=null)b=await s(m,C,n,_);else{var v=n==null?void 0:n.backward_edge;if(v==null)return o("WAResultOrError").makeError({errorMessage:"backward edge is null",resultCode:r("MEBEpochDerivationResult").BACKWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});b=await u(_,n,v)}var S=n==null?void 0:n.to_epoch_fingerprint,R=b.value,L=n==null||(c=n.to_epoch)==null?void 0:c.epoch_id,E=n==null||(d=n.to_epoch)==null?void 0:d.epoch_anon_id;if(L==null||E==null)return o("WAResultOrError").makeError({errorMessage:"target epoch id or anon id is null",resultCode:r("MEBEpochDerivationResult").FORWARD_SOURCE_EPOCH_NOT_FOUND_DEPRECATED});if(R==null)return b;var k=await o("EBEpochUtils").getFingerPrint(R,"MEBEpochRootKey");if(S!==o("Base64Utils").fromArrayBuffer(k))return o("WAResultOrError").makeError({errorMessage:"epoch derivation target epoch fingerprint mismatch",resultCode:r("MEBEpochDerivationResult").DEST_FINGERPRINT_MISMATCH});var I=r("EBBase64Decode")(E);return await t.runInTransaction(function(t){return t.secure_encrypted_backups_epochs.put({authorityLevel:(e||(e=o("I64"))).of_float(r("LSAuthorityLevel").AUTHORITATIVE),backupId:m.backupId,epochAnonIdBlob:I,epochId:e.of_string(L),epochRootKeyBlob:R,epochStatus:e.of_float(r("LSEpochStatus").ES_CLOSE)})},"readwrite",void 0,void 0,i.id+":331"),o("WAResultOrError").makeResult(R)}async function d(e,t){if((t==null?void 0:t.epoch_edges)==null)return[];var n=[];for(var o of t.epoch_edges){var a,i,l,s,u,d=await c(e,o),m={resultForEpochSync:{error_message:(a=d.error)==null?void 0:a.errorMessage,from:{epoch_anon_id:(i=o.from_epoch)==null?void 0:i.epoch_anon_id,epoch_id:o==null||(l=o.from_epoch)==null?void 0:l.epoch_id},has_backward_edge:(o==null?void 0:o.backward_edge)!=null,has_forward_edge:(o==null?void 0:o.forward_edge)!=null,result_code:d.success?r("MEBEpochDerivationResult").SUCCESS:d.error.resultCode,to:{epoch_anon_id:o==null||(s=o.to_epoch)==null?void 0:s.epoch_anon_id,epoch_id:o==null||(u=o.to_epoch)==null?void 0:u.epoch_id}}};n.push(m)}return n}l.deriveAndStoreEpochsNonLS=d}),98);
__d("EBGetClientState",["EBLogger","EBMinosInterfaceTypes","I64","LSAuthorityLevel","LSIntEnum","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(t,n){var a=n!=null?await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.secure_encrypted_backups_client_state)):await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.secure_encrypted_backups_client_state)),i=n!=null?await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.secure_encrypted_backups_epochs)):await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.secure_encrypted_backups_epochs)),l=i.filter(function(e){return(s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}).map(function(e){return(s||(s=o("I64"))).to_string(e.epochId)});if(a==null){o("EBLogger").EBLogger("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth][web Client state is null - unable to proceed with GQL restore"])));return}var c=(a==null?void 0:a.deviceId)!=null?o("EBMinosInterfaceTypes").unsafeCastToDeviceId((s||(s=o("I64"))).to_string(a==null?void 0:a.deviceId)):null,d=a.mailboxRootKeyBlob,m=a.ocmfClientStateBlob,p=o("EBMinosInterfaceTypes").unsafeCastToBackupFbid((s||(s=o("I64"))).to_string(a.backupId)),_=a.encryptionVersion;return{backupId:p,deviceId:c,encryptionVersion:_,locally_available_epochs:l,mailboxRootKey:d,ocmfClientStateBlob:m}}l.getClientState=c}),98);
__d("WAAppData",[],(function(t,n,r,o,a,i){"use strict";var e=1,l=2;i.EPOCH_STATUS_OPEN=e,i.EPOCH_STATUS_CLOSE=l}),66);
__d("WAArmadilloICDC.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="ICDCIdentityList",s.internalSpec={seq:[1,(e=o("WAProtoConst")).TYPES.INT32],timestamp:[2,e.TYPES.INT64],devices:[3,e.FLAGS.REPEATED|e.TYPES.BYTES],signingDeviceIndex:[4,e.TYPES.INT32]},u.name="SignedICDCIdentityList",u.internalSpec={details:[1,e.TYPES.BYTES],signature:[2,e.TYPES.BYTES]},l.ICDCIdentityListSpec=s,l.SignedICDCIdentityListSpec=u}),98);
__d("WAArrayChunk",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){n===void 0&&(n=!1);for(var o=0,a=[];o<e.length;){for(var i=[],l=0;o<e.length;){var s=e[o],u=r?r(s):1;if(!n&&l===0||l+u<=t)l+=u,i.push(s),o++;else{n&&u>t&&o++;break}}i.length>0&&a.push(i)}return a}i.chunk=e}),66);
__d("WACryptoPkcs7",["WACryptoDependencies","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=new Uint8Array(1);do o("WACryptoDependencies").getCrypto().getRandomValues(t);while(t[0]===0);u(e,t[0])}function s(e){var t=new Uint8Array(1);o("WACryptoDependencies").getCrypto().getRandomValues(t),u(e,(t[0]&15)+1)}function u(e,t){for(var n=0;n<t;n++)e.writeUint8(t)}function c(e){if(e.length===0)throw r("err")("unpadPkcs7 given empty bytes");var t=e[e.length-1];if(t>e.length)throw r("err")("unpadPkcs7 given "+e.length+" bytes, but pad is "+t);return new Uint8Array(e.buffer,e.byteOffset,e.length-t)}l.writeRandomPad=e,l.writeRandomPadMax16=s,l.writePad=u,l.unpadPkcs7=c}),98);
__d("WAMsgTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NOOP:0,UPSERT:1,DELETE:2,UPSERT_AND_DELETE:3},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={};u.name="MessageTransport",u.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,c],protocol:[2,e.TYPES.MESSAGE,d]},c.name="MessageTransport$Payload",c.internalSpec={applicationPayload:[1,e.TYPES.MESSAGE,o("WACommon.pb").SubProtocolSpec],futureProof:[3,e.TYPES.ENUM,o("WACommon.pb").FUTURE_PROOF_BEHAVIOR]},d.name="MessageTransport$Protocol",d.internalSpec={integral:[1,e.TYPES.MESSAGE,h],ancillary:[2,e.TYPES.MESSAGE,m]},m.name="MessageTransport$Protocol$Ancillary",m.internalSpec={skdm:[2,e.TYPES.MESSAGE,g],deviceListMetadata:[3,e.TYPES.MESSAGE,C],icdc:[4,e.TYPES.MESSAGE,_],backupDirective:[5,e.TYPES.MESSAGE,p]},p.name="MessageTransport$Protocol$Ancillary$BackupDirective",p.internalSpec={messageId:[1,e.TYPES.STRING],actionType:[2,e.TYPES.ENUM,s],supplementalKey:[3,e.TYPES.STRING]},_.name="MessageTransport$Protocol$Ancillary$ICDCParticipantDevices",_.internalSpec={senderIdentity:[1,e.TYPES.MESSAGE,f],recipientIdentities:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,f],recipientUserJids:[3,e.FLAGS.REPEATED|e.TYPES.STRING]},f.name="MessageTransport$Protocol$Ancillary$ICDCParticipantDevices$ICDCIdentityListDescription",f.internalSpec={seq:[1,e.TYPES.INT32],signingDevice:[2,e.TYPES.BYTES],unknownDevices:[3,e.FLAGS.REPEATED|e.TYPES.BYTES],unknownDeviceIds:[4,e.FLAGS.REPEATED|e.TYPES.INT32]},g.name="MessageTransport$Protocol$Ancillary$SenderKeyDistributionMessage",g.internalSpec={groupId:[1,e.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,e.TYPES.BYTES]},h.name="MessageTransport$Protocol$Integral",h.internalSpec={padding:[1,e.TYPES.BYTES],dsm:[2,e.TYPES.MESSAGE,y]},y.name="MessageTransport$Protocol$Integral$DeviceSentMessage",y.internalSpec={destinationJid:[1,e.TYPES.STRING],phash:[2,e.TYPES.STRING]},C.name="DeviceListMetadata",C.internalSpec={senderKeyHash:[1,e.TYPES.BYTES],senderTimestamp:[2,e.TYPES.UINT64],recipientKeyHash:[8,e.TYPES.BYTES],recipientTimestamp:[9,e.TYPES.UINT64]},l.MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE=s,l.MessageTransportSpec=u,l.MessageTransport$PayloadSpec=c,l.MessageTransport$ProtocolSpec=d,l.MessageTransport$Protocol$AncillarySpec=m,l.MessageTransport$Protocol$Ancillary$BackupDirectiveSpec=p,l.MessageTransport$Protocol$Ancillary$ICDCParticipantDevicesSpec=_,l.MessageTransport$Protocol$Ancillary$ICDCParticipantDevices$ICDCIdentityListDescriptionSpec=f,l.MessageTransport$Protocol$Ancillary$SenderKeyDistributionMessageSpec=g,l.MessageTransport$Protocol$IntegralSpec=h,l.MessageTransport$Protocol$Integral$DeviceSentMessageSpec=y,l.DeviceListMetadataSpec=C}),98);
__d("WAAsMessageTransport",["WABinary","WACryptoPkcs7","WAJids","WAMsgTransport.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.type){case"text":return{actionType:o("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:e.externalId,supplementalKey:null};case"media":return{actionType:o("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:e.externalId,supplementalKey:null};case"reaction":return{actionType:o("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:e.originalMsgExternalId,supplementalKey:"reaction:"+o("WAJids").extractChatId__DANGEROUS(e.chatJid)};case"edit":return{actionType:o("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:e.originalMsgExternalId,supplementalKey:"edit:"+o("WAJids").extractChatId__DANGEROUS(e.chatJid)+":"+(e.timestamp*1e3).toString()}}}function s(e,t,n,r,a,i){i===void 0&&(i=2);var l;t!=null&&(l={destinationJid:t});var s;e!=null&&(s={applicationPayload:{payload:e,version:i}});var u=new(o("WABinary")).Binary;return o("WACryptoPkcs7").writeRandomPadMax16(u),{payload:s,protocol:{integral:{padding:u.readBuffer(),dsm:l},ancillary:{skdm:n==null?void 0:n,icdc:r==null?void 0:r,backupDirective:a==null?void 0:{actionType:a.actionType,messageId:a.messageId,supplementalKey:a.supplementalKey}}}}}l.backupDirectiveActionType=o("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE,l.constructBackupDirective=e,l.asMessageTransport=s}),98);
__d("WAConvertRegistrationIdMixin",["WAParsableXmlNode"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WAParsableXmlNode").convertBytesToUint(e.registrationElementValue,4)}l.registrationIdMixin=e}),98);
__d("WAConvertSignedPreKeyMixin",["WAParsableXmlNode"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{id:o("WAParsableXmlNode").convertBytesToUint(e.skeyIdKeyIDMixin.elementValue,3),pubkey:e.skeyValueKeyDataMixin.elementValue,signature:e.skeySignatureElementValue}}l.convertSignedPreKeyMixin=e}),98);
__d("WASmaxInPreKeysIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInPreKeysIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInPreKeysIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"code",400,499);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFallbackClientMixin=e}),98);
__d("WASmaxInPreKeysIQErrorNoValidJIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","not-acceptable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",406);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorNoValidJIDMixin=e}),98);
__d("WASmaxInPreKeysRequestErrorsFetch",["WAResultOrError","WASmaxInPreKeysIQErrorBadRequestMixin","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNoValidJIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInPreKeysIQErrorNoValidJIDMixin").parseIQErrorNoValidJIDMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorNoValidJID",value:n.value});var r=o("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(e);return r.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorNoValidJID","IQErrorFallbackClient"],[t,n,r])}l.parseRequestErrorsFetch=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetch","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysRequestErrorsFetch").parseRequestErrorsFetch(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestErrorsFetch:i.value})):i}l.parseFetchKeyBundlesResponseRequestError=e}),98);
__d("WASmaxInPreKeysIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"code",500,599);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFallbackServerMixin=e}),98);
__d("WASmaxInPreKeysIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInPreKeysServerErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackServerMixin","WASmaxInPreKeysIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:t.value});var n=o("WASmaxInPreKeysIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorServiceUnavailable","IQErrorFallbackServer"],[t,n])}l.parseServerErrors=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysServerErrors").parseServerErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorServerErrors:i.value})):i}l.parseFetchKeyBundlesResponseServerError=e}),98);
__d("WASmaxInPreKeysEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={validators:[(e=o("WAJids")).validateDeviceJid,e.validateDeviceJid],typeName:"DeviceJid|DeviceJid"},u={validators:[e.validateDeviceJid,e.validateDeviceJid,e.validateInteropDeviceJid,e.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"},c={validators:[e.validateDeviceJid,e.validateDomainJid],typeName:"DeviceJid|DomainJid"},d={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.DEVICEJID_DEVICEJID=s,l.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=u,l.DEVICEJID_DOMAINJID=c,l.USERJID_USERJID=d}),98);
__d("WASmaxInPreKeysIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInPreKeysResponsePaddingMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"iq");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"padding");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(n.value,0,524288);return r.success?o("WAResultOrError").makeResult({paddingElementValue:r.value}):r}l.parseResponsePaddingMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(n.value,"text");if(!r.success)return r;var a=o("WASmaxParseUtils").attrIntRange(n.value,"code",500,599);return a.success?o("WAResultOrError").makeResult({errorText:r.value,errorCode:a.value}):a}l.parseFetchKeyBundlesUserErrorFallbackMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(n.value,"text");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,n.value,"code",500);return a.success?o("WAResultOrError").makeResult({errorText:r.value,errorCode:a.value}):a}l.parseFetchKeyBundlesUserErrorMixin=e}),98);
__d("WASmaxInPreKeysDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"device-identity");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytes(t.value);return n.success?o("WAResultOrError").makeResult({deviceIdentityElementValue:n.value}):n}l.parseDeviceIdentityMixin=e}),98);
__d("WASmaxInPreKeysKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").contentBytesRange(e,32,32);return t.success?o("WAResultOrError").makeResult({elementValue:t.value}):t}l.parseKeyDataMixin=e}),98);
__d("WASmaxInPreKeysIdentityKeyMixin",["WASmaxInPreKeysKeyDataMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"identity");if(!t.success)return t;var n=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(t.value);return n.success,n}l.parseIdentityKeyMixin=e}),98);
__d("WASmaxInPreKeysKeyTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"type");if(!t.success)return t;var n=o("WASmaxParseUtils").contentLiteralBytes(t.value,new Uint8Array([5]));return n.success?o("WAResultOrError").makeResult({typeElementValue:n.value}):n}l.parseKeyTypeMixin=e}),98);
__d("WASmaxInPreKeysKeyIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"id");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(e,3,3);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}l.parseKeyIDMixin=e}),98);
__d("WASmaxInPreKeysPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"key");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"id");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"value");if(!r.success)return r;var a=o("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(n.value);if(!a.success)return a;var i=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(r.value);return i.success?o("WAResultOrError").makeResult({keyIdKeyIDMixin:a.value,keyValueKeyDataMixin:i.value}):i}l.parsePreKeyMixin=e}),98);
__d("WASmaxInPreKeysRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"registration");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(t.value,4,4);return n.success?o("WAResultOrError").makeResult({registrationElementValue:n.value}):n}l.parseRegistrationIDMixin=e}),98);
__d("WASmaxInPreKeysSignedPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"skey");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"id");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"value");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"signature");if(!a.success)return a;var i=o("WASmaxParseUtils").contentBytesRange(a.value,64,64);if(!i.success)return i;var l=o("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(n.value);if(!l.success)return l;var s=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(r.value);return s.success?o("WAResultOrError").makeResult({skeySignatureElementValue:i.value,skeyIdKeyIDMixin:l.value,skeyValueKeyDataMixin:s.value}):s}l.parseSignedPreKeyMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin",["WAResultOrError","WASmaxInPreKeysDeviceIdentityMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysPreKeyMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"t",0,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").optionalLiteral(o("WASmaxParseUtils").attrString,e,"is_cloud_api","true");if(!r.success)return r;var a=o("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(e);if(!a.success)return a;var i=o("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(e),l=o("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(e);if(!l.success)return l;var s=o("WASmaxInPreKeysPreKeyMixin").parsePreKeyMixin(e),u=o("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(e);if(!u.success)return u;var c=o("WASmaxInPreKeysDeviceIdentityMixin").parseDeviceIdentityMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({t:n.value,isCloudApi:r.value},a.value,{keyTypeMixin:i.success?i.value:null},l.value,{preKeyMixin:s.success?s.value:null},u.value,{deviceIdentityMixin:c.success?c.value:null}))}l.parseFetchKeyBundlesUserSuccessMixin=e}),98);
__d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup",["WAResultOrError","WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin","WASmaxInPreKeysFetchKeyBundlesUserErrorMixin","WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin").parseFetchKeyBundlesUserSuccessMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserSuccess",value:t.value});var n=o("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin").parseFetchKeyBundlesUserErrorMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserError",value:n.value});var r=o("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin").parseFetchKeyBundlesUserErrorFallbackMixin(e);return r.success?o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserErrorFallback",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["UserSuccess","UserError","UserErrorFallback"],[t,n,r])}l.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess",["WAResultOrError","WASmaxInPreKeysEnums","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysResponsePaddingMixin","WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseJid").attrJidEnum(e,"jid",o("WASmaxInPreKeysEnums").DEVICEJID_DEVICEJID);if(!n.success)return n;var r=o("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup").parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup(e);return r.success?o("WAResultOrError").makeResult({jid:n.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:r.value}):r}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"list");if(!a.success)return a;var i=o("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!i.success)return i;var l=o("WASmaxInPreKeysResponsePaddingMixin").parseResponsePaddingMixin(t),s=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"user",0,1e5,e);return s.success?o("WAResultOrError").makeResult(babelHelpers.extends({},i.value,{responsePaddingMixin:l.success?l.value:null,listUser:s.value})):s}l.parseFetchKeyBundlesResponseSuccessListUser=e,l.parseFetchKeyBundlesResponseSuccess=s}),98);
__d("WASmaxAttrs",["WAWap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t==null?o("WAWap").DROP_ATTR:e(t)}function s(e,t){return t?e:o("WAWap").DROP_ATTR}l.OPTIONAL=e,l.OPTIONAL_LITERAL=s}),98);
__d("WASmaxChildren",["WADeepEquals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t==null?null:e(t)}function s(e,t){if(t==null)return null;if(t)return e()}function u(e,t){if(t){for(var n=1;n<t.length;n++)if(!o("WADeepEquals").deepEqual(t[n],t[0]))throw new Error("expected all homogeneous children to be equal, but they were not")}var r=d(e,t,0,1/0);return r}function c(e,t){return m(e,t,0,1/0)}function d(e,t,n,r){if(t==null){if(n>0)throw new Error("expected at least "+n+" children, but none provided");return[]}var o=t.length;if(o<n)throw new Error("expected at least "+n+" children, but found "+o);if(o>r)throw new Error("expected at most "+r+" children, but found "+o);return t.map(function(t){return e(t)})}function m(e,t,n,r){if(t===0){if(n>0)throw new Error("expected at least "+n+" children, but none provided");return[]}if(t<n)throw new Error("expected at least "+n+" children, but found "+t);if(t>r)throw new Error("expected at most "+r+" children, but found "+t);for(var o=[],a=0;a<t;a++)o.push(e());return o}l.OPTIONAL_CHILD=e,l.HAS_OPTIONAL_CHILD=s,l.HOMOGENEOUS_CHILD=u,l.HOMOGENEOUS_CHILD_COUNT=c,l.REPEATED_CHILD=d,l.REPEATED_CHILD_COUNT=m}),98);
__d("WASmaxOutPreKeysClientRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),xmlns:"encrypt",to:o("WAWap").S_WHATSAPP_NET});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeClientRequestMixin=s}),98);
__d("WASmaxOutPreKeysFetchKeyBundlesRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.userJid,n=e.hasUserReasonIdentity,r=o("WASmaxJsx").smax("user",{jid:o("WAWap").JID(t),reason:o("WASmaxAttrs").OPTIONAL_LITERAL("identity",n)});return r}function s(t){var n=t.userArgs,r=o("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(o("WASmaxJsx").smax("iq",{type:"get"},o("WASmaxJsx").smax("key",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,1e5))));return r}l.makeFetchKeyBundlesRequestKeyUser=e,l.makeFetchKeyBundlesRequest=s}),98);
__d("WASmaxParsingFailure",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,"SmaxParsingFailure: "+t)||this,n.name="SmaxParsingFailure",n.reason=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toString=function(){return"SmaxParsingFailure: "+this.reason},t})(babelHelpers.wrapNativeSuper(Error));i.SmaxParsingFailure=e}),66);
__d("WASmaxRpcUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=Object.keys(t).map(function(e){var n=e==="Request"?"<request>":'<response name="'+e+'">';return"Tried "+n+", but failed with "+t[e].error+"."}).join(" ");return'Failed to parse incoming stanza of <rpc name="'+e+'">. '+n}i.errorMessageRpcParsing=e}),66);
__d("WASmaxPreKeysFetchKeyBundlesRPC",["WAComms","WASmaxInPreKeysFetchKeyBundlesResponseRequestError","WASmaxInPreKeysFetchKeyBundlesResponseServerError","WASmaxInPreKeysFetchKeyBundlesResponseSuccess","WASmaxOutPreKeysFetchKeyBundlesRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(t,n,r,o,a,i,l){async function e(e,t){var n=o("WASmaxOutPreKeysFetchKeyBundlesRequest").makeFetchKeyBundlesRequest(e),r=await o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInPreKeysFetchKeyBundlesResponseSuccess").parseFetchKeyBundlesResponseSuccess(r,n);if(a.success)return{name:"FetchKeyBundlesResponseSuccess",value:a.value};var i=o("WASmaxInPreKeysFetchKeyBundlesResponseRequestError").parseFetchKeyBundlesResponseRequestError(r,n);if(i.success)return{name:"FetchKeyBundlesResponseRequestError",value:i.value};var l=o("WASmaxInPreKeysFetchKeyBundlesResponseServerError").parseFetchKeyBundlesResponseServerError(r,n);if(l.success)return{name:"FetchKeyBundlesResponseServerError",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("FetchKeyBundles",{Success:a,RequestError:i,ServerError:l}))}l.sendFetchKeyBundlesRPC=e}),98);
__d("WAFetchPreKeyBundlesProtocol",["WAConvertRegistrationIdMixin","WAConvertSignedPreKeyMixin","WAParsableXmlNode","WAResultOrError","WASignalKeys","WASmaxPreKeysFetchKeyBundlesRPC","WATagsLogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS(["fetchPreKeyBundlesProtocol"]);async function m(t){d.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start fetching prekey of ","..."])),t.join(", "));var n=await o("WASmaxPreKeysFetchKeyBundlesRPC").sendFetchKeyBundlesRPC({userArgs:t.map(function(e){return{userJid:e,hasUserReasonIdentity:!1}})});switch(n.name){case"FetchKeyBundlesResponseSuccess":{d.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["fetched prekey successfully"])));var r=new Map;return n.value.listUser.map(function(e){var t=e.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;t.name==="FetchKeyBundlesUserSuccess"&&r.set(e.jid,p(t.value))}),o("WAResultOrError").makeResult(r)}case"FetchKeyBundlesResponseServerError":{var a=n.value.errorServerErrors.name;return d.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["ServerError: ",""])),a),o("WAResultOrError").makeError({type:"server-error",payload:a})}case"FetchKeyBundlesResponseRequestError":{var i=n.value.errorRequestErrorsFetch.name;return d.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["RequestError: ",""])),i),o("WAResultOrError").makeError({type:"request-error",payload:i})}}}function p(e){var t=o("WAConvertRegistrationIdMixin").registrationIdMixin(e),n=o("WASignalKeys").serializeIdentity(e.elementValue),r=o("WAConvertSignedPreKeyMixin").convertSignedPreKeyMixin(e),a=e.preKeyMixin?_(e.preKeyMixin):null,i=o("WATimeUtils").castToUnixTime(e.t||0);return{keys:{regId:t,identity:n,oneTimeKey:a,signedKey:{id:r.id,signature:r.signature,publicKey:o("WASignalKeys").serializeIdentity(r.pubkey)}},timestamp:i}}function _(e){return{id:o("WAParsableXmlNode").convertBytesToUint(e.keyIdKeyIDMixin.elementValue,3),publicKey:o("WASignalKeys").serializeIdentity(e.keyValueKeyDataMixin.elementValue)}}l.fetchPreKeyBundlesProtocol=m}),98);
__d("WABulkRequestKeys",["WAFetchPreKeyBundlesProtocol","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=await o("WAFetchPreKeyBundlesProtocol").fetchPreKeyBundlesProtocol(e);return t.success?o("WAResultOrError").makeResult(t.value):o("WAResultOrError").makeError("errRequestKeysParsingFailed")}l.bulkRequestKeys=e}),98);
__d("WALock",["Promise","WAResolvable","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return{lock:function(a,i){var r=new(o("WAResolvable")).Resolvable,l=a.map(function(e){return[e,new(o("WAResolvable")).Resolvable]});return(s||(s=n("Promise"))).all(l.map(function(e){var n=e[0],o=e[1];return t.enqueue(n,function(){return o.resolve(),r.promise})})).catch(function(){o("WATagsLogger").TAGS(["WALock"]).ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Lock failed for ",""])),a)}),s.all(l.map(function(e){var t=e[0],n=e[1];return n.promise})).then(function(){return i()}).finally(function(){r.resolve()})},wait:function(n){return t.wait(n)}}}l.makeLock=u}),98);
__d("WALockMap",["WALock","WAPromiseQueue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){e===void 0&&(e=-1);var t=new(o("WAPromiseQueue")).PromiseQueueMap(e);return o("WALock").makeLock(t)}l.makeLockMap=e}),98);
__d("WACryptoCurveConstants",[],(function(t,n,r,o,a,i){"use strict";var e=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),s=BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),u=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),c=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989");i.P=e,i.I=l,i.D=s,i.A=u,i.L=c}),66);
__d("WACryptoCurveEncoding",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){for(var t=BigInt(0),n=0;n<e.length;n++)t|=BigInt(e[n])<<BigInt(8)*BigInt(n);return t}function s(e){for(var t=new Uint8Array(32),n=e,r=0;r<32;r++)t[r]=Number(n&BigInt(255)),n>>=BigInt(8);return t}function u(e){if(e.length%2)throw r("err")("hexToU8: odd string length");for(var t=new Uint8Array(e.length/2),n=0;n<t.length;n++)t[n]=parseInt(e.slice(2*n,2*n+2),16);return t}l.bytesToBigIntLE=e,l.bigIntTo32LE=s,l.hexToU8=u}),98);
__d("WACryptoCurveTransformations",["WACryptoCurveConstants","WACryptoCurveEncoding","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e%o("WACryptoCurveConstants").P+o("WACryptoCurveConstants").P)%o("WACryptoCurveConstants").P}function s(e){return u(e,o("WACryptoCurveConstants").P-BigInt(2))}function u(t,n){for(var r=e(t),o=n,a=BigInt(1);o>BigInt(0);)o&BigInt(1)&&(a=e(a*r)),r=e(r*r),o>>=BigInt(1);return a}function c(t,n){var a=e(t*s(n)),i=u(a,o("WACryptoCurveConstants").P+BigInt(3)>>BigInt(3)),l=e(i*i);if(l!==a&&(i=e(i*o("WACryptoCurveConstants").I),l=e(i*i),l!==a))throw r("err")("Montgomery u is on the twist (no sqrt for v)");return i}function d(t){var n=e(o("WACryptoCurveEncoding").bytesToBigIntLE(t));if(n===o("WACryptoCurveConstants").P-BigInt(1))throw r("err")("u == -1 (mod p): cannot convert");var a=e(e(n-BigInt(1))*s(e(n+BigInt(1))));return o("WACryptoCurveEncoding").bigIntTo32LE(a)}function m(t,n){return{X:t,Y:n,Z:BigInt(1),T:e(t*n)}}function p(t){var n=e(t.x),o=e(t.y),a=e(BigInt(1)-o);if(a===BigInt(0))throw r("err")("y == 1: map undefined");var i=e((BigInt(1)+o)*s(a)),l=n===BigInt(0)?void 0:e(i*s(n));return{u:i,v:l}}function _(e){var t=e.x,n=e.y,r=o("WACryptoCurveEncoding").bigIntTo32LE(n),a=(t&BigInt(1))===BigInt(1)?128:0;return r[31]|=a,r}function f(t){if(!(t instanceof Uint8Array)||t.length!==32)throw r("err")("Compressed Ed25519 key is not 32 bytes");var n=t[31],a=(n&128)!==0,i=t.slice();i[31]&=127;var l=e(o("WACryptoCurveEncoding").bytesToBigIntLE(i)),s=e(l*l),u=e(s-BigInt(1)),d=e(o("WACryptoCurveConstants").D*s+BigInt(1)),m=c(u,d);if((m&BigInt(1))!==(a?BigInt(1):BigInt(0))&&(m=e(-m)),m===BigInt(0)&&a)throw r("err")("Error during decompression of Ed25519: x coord is 0 but sign bit set");return{x:m,y:l}}l.mod=e,l.toEdwardsCompressed=d,l.affineToExtended=m,l.fromAffineToMontgomeryUV=p,l.compressEd25519=_,l.decompressEd25519=f}),98);
__d("WACryptoCurveEd25519PointOps",["WACryptoCurveConstants","WACryptoCurveTransformations","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=e.T,a=e.X,i=e.Y,l=e.Z,s=t.T,u=t.X,c=t.Y,d=t.Z,m=(n=o("WACryptoCurveTransformations")).mod(a*u),p=n.mod(i*c),_=n.mod(r*o("WACryptoCurveConstants").D*s),f=n.mod(l*d),g=n.mod((a+i)*(u+c)-m-p),h=n.mod(f-_),y=n.mod(f+_),C=n.mod(p-o("WACryptoCurveConstants").A*m),b=n.mod(g*h),v=n.mod(y*C),S=n.mod(h*y),R=n.mod(g*C);return{X:b,Y:v,Z:S,T:R}}function s(e){var t,n=e.X,r=e.Y,a=e.Z,i=(t=o("WACryptoCurveTransformations")).mod(n*n),l=t.mod(r*r),s=t.mod(BigInt(2)*t.mod(a*a)),u=t.mod(o("WACryptoCurveConstants").A*i),c=n+r,d=t.mod(t.mod(c*c)-i-l),m=t.mod(u+l),p=t.mod(m-s),_=t.mod(u-l);return{X:t.mod(d*p),Y:t.mod(m*_),Z:t.mod(p*m),T:t.mod(d*_)}}function u(e,t){var n,r=e.X,a=e.Y,i=e.Z,l=t.X,s=t.Y,u=t.Z,c=(n=o("WACryptoCurveTransformations")).mod(r*u),d=n.mod(l*i),m=n.mod(a*u),p=n.mod(s*i);return c===d&&m===p}function c(t,n){for(var r={X:BigInt(0),Y:BigInt(1),Z:BigInt(1),T:BigInt(0)},o=t,a=n;a>BigInt(0);)a&BigInt(1)&&(r=e(r,o)),o=s(o),a>>=BigInt(1);return r}function d(e){var t,n=e.T,a=e.X,i=e.Y,l=e.Z,s=(t=o("WACryptoCurveTransformations")).mod(a*a),u=t.mod(i*i),c=t.mod(l*l),d=t.mod(c*c),m=t.mod(s*o("WACryptoCurveConstants").A),p=t.mod(c*t.mod(m+u)),_=t.mod(d+t.mod(o("WACryptoCurveConstants").D*t.mod(s*u)));if(p!==_)throw r("err")("bad point: equation left != right (1)");var f=o("WACryptoCurveTransformations").mod(a*i),g=o("WACryptoCurveTransformations").mod(l*n);if(f!==g)throw r("err")("bad point: equation left != right (2)");return!0}l.addPoints=e,l.doublePoint=s,l.equalPoints=u,l.scalarMult=c,l.isPointValid=d}),98);
__d("WACryptoCurveKeyCanonicalCheck",["WACryptoCurveConstants","WACryptoCurveEd25519PointOps","WACryptoCurveEncoding","WACryptoCurveTransformations"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WACryptoCurveEd25519PointOps").equalPoints(e,{X:BigInt(0),Y:BigInt(1),Z:BigInt(1),T:BigInt(0)})}function s(e){var t=o("WACryptoCurveEncoding").bytesToBigIntLE(e);return t<o("WACryptoCurveConstants").P}function u(t){try{var n=o("WACryptoCurveTransformations").toEdwardsCompressed(t),r=o("WACryptoCurveTransformations").decompressEd25519(n),a=r.x,i=r.y,l=o("WACryptoCurveTransformations").affineToExtended(a,i),s=o("WACryptoCurveEd25519PointOps").scalarMult(l,o("WACryptoCurveConstants").L);return e(s)}catch(e){return!1}}function c(e){return u(e)&&s(e)}l.isIdentity=e,l.isInRange=s,l.isTorsionFree=u,l.isCanonical=c}),98);
__d("WACryptoLibraryConfig",[],(function(t,n,r,o,a,i){"use strict";var e={signalFutureMessagesMax:2e3,S508658AutoAcknowledgeStaleSessions:!1,baseKeyCanonicalCheck:!1};function l(){return e}function s(t){e=t}i.getCryptoLibraryConfig=l,i.setCryptoLibraryConfig=s}),66);
__d("WASignalSessions",["WABinary","WACryptoLibraryConfig","WASignalKeys","WASignalOther","err"],(function(t,n,r,o,a,i,l){"use strict";var e=3;function s(e){return!o("WACryptoLibraryConfig").getCryptoLibraryConfig().S508658AutoAcknowledgeStaleSessions||e.initialExchangeInfo==null?e:y(e.local,e.remote,e.rootKey,e.recvChains,e.sendChain,null,e.prevSendChainHighestIndex,e.prevSessions,e.aliceBaseKey)}function u(e,t){return c(e,0,t,[])}function c(e,t,n,r){return{ratchetPubKey:e,nextMsgIndex:t,chainKey:n,unusedMsgKeys:r}}function d(e,t){return m(e,0,t)}function m(e,t,n){return{ratchetKey:e,nextMsgIndex:t,chainKey:n}}function p(e,t,n){return{remoteOneTimeId:e,remoteSignedId:t,localOneTimePubKey:n}}function _(e,t){return y(e.local,e.remote,e.rootKey,e.recvChains,e.sendChain,e.initialExchangeInfo,e.prevSendChainHighestIndex,t,e.aliceBaseKey)}function f(e,t,n){return y(e.local,e.remote,e.rootKey,t,n,e.initialExchangeInfo,e.prevSendChainHighestIndex,e.prevSessions,e.aliceBaseKey)}function g(e,t,n,r){return n===void 0&&(n=e.sendChain),y(e.local,e.remote,r,t,n,null,Math.max(e.sendChain.nextMsgIndex-1,0),e.prevSessions,e.aliceBaseKey)}function h(e,t,n,r,o,a,i){return y(e,t,n,r,o,a,0,[],i)}function y(e,t,n,r,o,a,i,l,s){return{local:e,remote:t,rootKey:n,sendChain:o,recvChains:r,initialExchangeInfo:a,prevSendChainHighestIndex:i,prevSessions:l,aliceBaseKey:s}}function C(e,t){var n=new(o("WABinary")).Binary(t),r=o("WASignalOther").readBytes(n,32),a=o("WASignalOther").readBytes(n,32),i=o("WASignalOther").readBytes(n,16);return b(e,r,a,i)}function b(e,t,n,r){return{index:e,cipherKey:t,macKey:n,iv:r}}function v(e){return{senderRatchetKey:e.ratchetPubKey,chainKey:{index:e.nextMsgIndex,key:e.chainKey},messageKeys:e.unusedMsgKeys}}function S(e){var t=e.ratchetKey;return{senderRatchetKey:t.serializedPubKey,senderRatchetKeyPrivate:t.privateKey,chainKey:{index:e.nextMsgIndex,key:e.chainKey}}}function R(t){var n=t.initialExchangeInfo,r=t.local,o=t.remote,a=void 0;if(n){var i=n.remoteOneTimeId;a={preKeyId:i!=null?i:void 0,signedPreKeyId:n.remoteSignedId,baseKey:n.localOneTimePubKey}}return{currentSession:{sessionVersion:e,localIdentityPublic:r.pubKey,remoteIdentityPublic:o.pubKey,rootKey:t.rootKey,previousCounter:t.prevSendChainHighestIndex,senderChain:S(t.sendChain),receiverChains:t.recvChains.map(v),pendingPreKey:a,remoteRegistrationId:o.regId,localRegistrationId:r.regId,aliceBaseKey:t.aliceBaseKey},previousSessions:t.prevSessions}}function L(t){var n=t.initialExchangeInfo,r=t.local,a=t.remote,i=t.sendChain,l=void 0;if(n){var s=n.remoteOneTimeId;l={preKeyId:s!=null?s:void 0,signedPreKeyId:n.remoteSignedId,baseKey:o("WASignalOther").toBuffer(n.localOneTimePubKey)}}return{sessionVersion:e,localIdentityPublic:o("WASignalOther").toBuffer(r.pubKey),remoteIdentityPublic:o("WASignalOther").toBuffer(a.pubKey),rootKey:o("WASignalOther").toBuffer(t.rootKey),previousCounter:t.prevSendChainHighestIndex,senderChain:{senderRatchetKey:o("WASignalOther").toBuffer(i.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:o("WASignalOther").toBuffer(i.ratchetKey.privateKey),chainKey:{index:i.nextMsgIndex,key:o("WASignalOther").toBuffer(i.chainKey)},messageKeys:[]},receiverChains:t.recvChains.map(function(e){return{senderRatchetKey:o("WASignalOther").toBuffer(e.ratchetPubKey),chainKey:{index:e.nextMsgIndex,key:o("WASignalOther").toBuffer(e.chainKey)},messageKeys:e.unusedMsgKeys.map(function(e){return{index:e.index,cipherKey:o("WASignalOther").toBuffer(e.cipherKey),macKey:o("WASignalOther").toBuffer(e.macKey),iv:o("WASignalOther").toBuffer(e.iv)}})}}),pendingPreKey:l,remoteRegistrationId:a.regId,localRegistrationId:r.regId,aliceBaseKey:t.aliceBaseKey==null?void 0:o("WASignalOther").toBuffer(t.aliceBaseKey)}}function E(e){var t=$(e.currentSession,"currentSession");return I(t,e.previousSessions)}function k(e){return I(e,[])}function I(t,n){var a=$(t.sessionVersion,"sessionVersion");if(a!==e)throw r("err")("Signal: bad session version "+a);var i=$(t.senderChain,"senderChain"),l=$(i.chainKey,"senderChain.chainKey"),s=m(o("WASignalKeys").makeSerializedKeyPairFrom(x(i.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),D(i.senderRatchetKey,"senderRatchetKey")),$(l.index,"senderChain.chainKey.index"),x(l.key,32,"senderChain.chainKey.key")),u=$(t.receiverChains,"receiverChains").map(function(e){var t=$(e.chainKey,"receiverChains[].chainKey");return c(D(e.senderRatchetKey,"receiverChains[].senderRatchetKey"),$(t.index,"receiverChains[].chainKey.index"),x(t.key,32,"receiverChains[].chainKey.key"),T(e.messageKeys))}),d={regId:o("WASignalOther").castRegistrationId($(t.localRegistrationId,"localRegistrationId")),pubKey:D(t.localIdentityPublic,"localIdentityPublic")},_={regId:o("WASignalOther").castRegistrationId($(t.remoteRegistrationId,"remoteRegistrationId")),pubKey:D(t.remoteIdentityPublic,"remoteIdentityPublic")},f=t.pendingPreKey,g=null;if(f){var h=f.preKeyId;g=p(h!=null?o("WASignalKeys").castToPreKeyId(h):null,o("WASignalKeys").castToSignedPreKeyId($(f.signedPreKeyId,"pendingPreKey.signedPreKeyId")),D(f.baseKey,"pendingPreKey.baseKey"))}var C=t.aliceBaseKey==null?null:D(t.aliceBaseKey,"aliceBaseKey");return y(d,_,x(t.rootKey,32,"rootKey"),u,s,g,t.previousCounter||0,n,C)}function T(e){return e.map(function(e){return{index:$(e.index,"messageKeys[].index"),cipherKey:x(e.cipherKey,32,"messageKeys[].cipherKey"),macKey:x(e.macKey,32,"messageKeys[].macKey"),iv:x(e.iv,16,"messageKeys[].iv")}})}function D(e,t){return o("WASignalKeys").castToSerializedPubKey(new Uint8Array($(e,t)))}function x(e,t,n){return o("WASignalOther").toBytes($(e,n),t)}function $(e,t){if(e==null)throw r("err")("Signal: protobuf is missing "+t);return e}l.FORMAT_VERSION=e,l.maybeClearPendingPreKey=s,l.makeFreshRecvChain=u,l.makeRecvChain=c,l.makeFreshSendChain=d,l.makeSendChain=m,l.makeInitialExchangeInfo=p,l.setPrevSessions=_,l.updateChains=f,l.ratchetSession=g,l.makeFreshSession=h,l.makeSession=y,l.splitMsgKey=C,l.serializeSession=R,l.detachSession=L,l.parseSessionFromRecord=E,l.parseSession=k,l._parseSession=I,l.bytesOrThrow=x,l.definedOrThrow=$}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={};s.name="SignalMessage",s.internalSpec={ratchetKey:[1,(e=o("WAProtoConst")).TYPES.BYTES],counter:[2,e.TYPES.UINT32],previousCounter:[3,e.TYPES.UINT32],ciphertext:[4,e.TYPES.BYTES]},u.name="PreKeySignalMessage",u.internalSpec={registrationId:[5,e.TYPES.UINT32],preKeyId:[1,e.TYPES.UINT32],signedPreKeyId:[6,e.TYPES.UINT32],baseKey:[2,e.TYPES.BYTES],identityKey:[3,e.TYPES.BYTES],message:[4,e.TYPES.BYTES]},c.name="KeyExchangeMessage",c.internalSpec={id:[1,e.TYPES.UINT32],baseKey:[2,e.TYPES.BYTES],ratchetKey:[3,e.TYPES.BYTES],identityKey:[4,e.TYPES.BYTES],baseKeySignature:[5,e.TYPES.BYTES]},d.name="SenderKeyMessage",d.internalSpec={id:[1,e.TYPES.UINT32],iteration:[2,e.TYPES.UINT32],ciphertext:[3,e.TYPES.BYTES]},m.name="SenderKeyDistributionMessage",m.internalSpec={id:[1,e.TYPES.UINT32],iteration:[2,e.TYPES.UINT32],chainKey:[3,e.TYPES.BYTES],signingKey:[4,e.TYPES.BYTES]},p.name="DeviceConsistencyCodeMessage",p.internalSpec={generation:[1,e.TYPES.UINT32],signature:[2,e.TYPES.BYTES]},l.SignalMessageSpec=s,l.PreKeySignalMessageSpec=u,l.KeyExchangeMessageSpec=c,l.SenderKeyMessageSpec=d,l.SenderKeyDistributionMessageSpec=m,l.DeviceConsistencyCodeMessageSpec=p}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(t,n,r,o,a,i,l){"use strict";var e=5,s=3;function u(e){var t=o("WASignalSessions").definedOrThrow(e.senderSigningKey,"senderSigningKey"),n=o("WASignalSessions").definedOrThrow(e.senderMessageKeys,"senderMessageKeys"),r=o("WASignalSessions").definedOrThrow(e.senderChainKey,"senderChainKey");return{senderSigningKeyPublic:S(t.public,"public"),senderSigningKeyPrivate:t.private?o("WASignalSessions").bytesOrThrow(t.private,32,"private"):void 0,senderKeyId:o("WASignalSessions").definedOrThrow(e.senderKeyId,"senderKeyId"),unusedMsgKeys:n.map(function(e){return _(o("WASignalSessions").definedOrThrow(e.iteration,"iteration"),o("WASignalSessions").bytesOrThrow(e.seed,50,"seed"))}),senderKeyChainKey:f(o("WASignalSessions").definedOrThrow(r.iteration,"iteration"),o("WASignalSessions").bytesOrThrow(r.seed,32,"seed"))}}function c(e,t,n,r,o){return{senderSigningKeyPublic:e,senderSigningKeyPrivate:t,senderKeyChainKey:n,senderKeyId:r,unusedMsgKeys:o==null?[]:o}}function d(e,t){var n=e.senderKeyStates.findIndex(function(e){return e.senderKeyId===t.senderKeyId});return{senderKeyStates:e.senderKeyStates.map(function(e,r){return r===n?t:e})}}function m(t,n){var r=t.senderKeyStates.slice(t.senderKeyStates.length>e-1?1:0);return r.push(n),{senderKeyStates:r}}function p(e){return{senderKeyStates:[e]}}function _(e,t){return{iteration:e,seed:t}}function f(e,t){return{nextMsgIndex:e,chainKey:t}}function g(e){var t=o("WASignalSessions").definedOrThrow(e.senderKeyStates,"senderKeyStates");return h(t)}function h(e){return y(e)}function y(e){var t=e.map(function(e){return u(e)});return{senderKeyStates:t}}function C(e,t){var n=e.senderKeyStates.findIndex(function(e){return e.senderKeyId===t});if(n!==-1)return e.senderKeyStates[n]}function b(e){return{senderKeyStates:e.senderKeyStates.map(function(e){return v(e)})}}function v(e){return{senderKeyId:e.senderKeyId,senderChainKey:{iteration:e.senderKeyChainKey.nextMsgIndex,seed:e.senderKeyChainKey.chainKey},senderSigningKey:{public:e.senderSigningKeyPublic,private:e.senderSigningKeyPrivate},senderMessageKeys:e.unusedMsgKeys.map(function(e){var t=e.iteration,n=e.seed;return{iteration:t,seed:n}})}}function S(e,t){return o("WASignalKeys").castToSerializedPubKey(new Uint8Array(o("WASignalSessions").definedOrThrow(e,t)))}function R(e){return e}l.FORMAT_VERSION=s,l.makeSenderKeyState=c,l.updateSessionWithUpdatedSenderKeyState=d,l.updateSessionWithNewSenderKeyState=m,l.makeNewSenderKeySession=p,l.makeSenderKeyMsgKey=_,l.makeSenderKeyChainKey=f,l.parseSessionFromRecord=g,l._parseSession=h,l.makeSenderKeySessionFromRecord=y,l.findSenderKeyState=C,l.serializeSession=b,l.serializeSenderKeyState=v,l.convertFromRawToSenderKeyState=R}),98);
__d("WASignalWhitepaper",["WABinary","WACryptoDependencies","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions"],(function(t,n,r,o,a,i,l){"use strict";var e=new Uint8Array(32);e.fill(255);var s=new Uint8Array([1]),u=new Uint8Array([2]);async function c(t,n,r){var a,i=t.regId,l=t.staticKeyPair,s=n.identity,u=n.signedKey.publicKey,c=r.privateKey,d=l.privateKey,m=(a=n.oneTimeKey)==null?void 0:a.publicKey,p=o("WABinary").Binary.build(e,y(d,u),y(c,s),y(c,u),m&&y(c,m)).readByteArrayView(),_=await h(p,"WhisperText"),f=_[0],C=_[1],b=n.ratchetKey,v=o("WASignalSessions").makeFreshRecvChain(b,C),S=o("WASignalKeys").makeSerializedKeyPair(),R=await g(f,S,b),L=o("WASignalSessions").makeInitialExchangeInfo(n.oneTimeKey==null?null:n.oneTimeKey.id,n.signedKey.id,o("WASignalKeys").serializePubKey(r));return o("WASignalSessions").makeFreshSession({regId:i,pubKey:o("WASignalKeys").serializePubKey(l)},{regId:n.regId,pubKey:s},R.rootKey,[v],o("WASignalSessions").makeFreshSendChain(S,R.chainKey),L,o("WASignalKeys").serializePubKey(r))}async function d(t,n,r,a){var i,l=t.regId,s=t.staticKeyPair,u=s.privateKey,c=a.signed.privateKey,d=r,m=n.pubKey,p=(i=a.oneTime)==null?void 0:i.privateKey,_=o("WABinary").Binary.build(e,C(m,c),C(d,u),C(d,c),p&&C(d,p)).readByteArrayView(),f=await h(_,"WhisperText"),g=f[0],y=f[1],b=a.ratchet,v=o("WASignalSessions").makeFreshSendChain(b,y);return o("WASignalSessions").makeSession({regId:l,pubKey:o("WASignalKeys").serializePubKey(s)},n,g,[],v,null,0,[],r)}function m(e){var t=o("WASignalGroupSession").makeSenderKeyState(o("WASignalKeys").serializePubKey(e),e.privateKey,o("WASignalGroupSession").makeSenderKeyChainKey(0,o("WASignalKeys").makeRawSenderKey()),o("WASignalOther").makeSenderKeyId(),[]);return Promise.resolve(o("WASignalGroupSession").makeNewSenderKeySession(t))}function p(e,t,n,r,a){var i=o("WASignalGroupSession").makeSenderKeyState(n,void 0,o("WASignalGroupSession").makeSenderKeyChainKey(t,r),e,[]),l=null;return a?l=o("WASignalGroupSession").updateSessionWithNewSenderKeyState(a,i):l=o("WASignalGroupSession").makeNewSenderKeySession(i),Promise.resolve(l)}async function _(e,t){var n=await o("WASignalOther").makeCryptoKey(t,"hmac-sha256"),r=function(t){return o("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},n,t)},a=r(s).then(function(e){return o("WASignalOther").hkdf(new Uint8Array(e),null,"WhisperMessageKeys",80)}).then(function(t){return o("WASignalSessions").splitMsgKey(e,t)}),i=r(u).then(function(e){return o("WASignalOther").toBytes(e,32)});return Promise.all([i,a])}async function f(e,t){var n=await o("WASignalOther").makeCryptoKey(t,"hmac-sha256"),r=function(t){return o("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},n,t)},a=r(s).then(function(e){return o("WASignalOther").hkdf(new Uint8Array(e),null,"WhisperGroup",50)}).then(function(t){return o("WASignalGroupSession").makeSenderKeyMsgKey(e,t)}),i=r(u).then(function(e){return o("WASignalOther").toBytes(e,32)});return Promise.all([i,a])}async function g(e,t,n){var r=t.privateKey,a=n,i=o("WASignalKeys").ecdh(r,a),l=await h(new Uint8Array(i),"WhisperRatchet",e),s=l[0],u=l[1];return{rootKey:s,chainKey:u}}async function h(e,t,n){n===void 0&&(n=null);var r=await o("WASignalOther").hkdf(e,n,t,64);return[o("WASignalOther").sliceBytes(r,0,32),o("WASignalOther").sliceBytes(r,32,32)]}function y(e,t){return new Uint8Array(o("WASignalKeys").ecdh(e,t))}function C(e,t){return y(t,e)}l.initiateSessionOutgoing=c,l.initiateSessionIncoming=d,l.initiateSenderKeySessionOutgoing=m,l.initiateSenderKeySessionIncoming=p,l.deriveMsgKey=_,l.deriveSenderKeyMsgKey=f,l.calculateRatchet=g}),98);
__d("WASignalCipher",["WABinary","WACryptoCurveKeyCanonicalCheck","WACryptoDependencies","WACryptoLibraryConfig","WACryptoUtils","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","decodeProtobuf","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e=40,s=8,u=2e3;async function c(e,t){var n=e.sendChain,r=await o("WASignalWhitepaper").deriveMsgKey(n.nextMsgIndex,n.chainKey),a=r[0],i=r[1],l=await S(i),u=l.cipherKey,c=l.macKey,d=await o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:i.iv},u,t),m=new(o("WABinary")).Binary;m.writeByteArray(e.local.pubKey),m.writeByteArray(e.remote.pubKey);var p=m.size();m.writeUint8(C(o("WASignalSessions").FORMAT_VERSION,o("WASignalSessions").FORMAT_VERSION)),o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:n.ratchetKey.serializedPubKey,counter:i.index,previousCounter:e.prevSendChainHighestIndex,ciphertext:d},m);var _=m.readByteArrayView(),f=await v(c,_),g=_.subarray(p),h=o("WABinary").Binary.build(g,new Uint8Array(f,0,s)).readByteArrayView(),y,b,R=e.initialExchangeInfo;if(R!=null){var L,E=new(o("WABinary")).Binary;E.writeUint8(C(o("WASignalSessions").FORMAT_VERSION,o("WASignalSessions").FORMAT_VERSION)),o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:e.local.regId,preKeyId:(L=R.remoteOneTimeId)!=null?L:void 0,signedPreKeyId:R.remoteSignedId,baseKey:R.localOneTimePubKey,identityKey:e.local.pubKey,message:h},E),y="pkmsg",b=E.readByteArrayView()}else y="msg",b=h;var k=o("WASignalSessions").makeSendChain(n.ratchetKey,i.index+1,a),I=o("WASignalSessions").updateChains(e,e.recvChains,k);return[I,{type:y,ciphertext:b}]}async function d(e,t){if(e==null)return o("WAResultOrError").makeError("errSignalNoSession");var n=await g(e,t);if(n.success){var r=n.value,a=r[0],i=r[1];return o("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:a,plaintext:i})}else{for(var l=e.prevSessions,s=n,u=0;!s.success&&u<l.length;u++){var c=o("WASignalSessions").maybeClearPendingPreKey(o("WASignalSessions").parseSession(l[u])),d=await g(c,t);if(d.success){var m=d.value,p=m[0],_=m[1],f=o("WASignalSessions").setPrevSessions(p,[o("WASignalSessions").detachSession(e)].concat(l.slice(0,u),l.slice(u+1))),h=!e||!o("WACryptoUtils").serializedPubKeysEqual(f.remote.pubKey,e.remote.pubKey)?f.remote.pubKey:null;s=o("WAResultOrError").makeResult({newSessionInfo:{newIdentity:h,baseSession:c,usedPreKey:null},updatedSession:f,plaintext:_})}}return s}}function m(e,t){if(e==null)return o("WAResultOrError").makeResult(null);var n=e;if(R(n,t))return o("WAResultOrError").makeResult(n);for(var r=n.prevSessions,a=0;a<r.length;a++){var i=o("WASignalSessions").parseSession(r[a]);if(R(i,t))return o("WAResultOrError").makeError("errSignalInvalidMsg")}return o("WAResultOrError").makeResult(null)}async function p(t,n,r,a){var i,l=a.localSignedPreKey;if(l==null)return o("WAResultOrError").makeError("errSignalInvalidSignedPreKey");var s=o("WASignalSignatures").deserializeSignedPreKey(l);if(s==null)return o("WAResultOrError").makeError("errSignalSignedPreKeyDeserialization");if(s.id!==r.localSignedPreKeyId)return o("WAResultOrError").makeError("errSignalSignedPreKeyIdMismatch");var u=null;if(r.localOneTimeKeyId!=null){var c=a.localOneTimeKey;if(c==null)return o("WAResultOrError").makeError("errSignalInvalidOneTimeKey");if(u=o("WASignalKeys").deserializePreKey(c),u==null)return o("WAResultOrError").makeError("errSignalOneTimeKeyDeserialization");if(u.id!==r.localOneTimeKeyId)return o("WAResultOrError").makeError("errSignalOneTimeKeyMismatch")}if(o("WACryptoLibraryConfig").getCryptoLibraryConfig().baseKeyCanonicalCheck&&!o("WACryptoCurveKeyCanonicalCheck").isCanonical(r.sessionBaseKey.subarray(1)))return o("WAResultOrError").makeError("errSignalBaseKeyIsNotCanonical");var d=await o("WASignalWhitepaper").initiateSessionIncoming(t,r.remote,r.sessionBaseKey,{signed:s.keyPair,oneTime:(i=u)==null?void 0:i.keyPair,ratchet:o("WASignalKeys").toSerializedKeyPair(s.keyPair)}),m=d.remote.pubKey,p=!n||!o("WACryptoUtils").serializedPubKeysEqual(m,n.remote.pubKey)?m:null;n&&!p&&(d=o("WASignalSessions").setPrevSessions(d,[o("WASignalSessions").detachSession(n)].concat(n.prevSessions.slice(0,e-1))));var _=await g(d,r);if(!_.success)return _;var f=_.value,h=f[0],y=f[1];return o("WAResultOrError").makeResult({newIdentity:p,baseSession:d,updatedSession:h,plaintext:y})}function _(e){var t,n,r=null;try{var a=y(e,o("WASignalSessions").FORMAT_VERSION,s);if(!a.success)return a;var i=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").SignalMessageSpec,a.value),l=i.ratchetKey;if(r=i.counter,n=i.ciphertext,l==null||r==null||n==null)return o("WAResultOrError").makeError("errSignalDeserializeInvalidProtoFormat");t=o("WASignalKeys").castToSerializedPubKey(new Uint8Array(l))}catch(e){return o("WAResultOrError").makeError("errSignalDeserializeRatchetKeyBadFormat")}var u={ratchetPubKey:t,counter:r,ciphertext:new Uint8Array(n),versionContentMac:e};return o("WAResultOrError").makeResult(u)}function f(e){var t=y(e,o("WASignalSessions").FORMAT_VERSION,0);if(!t.success)return t;var n,r,a,i,l;try{var s=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,t.value),u=s.baseKey,c=s.identityKey,d=s.message,m=s.preKeyId,p=s.registrationId,f=s.signedPreKeyId;if(p==null||f==null||u==null||c==null||d==null)return o("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");i=o("WASignalKeys").castToSerializedPubKey(new Uint8Array(u)),n={regId:o("WASignalOther").castRegistrationId(p),pubKey:o("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))},a=m!=null?o("WASignalKeys").castToPreKeyId(m):null,r=o("WASignalKeys").castToSignedPreKeyId(f),l=new Uint8Array(d)}catch(e){return o("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}var g=_(l);return g.success?o("WAResultOrError").makeResult(babelHelpers.extends({},g.value,{remote:n,sessionBaseKey:i,localSignedPreKeyId:r,localOneTimeKeyId:a})):g}async function g(e,t){var n=t.ciphertext,r=t.counter,a=t.ratchetPubKey,i=t.versionContentMac,l=e.recvChains,u=e.recvChains.findIndex(function(e){return o("WACryptoUtils").serializedPubKeysEqual(e.ratchetPubKey,a)}),c,d;if(u===-1){var m=await o("WASignalWhitepaper").calculateRatchet(e.rootKey,e.sendChain.ratchetKey,a),p=o("WASignalSessions").makeFreshRecvChain(a,m.chainKey),_=await h(p,r);if(!_.success)return _;var f=_.value,g=o("WASignalKeys").makeSerializedKeyPair(),y=await o("WASignalWhitepaper").calculateRatchet(m.rootKey,g,a),C=l.slice(-4);C.push(f.updatedChain),d=f.msgKey,c=o("WASignalSessions").ratchetSession(e,C,o("WASignalSessions").makeFreshSendChain(g,y.chainKey),y.rootKey)}else{var b=await h(l[u],r);if(!b.success)return b;var R=b.value,L=l.slice();L[u]=R.updatedChain,d=R.msgKey,c=o("WASignalSessions").updateChains(e,L,e.sendChain)}var E=await S(d),k=E.cipherKey,I=E.macKey,T=o("WABinary").Binary.build(e.remote.pubKey,e.local.pubKey,i.subarray(0,-s)).readByteArrayView(),D=await v(I,T),x=i.subarray(-s),$=!o("WACryptoUtils").uint8ArraysEqual(new Uint8Array(D,0,s),x),P=null;try{P=await o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:d.iv},k,n)}catch(e){}return $&&P==null?u===-1?o("WAResultOrError").makeError("errInvalidMacInvalidCipherKeyNewChain"):o("WAResultOrError").makeError("errInvalidMacInvalidCipherKey"):$?o("WAResultOrError").makeError("errInvalidMacWithDecryptedPlaintext"):P==null?o("WAResultOrError").makeError("errUnknownInvalidCipherKey"):o("WAResultOrError").makeResult([c,P])}async function h(e,t){var n=t-e.nextMsgIndex,r=o("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(n>r)return o("WAResultOrError").makeError("errSignalTooManyMessagesInFuture");var a=e.unusedMsgKeys;if(n<0){var i=a.findIndex(function(e){return e.index===t});return i===-1?o("WAResultOrError").makeError("errDuplicateMsg"):o("WAResultOrError").makeResult({msgKey:a[i],updatedChain:o("WASignalSessions").makeRecvChain(e.ratchetPubKey,e.nextMsgIndex,e.chainKey,b(a,i))})}var l=e.nextMsgIndex,s=await o("WASignalWhitepaper").deriveMsgKey(l,e.chainKey),c=s[0],d=s[1],m=null;if(n>0){var p=n+a.length-u;p>0?(m=a.slice(p),p-=a.length):m=a.slice();for(var _=l+1;_<=t;_++){p>0?p--:m.push(d);var f=await o("WASignalWhitepaper").deriveMsgKey(_,c);c=f[0],d=f[1]}}return o("WAResultOrError").makeResult({msgKey:d,updatedChain:o("WASignalSessions").makeRecvChain(e.ratchetPubKey,t+1,c,m||a)})}function y(e,t,n){if(e.length<1)return o("WAResultOrError").makeError("errSignalEmptyVersionContentSuffix");var r=e[0]>>>4;if(r!==t)return r<t?o("WAResultOrError").makeError("errSignalLegacyMsg"):o("WAResultOrError").makeError("errSignalInvalidVersion");var a=e.length-n;return a<1?o("WAResultOrError").makeError("errSignalContentExceededExpectedLength"):o("WAResultOrError").makeResult(e.subarray(1,a))}function C(e,t){return(e<<4|t)&255}function b(e,t){for(var n=[],r=0;r<e.length;r++)r!==t&&n.push(e[r]);return n}function v(e,t){return o("WACryptoDependencies").getCrypto().subtle.sign(o("WASignalOther").HMAC_SHA256,e,t)}function S(e){return Promise.all([o("WASignalOther").makeCryptoKey(e.cipherKey,"aes-cbc"),o("WASignalOther").makeCryptoKey(e.macKey,"hmac-sha256")]).then(function(e){var t=e[0],n=e[1];return{cipherKey:t,macKey:n}})}function R(e,t){var n=e.aliceBaseKey;return n?o("WACryptoUtils").serializedPubKeysEqual(n,t):!1}l.MAX_UNUSED_KEYS=u,l.encryptMsg=c,l.decryptMsg=d,l.findMatchingSession=m,l.decryptPkMsgWithNewSession=p,l.deserializeMsg=_,l.deserializePkMsg=f,l.decryptMsgFromSession=g,l.readContent=y,l.versionByte=C}),98);
__d("WASignalGroupCipher",["WABinary","WACryptoDependencies","WACryptoLibraryConfig","WALogger","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","decodeProtobuf","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s=64;async function u(e,t){var n=p(e);if(!n.success)return n;var r=n.value,a=r.chainKey,i=r.iteration,l=r.senderKeyId,s=r.signingKeyPublic,u=await o("WASignalWhitepaper").initiateSenderKeySessionIncoming(l,i,s,a,t);return o("WAResultOrError").makeResult(u)}function c(e){var t=o("WASignalGroupSession").serializeSenderKeyState(e),n=new(o("WABinary")).Binary;return n.writeUint8(o("WASignalCipher").versionByte(o("WASignalGroupSession").FORMAT_VERSION,o("WASignalGroupSession").FORMAT_VERSION)),o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,{id:t.senderKeyId,iteration:o("WASignalSessions").definedOrThrow(t.senderChainKey,"senderChainKey").iteration,chainKey:o("WASignalSessions").definedOrThrow(t.senderChainKey,"senderChainKey").seed,signingKey:o("WASignalSessions").definedOrThrow(t.senderSigningKey,"senderSigningKey").public},n),n.readByteArrayView()}async function d(e,t){if(!e.senderKeyStates||e.senderKeyStates.length===0)return o("WAResultOrError").makeError("errSignalNoSession");var n=e.senderKeyStates[e.senderKeyStates.length-1],r=await o("WASignalWhitepaper").deriveSenderKeyMsgKey(n.senderKeyChainKey.nextMsgIndex,n.senderKeyChainKey.chainKey),a=r[0],i=r[1],l=await f(i.seed),s=l[0],u=l[1],c=await o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:u},s,t),d=new(o("WABinary")).Binary;o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,{id:n.senderKeyId,iteration:i.iteration,ciphertext:c},d);var m=new(o("WABinary")).Binary;m.writeUint8(o("WASignalCipher").versionByte(o("WASignalGroupSession").FORMAT_VERSION,o("WASignalGroupSession").FORMAT_VERSION)),m.writeBinary(d);var p=o("WASignalKeys").makeKeyPairFromSerialized(o("WASignalSessions").definedOrThrow(n.senderSigningKeyPrivate,"senderSigningKeyPrivate"),n.senderSigningKeyPublic),_=o("WASignalSignatures").signSenderKeyMessage(p,m.readByteArrayView()),g=new(o("WABinary")).Binary;g.writeUint8(o("WASignalCipher").versionByte(o("WASignalGroupSession").FORMAT_VERSION,o("WASignalGroupSession").FORMAT_VERSION)),g.writeBinary(d),g.writeByteArray(_);var h=o("WASignalGroupSession").makeSenderKeyChainKey(i.iteration+1,a),y=o("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(e,o("WASignalGroupSession").makeSenderKeyState(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,h,n.senderKeyId,n.unusedMsgKeys));return o("WAResultOrError").makeResult([y,g.readByteArrayView()])}async function m(e,t){var n=t.ciphertext,r=t.iteration,a=t.senderKeyMessageId,i=t.versionContentMac,l=o("WASignalGroupSession").findSenderKeyState(e,a);if(l==null)return o("WAResultOrError").makeError("errSignalNoSession");var s=l.senderSigningKeyPublic,u=g(i,s);if(!u)return o("WAResultOrError").makeError("errSignalInvalidKey");var c=await h(l,r);if(!c.success)return c;var d=c.value,m=d.msgKey,p=o("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(e,d.updatedSenderKeyState),_=await f(m.seed),y=_[0],C=_[1],b=await o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:C},y,n);return o("WAResultOrError").makeResult([p,b])}function p(e){var t,n,r,a,i;try{if(i=o("WASignalCipher").readContent(e,o("WASignalGroupSession").FORMAT_VERSION,0),!i.success)return i;var l=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,i.value);t=l.id,n=l.iteration;var s=o("WASignalSessions").bytesOrThrow(l.signingKey,33,"signingKey");if(r=o("WASignalKeys").castToSerializedPubKey(s),a=o("WASignalSessions").bytesOrThrow(l.chainKey,32,"chainKey"),t==null||n==null)return o("WAResultOrError").makeError("errSignalGrpInvalidProtoFormat")}catch(e){return o("WAResultOrError").makeError("errSignalGrpInvalidKeyFormat")}return o("WAResultOrError").makeResult({senderKeyId:t,iteration:n,signingKeyPublic:r,chainKey:a})}function _(t){if(t.length<1)return o("WAResultOrError").makeError("errSignalGrpVersionContentEmpty");var n=t[0]>>>4;if(n!==o("WASignalGroupSession").FORMAT_VERSION)return n<o("WASignalGroupSession").FORMAT_VERSION?o("WAResultOrError").makeError("errSignalLegacyMsg"):o("WAResultOrError").makeError("errSignalInvalidVersion");if(t.length<1+s)return o("WAResultOrError").makeError("errSignalGrpInvalidVersionContentLength");var r,a,i;try{var l=t.subarray(1,-s),u=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,l);if(r=u.id,a=u.iteration,i=u.ciphertext,r==null||a==null||i==null)return o("WAResultOrError").makeError("errSignalGrpSenderKeyInvalidProtoFormat")}catch(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Exception caught during SenderKeyMessageSpec Proto: ",""])),t),o("WAResultOrError").makeError("errSignalGrpSenderKeyProtoError")}return o("WAResultOrError").makeResult({senderKeyMessageId:r,iteration:a,ciphertext:new Uint8Array(i),versionContentMac:t})}async function f(e){var t=new(o("WABinary")).Binary(e),n=o("WASignalOther").readBytes(t,16),r=o("WASignalOther").readBytes(t,32);return[await o("WASignalOther").makeCryptoKey(r,"aes-cbc"),n]}function g(e,t){var n=e.subarray(e.length-s),r=e.subarray(0,e.length-s);return o("WASignalSignatures").verifyMsgSignalVariant(t,r,o("WASignalOther").toBytes(o("WASignalOther").toBuffer(n),64))}async function h(e,t){var n=e,r=t-n.senderKeyChainKey.nextMsgIndex,a=o("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(r>a)return o("WAResultOrError").makeError("errSignalGrpTooManyMessagesInFuture");var i=e.unusedMsgKeys||[];if(r<0){var l=i.findIndex(function(e){return e.iteration===t});return l===-1?o("WAResultOrError").makeError("errDuplicateMsg"):o("WAResultOrError").makeResult({msgKey:i[l],updatedSenderKeyState:o("WASignalGroupSession").makeSenderKeyState(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,n.senderKeyChainKey,n.senderKeyId,y(i,l))})}var s=n.senderKeyChainKey.nextMsgIndex,u=await o("WASignalWhitepaper").deriveSenderKeyMsgKey(s,n.senderKeyChainKey.chainKey),c=u[0],d=u[1],m=null;if(r>0){var p=r+i.length-o("WASignalCipher").MAX_UNUSED_KEYS;p>0?(m=i.slice(p),p-=i.length):m=i.slice();for(var _=s+1;_<=t;_++){p>0?p--:m.push(d);var f=await o("WASignalWhitepaper").deriveSenderKeyMsgKey(_,c);c=f[0],d=f[1]}}return o("WAResultOrError").makeResult({msgKey:d,updatedSenderKeyState:o("WASignalGroupSession").makeSenderKeyState(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,o("WASignalGroupSession").makeSenderKeyChainKey(t+1,c),e.senderKeyId,m||i)})}function y(e,t){for(var n=[],r=0;r<e.length;r++)r!==t&&n.push(e[r]);return n}l.processSenderKeyDistributionMsg=u,l.createSenderKeyDistributionProto=c,l.encryptSenderKeyMsgWithSession=d,l.decryptSenderKeyMsgFromSession=m,l.deserializeSenderKeyMsg=_}),98);
__d("WACryptoLibrary",["WACryptoUtils","WAJids","WALockMap","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WALockMap").makeLockMap(6e4),u=[],c=300;function d(e){u.push(e),u.length>=c&&u.shift()}function m(e){e(u),u=[]}async function p(e,t){d("createOutgoingSession");var n=R(t),r=n.signedKey,a=await o("WASignalSignatures").verifyMsgSignalVariant(n.identity,r.publicKey,r.signature);if(!a)return d("createOutgoingSession: errSignalInvalidKey"),o("WAResultOrError").makeError("errSignalInvalidKey");var i=await o("WASignalWhitepaper").initiateSessionOutgoing(e,n,o("WASignalKeys").makeKeyPair());return o("WAResultOrError").makeResult(i)}async function _(e,t,n,r,o){var a=e.handleNewSession;d("establishOutgoingSession");var i=await p(t,r);if(!i.success)return i;var l=i.value;return a(n,l,l.remote.pubKey,null,o)}function f(e,t,n,r){var a=e.handleNewSession,i=e.loadSession;return d("encryptContent"),s.lock([o("WAJids").extractUserJid(t)],async function(){var e=null;do{var l=await i(t,"cryptoLibraryEncryptContent");if(l==null)return d("encryptContent: errSignalInvalidKey"),o("WAResultOrError").makeError("errSignalInvalidKey");if(r!=null&&!o("WACryptoUtils").uint8ArraysEqual(r,l.remote.pubKey))return d("encryptContent: identity-mismatch"),o("WAResultOrError").makeError("identity-mismatch");var s=await o("WASignalCipher").encryptMsg(l,n),u=s[0],c=s[1],m=await a(t,u,u.remote.pubKey);m.success?e=o("WAResultOrError").makeResult(babelHelpers.extends({},c,{baseKey:u.aliceBaseKey})):m.error}while(e==null);return e})}function g(e,t,n,r,a){var i=e.handleNewSession,l=e.loadOneTimePreKey,u=e.loadSession,c=e.loadSignedPreKey;return d("decryptContent"),s.lock([o("WAJids").extractUserJid(n)],async function(){var e=!1,s=await u(n,"decryptContent"),m;if(r.type==="pkmsg"){var p=o("WASignalCipher").deserializePkMsg(r.ciphertext);if(!p.success)return d("decryptContent: errCryptoDeserialization"),o("WAResultOrError").makeError("errCryptoDeserialization");var _=p.value,f=await h({loadSignedPreKey:c,loadOneTimePreKey:l},t,_,s);if(!f.success)return f;m=f.value}else{r.type;var g=o("WASignalCipher").deserializeMsg(r.ciphertext);if(!g.success)return d("decryptContent: errCryptoDeserialization"),o("WAResultOrError").makeError("errCryptoDeserialization");var y=g.value,C=await o("WASignalCipher").decryptMsg(s,y);if(!C.success)return C;m=C.value}var b=m,v=b.newSessionInfo;if(v&&(v.newIdentity!=null||v.usedPreKey!=null)&&await i(n,v.baseSession,v.newIdentity,v.usedPreKey),!e){var S=v==null?void 0:v.baseSession.remote.pubKey;await a(new Uint8Array(m.plaintext),S),e=!0}return await i(n,m.updatedSession,m.updatedSession.remote.pubKey),o("WAResultOrError").makeResult()})}async function h(e,t,n,r){var a=e.loadOneTimePreKey,i=e.loadSignedPreKey;d("decryptPkMsg");var l=o("WASignalCipher").findMatchingSession(r,n.sessionBaseKey);if(!l.success)return l;var s=l.value;if(s){var u=await o("WASignalCipher").decryptMsgFromSession(s,n);if(!u.success)return u;var c=u.value,m=c[0],p=c[1];return o("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:m,plaintext:p})}else{var _=n.localOneTimeKeyId,f=await i(n.localSignedPreKeyId),g=_==null?null:await a(_),h=await o("WASignalCipher").decryptPkMsgWithNewSession(t,r,n,{localSignedPreKey:f,localOneTimeKey:g});if(!h.success)return h;var y=h.value,C=y.baseSession,b=y.newIdentity,v=y.plaintext,S=y.updatedSession;return o("WAResultOrError").makeResult({newSessionInfo:{newIdentity:b,baseSession:C,usedPreKey:_},updatedSession:S,plaintext:v})}}function y(e,t,n,r){var a=e.loadSenderKeySession,i=e.saveSenderKeySession;return d("encryptGroupContent"),s.lock([t,o("WAJids").extractUserJid(n)],async function(){var e=null;do{var l=await a(t,n);if(!l.success)return o("WAResultOrError").makeError(l.error);var s=l.value,u=await o("WASignalGroupCipher").encryptSenderKeyMsgWithSession(s,r);if(u.success){var c=u.value,m=c[0],p=c[1];await i(t,n,m);var _=s.senderKeyStates[s.senderKeyStates.length-1];e=o("WAResultOrError").makeResult({ciphertext:{ciphertext:p,type:"skmsg"},senderKeyId:_.senderKeyId,senderKeyDistributionProto:o("WASignalGroupCipher").createSenderKeyDistributionProto(o("WASignalGroupSession").convertFromRawToSenderKeyState(_))})}else return d("encryptGroupContent: sender-key-no-session"),o("WAResultOrError").makeError("sender-key-no-session")}while(e==null);return e})}function C(t,n,r,a,i){var l=t.loadSenderKeySession,u=t.saveSenderKeySession;return d("decryptGroupContent"),s.lock([n,o("WAJids").extractUserJid(r)],async function(){var t=!1,s=await l(n,r);if(!s.success)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WACryptoLibrary] Unable to load sender key session for group during decryptGroupContent: ",", author: ",""])),n,r),o("WAResultOrError").makeError(s.error);var c=o("WASignalGroupCipher").deserializeSenderKeyMsg(a);if(!c.success)return d("decryptGroupContent: errCryptoDeserialization"),o("WAResultOrError").makeError("errCryptoDeserialization");var m=s.value,p=await o("WASignalGroupCipher").decryptSenderKeyMsgFromSession(m,c.value);if(!p.success)return p;var _=p.value,f=_[0],g=_[1];return t||(await i(new Uint8Array(g)),t=!0),await u(n,r,f),o("WAResultOrError").makeResult()})}function b(e,t,n,r){var a=e.loadSenderKeySession,i=e.saveSenderKeySession;return d("saveSenderKeySession"),s.lock([t,o("WAJids").extractUserJid(n)],async function(){var e=null;if(a){var l=await a(t,n);e=l.success?l.value:null}var s=await o("WASignalGroupCipher").processSenderKeyDistributionMsg(r,e);if(!s.success)return s;var u=s.value;return await i(t,n,u),o("WAResultOrError").makeResult()})}function v(e,t,n,r){var a=e.saveSenderKeySession;return d("rotateGroupSenderKey"),s.lock([t,o("WAJids").extractUserJid(n)],async function(){var e=await o("WASignalWhitepaper").initiateSenderKeySessionOutgoing(r),i=e.senderKeyStates[0].senderKeyId;return await a(t,n,e),{senderKeyId:i}})}async function S(e,t,n){var r=e.loadSenderKeySession,a=e.saveSenderKeySession;d("createSenderKeyDistributionMsg");var i=await r(t,n),l=i.error;if(!i.success&&l==="errLoadSenderKeySession"){var s=await o("WASignalKeys").makeKeyPair();await v({saveSenderKeySession:a},t,n,s),i=await r(t,n)}if(i.success){var u=i.value.senderKeyStates.slice(-1);if(u.length>0)return o("WAResultOrError").makeResult(o("WASignalGroupCipher").createSenderKeyDistributionProto(o("WASignalGroupSession").convertFromRawToSenderKeyState(u[0])))}return d("createSenderKeyDistributionMsg: errGetSenderKeyProto"),o("WAResultOrError").makeError("errGetSenderKeyProto")}function R(e){var t=e.identity,n=e.oneTimeKey,r=e.regId,a=e.signedKey;d("sanitizeInitialSessionInfo");var i=o("WASignalKeys").castToSerializedPubKey(a.publicKey);return{regId:o("WASignalOther").castRegistrationId(r),identity:o("WASignalKeys").castToSerializedPubKey(t),signedKey:{id:o("WASignalKeys").castToSignedPreKeyId(a.id),publicKey:i,signature:o("WASignalOther").ensureSize(a.signature,64)},oneTimeKey:n&&{id:o("WASignalKeys").castToPreKeyId(n.id),publicKey:o("WASignalKeys").castToSerializedPubKey(n.publicKey)},ratchetKey:i}}l.publishLogs=m,l.createOutgoingSession=p,l.establishOutgoingSession=_,l.encryptContent=f,l.decryptContent=g,l.encryptGroupContent=y,l.decryptGroupContent=C,l.saveSenderKeySession=b,l.rotateGroupSenderKey=v,l.createSenderKeyDistributionMsg=S}),98);
__d("WACryptoManager",["WABridge","WACryptoLibrary","WACryptoUtils","WAGlobals","WAJids","WALogger","WALoggerTag","WANullthrows","WAOdsEnums","WAPromiseQueue","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","WASignalSessions","WASignalSignatures","WATagsLogger","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=o("WATagsLogger").TAGS([r("WALoggerTag").CryptoManager]),_={type:"default"};function f(e){return{flush:function(){return e.storage.savePendingToDatabase().then(function(){})}}}function g(e){return{regInfo:e.regInfo,network:e.network,storage:e.storage}}async function h(e,t,n,r,a){var i=await r(t,a);if(i!=null&&n.type!=="requestNewSession"){var l=i;if(n.type==="default")return o("WAResultOrError").makeResult(l);if(l.aliceBaseKey!=null&&n.session.baseKey!=null&&(n.type,!o("WACryptoUtils").uint8ArraysEqual(n.session.baseKey,l.aliceBaseKey)))return o("WAResultOrError").makeResult(l)}var s;if(n.type==="useSession")s=n.session.keys;else{n.type;var u=await e.network.requestKeys(t);if(!u.success)return u;s=u.value.keys,n.type==="compareTSAndUseSession"&&n.session.timestamp>=u.value.timestamp&&(s=n.session.keys)}var c=await o("WACryptoLibrary").createOutgoingSession(e.regInfo,s);return c.success?o("WAResultOrError").makeResult(c.value):c}function y(e,t,n,r){return o("WACryptoLibrary").establishOutgoingSession({handleNewSession:e.storage.handleNewSession},e.regInfo,t,n,r)}async function C(t,n){var r=await t.storage.loadSessions(n),a=n.filter(function(e){return!r.has(e)});if(a.length===0)return r;var i=await t.network.bulkRequestKeys(a);if(!i.success)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[sessions] fail during key requesting"]))),r;for(var l of r.entries()){var u=l[0],c=l[1];c.sendChain.nextMsgIndex>=o("WAGlobals").getConfig().sessionDropIfTooOld()&&(r.delete(u),o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.WA_LONG_SESSION_DROP,key:"decryption"}))}var d=i.value,m=new(o("WAPromiseQueue")).PromiseQueue;return d.forEach(function(e,n){m.enqueue(function(){return o("WACryptoLibrary").createOutgoingSession(t.regInfo,e.keys).then(function(e){e.success===!1?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Failed to create a session"]))):r.set(n,e.value)})})}),await m.wait(),r}async function b(e,t){var n=Array.from(t.keys());o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] sendWrittenMsg bulkEncryptContent"])));var a=await C(e,n),i=new Map;return Promise.all(Array.from(a.entries()).map(async function(n){var a,l=n[0],s=n[1],u=await o("WASignalCipher").encryptMsg(s,r("WANullthrows")((a=t.get(l))==null?void 0:a.plaintext)),c=u[0],d=u[1];return i.set(l,babelHelpers.extends({},d,{baseKey:null})),e.storage.handleNewSession(l,c,c.remote.pubKey)})).then(function(){return o("WAResultOrError").makeResult(i)})}function v(e,t,n,r,a){return o("WACryptoLibrary").encryptContent({loadSession:function(n){return h(e,n,r,e.storage.loadSession,"cryptoManagerEncryptContent").then(function(e){return e.success===!0?e.value:null})},handleNewSession:e.storage.handleNewSession},t,n,a)}function S(e,t,n,r){return o("WACryptoLibrary").decryptContent({loadSession:e.storage.loadSession,handleNewSession:e.storage.handleNewSession,loadSignedPreKey:e.storage.loadSignedPreKey,loadOneTimePreKey:e.storage.loadOneTimePreKey},e.regInfo,t,n,r)}async function R(e,t){var n=await e.storage.loadSession(t,"getParticipantInfo");return n==null?void 0:n.remote}async function L(e){var t,n,a=await e.storage.getLastPreKeyGenerationId(),i=((t=a==null?void 0:a.lastPreKeyId)!=null?t:0)+1,l=o("WASignalKeys").makePreKeys(i,1)[0],s=await e.storage.saveOneTimePreKey({keyId:l.plainObject.id,encoded:l.record});if(s.success)return l.plainObject;throw r("err")("Cannot save one time prekey: "+s.error+", LastPreKeyId: "+((n=a==null?void 0:a.lastPreKeyId)!=null?n:0))}async function E(e,t){var n;t===void 0&&(t=o("WAGlobals").getConfig().maxPrekeysToUpload());var r=await e.storage.getLastPreKeyGenerationId(),a=o("WASignalKeys").makePreKeys(((n=r==null?void 0:r.lastPreKeyId)!=null?n:0)+1,t);return e.storage.savePreKeysGeneration(a.map(function(e){var t=e.plainObject,n=e.record;return{keyId:t.id,encoded:n}}))}function k(e){return e.storage.loadLatestSignedPreKey().then(function(t){if(t.success===!1){var n,a,i;throw p.TAGS([r("WALoggerTag").SignedPrekey]).ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate signed prekey ",""])),t==null||(n=t.payload)==null?void 0:n.toString()),r("err")("Failed to generate signed prekey: "+((a=t==null||(i=t.payload)==null?void 0:i.message)!=null?a:""))}var l=t.value,s=o("WASignalSignatures").deserializeSignedPreKey(l);if(s==null)throw p.TAGS([r("WALoggerTag").SignedPrekey]).ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to deserialize signed prekey: ",""])),t),r("err")("failed to deserialize signed prekey");var u=s.id+1>=o("WASignalKeys").PRE_KEY_NON_INCLUSIVE_UPPER_BORDER?1:s.id+1;return I(e,u)})}function I(e,t){var n=o("WASignalSignatures").makeSignedPreKey(t,o("WATimeUtils").unixTimeMs(),e.regInfo.staticKeyPair),a=o("WASignalSignatures").serializeSignedPreKeyForPrivateStorage(n);return e.storage.saveSignedPreKeyIfNew(n.id,a).then(function(e){return e.type==="success"?o("WAResultOrError").makeResult(n):(e.type,o("WAResultOrError").makeResult(e.key))}).then(function(e){if(!e.success){var t,n;throw p.TAGS([r("WALoggerTag").SignedPrekey]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate signed prekey with id: ",""])),e),r("err")("Unexpected error when generateSignedPreKeyWithId: "+((t=e==null||(n=e.payload)==null?void 0:n.message)!=null?t:e.error))}return e.value})}function T(e,t,n,r){return o("WACryptoLibrary").encryptGroupContent({loadSenderKeySession:e.storage.loadSenderKeySession,saveSenderKeySession:e.storage.saveSenderKeySession},t,n,r)}function D(e,t,n,r,a){return o("WACryptoLibrary").decryptGroupContent({loadSenderKeySession:e.storage.loadSenderKeySession,saveSenderKeySession:e.storage.saveSenderKeySession},t,n,r,a)}function x(e,t,n,r){return o("WACryptoLibrary").saveSenderKeySession({saveSenderKeySession:e.storage.saveSenderKeySession},t,n,r)}async function $(e,t,n){var r=await L(e);return o("WACryptoLibrary").rotateGroupSenderKey({saveSenderKeySession:e.storage.saveSenderKeySession},t,n,r.keyPair)}function P(e){return Promise.resolve().then(function(){return{regId:o("WASignalOther").makeRegistrationId(e),staticKeyPair:o("WASignalKeys").makeKeyPair(),authKeyPair:o("WASignalKeys").makeKeyPair()}})}function N(e){return o("WASignalOther").encodeSignalProto(o("WASignalLocalStorageProtocol.pb").RecordStructureSpec,o("WASignalSessions").serializeSession(e))}function M(e){return o("WASignalOther").decodeSignalProto(o("WASignalLocalStorageProtocol.pb").RecordStructureSpec,e,o("WASignalSessions").parseSessionFromRecord)}function w(e){return o("WASignalOther").encodeSignalProto(o("WASignalLocalStorageProtocol.pb").SenderKeyRecordStructureSpec,o("WASignalGroupSession").serializeSession(e))}function A(e){return o("WASignalOther").decodeSignalProto(o("WASignalLocalStorageProtocol.pb").SenderKeyRecordStructureSpec,e,o("WASignalGroupSession").parseSessionFromRecord)}function F(e){return e}function O(e,t){return e+"|"+t}function B(e){var t=e.split("|");if(t.length!==2)throw r("err")("Incorrect ComplexSenderKey");return{groupId:o("WAJids").unsafeCoerceToGroupJid(t[0]),deviceId:o("WAJids").unsafeCoerceToDeviceJid(t[1])}}l.DEFAULT_SESSION_REQUEST=_,l.cryptoManagerFlushable=f,l.initCryptoManager=g,l.getSessionForRecipient=h,l.establishOutgoingSession=y,l.ensureSessionsExists=C,l.bulkEncryptContent=b,l.encryptContent=v,l.decryptContent=S,l.getParticipantInfo=R,l.generateOneTimePreKey=L,l.generatePreKeys=E,l.generateSignedPreKey=k,l.generateSignedPreKeyWithId=I,l.encryptGroupContent=T,l.decryptGroupContent=D,l.saveSenderKeySession=x,l.rotateGroupSenderKey=$,l.generateRegistrationInfo=P,l.encodeSession=N,l.decodeSession=M,l.encodeSenderKeySession=w,l.decodeSenderKeySession=A,l.castToPreKeyGenerationId=F,l.encodeSenderKey=O,l.decodeSenderKey=B}),98);
__d("WADbSignal",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e,t,n){return e+"_"+t+"_"+n}var s={abProps:"abProps",authKeyPair:"authKeyPair",cat:"cat",certificateChain:"certificateChain",clockSkew:"clockSkew",deviceId:"deviceId",deviceUUID:"deviceUUID",edgeInfo:"edgeInfo",fbid:"fbid",identityKeyPair:"identityKeyPair",lastPrekeyGenerationId:"lastPrekeyGenerationId",lastPrekeyId:"lastPrekeyId",lastSessionDeviceWasLinkedTo:"lastSessionDeviceWasLinkedTo",lastSignedPrekeyId:"lastSignedPrekeyId",regId:"regId",registrationVersion:"registrationVersion",deviceRegUnixTime:"deviceRegUnixTime"},u={msgrDeviceId:"msgrDeviceId"},c={registrationHistory:"registrationHistory"};i.unsafeCoerceToSenderKeySessionId=e,i.buildSenderKeySessionId=l,i.MetaKeysEnum=s,i.PlainTextMetaKeysEnum=c}),66);
__d("WABulkSaveSignalDataApi",["WACryptoManager","WADbSignal","WAJids","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t){var e=t.dhashUpdate,n=t.icdcUpdate,r=t.identityRemove,a=t.identityUpdate,i=t.lastSyncTsUpdate,l=t.preKeyRemove,c=t.senderKeySessionUpdate,d=t.sessionRemove,m=t.sessionUpdate,p=m.map(function(e){var t=e.id,n=e.updated;return{id:t,session:o("WACryptoManager").encodeSession(n)}}),_=[];c.forEach(function(e){var t=e.author,n=e.groupId,r=e.updated,a=o("WAJids").extractUserJid(t),i=o("WAJids").extractDeviceId(t),l=o("WADbSignal").buildSenderKeySessionId(n,a,i);_.push({deviceId:i,groupJid:n,id:l,record:o("WACryptoManager").encodeSenderKeySession(r),userJid:a})}),await o("WASignalDB").getDb().runInTransaction(["contacts","identity","prekey","senderKeySessions","session"],"readwrite",function(t){var o=t.stores,c=o.identity,m=o.prekey,f=o.senderKeySessions,g=o.session;return Promise.all([g.bulkDelete(d),c.bulkDelete(r),g.bulkPut(p),f.bulkPut(_),u(t.stores,a),s(t.stores,n,a,e,i),m.bulkDelete(l.map(function(e){var t=e.id;return t}))])},o("WASignalDB").signalOp("bulkSaveSignalData"))};async function s(e,t,n,r,a){var i=new Set;for(var l of n)i.add(o("WAJids").extractUserJid(l.id));var s=Array.from(i);for(var u of t)i.add(u.id);var c=await e.contacts.bulkGet(Array.from(i)),d=new Map;for(var m of c)m!=null&&d.set(m.contactJid,m);for(var p of s){var _=d.get(p);_==null?(_={contactJid:p,dhash:null},d.set(p,_)):_.dhash=null}for(var f of t){var g=d.get(f.id);g==null?(g={contactJid:f.id,dhash:null,icdcInfo:f.icdc},d.set(f.id,g)):g.icdcInfo=f.icdc}for(var h of r){var y=d.get(h.id);y==null?(y={contactJid:h.id,dhash:h.dhash},d.set(h.id,y)):y.dhash=h.dhash}for(var C of a){var b=d.get(C.id);b==null?(b={contactJid:C.id,dhash:null,lastSyncTs:C.lastSyncTs},d.set(C.id,b)):b.lastSyncTs=C.lastSyncTs}await e.contacts.bulkPut(Array.from(d.values()))}async function u(e,t){if(t.length!==0){var n=t.map(function(e){var t=e.id,n=e.identity;return{deviceJid:t,identity:n,userJid:o("WAJids").extractUserJid(t)}});await e.identity.bulkPut(n)}}l.bulkSaveSignalData=e}),98);
__d("WAIdentityUtils",["WABinary","WACryptoDependencies","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.length===33&&e[0]===5;return t?e.slice(1):e}function s(e,t){for(var n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return e[n]-t[n];return e.length-t.length}function u(t){var n=t.map(function(t){return e(t)}),r=new(o("WABinary")).Binary;n.sort(s).forEach(function(e){return r.writeByteArray(e)});var a=o("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",r.readByteArrayView());return a.then(function(e){var t=new Uint8Array(e);return o("WASignalOther").sliceBytes(t,0,10)})}l.removeKeyTypeIfNeeded=e,l.computeIdentitiesHash=u}),98);
__d("WAICDCUtils",["WAArmadilloICDC.pb","WABase64","WABinary","WACryptoDependencies","WACryptoEd25519","WACryptoUtils","WAIdentityUtils","WALogger","WASignalKeys","WASignalOther","WASignalSignatures","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d;function m(t,n,r,a){if(t!==a.details.seq)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched sequence between XML node and byte structure"]))),null;if(r!==a.details.timestamp)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched timestamp between XML node and byte structure"]))),null;if(a.details.signingDeviceIndex==null)return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched missed signingDeviceIndex"]))),null;var i=a.details.signingDeviceIndex;return{dirty:n,sequence:t,timestamp:r,signingDeviceIndex:i,devices:a.details.devices.map(function(e){return new Uint8Array(e)})}}function p(e){return e.signingDeviceIndex<0||e.signingDeviceIndex>=e.devices.length}function _(e){var t=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloICDC.pb").SignedICDCIdentityListSpec,e),n=t.signature,r=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloICDC.pb").ICDCIdentityListSpec,t.details);return{signature:n,details:r}}function f(e){return e.map(function(e){return o("WASignalKeys").serializeIdentity(new Uint8Array(o("WABase64").decodeB64UrlSafe(e)))})}function g(e,t,n,a,i){var l=o("WAIdentityUtils").removeKeyTypeIfNeeded(e.publicKey),s=n.map(function(e){return o("WAIdentityUtils").removeKeyTypeIfNeeded(e)}),u=s.findIndex(function(e){return o("WACryptoUtils").uint8ArraysEqual(e,l)});if(u===-1)throw o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["signingDeviceIndex not found. This should never happen. ",". caller: ",""])),a,i),r("err")("signingDeviceIndex not found");var m=t==null?1:t+1,p=o("WATimeUtils").unixTime();p<0&&o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["ICDC timestamp is negative. time: ",", closkSkew: ",""])),Date.now(),o("WATimeUtils").getClockSkew());var _={seq:m,timestamp:p,devices:s,signingDeviceIndex:u},f=o("encodeProtobuf").encodeProtobuf(o("WAArmadilloICDC.pb").ICDCIdentityListSpec,_).readBuffer(),g=h(e,o("WABinary").Binary.build(f).readByteArrayView()),y={details:f,signature:g},C=o("encodeProtobuf").encodeProtobuf(o("WAArmadilloICDC.pb").SignedICDCIdentityListSpec,y).readBuffer();return{icdcInfo:_,encodedSignedICDC:C}}function h(e,t){var n=o("WASignalOther").makeBytes(64);o("WACryptoDependencies").getCrypto().getRandomValues(n);var r=new Uint8Array(64);o("WACryptoEd25519").hashSha512(r,t,t.length);var a=o("WASignalSignatures").makeSignature(e,t,n);return o("WABinary").Binary.build(a).readBuffer()}var y=4*o("WATimeUtils").HOUR_SECONDS;function C(e){return e==null?!0:!o("WATimeUtils").happenedWithin(e,y)}l.validateAndPrepareICDCFromNotification=m,l.isICDCIndexInvalid=p,l.decodeICDCInfo=_,l.base64DeviceIdentitiesToSerializedPubKeys=f,l.computeICDCInfoForUpload=g,l.isLastSyncTsExpired=C}),98);
__d("WAComputeAndUploadICDCInfo",["WABase64","WADeprecatedSendIq","WADeprecatedWapParser","WAGetDevices","WAGlobals","WAICDCUtils","WAIdentityUtils","WALogger","WAPromiseBackoffs","WAWap","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=new(r("WADeprecatedWapParser"))("parseUploadICDCInfoResponse",function(e){e.assertTag("iq"),e.assertFromServer(),e.assertAttr("type","result")}),m=0,p=async function(n){var t=n.caller,a=n.reason,i=n.sequence;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["computeAndUploadICDCInfo called ",""])),i);var l;try{l=await o("WAGlobals").getWaOneQueue().enqueue(async function(e){var t=e.cryptoManager,n=await t.storage.loadIdentities(o("WAGlobals").getMyUserJid()),r=t.regInfo;return{regInfo:r,identities:Array.from(n.values())}},{operationType:"icdc_load_identities",flush:!1,afterInit:!0})}catch(e){var p=r("getErrorSafe")(e);o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Loading identities fails with error: ",""])),p.toString())}if(l!=null){var _=l,f=_.identities,g=_.regInfo,h=o("WAICDCUtils").computeICDCInfoForUpload(g.staticKeyPair,i,f,a,t),y=h.encodedSignedICDC,C=h.icdcInfo,b=await o("WAIdentityUtils").computeIdentitiesHash(f),v=o("WAWap").wap("iq",{id:o("WAWap").generateId(),to:o("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"fbid:devices"},o("WAWap").wap("icdc",{ihash:o("WAWap").CUSTOM_STRING(o("WABase64").encodeB64(b)),seq:o("WAWap").INT(C.seq),ts:o("WAWap").INT(C.timestamp)},y)),S=await o("WADeprecatedSendIq").deprecatedSendIq(v,d);S.success?(m=0,await o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return t.storage.saveICDC(o("WAGlobals").getMyUserJid(),{sequence:C.seq,timestamp:C.timestamp,devices:C.devices,signingDeviceIndex:C.signingDeviceIndex,dirty:!1})},{operationType:"save_icdc",flush:!0,afterInit:!0})):(m+=1,S.errorCode===406||S.errorCode===500?setTimeout(function(){o("WAGetDevices").getDevices({ignoreDhash:!0,reason:"compute-Upload-icdc",users:new Set().add(o("WAGlobals").getMyUserJid())}).catch(function(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed getting devices ",""])),e.toString())})},o("WAPromiseBackoffs").getDelay(m,{jitter:.1,max:3e4,algo:{type:"fibonacci",first:1e3,second:1e3}})):o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Cannot update ICDC for user, because of "," server response"])),S.errorCode))}};l.computeAndUploadICDCInfo=p}),98);
__d("WAFetchAndSaveDevices",["WAComputeAndUploadICDCInfo","WAGlobals","WAICDCUtils","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t){if(t.length!==0){var n=[];await o("WAGlobals").getWaOneQueue().enqueue(function(r){var a=r.cryptoManager;return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Update user devices signal and DB"]))),Promise.all(t.map(function(e){var t;return n.push({contactJid:e.jid,dhash:e.dhash,lastSyncTs:e.lastSyncTs,icdcInfo:(t=e.icdcInfo)!=null?t:void 0}),a.storage.updateUserDevicesInfo([e])}))},{operationType:"get_devices",flush:!0,afterInit:!0});var r=o("WAGlobals").getMyUserJid(),a=t.find(function(e){return e.jid===r});if(a!=null){var i=a.icdcInfo;if(i==null||o("WAICDCUtils").isICDCIndexInvalid(i)||i!=null&&i.dirty){var l;i==null?l="empty":i.dirty?l="dirty":l="invalidIndex",o("WAComputeAndUploadICDCInfo").computeAndUploadICDCInfo({reason:l,caller:"get_devices",sequence:i==null?void 0:i.sequence}).catch(function(e){})}}}}l.updateUsersDevicesSignalAndDB=s}),98);
__d("WAPushSafeTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.unsafeNotNullable=e}),66);
__d("WAGetDevices",["WADevicesState","WALogger","WAPushSafeTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t){var n=o("WAPushSafeTypes").unsafeNotNullable(t),r=n.ignoreDhash,a=r===void 0?!1:r,i=n.reason,l=n.users;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["fetchAndSaveDevices: ",""])),i),a&&o("WADevicesState").getDevicesState().reset(Array.from(l)),await o("WADevicesState").getDevicesState().waitForUserDevices(Array.from(l),"getDevices job: "+i,a)}l.getDevices=s}),98);
__d("WAHandleFbDeviceChangeNotificationProtocol",["WAICDCUtils","WAResultOrError","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.dhash}function s(e){var t,n=((t=e.iCDCDirtyMixin)==null?void 0:t.dirty)==="true",r=o("WATimeUtils").castToUnixTime(e.ts),a=e.seq,i=o("WAICDCUtils").decodeICDCInfo(e.elementValue),l=o("WAICDCUtils").validateAndPrepareICDCFromNotification(a,n,r,i);return l==null?o("WAResultOrError").makeError("icdc-validation-failure"):o("WAResultOrError").makeResult(l)}l.parseDhash=e,l.parseICDCFromServer=s}),98);
__d("WALoadContactsApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["contacts"],"readonly",function(e){return e.stores.contacts.bulkGet(t).then(function(e){return new Map(e.filter(Boolean).map(function(e){return[e.contactJid,{contactJid:e.contactJid,dhash:e.dhash,icdcFails:e.icdcFails,icdcInfo:e.icdcInfo,lastSyncTs:e.lastSyncTs}]}))})},o("WASignalDB").signalOp("loadContacts"))};l.loadContacts=e}),98);
__d("WARPCAbortController",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l="rpc-timeout";function s(t,r){var o,a=new(e||(e=n("Promise")))(function(e,t){o=setTimeout(function(){t(l)},r)});return e.race([t,a]).finally(function(){clearTimeout(o)})}i.RPC_TIMEOUT=l,i.rpcAbortController=s}),66);
__d("WASmaxInDevicesIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInDevicesIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInDevicesNonRetryableIQErrorMixin",["WASmaxInDevicesIQErrorBadRequestMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxInDevicesIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);return n.success,n}l.parseNonRetryableIQErrorMixin=e}),98);
__d("WASmaxInDevicesIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInDevicesIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup",["WAResultOrError","WASmaxInDevicesIQErrorInternalServerErrorMixin","WASmaxInDevicesIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInDevicesIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:t.value});var n=o("WASmaxInDevicesIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorInternalServerError","IQErrorServiceUnavailable"],[t,n])}l.parseIQErrorInternalServerErrorOrServiceUnavailableMixinGroup=e}),98);
__d("WASmaxInDevicesRetryableIQErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"backoff",0,86400);if(!n.success)return n;var r=o("WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup").parseIQErrorInternalServerErrorOrServiceUnavailableMixinGroup(e);return r.success?o("WAResultOrError").makeResult({backoff:n.value,iQErrorInternalServerErrorOrServiceUnavailableMixinGroup:r.value}):r}l.parseRetryableIQErrorMixin=e}),98);
__d("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup",["WAResultOrError","WASmaxInDevicesNonRetryableIQErrorMixin","WASmaxInDevicesRetryableIQErrorMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInDevicesRetryableIQErrorMixin").parseRetryableIQErrorMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"RetryableIQError",value:t.value});var n=o("WASmaxInDevicesNonRetryableIQErrorMixin").parseNonRetryableIQErrorMixin(e);return n.success?o("WAResultOrError").makeResult({name:"NonRetryableIQError",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["RetryableIQError","NonRetryableIQError"],[t,n])}l.parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup=e}),98);
__d("WASmaxInDevicesFetchResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:i.value})):i}l.parseFetchResponseError=e}),98);
__d("WASmaxInDevicesIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","item-not-found");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",404);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorItemNotFoundMixin=e}),98);
__d("WASmaxInDevicesFetchNonRetryableUserErrorMixin",["WASmaxInDevicesIQErrorItemNotFoundMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxInDevicesIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(e);return n.success,n}l.parseFetchNonRetryableUserErrorMixin=e}),98);
__d("WASmaxInDevicesFetchRetryableUserErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup").parseIQErrorInternalServerErrorOrServiceUnavailableMixinGroup(e);return n.success?o("WAResultOrError").makeResult({iQErrorInternalServerErrorOrServiceUnavailableMixinGroup:n.value}):n}l.parseFetchRetryableUserErrorMixin=e}),98);
__d("WASmaxInDevicesFetchOrFetchNonRetryableUserErrorMixinGroup",["WAResultOrError","WASmaxInDevicesFetchNonRetryableUserErrorMixin","WASmaxInDevicesFetchRetryableUserErrorMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInDevicesFetchRetryableUserErrorMixin").parseFetchRetryableUserErrorMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"FetchRetryableUserError",value:t.value});var n=o("WASmaxInDevicesFetchNonRetryableUserErrorMixin").parseFetchNonRetryableUserErrorMixin(e);return n.success?o("WAResultOrError").makeResult({name:"FetchNonRetryableUserError",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["RetryableUserError","NonRetryableUserError"],[t,n])}l.parseFetchOrFetchNonRetryableUserErrorMixinGroup=e}),98);
__d("WASmaxInDevicesFetchUserResponseFailureMixin",["WAResultOrError","WASmaxInDevicesFetchOrFetchNonRetryableUserErrorMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseJid").attrUserJid(e,"jid");if(!r.success)return r;var a=o("WASmaxInDevicesFetchOrFetchNonRetryableUserErrorMixinGroup").parseFetchOrFetchNonRetryableUserErrorMixinGroup(n.value);return a.success?o("WAResultOrError").makeResult({jid:r.value,errorFetchOrFetchNonRetryableUserErrorMixinGroup:a.value}):a}l.parseFetchUserResponseFailureMixin=e}),98);
__d("WASmaxInDevicesDeviceModelInfoMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"platform");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"model");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(t){var n=o("WASmaxParseUtils").optionalChildWithTag(t,"platform",e);if(!n.success)return n;var r=o("WASmaxParseUtils").optionalChildWithTag(t,"model",s);return r.success?o("WAResultOrError").makeResult({platform:n.value,model:r.value}):r}l.parseDeviceModelInfoPlatform=e,l.parseDeviceModelInfoModel=s,l.parseDeviceModelInfoMixin=u}),98);
__d("WASmaxInDevicesDhashMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").attrString(e,"dhash");return t.success?o("WAResultOrError").makeResult({dhash:t.value}):t}l.parseDhashMixin=e}),98);
__d("WASmaxInDevicesKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").contentBytesRange(e,32,32);return t.success?o("WAResultOrError").makeResult({elementValue:t.value}):t}l.parseKeyDataMixin=e}),98);
__d("WASmaxInDevicesIdentityKeyMixin",["WASmaxInDevicesKeyDataMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"identity");if(!t.success)return t;var n=o("WASmaxInDevicesKeyDataMixin").parseKeyDataMixin(t.value);return n.success,n}l.parseIdentityKeyMixin=e}),98);
__d("WASmaxInDevicesDeviceListMixin",["WAResultOrError","WASmaxInDevicesDeviceModelInfoMixin","WASmaxInDevicesDhashMixin","WASmaxInDevicesIdentityKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"device");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"id",1,999);if(!n.success)return n;var r=o("WASmaxInDevicesIdentityKeyMixin").parseIdentityKeyMixin(e);if(!r.success)return r;var a=o("WASmaxInDevicesDeviceModelInfoMixin").parseDeviceModelInfoMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({id:n.value},r.value,{deviceModelInfoMixin:a.success?a.value:null}))}function s(t){var n=o("WASmaxParseUtils").assertTag(t,"devices");if(!n.success)return n;var r=o("WASmaxInDevicesDhashMixin").parseDhashMixin(t),a=o("WASmaxParseUtils").mapChildrenWithTag(t,"device",0,25,e);return a.success?o("WAResultOrError").makeResult({dhashMixin:r.success?r.value:null,device:a.value}):a}l.parseDeviceListDevice=e,l.parseDeviceListMixin=s}),98);
__d("WASmaxInDevicesICDCDirtyMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"icdc");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"dirty","true");return n.success?o("WAResultOrError").makeResult({dirty:n.value}):n}l.parseICDCDirtyMixin=e}),98);
__d("WASmaxInDevicesICDCSeqMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").attrIntRange(e,"seq",0,2147483647);return t.success?o("WAResultOrError").makeResult({seq:t.value}):t}l.parseICDCSeqMixin=e}),98);
__d("WASmaxInDevicesICDCSignedListMixin",["WAResultOrError","WASmaxInDevicesICDCSeqMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"icdc");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"ts",0,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(e,1,40072);if(!r.success)return r;var a=o("WASmaxInDevicesICDCSeqMixin").parseICDCSeqMixin(e);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({ts:n.value,elementValue:r.value},a.value)):a}l.parseICDCSignedListMixin=e}),98);
__d("WASmaxInDevicesICDCFromServerMixin",["WAResultOrError","WASmaxInDevicesICDCDirtyMixin","WASmaxInDevicesICDCSignedListMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"icdc");if(!t.success)return t;var n=o("WASmaxInDevicesICDCSignedListMixin").parseICDCSignedListMixin(e);if(!n.success)return n;var r=o("WASmaxInDevicesICDCDirtyMixin").parseICDCDirtyMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({},n.value,{iCDCDirtyMixin:r.success?r.value:null}))}l.parseICDCFromServerMixin=e}),98);
__d("WASmaxInDevicesFetchUserResponseSuccessMixin",["WAResultOrError","WASmaxInDevicesDeviceListMixin","WASmaxInDevicesICDCFromServerMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"devices");if(!t.success)return t;var n=o("WASmaxInDevicesDeviceListMixin").parseDeviceListMixin(e);return n.success,n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"icdc");if(!t.success)return t;var n=o("WASmaxInDevicesICDCFromServerMixin").parseICDCFromServerMixin(e);return n.success,n}function u(t){var n=o("WASmaxParseUtils").assertTag(t,"user");if(!n.success)return n;var r=o("WASmaxParseUtils").optionalChildWithTag(t,"devices",e);if(!r.success)return r;var a=o("WASmaxParseUtils").optionalChildWithTag(t,"icdc",s);if(!a.success)return a;var i=o("WASmaxParseJid").attrUserJid(t,"jid");return i.success?o("WAResultOrError").makeResult({jid:i.value,devices:r.value,icdc:a.value}):i}l.parseFetchUserResponseSuccessDevices=e,l.parseFetchUserResponseSuccessIcdc=s,l.parseFetchUserResponseSuccessMixin=u}),98);
__d("WASmaxInDevicesUserResponseFetchFailureOrFetchSuccessMixinGroup",["WAResultOrError","WASmaxInDevicesFetchUserResponseFailureMixin","WASmaxInDevicesFetchUserResponseSuccessMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInDevicesFetchUserResponseFailureMixin").parseFetchUserResponseFailureMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"FetchUserResponseFailure",value:t.value});var n=o("WASmaxInDevicesFetchUserResponseSuccessMixin").parseFetchUserResponseSuccessMixin(e);return n.success?o("WAResultOrError").makeResult({name:"FetchUserResponseSuccess",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["UserResponseFailure","UserResponseSuccess"],[t,n])}l.parseUserResponseFetchFailureOrFetchSuccessMixinGroup=e}),98);
__d("WASmaxInDevicesFetchUserResponseMixin",["WAResultOrError","WASmaxInDevicesUserResponseFetchFailureOrFetchSuccessMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxInDevicesUserResponseFetchFailureOrFetchSuccessMixinGroup").parseUserResponseFetchFailureOrFetchSuccessMixinGroup(e);return n.success?o("WAResultOrError").makeResult({userResponseFetchFailureOrFetchSuccessMixinGroup:n.value}):n}l.parseFetchUserResponseMixin=e}),98);
__d("WASmaxInDevicesIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInDevicesFetchResponseSuccess",["WAResultOrError","WASmaxInDevicesFetchUserResponseMixin","WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxInDevicesFetchUserResponseMixin").parseFetchUserResponseMixin(e);return n.success,n}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"users");if(!a.success)return a;var i=o("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!i.success)return i;var l=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"user",0,25,e);return l.success?o("WAResultOrError").makeResult(babelHelpers.extends({},i.value,{usersUser:l.value})):l}l.parseFetchResponseSuccessUsersUser=e,l.parseFetchResponseSuccess=s}),98);
__d("WASmaxOutDevicesBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutDevicesDhashMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyDhash,n=o("WASmaxJsx").smax("smax$any",{dhash:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeDhashMixin=s}),98);
__d("WASmaxOutDevicesICDCSeqMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anySeq,n=o("WASmaxJsx").smax("smax$any",{seq:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeICDCSeqMixin=s}),98);
__d("WASmaxOutDevicesFetchRequest",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutDevicesBaseIQGetRequestMixin","WASmaxOutDevicesDhashMixin","WASmaxOutDevicesICDCSeqMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.userJid,n=e.dhashMixinArgs,r=e.iCDCSeqMixinArgs,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutDevicesICDCSeqMixin").mergeICDCSeqMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutDevicesDhashMixin").mergeDhashMixin,o("WASmaxJsx").smax("user",{jid:o("WAWap").USER_JID(t)}),n),r);return a}function s(t){var n=t.userArgs,r=o("WASmaxOutDevicesBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},o("WASmaxJsx").smax("users",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,25))));return r}l.makeFetchRequestUsersUser=e,l.makeFetchRequest=s}),98);
__d("WASmaxDevicesFetchRPC",["WAComms","WASmaxInDevicesFetchResponseError","WASmaxInDevicesFetchResponseSuccess","WASmaxOutDevicesFetchRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(t,n,r,o,a,i,l){async function e(e,t){var n=o("WASmaxOutDevicesFetchRequest").makeFetchRequest(e),r=await o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInDevicesFetchResponseSuccess").parseFetchResponseSuccess(r,n);if(a.success)return{name:"FetchResponseSuccess",value:a.value};var i=o("WASmaxInDevicesFetchResponseError").parseFetchResponseError(r,n);if(i.success)return{name:"FetchResponseError",value:i.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Fetch",{Success:a,Error:i}))}l.sendFetchRPC=e}),98);
__d("WAFetchFbDevicesProtocolV2",["WAArrayChunk","WAHandleFbDeviceChangeNotificationProtocol","WAJids","WALoadContactsApi","WARPCAbortController","WASignalKeys","WASmaxDevicesFetchRPC","WATagsLogger","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=25,c=1e4,d=o("WATagsLogger").TAGS(["wa-devices-protocol"]);async function m(e,t){if(e.length===0)return new Map;var n=await p(e,t),r=o("WAArrayChunk").chunk(e.map(function(e){var t=n.get(e),r=t!=null?{anyDhash:t}:null;return{userJid:e,dhashMixinArgs:r}}),u),a=new Map;return await Promise.allSettled(r.map(function(e){return _(a,e)})),a}async function p(e,t){if(t)return new Map;var n=await o("WALoadContactsApi").loadContacts(e),r=new Map;return n.forEach(function(e){e&&e.dhash!=null&&r.set(e.contactJid,e.dhash)}),r}async function _(t,n){try{var a=new Set(n.map(function(e){return e.userJid})),i=await o("WARPCAbortController").rpcAbortController(o("WASmaxDevicesFetchRPC").sendFetchRPC({userArgs:n}),c);if(i.name==="FetchResponseError")throw r("err")("Failed to fetch user devices");i.value.usersUser.map(function(e){var n=e.userResponseFetchFailureOrFetchSuccessMixinGroup;if(n.name!=="FetchUserResponseFailure"){var r=n.value,i=r.devices,l=r.icdc,s=r.jid;a.delete(s),t.set(s,{newState:f(s,i,l,o("WATimeUtils").unixTime()),stateIsUpToDate:!1})}}),a.forEach(function(e){t.set(e,{stateIsUpToDate:!0})})}catch(t){if(t===o("WARPCAbortController").RPC_TIMEOUT){d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Timeout for fetchAndSaveDevices"])));return}d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["",""])),t)}}function f(e,t,n,r){r===void 0&&(r=null);var a=[],i=null;if(t){var l;a=t.device.map(function(e){var t,n;return{id:o("WAJids").interpretAsDeviceId(e.id),identity:o("WASignalKeys").serializeIdentity(e.elementValue),platform:(t=e.deviceModelInfoMixin)==null||(t=t.platform)==null?void 0:t.elementValue,model:(n=e.deviceModelInfoMixin)==null||(n=n.model)==null?void 0:n.elementValue}}),i=(l=t.dhashMixin)==null?void 0:l.dhash}var s=null;if(n){var u=o("WAHandleFbDeviceChangeNotificationProtocol").parseICDCFromServer(n);s=u.success?u.value:null}return{jid:e,devices:a,lastSyncTs:o("WATimeUtils").unixTime(),dhash:i,icdcInfo:s,notificationTs:r}}l.fetchFbDevicesProtocol=m}),98);
__d("WADevicesState",["WAFetchAndSaveDevices","WAFetchFbDevicesProtocolV2","WAResolvable","WAResultOrError","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=3e4,m=1e3*60*60,p=o("WATagsLogger").TAGS(["WADevicesState"]),_=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.$2=function(t){var e=this;setTimeout(function(){t.forEach(function(t){var n=t[0],r=t[1];r.resolveWasCalled()||(r.resolve(o("WAResultOrError").makeError()),e.$1.get(n)===r&&e.$1.delete(n))})},d),setTimeout(function(){t.forEach(function(t){var n=t[0],r=t[1];e.$1.get(n)===r&&e.$1.delete(n)})},m)},n.waitForUserDevices=async function(n,r,a){var t=this;a===void 0&&(a=!1);var i=[],l=[];a===!0&&n.forEach(function(e){t.$1.delete(e)}),n.forEach(function(e){var n=t.$1.get(e);if(n==null){var r=new(o("WAResolvable")).Resolvable;i.push([e,r]),t.$1.set(e,r)}else l.push([e,n.promise])}),this.$2(i),p.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getDevices called for users ",", reason: ",""])),Array.from(n),r);var d=await o("WAFetchFbDevicesProtocolV2").fetchFbDevicesProtocol(i.map(function(e){var t=e[0];return t}),a).catch(function(e){return p.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["fetchFBDevicesProtocol failed: ",""])),e),new Map}),m=!0;p.DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getDevices -> update devices signal"]))),await o("WAFetchAndSaveDevices").updateUsersDevicesSignalAndDB(Array.from(d.values()).map(function(e){return e.newState}).filter(Boolean)).catch(function(e){m=!1,p.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["updateDevicesSignalAndDB failed: ",""])),e)}),i.forEach(function(e){var n=e[0],r=e[1];if(!m){r.resolve(o("WAResultOrError").makeError()),t.$1.delete(n);return}d.has(n)?r.resolve(o("WAResultOrError").makeResult()):(r.resolve(o("WAResultOrError").makeError()),t.$1.delete(n))}),await Promise.allSettled(l.map(function(e){var t=e[0],n=e[1];return n}))},n.reset=function(t){var e=this;t.forEach(function(t){return e.$1.delete(t)})},t})(),f=new _;function g(){return f}l.DeviceStateClassV2=_,l.getDevicesState=g}),98);
__d("WAComputeICDC",["WAGetDevices","WAICDCUtils","WAIdentityUtils","WAJids","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS(["WAComputeICDC"]);async function m(t,n,r,a){var i=new Set,l=[].concat(t),m=t.find(function(e){return e.user===n});if(m==null){var p=await a.cryptoManager.storage.loadIdentities(n),_=p.get(r);if(_==null){d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Sender does not have identity"])));return}l.push({user:n,devicesInfo:[{identity:_,jid:r}]})}var f=void 0,g=[],h=[];return await Promise.all(l.map(async function(e){var t=await Promise.all([a.cryptoManager.storage.loadICDC(e.user),a.cryptoManager.storage.loadLastSyncTs(e.user)]),r=t[0],l=t[1];o("WAICDCUtils").isLastSyncTsExpired(l)&&i.add(e.user);var u=new Set;if(r==null)i.add(e.user);else if(o("WAICDCUtils").isICDCIndexInvalid(r))i.add(e.user),d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ICDC has invalid index"]))),r=null;else for(var c of r.devices)u.add(c.toString());var m=[],p=[];for(var _ of e.devicesInfo){var y=o("WAJids").extractDeviceId(_.jid),C=o("WAIdentityUtils").removeKeyTypeIfNeeded(_.identity);u.has(C.toString())||(m.push(y),p.push(C.buffer))}var b={unknownDevices:p,unknownDeviceIds:m};r!=null&&(b.seq=r.sequence,b.signingDevice=r.devices[r.signingDeviceIndex].buffer),e.user===n?f=b:(g.push(b),h.push(e.user))})),i.size>0&&(d.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Triggering getDevices for users with missing or incorrect icdc info."]))),o("WAGetDevices").getDevices({ignoreDhash:!0,reason:"missing-icdc-info",users:i}).catch(function(e){d.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Error during get devices for users with missing icdc info: ",""])),e)})),{senderIdentity:f,recipientIdentities:g,recipientUserJids:h}}l.computeICDC=m}),98);
__d("WAMultiDevice.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={};s.name="MultiDevice",s.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,c],metadata:[2,e.TYPES.MESSAGE,u]},u.name="MultiDevice$Metadata",u.internalSpec={},c.name="MultiDevice$Payload",c.internalSpec={applicationData:[1,e.TYPES.MESSAGE,d],signal:[2,e.TYPES.MESSAGE,y],__oneofs__:{payload:["applicationData","signal"]}},d.name="MultiDevice$ApplicationData",d.internalSpec={appStateSyncKeyShare:[1,e.TYPES.MESSAGE,p],appStateSyncKeyRequest:[2,e.TYPES.MESSAGE,m],__oneofs__:{applicationData:["appStateSyncKeyShare","appStateSyncKeyRequest"]}},m.name="MultiDevice$ApplicationData$AppStateSyncKeyRequestMessage",m.internalSpec={keyIds:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,h]},p.name="MultiDevice$ApplicationData$AppStateSyncKeyShareMessage",p.internalSpec={keys:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_]},_.name="MultiDevice$ApplicationData$AppStateSyncKey",_.internalSpec={keyId:[1,e.TYPES.MESSAGE,h],keyData:[2,e.TYPES.MESSAGE,f]},f.name="MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyData",f.internalSpec={keyData:[1,e.TYPES.BYTES],fingerprint:[2,e.TYPES.MESSAGE,g],timestamp:[3,e.TYPES.INT64]},g.name="MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyData$AppStateSyncKeyFingerprint",g.internalSpec={rawId:[1,e.TYPES.UINT32],currentIndex:[2,e.TYPES.UINT32],deviceIndexes:[3,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},h.name="MultiDevice$ApplicationData$AppStateSyncKeyId",h.internalSpec={keyId:[1,e.TYPES.BYTES]},y.name="MultiDevice$Signal",y.internalSpec={},l.MultiDeviceSpec=s,l.MultiDevice$MetadataSpec=u,l.MultiDevice$PayloadSpec=c,l.MultiDevice$ApplicationDataSpec=d,l.MultiDevice$ApplicationData$AppStateSyncKeyRequestMessageSpec=m,l.MultiDevice$ApplicationData$AppStateSyncKeyShareMessageSpec=p,l.MultiDevice$ApplicationData$AppStateSyncKeySpec=_,l.MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyDataSpec=f,l.MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyData$AppStateSyncKeyFingerprintSpec=g,l.MultiDevice$ApplicationData$AppStateSyncKeyIdSpec=h,l.MultiDevice$SignalSpec=y}),98);
__d("WAParseAppStateSyncKeyRequest",["WASyncdKeyTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[];for(var n of e.keyIds)n.keyId!=null&&t.push(o("WASyncdKeyTypes").toSyncKeyId(n.keyId));return{keyIds:t}}l.parseAppStateSyncKeyRequest=e}),98);
__d("WASyncdKeyManagementUtils",["WASyncdKeyTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new DataView(o("WASyncdKeyTypes").fromSyncKeyId(e)).getUint16(0)}function s(e){return new DataView(o("WASyncdKeyTypes").fromSyncKeyId(e)).getUint32(2)}function u(e){return s(e)+1}l.getKeyDeviceId=e,l.getKeyEpoch=s,l.generateNewKeyEpoch=u}),98);
__d("WAParseAppStateSyncKeyShare",["WALogger","WALongInt","WASyncdKeyManagementUtils","WASyncdKeyTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=[],n=[];for(var r of e.keys){var o=u(r);o!=null&&(o.type==="orphan"?n.push(o.keyId):(o.type,t.push(o.keyData)))}return{keys:t,orphanKeys:n}}function u(t){var n,r,a,i,l,s;if(((n=t.keyId)==null?void 0:n.keyId)==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Key missing keyId"]))),null;var u=o("WASyncdKeyTypes").toSyncKeyId(t.keyId.keyId),c=(r=t.keyData)==null?void 0:r.keyData,d=o("WALongInt").maybeNumberOrThrowIfTooLarge((a=t.keyData)==null?void 0:a.timestamp),m=(i=t.keyData)==null||(i=i.fingerprint)==null?void 0:i.currentIndex,p=(l=t.keyData)==null||(l=l.fingerprint)==null?void 0:l.deviceIndexes,_=(s=t.keyData)==null||(s=s.fingerprint)==null?void 0:s.rawId;return t.keyData==null||c==null||d==null||m==null||p==null||_==null?{keyId:u,type:"orphan"}:{keyData:{fingerprint:{currentIndex:m,deviceIndexes:p,rawId:_},keyData:o("WASyncdKeyTypes").toSyncKeyData(c),keyEpoch:o("WASyncdKeyManagementUtils").getKeyEpoch(u),keyId:u,timestamp:d},type:"key"}}l.parseAppStateSyncKeyShare=s}),98);
__d("WAConvertAppData",["WAAppData","WAArmadilloApplication.pb","WAJids","WALogger","WAMultiDevice.pb","WAParseAppStateSyncKeyRequest","WAParseAppStateSyncKeyShare","WAStanzaUtils","WASyncdKeyTypes","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b;function v(e){var t=o("WAJids").interpretAndValidateJid(e);if(t.jidType==="msgrUser")return t.userJid;if(t.jidType==="group")return t.groupJid;throw t.jidType,r("err")("Incorrect jid type: "+t.jidType)}function S(e){var t=o("WAJids").interpretAndValidateJid(e);if(t.jidType==="msgrUser")return t.userJid;if(t.jidType==="msgrDevice")return o("WAJids").extractUserJid(t.deviceJid);throw t.jidType,r("err")("Incorrect jid type: "+t.jidType)}function R(e){return e!=null?typeof e=="number"&&e>o("WATimeUtils").MAX_INT?o("WATimeUtils").castMilliSecondsToUnixTime(e):o("WATimeUtils").castLongIntToUnixTime(e):void 0}function L(e){return e==null?void 0:{lastMessageTimestamp:R(e.lastMessageTimestamp),lastSystemMessageTimestamp:R(e.lastSystemMessageTimestamp),messages:e.messages==null?[]:e.messages.map(function(e){return{key:e.key==null?void 0:{fromMe:e.key.fromMe,id:e.key.id},ts:R(e.timestamp)}})}}function E(t,n){var r=t.chatId;if(r==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Missing chatId in chat action: ",""])),t),null;if(t.chatArchive!=null){var a=t.chatArchive,i=L(a.messageRange);return{chatJid:v(r),messageRange:i,ts:n,type:"chat_archive"}}else if(t.chatDelete!=null){var l=t.chatDelete,u=L(l.messageRange);return{chatJid:v(r),messageRange:u,ts:n,type:"chat_delete"}}else if(t.chatRead!=null){var c=t.chatRead,d=L(c.messageRange);return{chatJid:v(r),messageRange:d,read:c.read,ts:n,type:"chat_read"}}else return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata sync action type: ",""])),t),null}function k(e){var t=e.key,n=t==null?void 0:t.remoteJid,r=t==null?void 0:t.id,a=t==null?void 0:t.fromMe;if(t==null||n==null||a==null||r==null)return o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Missing messageKey in message action: ",""])),e),null;var i=v(n),l=o("WAJids").interpretAsGroupJid(i)!=null,s;if(l&&!a){if((t==null?void 0:t.participant)==null)return o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["No participant in messageKey in message action when it is group chat and message is not fromMe: ",""])),e),null;s=S(t.participant)}else a?s=o("WAJids").AUTHOR_ME:s=S(n);var m={author:s,chat:i,externalId:o("WAStanzaUtils").toStanzaId(r)};return e.messageDelete!=null?{protocolMsgId:m,type:"delete_for_me"}:(o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata sync action type: ",""])),e),null)}function I(e){var t=[];for(var n of e){var r=R(n.actionTimestamp);if(n.chatAction!=null){var a=E(n.chatAction,r);a!=null&&t.push({chatAction:a})}else if(n.messageAction!=null){var i=k(n.messageAction);i!=null&&t.push({messageAction:i})}else o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata sync action type: ",""])),n)}return t}function T(e){var t=e.anonId,n=e.id,r=e.rootKey,a=e.status;if(a==null||n==null||t==null||r==null)return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["missing keys in EncryptedBackupsSecretsEpoch"]))),null;var i;if(a===o("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_OPEN)i=o("WAAppData").EPOCH_STATUS_OPEN;else if(a===o("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_CLOSE)i=o("WAAppData").EPOCH_STATUS_CLOSE;else return o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["status in EncryptedBackupsSecretsEpoch has invalid value"]))),null;return{anonId:t,id:n,rootKey:r,status:i}}function D(e){var t=e.backupId,n=e.epoch,r=e.mailboxRootKey,a=e.obliviousValidationToken,i=e.serverDataId,l=e.tempOcmfClientState;return t==null||i==null||l==null||r==null||a==null?(o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["missing keys in EncryptedBackupsSecrets"]))),null):{backupId:t,epoch:n.map(T).reduce(function(e,t){return t!=null?e.concat([t]):e},[]),mailboxRootKey:r,obliviousValidationToken:a,serverDataId:i,tempOcmfClientState:l}}function x(e){var t,n;if(((t=e.applicationData)==null||(t=t.metadataSync)==null?void 0:t.actions)!=null){var r;return{actions:I((r=e.applicationData)==null||(r=r.metadataSync)==null?void 0:r.actions),type:"meta_sync"}}else if(((n=e.signal)==null?void 0:n.encryptedBackupsSecrets)!=null){var a=D(e.signal.encryptedBackupsSecrets);return a==null?null:{encryptedBackupsSecrets:a,type:"backups_secrets"}}else return o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),e),null}function $(e){var t,n;if(((t=e.applicationData)==null?void 0:t.appStateSyncKeyShare)!=null){var r;return{syncKeyShare:o("WAParseAppStateSyncKeyShare").parseAppStateSyncKeyShare((r=e.applicationData)==null?void 0:r.appStateSyncKeyShare),type:"sync_key_share"}}else if(((n=e.applicationData)==null?void 0:n.appStateSyncKeyRequest)!=null){var a;return{syncKeyRequest:o("WAParseAppStateSyncKeyRequest").parseAppStateSyncKeyRequest((a=e.applicationData)==null?void 0:a.appStateSyncKeyRequest),type:"sync_key_request"}}else return o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),e),null}function P(e){if(e.subprotocolType==="armadillo"){var t=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAArmadilloApplication.pb").ArmadilloSpec,e.payload);if(t.payload==null)throw r("err")("Appdata contains unparseable armadillo data.");return x(t.payload)}else if(e.subprotocolType==="multiDevice"){var n=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMultiDevice.pb").MultiDeviceSpec,e.payload);if(n.payload==null)throw r("err")("Appdata contains unparseable armadillo data.");return $(n.payload)}else throw r("err")("Appdata contains unexpected message application: "+e.subprotocolType)}function N(e){return e==null?void 0:{lastMessageTimestamp:e.lastMessageTimestamp,lastSystemMessageTimestamp:e.lastSystemMessageTimestamp,messages:e.messages.map(function(e){return{key:e.key==null?void 0:{fromMe:e.key.fromMe,id:e.key.id},timestamp:e.ts}})}}function M(e){switch(e.type){case"meta_sync":return{payload:{applicationData:V(e)}};case"backups_secrets":return{payload:{signal:{encryptedBackupsSecrets:q(e.encryptedBackupsSecrets)}}};default:return e.type,o("WALogger").WARN(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),e.type),{}}}function w(e){return{keyId:o("WASyncdKeyTypes").fromSyncKeyId(e)}}function A(e){return{keyData:{fingerprint:{currentIndex:e.fingerprint.currentIndex,deviceIndexes:e.fingerprint.deviceIndexes,rawId:e.fingerprint.rawId},keyData:o("WASyncdKeyTypes").fromSyncKeyData(e.keyData),timestamp:e.timestamp},keyId:w(e.keyId)}}function F(e){var t=e.keys.map(A),n=e.orphanKeys==null?[]:e.orphanKeys.map(function(e){return{keyId:w(e)}});return t.push.apply(t,n),{keys:t}}function O(e){return{keyIds:e.keyIds.map(w)}}function B(e){switch(e.type){case"sync_key_share":return{payload:{applicationData:{appStateSyncKeyShare:F(e.syncKeyShare)}}};case"sync_key_request":return{payload:{applicationData:{appStateSyncKeyRequest:O(e.syncKeyRequest)}}};default:return e.type,o("WALogger").WARN(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),e.type),{}}}function W(e){var t;switch(e.type){case"meta_sync":case"backups_secrets":{var n=o("encodeProtobuf").encodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,M(e));t={armadillo:{payload:n.readByteArrayView(),version:1}};break}case"sync_key_share":case"sync_key_request":{var r=o("encodeProtobuf").encodeProtobuf(o("WAMultiDevice.pb").MultiDeviceSpec,B(e));t={multiDevice:{payload:r.readByteArrayView(),version:1}};break}default:e.type,o("WALogger").WARN(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),e.type),t={}}return{payload:{subProtocol:t}}}function q(e){return{backupId:e.backupId,epoch:e.epoch.map(U),mailboxRootKey:e.mailboxRootKey,obliviousValidationToken:e.obliviousValidationToken,serverDataId:e.serverDataId,tempOcmfClientState:e.tempOcmfClientState}}function U(e){var t;return e.status===o("WAAppData").EPOCH_STATUS_OPEN?t=o("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_OPEN:e.status===o("WAAppData").EPOCH_STATUS_CLOSE&&(t=o("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_CLOSE),{anonId:e.anonId,id:e.id,rootKey:e.rootKey,status:t}}function V(e){return{metadataSync:{actions:e.actions.map(function(e){return e.chatAction?{actionTimestamp:e.chatAction.ts,chatAction:H(e.chatAction)}:{messageAction:G(e.messageAction)}})}}}function H(e){var t=N(e.messageRange),n=e.chatJid;switch(e.type){case"chat_archive":return{chatArchive:{archived:e.archived,messageRange:t},chatId:n};case"chat_delete":return{chatDelete:{messageRange:t},chatId:n};default:return e.type,{chatId:n,chatRead:{messageRange:t,read:e.read}}}}function G(e){if(e.type==="delete_for_me"){var t=e.protocolMsgId.chat,n=o("WAJids").interpretAsGroupJid(t)!=null;return{key:{fromMe:o("WAJids").isAuthorMe(e.protocolMsgId.author),id:e.protocolMsgId.externalId,participant:!o("WAJids").isAuthorMe(e.protocolMsgId.author)&&n?e.protocolMsgId.author:void 0,remoteJid:t},messageDelete:{}}}else throw r("err")("No other available type")}function z(e){if(e.type!=="meta_sync")return[];var t=e.actions.map(function(e){var t,n=e.chatAction,r=e.messageAction;return(t=r==null?void 0:r.protocolMsgId.chat)!=null?t:n==null?void 0:n.chatJid}).filter(Boolean);return Array.from(new Set(t))}l.parseArmadilloAppData=x,l.parseMultiDeviceAppData=$,l.parseAppData=P,l.convertArmadilloAppData=M,l.convertMultiDeviceAppData=B,l.convertAppData=W,l.getChatJidForAppData=z}),98);
__d("WADbPersonalSenderKeyStatusTxns",["WASignalDB","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["groupJid","senderKeyTs"],s=["groupJid","senderKeyTs"],u={hasSenderKey:new Set,rotateSenderKey:!0,senderKeyId:null,senderKeyTs:o("WATimeUtils").castToUnixTime(0)},c=function(t){return o("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(e){return e.stores.personalSenderKeyStatuses.bulkPut(t.map(function(e){return babelHelpers.extends({},u,{groupJid:e})}))},o("WASignalDB").signalOp("bulkPutNewPersonalSenderKeyStatus")).then(function(){})},d=function(t,n,r){return o("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",async function(e){var o=await e.stores.personalSenderKeyStatuses.get(t);await e.stores.personalSenderKeyStatuses.bulkPut([babelHelpers.extends({},o||u,{groupJid:t,rotateSenderKey:!1,senderKeyId:n,senderKeyTs:r})])},o("WASignalDB").signalOp("markSenderKeyAsRotated"))},m=function(n){return o("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",async function(t){var r=await t.stores.personalSenderKeyStatuses.get(n);if(r!=null){var o=r.groupJid,a=r.senderKeyTs,i=babelHelpers.objectWithoutPropertiesLoose(r,e);return babelHelpers.extends({},i,{ts:a})}var l=babelHelpers.extends({},u,{groupJid:n});await t.stores.personalSenderKeyStatuses.bulkPut([l]);var c=l.groupJid,d=l.senderKeyTs,m=babelHelpers.objectWithoutPropertiesLoose(l,s);return babelHelpers.extends({},m,{ts:d})},"Signal - getSenderKeyStatus")},p=function(t){return o("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",async function(e){var n=await e.stores.personalSenderKeyStatuses.bulkGet(t);await e.stores.personalSenderKeyStatuses.bulkPut(n.filter(function(e){return e!=null}).map(function(e){return babelHelpers.extends({},e,{rotateSenderKey:!0})}))},o("WASignalDB").signalOp("bulkSetRotateSenderKeyToTrue"))},_=function(t){return o("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(e){return e.stores.personalSenderKeyStatuses.bulkDelete(t)},o("WASignalDB").signalOp("deletePersonalSenderKeyStatus"))};l.bulkPutNewPersonalSenderKeyStatus=c,l.markSenderKeyAsRotated=d,l.getSenderKeyStatus=m,l.bulkSetRotateSenderKeyToTrue=p,l.deletePersonalSenderKeyStatus=_}),98);
__d("WACreateGroup",["WADbPersonalSenderKeyStatusTxns","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t){await o("WAGlobals").getDependencies().createGroups(t),await o("WADbPersonalSenderKeyStatusTxns").bulkPutNewPersonalSenderKeyStatus(t.map(function(e){return e.groupToCreate.jid}))};l.createGroups=e}),98);
__d("WACryptoCurve25519Dependencies",["Promise","WACryptoPrimitives","WASignalKeys","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=n("Promise"))).resolve().then(function(){return o("WASignalKeys").makeKeyPair()})}function u(t,r){return(e||(e=n("Promise"))).resolve().then(function(){return o("WACryptoPrimitives").scalarMult(o("WASignalOther").ensureSize(r,32),o("WASignalOther").ensureSize(t,32)).buffer})}var c={generateIdentityKeyPair:s,calculateAgreement:u};l.calculateAgreement=u,l.CURVE25519_SIGNAL_DEPENDENCIES=c}),98);
__d("WAGetPrekeyIdsInRange",["WASignalKeys"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(t,n){var r=[],a=t,i=n;if(a<=i)for(var l=a;l<=n;l++)r.push(o("WASignalKeys").castToPreKeyId(l));else{for(var s=a;s<o("WASignalKeys").PRE_KEY_NON_INCLUSIVE_UPPER_BORDER;s++)r.push(o("WASignalKeys").castToPreKeyId(s));for(var u=1;u<=i;u++)r.push(o("WASignalKeys").castToPreKeyId(u))}return r}l.getPrekeyIdsInRange=s}),98);
__d("WADeletePreKeyGenerationsApi",["WAGetPrekeyIdsInRange","WALogger","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return o("WASignalDB").getDb().runInTransaction(["prekey","prekeyGeneration"],"readwrite",async function(t){var r=await t.stores.prekeyGeneration.bulkGet(n),a=[];for(var i of r){if(i==null){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Attempting to delete non-existent prekey generation"])));continue}for(var l of o("WAGetPrekeyIdsInRange").getPrekeyIdsInRange(i.startingId,i.endingId))a.push(l)}await Promise.all([t.stores.prekeyGeneration.bulkDelete(n),t.stores.prekey.bulkDelete(a)])},o("WASignalDB").signalOp("deletePreKeyGenerations"))};l.deletePreKeyGenerations=s}),98);
__d("WAGetLastPreKeyGenerationIdApi",["WADbSignal","WASignalDB","err"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(){var e=await o("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(e){return Promise.all([e.stores.meta.get(o("WADbSignal").MetaKeysEnum.lastPrekeyId).then(function(e){return e==null?void 0:e.value.lastPrekeyId}),e.stores.meta.get(o("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId).then(function(e){return e==null?void 0:e.value.lastPrekeyGenerationId})])},o("WASignalDB").signalOp("getLastPreKeyGenerationId")),t=e[0],n=e[1];if(t==null&&n!=null||t!=null&&n==null)throw r("err")("Last prekey id and Last prekey generation id should both be non-null");return t!=null&&n!=null?{lastGenerationId:n,lastPreKeyId:t}:null};l.getLastPreKeyGenerationId=e}),98);
__d("WAGetPreKeyGenerationsTimestampsApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WASignalDB").getDb().runInTransaction(["prekeyGeneration"],"readonly",async function(e){var t=await e.stores.prekeyGeneration.readAll();return t.map(function(e){return{id:e.generationId,timestamp:e.createdTs}})},o("WASignalDB").signalOp("getPreKeyGenerationsTimestamps"))};l.getPreKeyGenerationsTimestamps=e}),98);
__d("WALoadICDCApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["contacts"],"readonly",function(e){return e.stores.contacts.bulkGet([t]).then(function(e){var t,n=e.filter(Boolean).length>0?e[0]:null;return(t=n==null?void 0:n.icdcInfo)!=null?t:null})},o("WASignalDB").signalOp("loadICDC"))};l.loadICDC=e}),98);
__d("WALoadIdentitiesApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["identity"],"readonly",async function(e){var n=await e.stores.identity.readIndex("userJid",[t]);return new Map(n.filter(Boolean).map(function(e){return[e.deviceJid,e.identity]}))},o("WASignalDB").signalOp("loadIdentities"))},s=function(t){return o("WASignalDB").getDb().runInTransaction(["identity"],"readonly",async function(e){var n=await Promise.all(t.map(function(t){return e.stores.identity.readIndex("userJid",[t])})),r=new Map;for(var o of n)for(var a of o)if(a!=null){var i=r.get(a.userJid);i==null&&(i=new Map),i.set(a.deviceJid,a.identity),r.set(a.userJid,i)}return r},o("WASignalDB").signalOp("bulkLoadIdentities"))};l.loadIdentities=e,l.bulkLoadIdentities=s}),98);
__d("WALoadLastSyncTsApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["contacts"],"readonly",function(e){return e.stores.contacts.bulkGet([t]).then(function(e){var t,n=e.filter(Boolean).length>0?e[0]:null;return(t=n==null?void 0:n.lastSyncTs)!=null?t:null})},o("WASignalDB").signalOp("loadLastSyncTs"))};l.loadLastSyncTs=e}),98);
__d("WADbMetaTxns",["WADbSignal","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.meta.bulkGet([o("WADbSignal").MetaKeysEnum.lastSignedPrekeyId,o("WADbSignal").MetaKeysEnum.identityKeyPair]).then(function(e){var t=e[0],n=e[1],r=t==null?void 0:t.value.lastSignedPrekeyId,o=n==null?void 0:n.value.identityKeyPair;return{identityPair:o,keyId:r}})}var s=function(t){return o("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",async function(e){return await e.stores.meta.bulkPut([{key:o("WADbSignal").MetaKeysEnum.cat,value:{cat:t}}]),t},o("WASignalDB").signalOp("saveCAT"))};l.maybeGetLastSignedPrekeyIdAndIdentity=e,l.saveCAT=s}),98);
__d("WADbSignedPrekeyTxns",["WADbMetaTxns","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=await o("WADbMetaTxns").maybeGetLastSignedPrekeyIdAndIdentity(e),n=t.identityPair,r=t.keyId;if(r==null)return n==null?o("WAResultOrError").makeError("missing-last-signed-prekey-id-and-registration"):o("WAResultOrError").makeError("missing-last-signed-prekey-id");var a=await e.signedPrekey.get(r);return a==null?o("WAResultOrError").makeError("missing-last-signed-prekey"):o("WAResultOrError").makeResult(a.encoded)}l.getLatestSignedPreKey=e}),98);
__d("WALoadLatestSignedPreKeyApi",["WADbSignedPrekeyTxns","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readonly",function(e){return o("WADbSignedPrekeyTxns").getLatestSignedPreKey(e.stores)},o("WASignalDB").signalOp("loadLatestSignedPreKey"))};l.loadLatestSignedPreKey=e}),98);
__d("WALoadOneTimePreKeyApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["prekey"],"readonly",function(e){return e.stores.prekey.get(t).then(function(e){return e==null?void 0:e.encoded})},o("WASignalDB").signalOp("loadOneTimePreKey"))};l.loadOneTimePreKey=e}),98);
__d("WADbPrekeyTxns",["WAGetPrekeyIdsInRange","err"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n=await e.prekeyGeneration.get(t);if(n==null)throw r("err")("Expected a prekey generation row");var a=o("WAGetPrekeyIdsInRange").getPrekeyIdsInRange(n.startingId,n.endingId),i=await e.prekey.bulkGet(a);return i.filter(Boolean).map(function(e){return e.encoded})}l.getPrekeysForGeneration=e}),98);
__d("WALoadPreKeysApi",["WADbPrekeyTxns","WADbSignal","WADbSignedPrekeyTxns","WALoggerTag","WASignalDB","WASignalSignatures","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS([r("WALoggerTag").SignedPrekey]),d=function(n){return o("WASignalDB").getDb().runInTransaction(["identity","meta","prekey","prekeyGeneration","signedPrekey"],"readonly",async function(t){var a=await o("WADbSignedPrekeyTxns").getLatestSignedPreKey(t.stores);if(!a.success){var i;throw c.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to get latest signed prekey"]))),(i=a.error)!=null?i:r("err")("Failed to get latest signed prekey")}var l=o("WASignalSignatures").deserializeSignedPreKey(a.value);if(l==null)throw c.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to deserialize signed prekey"]))),r("err")("Failed to deserialize signed prekey");var d=n!=null?n:await t.stores.meta.get(o("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId).then(function(e){return e==null?void 0:e.value.lastPrekeyGenerationId});if(d==null)throw c.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["No last prekey generation id"]))),r("err")("No last prekey generation id");return o("WADbPrekeyTxns").getPrekeysForGeneration(t.stores,d).then(function(e){return{preKeys:e,signedPreKey:l}})},o("WASignalDB").signalOp("loadPreKeys"))};l.loadPreKeys=d}),98);
__d("WALoadSenderKeySessionApi",["WACryptoManager","WADbSignal","WAJids","WAResultOrError","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){var e=o("WAJids").extractUserJid(n),r=o("WAJids").extractDeviceId(n),a=o("WADbSignal").buildSenderKeySessionId(t,e,r);return o("WASignalDB").getDb().runInTransaction(["senderKeySessions"],"readonly",async function(e){var t=await e.stores.senderKeySessions.get(a);if(t==null)return o("WAResultOrError").makeError("errLoadSenderKeySession");var n=o("WACryptoManager").decodeSenderKeySession(t.record);return o("WAResultOrError").makeResult(n)},o("WASignalDB").signalOp("loadSenderKeySession"))};l.loadSenderKeySession=e}),98);
__d("WALoadSignedPreKeyApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["signedPrekey"],"readonly",function(e){return e.stores.signedPrekey.get(t).then(function(e){return e==null?void 0:e.encoded})},o("WASignalDB").signalOp("loadSignedPreKey"))};l.loadSignedPreKey=e}),98);
__d("WASaveOneTimePreKeyApi",["WADbSignal","WAResultOrError","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().runInTransaction(["meta","prekey"],"readwrite",async function(e){var n=await e.stores.meta.get(o("WADbSignal").MetaKeysEnum.lastPrekeyId),r=n==null?void 0:n.value.lastPrekeyId;return r==null?o("WAResultOrError").makeError("missing_last_prekey"):(await Promise.all([e.stores.prekey.bulkPut([babelHelpers.extends({},t,{isDeleted:!1})]),e.stores.meta.bulkPut([{key:o("WADbSignal").MetaKeysEnum.lastPrekeyId,value:{lastPrekeyId:t.keyId}}])]),o("WAResultOrError").makeResult())},o("WASignalDB").signalOp("saveOneTimePreKey"))};l.saveOneTimePreKey=e}),98);
__d("WASavePreKeysGenerationApi",["WACryptoManager","WADbSignal","WAResultOrError","WASignalDB","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t){if(t.length===0)throw r("err")("Keys provided to savePreKeysGeneration cannot be empty");var e=await o("WASignalDB").getDb().runInTransaction(["meta","prekey","prekeyGeneration"],"readwrite",async function(e){var n,r=await e.stores.meta.get(o("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId),a=o("WACryptoManager").castToPreKeyGenerationId(((n=r==null?void 0:r.value.lastPrekeyGenerationId)!=null?n:0)+1),i=t[0].keyId,l=t[t.length-1].keyId,s=t.map(function(e){return babelHelpers.extends({},e,{isDeleted:!1})});return await Promise.all([e.stores.prekey.bulkPut(s),e.stores.meta.bulkPut([{key:o("WADbSignal").MetaKeysEnum.lastPrekeyId,value:{lastPrekeyId:l}},{key:o("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId,value:{lastPrekeyGenerationId:a}}]),e.stores.prekeyGeneration.bulkPut([{createdTs:o("WATimeUtils").unixTime(),endingId:l,generationId:a,startingId:i}])]),o("WAResultOrError").makeResult(a)},o("WASignalDB").signalOp("savePreKeysGeneration"));return e};l.savePreKeysGeneration=e}),98);
__d("WASaveSignedPreKeyIfNewApi",["WADbSignal","WASignalDB","WASignalSignatures"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){return o("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readwrite",async function(e){var r=await e.stores.signedPrekey.get(t);if(r!=null){var a=o("WASignalSignatures").deserializeSignedPreKey(r.encoded);if(a!=null)return{key:a,type:"duplicate"}}return await Promise.all([e.stores.signedPrekey.bulkPut([{encoded:n,keyId:t}]),e.stores.meta.bulkPut([{key:o("WADbSignal").MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:t}}])]),{type:"success"}},o("WASignalDB").signalOp("saveSignedPreKeyIfNew"))};l.saveSignedPreKeyIfNew=e}),98);
__d("WASessionApi",["WACryptoManager","WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return o("WASignalDB").getDb().store("session").get(t).then(function(e){return e==null?null:o("WACryptoManager").decodeSession(e.session)})},s=function(t){return o("WASignalDB").getDb().store("session").bulkGet(t).then(u)};function u(e){var t=new Map;for(var n of e)if(n!=null){var r=o("WACryptoManager").decodeSession(n.session);t.set(n.id,r)}return t}l.loadSession=e,l.bulkLoadSession=s}),98);
__d("WACryptoDbCallbacks",["WABulkSaveSignalDataApi","WADeletePreKeyGenerationsApi","WAGetLastPreKeyGenerationIdApi","WAGetPreKeyGenerationsTimestampsApi","WALoadICDCApi","WALoadIdentitiesApi","WALoadLastSyncTsApi","WALoadLatestSignedPreKeyApi","WALoadOneTimePreKeyApi","WALoadPreKeysApi","WALoadSenderKeySessionApi","WALoadSignedPreKeyApi","WASaveOneTimePreKeyApi","WASavePreKeysGenerationApi","WASaveSignedPreKeyIfNewApi","WASessionApi"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return{bulkLoadIdentities:o("WALoadIdentitiesApi").bulkLoadIdentities,bulkSaveSignalData:o("WABulkSaveSignalDataApi").bulkSaveSignalData,deletePreKeyGenerations:o("WADeletePreKeyGenerationsApi").deletePreKeyGenerations,getLastPreKeyGenerationId:o("WAGetLastPreKeyGenerationIdApi").getLastPreKeyGenerationId,getPreKeyGenerationsTimestamps:o("WAGetPreKeyGenerationsTimestampsApi").getPreKeyGenerationsTimestamps,loadICDC:o("WALoadICDCApi").loadICDC,loadIdentities:o("WALoadIdentitiesApi").loadIdentities,loadLastSyncTs:o("WALoadLastSyncTsApi").loadLastSyncTs,loadLatestSignedPreKey:o("WALoadLatestSignedPreKeyApi").loadLatestSignedPreKey,loadOneTimePreKey:o("WALoadOneTimePreKeyApi").loadOneTimePreKey,loadPreKeys:o("WALoadPreKeysApi").loadPreKeys,loadSenderKeySession:o("WALoadSenderKeySessionApi").loadSenderKeySession,loadSession:o("WASessionApi").loadSession,loadSessions:o("WASessionApi").bulkLoadSession,loadSignedPreKey:o("WALoadSignedPreKeyApi").loadSignedPreKey,saveOneTimePreKey:o("WASaveOneTimePreKeyApi").saveOneTimePreKey,savePreKeysGeneration:o("WASavePreKeysGenerationApi").savePreKeysGeneration,saveSignedPreKeyIfNew:o("WASaveSignedPreKeyIfNewApi").saveSignedPreKeyIfNew}};l.getCryptoDbCallbacks=e}),98);
__d("WAMPSFlushable",["MpsTypes","WebMps","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[],this.$2=new Map,this.$3=new Set}var t=e.prototype;return t.enqueue=function(t,n,r){t!=null&&(this.$1.push(t),this.$2.set(t.messageId,n),this.$3.add(r))},t.flush=async function(t,n,a,i){if(this.$1.length!==0){var e=this.$1,l=Array.from(this.$3).join(", "),s=this.$2;this.$1=[],this.$2=new Map,this.$3=new Set;try{var u=await o("WebMps").mps().saveNewMessages(e.map(function(e){return{directive:null,message:e,insertionSource:o("MpsTypes").InsertionSource.Receive}}),{source:l});s.forEach(function(e,t){e(u.get(t))})}catch(e){var c=r("getErrorSafe")(e);s.forEach(function(e){e(c)})}}},e})(),s=new e;l.MPSFlushable=e,l.mpsFlushable=s}),98);
__d("WASignalEntityStoreV2",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["NOT_PERSISTED","PERSIST_IN_PROGRESS","PERSISTED"]),l=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.TEST_ONLY_LOAD_FROM_MEMORY=function(t){return this.$2(t)},n.$2=function(t){var e=this.$1.get(t);return e!=null?{entity:e.entity,deleted:e.deleted}:null},n.load=async function(t,n){var e=this.$2(t);if(e!=null&&e.deleted)return null;if(e!=null&&e.entity!=null)return e.entity;var r=await n(t);return this.$3(t,r),r},n.bulkLoad=async function(t,n){var e=[],r=new Map;for(var o of t){var a=this.$2(o);if(a==null){e.push(o);continue}a.deleted||(a.entity!=null?r.set(o,a.entity):e.push(o))}var i=await n(e);for(var l of i.entries()){var s=l[0],u=l[1];r.set(s,u),this.$3(s,u)}return r},n.$3=function(n,r){this.$1.set(n,{entity:r,status:e.PERSISTED,deleted:!1})},n.store=function(n,r){this.$1.set(n,{entity:r,status:e.NOT_PERSISTED,deleted:!1})},n.remove=function(n){this.$1.set(n,{entity:null,status:e.NOT_PERSISTED,deleted:!0})},n.pureSnapshot=function(){var t=[],n=Array.from(this.$1.entries()).filter(function(t){var n=t[0],r=t[1];return r.status===e.NOT_PERSISTED}).filter(function(e){var n=e[0],r=e[1];return r.deleted&&t.push({id:n}),!r.deleted}).filter(function(e){var t=e[0],n=e[1];return n.entity!=null}).map(function(e){var t=e[0],n=e[1];return{id:t,cachedEntity:n.entity}});return{update:n,remove:t}},n.snapshot=function(){var t=this,n=this.pureSnapshot();return n.remove.forEach(function(n){var r=n.id,o=t.$1.get(r);o&&(o.status=e.PERSIST_IN_PROGRESS)}),n.update.forEach(function(n){var r=n.id,o=t.$1.get(r);o&&(o.status=e.PERSIST_IN_PROGRESS)}),n},n.markSnapshotAsCommitted=function(){this.$1.forEach(function(t){t.status===e.PERSIST_IN_PROGRESS&&(t.status=e.PERSISTED)})},n.markSnapshotAsFailed=function(){this.$1.forEach(function(t){t.status===e.PERSIST_IN_PROGRESS&&(t.status=e.NOT_PERSISTED)})},n.clear=function(){this.$1=new Map},t})();i.PersistStatus=e,i.SignalEntityStore=l}),66);
__d("WASignalIdentityStore",["WAJids","WALogger","WASignalEntityStoreV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=new Map,this.$2=new(o("WASignalEntityStoreV2")).SignalEntityStore}var n=t.prototype;return n.bulkLoadIdentities=async function(t){var e=this,n=async function(){var t=r[0],n=r[1];await e.loadIdentitiesByUser(t,function(){return Promise.resolve(n)})};for(var r of t)await n();return t},n.loadIdentitiesByUser=async function(n,r){var t=this.$1.get(n);if(t==null){var a=this.$3(n,await r(n)),i=Array.from(a.keys());return this.$1.set(n,new Set(i)),this.$2.bulkLoad(i,function(){return Promise.resolve(a)})}else return this.$2.bulkLoad(Array.from(t),function(t){return t.length>0&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WASignalIdentityStore] This should never happen."]))),Promise.resolve(new Map)})},n.$3=function(t,n){var e=new Map(n),r=this.$2.pureSnapshot(),a=r.remove,i=r.update;for(var l of a){var s=l.id;e.delete(s)}for(var u of i){var c=u.cachedEntity,d=u.id;c!=null&&o("WAJids").extractUserJid(d)===t&&e.set(d,c)}return e},n.store=function(t,n){this.$2.store(t,n);var e=o("WAJids").extractUserJid(t),r=this.$1.get(e);r!=null&&r.add(t)},n.remove=function(t){this.$2.remove(t);var e=o("WAJids").extractUserJid(t),n=this.$1.get(e);n!=null&&n.delete(t)},n.clear=function(){this.$2.clear(),this.$1=new Map},n.load=function(t,n){return this.$2.load(t,n)},n.bulkLoad=function(t,n){return this.$2.bulkLoad(t,n)},n.snapshot=function(){return this.$2.snapshot()},n.pureSnapshot=function(){return this.pureSnapshot()},n.markSnapshotAsCommitted=function(){this.$2.markSnapshotAsCommitted()},n.markSnapshotAsFailed=function(){this.$2.markSnapshotAsFailed()},t})();l.SignalIdentityStore=s}),98);
__d("WAInMemorySignalStore",["MAWMpsGating","WAArmadilloTransportEvent.pb","WABuildMpsPayload","WACryptoManager","WACryptoUtils","WAGlobals","WAIdentityUtils","WAJids","WAMPSFlushable","WAProtocolQueue","WAResultOrError","WASignalEntityStoreV2","WASignalIdentityStore","WATagsLogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C=o("WATagsLogger").TAGS(["CryptoManager","InMemorySignalStore"]),b=(function(){function t(e,t){var n=this,r;this.loadSession=function(e,t){return n.$1.load(e,function(e){return n.$9.loadSession(e,t)})},this.loadSessions=function(e){return n.$1.bulkLoad(e,function(e){return n.$9.loadSessions(e).then(function(e){return new Map(Array.from(e.entries()).map(function(e){return[e[0],e[1]]}))})}).then(function(e){return new Map(Array.from(e.entries()).map(function(e){return[e[0],e[1]]}))})},this.loadSignedPreKey=function(e){return n.$7.load(e,function(){return n.$9.loadSignedPreKey(e)})},this.bulkLoadIdentities=function(e){var t=new Map;return Promise.all(e.map(function(e){return n.loadIdentities(e).then(function(n){t.set(e,n)})})).then(function(){return t})},this.loadIdentities=function(e){return n.$5.loadIdentitiesByUser(e,function(){return n.$9.loadIdentities(e)})},this.saveIdentity=function(e,t){return Promise.resolve(n.storeIdentity(e,t))},this.loadOneTimePreKey=function(e){return n.$6.load(e,function(){return n.$9.loadOneTimePreKey(e)})},this.saveSenderKeySession=function(e,t,r){return n.storeSenderKeySession(e,t,r),Promise.resolve()},this.saveSignedPreKeyIfNew=function(e,t){return n.$9.saveSignedPreKeyIfNew(e,t)},this.loadSenderKeySession=async function(e,t){var r=await n.$8.load(o("WACryptoManager").encodeSenderKey(e,t),async function(){var r=await n.$9.loadSenderKeySession(e,t);return r.success?r.value:null});return r==null?o("WAResultOrError").makeError("errLoadSenderKeySession"):o("WAResultOrError").makeResult(r)},this.handleNewSession=function(e,t,r,a,i){return n.storeSession(e,t),r!=null&&n.storeIdentity(e,r),a!=null&&n.removeOneTimePreKey(a),Promise.resolve(o("WAResultOrError").makeResult())},this.saveICDC=function(e,t){return n.$3.store(e,t),Promise.resolve()},this.loadICDC=function(e){return n.$3.load(e,function(){return n.$9.loadICDC(e)})},this.saveLastSyncTs=function(e,t){return n.$4.store(e,t),Promise.resolve()},this.loadLastSyncTs=function(e){return n.$4.load(e,function(){return n.$9.loadLastSyncTs(e)})},this.saveDhash=function(e,t){return n.$2.store(e,t),Promise.resolve()},this.getLastPreKeyGenerationId=function(){return n.$9.getLastPreKeyGenerationId()},this.savePreKeysGeneration=function(e){return n.$9.savePreKeysGeneration(e)},this.getPreKeyGenerationsTimestamps=function(){return n.$9.getPreKeyGenerationsTimestamps()},this.deletePreKeyGenerations=function(e){return n.$9.deletePreKeyGenerations(e)},this.saveOneTimePreKey=function(e){return n.$9.saveOneTimePreKey(e)},this.loadPreKeys=function(e){return n.$9.loadPreKeys(e)},this.loadLatestSignedPreKey=function(){return n.$9.loadLatestSignedPreKey()},this.$9=e,this.$10=t,this.$5=new(o("WASignalIdentityStore")).SignalIdentityStore,this.$1=new(r=o("WASignalEntityStoreV2")).SignalEntityStore,this.$2=new r.SignalEntityStore,this.$3=new r.SignalEntityStore,this.$4=new r.SignalEntityStore,this.$6=new r.SignalEntityStore,this.$7=new r.SignalEntityStore,this.$8=new r.SignalEntityStore}var n=t.prototype;return n.storeSession=function(t,n){this.$1.store(t,n)},n.storeIdentity=function(t,n){n&&this.$5.store(t,n)},n.removeOneTimePreKey=function(t){this.$6.remove(t)},n.storeSenderKeySession=function(t,n,r){this.$8.store(o("WACryptoManager").encodeSenderKey(t,n),r)},n.updateUserDevicesInfo=function(n){var t=this;return Promise.all(n.map(async function(n){var r=await t.loadIdentities(n.jid),a=n.devices,i=n.dhash,l=n.icdcInfo,_=n.jid,f=n.lastSyncTs,g=n.notificationTs;C.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Update user devices: userJid: ","; new identities: ","; previous identities: ","}"])),_,a.map(function(e){var t=e.id;return o("WAJids").toDeviceJid(n.jid,t)}).join(","),Array.from(r.keys()).join(","));var h=new Set(r.keys()),y=[],b=[];for(var v of a){var S=v.id,R=v.identity,L=v.model,E=v.platform,k=o("WAJids").toDeviceJid(n.jid,S),I=r.get(k);if(o("WAGlobals").getMyDeviceJid()===k){var T=o("WACryptoUtils").uint8ArraysEqual(o("WAIdentityUtils").removeKeyTypeIfNeeded(t.$10.staticKeyPair.publicKey),o("WAIdentityUtils").removeKeyTypeIfNeeded(R));T||C.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Receiving an identity for my device but it is different from original one"])))}if(h.delete(k),I==null)b.push({instruction:"identityAdded",jid:o("WAJids").extractUserJid(k),type:"instruction",device:k,identity:R,model:L,platform:E,notificationTs:g,priority:o("WAProtocolQueue").WAProtocolQueuePriorityLow});else if(!o("WACryptoUtils").uint8ArraysEqual(I,R)){if(o("WAJids").extractUserJid(k)!==_){C.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Device notification of one user cannot remove session the other one"])));continue}y.push(k),C.DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Removing session dur to identity mismatch: ",""])),k),b.push({instruction:"identityChanged",jid:o("WAJids").extractUserJid(k),type:"instruction",device:k,identity:R,model:L,platform:E,notificationTs:g,priority:o("WAProtocolQueue").WAProtocolQueuePriorityLow})}}var D=[];for(var x of h){if(o("WAJids").extractUserJid(x)!==_){C.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Device notification of one user cannot remove identity the other one "])));continue}D.push(x),o("WAGlobals").getMyDeviceJid()===x&&C.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Removing my device identity. This should not happen"]))),C.DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Removing old identity: ",""])),x),b.push({instruction:"identityRemoved",jid:o("WAJids").extractUserJid(x),type:"instruction",device:x,notificationTs:g,priority:o("WAProtocolQueue").WAProtocolQueuePriorityLow})}return Promise.all([i!=null?t.saveDhash(_,i):Promise.resolve(),f!=null?t.saveLastSyncTs(_,f):Promise.resolve(),l!=null?t.saveICDC(_,l):Promise.resolve()].concat(Array.from(D).map(function(e){return t.deleteIdentity(e)}),[D.concat(y).map(function(e){return t.$11(e)})],a.map(function(e){var n=e.id,r=e.identity;return t.saveIdentity(o("WAJids").toDeviceJid(_,n),r)}))).then(function(){return b})})).then(function(e){var t=e.flat();t.forEach(function(e){var t,n;switch(e.instruction){case"identityAdded":n=o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED;break;case"identityChanged":n=o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED;break;case"identityRemoved":n=o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED;break;default:return}var r=o("WAGlobals").getDependencies().generateExternalId();o("WAMPSFlushable").mpsFlushable.enqueue(o("WABuildMpsPayload").buildMpsDeviceChangeAdminMessage(e.jid,(t=e.notificationTs)!=null?t:o("WATimeUtils").unixTime(),r,n,e.platform,e.model),function(e){if(e!=null){C.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to save device change admin message: ",""])),e);return}},"handle_device_change"),o("MAWMpsGating").isFullMpsEnabled()||o("WAProtocolQueue").pqFlushable.enqueue(e)}),o("MAWMpsGating").isFullMpsEnabled()&&o("WAGlobals").getDependencies().recordDeviceChangeHistory(t.map(function(e){var t,n,r;if(e.device==null)return null;var a=e.device;switch(e.instruction){case"identityAdded":return{jid:e.jid,deviceChangeType:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED,platform:e.platform,model:e.model,device:a,identity:e.identity,ts:(t=e.notificationTs)!=null?t:o("WATimeUtils").unixTime()};case"identityChanged":return{jid:e.jid,deviceChangeType:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED,platform:e.platform,model:e.model,device:a,identity:e.identity,ts:(n=e.notificationTs)!=null?n:o("WATimeUtils").unixTime()};case"identityRemoved":return{jid:e.jid,deviceChangeType:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED,device:a,ts:(r=e.notificationTs)!=null?r:o("WATimeUtils").unixTime()};default:return null}}).filter(Boolean)).catch(function(e){C.ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to record device change history: ",""])),e)})}).then(function(){})},n.savePendingToDatabase=function(){var e=this,t=this.$12();return t==null?Promise.resolve():(C.DEV(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Snapshot: ",""])),t),C.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Snapshot save: start"]))),this.$9.bulkSaveSignalData(t).then(function(){C.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Snapshot save: end"]))),e.$13()},function(t){return e.$14(),Promise.reject(t)}))},n.clear=function(){this.$1.clear(),this.$5.clear(),this.$6.clear(),this.$7.clear(),this.$8.clear(),this.$2.clear(),this.$3.clear()},n.deleteIdentity=function(t){return this.$5.remove(t),Promise.resolve()},n.$11=function(t){return this.$1.remove(t),Promise.resolve()},n.$13=function(){this.$1.markSnapshotAsCommitted(),this.$2.markSnapshotAsCommitted(),this.$3.markSnapshotAsCommitted(),this.$4.markSnapshotAsCommitted(),this.$5.markSnapshotAsCommitted(),this.$6.markSnapshotAsCommitted(),this.$7.markSnapshotAsCommitted(),this.$8.markSnapshotAsCommitted()},n.$14=function(){this.$1.markSnapshotAsFailed(),this.$2.markSnapshotAsFailed(),this.$3.markSnapshotAsFailed(),this.$4.markSnapshotAsFailed(),this.$5.markSnapshotAsFailed(),this.$6.markSnapshotAsFailed(),this.$7.markSnapshotAsFailed(),this.$8.markSnapshotAsFailed()},n.$12=function(){var e=this.$1.snapshot(),t=[],n=e.remove.map(function(e){return e.id});e.update.forEach(function(e){var n=e.cachedEntity,r=e.id;n!=null&&t.push({id:r,updated:n})});var r=[];this.$8.snapshot().update.forEach(function(e){var t=o("WACryptoManager").decodeSenderKey(e.id),n=t.deviceId,a=t.groupId;e.cachedEntity!=null&&a&&n&&r.push({groupId:a,author:n,updated:e.cachedEntity})});var a=this.$5.snapshot(),i=a.remove.map(function(e){return e.id}),l=[];a.update.forEach(function(e){var t=e.cachedEntity,n=e.id;t!=null&&l.push({id:n,identity:t})});var s=this.$6.snapshot().remove,u=this.$2.snapshot(),c=[];for(var d of u.update){var m=d.cachedEntity,p=d.id;m!=null&&c.push({id:p,dhash:m})}var _=this.$4.snapshot(),f=[];for(var g of _.update){var h=g.cachedEntity,y=g.id;h!=null&&f.push({id:y,lastSyncTs:h})}var C=this.$3.snapshot(),b=[];for(var v of C.update){var S=v.cachedEntity,R=v.id;S!=null&&b.push({id:R,icdc:S})}return t.length===0&&n.length===0&&l.length===0&&r.length===0&&s.length===0&&b.length===0&&c.length===0&&f.length===0&&i.length===0?null:{dhashUpdate:c,icdcUpdate:b,identityRemove:i,identityUpdate:l,preKeyRemove:s,senderKeySessionUpdate:r,sessionRemove:n,sessionUpdate:t,lastSyncTsUpdate:f}},n.warmCache=async function(t){var e=this,n=t.map(o("WAJids").interpretAsUserJid).filter(Boolean),r=await this.$9.bulkLoadIdentities(n).then(function(t){return e.$5.bulkLoadIdentities(t)}),a=Array.from(r.values()).reduce(function(e,t){return e.concat(Array.from(t.keys()))},[]);await this.loadSessions(a)},t})();l.InMemorySignalStoreImpl=b}),98);
__d("WARequestKeysBatcher",["WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e={delayMs:50,maxSize:100};function s(t,n){var r=n===void 0?e:n,a=r.delayMs,i=r.maxSize,l=null;function s(e){return l&&l.args===e&&(l=null),t(e)}return function(e){if(l!=null)l.args.push(e);else{var t=[e],n=new(o("WAResolvable")).Resolvable,r=n.promise.then(s),u=function(){return void n.resolve(t)},c=setTimeout(u,a);l={args:t,batchPromise:r,run:u,timer:c}}var d=l,m=d.args,p=d.batchPromise,_=m.length-1;if(m.length>=i){var f;clearTimeout((f=l)==null?void 0:f.timer),l.run(),l=null}return p.then(function(e){return e[_]})}}l.makeSimpleBatcher=s}),98);
__d("WARequestKeys",["WABulkRequestKeys","WAPromiseManagement","WARequestKeysBatcher","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WARequestKeysBatcher").makeSimpleBatcher(async function(e){var t=await o("WABulkRequestKeys").bulkRequestKeys(e);return t.success===!1?e.map(function(){return t}):e.map(function(e){var n=t.value.get(e);return n?o("WAResultOrError").makeResult(n):o("WAResultOrError").makeError("errRequestKeysNoKeys")})}),s=o("WAPromiseManagement").cacheWhilePending(function(e){return e},e);l.requestKeys=s}),98);
__d("WACryptoManagerUtils",["WABulkRequestKeys","WACryptoDbCallbacks","WACryptoManager","WAGlobals","WAHandleFailureUtils","WAInMemorySignalStore","WALogger","WALoggerTag","WARequestKeys","WAResultOrError","WASignalKeys","WASignalSignatures","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("WATagsLogger").TAGS([r("WALoggerTag").SignedPrekey]);function f(e){var t=new(o("WAInMemorySignalStore")).InMemorySignalStoreImpl(o("WACryptoDbCallbacks").getCryptoDbCallbacks(),e),n=g();return{manager:o("WACryptoManager").initCryptoManager({regInfo:e,storage:t,network:n}),storage:t}}function g(){return{requestKeys:o("WARequestKeys").requestKeys,bulkRequestKeys:o("WABulkRequestKeys").bulkRequestKeys}}function h(t,n,r,a){var i=null;return o("WACryptoManager").decryptContent(a.cryptoManager,n,{ciphertext:r,type:t},function(e,t){return i={plaintext:e,remoteIdentity:t},Promise.resolve()}).then(function(e){return e.success?o("WAResultOrError").makeResult(i):e}).catch(function(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["DecryptMsg runtime error: ",""])),t),t})}function y(e,t,n,r){var a=null;return o("WACryptoManager").decryptGroupContent(r.cryptoManager,e,t,n,function(e){return a={plaintext:e},Promise.resolve()}).then(function(e){return e.success?o("WAResultOrError").makeResult(a):e}).catch(function(e){throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["DecryptMsg runtime error: ",""])),e),e})}function C(e,t){return o("WACryptoManager").getParticipantInfo(t,e)}function b(e){return e.storage.getPreKeyGenerationsTimestamps()}function v(e,t){return t.storage.deletePreKeyGenerations(e)}function S(e,t,n,r){return o("WACryptoManager").saveSenderKeySession(r.cryptoManager,e,t,n)}async function R(e){var t=await e.storage.loadLatestSignedPreKey();if(t.success===!1)throw _.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Missing signed prekey: ",", triggering reregistration"])),t.error),await o("WAHandleFailureUtils").reregisterPhone(),r("err")("No signed prekey: "+t.error);var n=o("WASignalSignatures").deserializeSignedPreKey(t.value);if(n==null)throw _.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Cannot deserialize signed prekey"]))),r("err")("Cannot deserialize signed prekey");var a=await o("WACryptoManager").generateOneTimePreKey(e);if(a==null)throw o("WATagsLogger").TAGS([r("WALoggerTag").OneTimePrekey]).ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate one time prekey"]))),r("err")("Cannot generate one time prekey");var i=e.regInfo,l=i.regId,s=i.staticKeyPair;return Promise.resolve({regId:l,keyType:o("WASignalKeys").KEY_TYPE,publicKey:s.publicKey,signedPreKey:n,preKey:a})}function L(e,t,n){return o("WACryptoManager").encryptGroupContent(n.cryptoManager,e,o("WAGlobals").getMyDeviceJid(),t).catch(function(e){return o("WATagsLogger").TAGS(["EncryptGroupContent"]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Runtime excpetion when encrypting group content: ",""])),e),o("WAResultOrError").makeError("runtime-exception")})}function E(e,t){return o("WACryptoManager").bulkEncryptContent(t.cryptoManager,e)}function k(e,t,n,r,a){return o("WACryptoManager").encryptContent(n.cryptoManager,e,t,r||o("WACryptoManager").DEFAULT_SESSION_REQUEST,a)}function I(e,t){return o("WACryptoManager").bulkEncryptContent(t.cryptoManager,e).then(function(e){return e.success===!1?(o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] Fail encrypt messages"]))),new Map):e.value})}async function T(e,t){var n=await o("WACryptoManager").ensureSessionsExists(t.cryptoManager,e);await Promise.all(Array.from(n.entries()).map(function(e){var n=e[0],r=e[1];return t.cryptoManager.storage.handleNewSession(n,r,r.remote.pubKey)}))}l.createCryptoManager=f,l.decryptMsg=h,l.decryptGroupMsg=y,l.getParticipantInfo=C,l.getPreKeyGenerationsTimestamps=b,l.deletePreKeyGenerations=v,l.saveSenderKeySession=S,l.getSignalInfoForRetry=R,l.encryptGroupContentWithMetrics=L,l.bulkEncryptMsgWithMetrics=E,l.encryptMsgWithMetrics=k,l.bulkEncrypt=I,l.bulkPreEstablishOutgoingSession=T}),98);
__d("WADbRegistrationApi",["WADbSignal","WAJids","WALogger","WASignalDB","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){return o("WASignalDB").getDb().runInTransaction(["contacts"],"readwrite",async function(e){var r=await e.stores.contacts.get(t);return r!=null?e.stores.contacts.bulkPut([babelHelpers.extends({},r,{icdcInfo:n})]):e.stores.contacts.bulkPut([{contactJid:t,dhash:null,icdcInfo:n}])},o("WASignalDB").signalOp("saveICDC")).then(function(){})};function u(e){return o("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(t){return t.stores.meta.bulkPut([{key:o("WADbSignal").MetaKeysEnum.deviceId,value:{deviceId:e}}])},o("WASignalDB").signalOp("saveDeviceId")).then(function(){})}function c(e,t){return o("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readwrite",async function(n){var r;await Promise.all([n.stores.meta.bulkPut([{key:(r=o("WADbSignal")).MetaKeysEnum.deviceUUID,value:{deviceUUID:t.deviceUUID}},{key:r.MetaKeysEnum.fbid,value:{fbid:e}},{key:r.MetaKeysEnum.regId,value:{regId:t.signalRegInfo.regId}},{key:r.MetaKeysEnum.identityKeyPair,value:{identityKeyPair:t.signalRegInfo.identityKeyPair}},{key:r.MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:t.signalRegInfo.signedPreKey.keyId}},{key:r.MetaKeysEnum.registrationVersion,value:{registrationVersion:t.registrationVersion}},{key:r.MetaKeysEnum.authKeyPair,value:{authKeyPair:t.signalRegInfo.authKeyPair}},{key:r.MetaKeysEnum.deviceRegUnixTime,value:{deviceRegUnixTime:t.registrationUnixTime}}]),n.stores.signedPrekey.bulkPut([t.signalRegInfo.signedPreKey])])},o("WASignalDB").signalOp("saveRegistrationMeta"))}var d=function(t){var e=t.sessionId;return o("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(t){return t.stores.meta.bulkPut([{key:o("WADbSignal").MetaKeysEnum.lastSessionDeviceWasLinkedTo,value:{lastSessionDeviceWasLinkedTo:e}}])},o("WASignalDB").signalOp("saveLastSessionDeviceWasLinkedTo")).then(function(){})};function m(){return o("WASignalDB").getDb().runInTransaction(["meta"],"readonly",async function(t){var n,a=await t.stores.meta.bulkGet([(n=o("WADbSignal")).MetaKeysEnum.fbid,n.MetaKeysEnum.deviceId,n.MetaKeysEnum.cat,n.MetaKeysEnum.regId,n.MetaKeysEnum.identityKeyPair,n.MetaKeysEnum.authKeyPair]),i=a[0],l=a[1],s=a[2],u=a[3],c=a[4],d=a[5];o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["worker: got db data"])));var m=i==null?void 0:i.value.fbid,p=l==null?void 0:l.value.deviceId,_=s==null?void 0:s.value.cat,f=u==null?void 0:u.value.regId,g=c==null?void 0:c.value.identityKeyPair,h=d==null?void 0:d.value.authKeyPair;if(m==null)throw r("err")("fbid not set");if(p==null)throw r("err")("deviceId not set");if(_==null)throw r("err")("fbCat not set");if(f==null||g==null)throw r("err")("regInfo not set");return{deviceJid:o("WAJids").toDeviceJid(o("WAJids").toMsgrUserJid(m),p),fbCat:_.encrypted_serialized_cat,regInfo:{authKeyPair:h,regId:f,staticKeyPair:g},userJid:o("WAJids").toMsgrUserJid(m)}},o("WASignalDB").signalOp("loadAllRegistrationMeta"))}l.saveICDC=s,l.saveDeviceId=u,l.saveRegistrationMeta=c,l.saveLastSessionDeviceWasLinkedTo=d,l.loadAllRegistrationMetaInTransaction=m}),98);
__d("WAMapUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return new Map(Array.from(e.entries()).map(function(e){return[e[0],t(e[1],e[0])]}))}i.mapValues=e}),66);
__d("WAProtocolMediaType",[],(function(t,n,r,o,a,i){"use strict";function e(e){switch(e){case"image":case"sticker":case"gif":case"video":case"ptt":case"audio":case"document":return e;case"xma-image":return"document";default:return null}}i.castToProtocolMediaType=e}),66);
__d("WAEncNode",["WAAsMessageTransport","WACryptoManagerUtils","WAGlobals","WALogger","WAMapUtils","WAMsgTransport.pb","WANullthrows","WAProtocolMediaType","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i){var l=new Set,s=new Set,u=new Set,c=o("WAMapUtils").mapValues(t,function(e,t){var n=e.icdc,r=e.params,o;switch(l.add(r.type),r.type){case"message":{o=d({messageBytes:r.messageBytes,to:t,icdc:n,chat:r.chat,backupDirective:r.backupDirective,applicationPayloadVersion:r.applicationPayloadVersion}),s.add(r.messageType.type),r.messageType.mediaType!=null&&u.add(r.messageType.mediaType);break}case"appdata":{o=m({messageBytes:r.messageBytes});break}default:r.type,o=p({skdm:r.skdm,icdc:n})}return{plaintext:o}});return o("WACryptoManagerUtils").bulkEncryptMsgWithMetrics(c,n).then(function(n){return n.success?o("WAMapUtils").mapValues(n.value,function(e,n){var a,l,s=e.baseKey,u=e.ciphertext,c=e.type,d=r("WANullthrows")((a=t.get(n))==null?void 0:a.params),m=d.type==="message"&&d.messageType.type==="media"?o("WAProtocolMediaType").castToProtocolMediaType(d.messageType.mediaType):null;return{encType:"device",to:n,v:((l=d.messageBytes)==null?void 0:l.version)==="v2"?"2":"3",type:c,mediaType:m,count:i,ciphertext:u,baseKey:s}}):(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to encrypt message: ",""])),n.error),null)})}function c(e,t,n,r,a,i,l,u){var c;switch(t.type){case"message":{c=d({messageBytes:t.messageBytes,to:e,icdc:l,chat:t.chat,backupDirective:u,applicationPayloadVersion:t.applicationPayloadVersion});break}case"appdata":{c=m({messageBytes:t.messageBytes});break}default:t.type,c=p({skdm:t.skdm,icdc:l})}var _=o("WACryptoManagerUtils").encryptMsgWithMetrics(e,c,n,a,i);return _.then(function(n){var a;if(!n.success)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to encrypt message: ",""])),n.error),null;var i=t.type==="message"&&t.messageType.type==="media"?o("WAProtocolMediaType").castToProtocolMediaType(t.messageType.mediaType):null,l=n.value,u=l.ciphertext,c=l.type;return{encType:"device",to:e,v:((a=t.messageBytes)==null?void 0:a.version)==="v2"?"2":"3",type:c,mediaType:i,count:r,ciphertext:u,baseKey:n.value.baseKey}})}function d(e){var t=e.applicationPayloadVersion,n=e.backupDirective,r=e.chat,a=e.icdc,i=e.messageBytes,l=e.to;if(i.version==="v3"){var s=null;o("WAGlobals").isPeerDevice(l)&&(s=r);var u=o("WAAsMessageTransport").asMessageTransport(i.bytes,s,null,a,n,t);return o("encodeProtobuf").encodeProtobuf(o("WAMsgTransport.pb").MessageTransportSpec,u).readByteArrayView()}else return o("WAGlobals").isPeerDevice(l)?i.bytesForPeer:i.bytes}function m(e){var t=e.messageBytes;if(t.version==="v3"){var n=o("WAAsMessageTransport").asMessageTransport(t.bytes);return o("encodeProtobuf").encodeProtobuf(o("WAMsgTransport.pb").MessageTransportSpec,n).readByteArrayView()}else throw r("err")("Plaintext v2 not supported yet")}function p(e){var t=e.icdc,n=e.skdm,r=o("WAAsMessageTransport").asMessageTransport(null,null,n,t);return o("encodeProtobuf").encodeProtobuf(o("WAMsgTransport.pb").MessageTransportSpec,r).readByteArrayView()}l.getEncNodes=u,l.getEncNode=c}),98);
__d("WAPhash",["Promise","WABase64","WABinary","WACryptoDependencies","WALogger","WASortedLists"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Calculate pHash -- Start"])));for(var r=o("WASortedLists").sortAndDedupe(t),a=new(o("WABinary")).Binary,i=0;i<r.length;i++)a.writeString(r[i]);return(u||(u=n("Promise"))).resolve(o("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",a.readByteArrayView()).then(function(e){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Calculate pHash -- end"])));var t=new Uint8Array(e,0,6);return"2:"+o("WABase64").encodeB64(t)}))}l.calculatePHash=c}),98);
__d("WAEncUserMsg",["WAComputeICDC","WAEncNode","WAGlobals","WAJids","WAPhash","WATagsLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=o("WATagsLogger").TAGS(["WAEncUserMsg"]);async function y(t,n,a,i){h.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- START"]))),t.length===0&&h.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- no recipient"]))),h.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- ICDC"])));var l=t.flatMap(function(e){return e.devicesInfo}).map(function(e){return e.jid});R(t)&&h.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- OTHER_RECIPENT_DEVICE_EMPTY"])));var m;return n.type==="message"&&!r("gkx")("3176")&&(m=await L(t,a,i)),Promise.all([b(l,n,a,m,i),o("WAPhash").calculatePHash(l.concat(o("WAGlobals").getMyDeviceJid()))]).then(function(e){var t=e[0],n=e[1];return h.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- DONE"]))),{participants:t,phash:n}})}function C(e,t,n){return b(e,t,n)}function b(e,t,n,r,o){return S(e,t,n,r,o).then(function(e){if(e.length===0){h.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- getParticipantNodes -- EMPTY NODE"]))),o==null||o.addPoint("getParticipantNodes_empty_node");return}return e})}function v(e,t,n,r,a,i){return o("WAEncNode").getEncNode(e,t,n,r,a,i)}function S(e,t,n,r,a){var i=!1;h.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- encrypt -- getParticipantNodes -- START"]))),(t.type!=="message"||o("WAJids").interpretAsGroupJid(t.chat)!=null)&&(i=!0);var l=o("WAEncNode").getEncNodes(new Map(e.map(function(e){return[e,{params:t,icdc:r}]})),n).then(function(e){return e==null?(h.WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- encrypt - getParticipantNodes -- EMPTY DEVICE JIDS"]))),a==null||a.addPoint("getParticipantNodes_empty_device_jids"),[]):(t.type==="message"&&(i=i||Array.from(e.keys()).some(function(e){return o("WAJids").extractUserJid(e)===t.chat})),Array.from(e==null?void 0:e.values()))});return l.then(function(e){return i?e:(h.ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- getParticipantNodes -- receiverEncypted -- FALSE"]))),a==null||a.addPoint("getParticipantNodes_receiverEncypted_false"),[])}).then(function(e){return e.filter(Boolean)})}function R(e){return e.filter(function(e){return e.user!==o("WAGlobals").getMyUserJid()}).flatMap(function(e){return e.devicesInfo}).length===0}async function L(e,t,n){var r;try{n==null||n.addPoint("icdc_start"),r=await o("WAComputeICDC").computeICDC(e,o("WAGlobals").getMyUserJid(),o("WAGlobals").getMyDeviceJid(),t),n==null||n.addPoint("icdc_end",{bool:{isICDCEmpty:r==null}})}catch(e){n==null||n.addPoint("icdc-error"),h.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- ICDC calc error: ",""])),e)}return r}l.encryptUserMsg=y,l.encryptGroupFanoutMsg=C,l.encryptDeviceJidMessage=v}),98);
__d("WAGetUserDevices",[],(function(t,n,r,o,a,i){"use strict";async function e(e,t){var n=await t.storage.bulkLoadIdentities(e);return Array.from(n).flatMap(function(e){var t=e[1];return Array.from(t.keys())})}i.getUserDevices=e}),66);
__d("WAEncGroupMsg",["WAAsMessageTransport","WABridge","WACryptoManager","WACryptoManagerUtils","WADbPersonalSenderKeyStatusTxns","WAEncUserMsg","WAGetUserDevices","WAGlobals","WAHex","WAMsgTransport.pb","WAOdsEnums","WAPhash","WAPromiseQueue","WAProtocolMediaType","WAResultOrError","WASortedLists","WATagsLogger","WATimeUtils","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("WATagsLogger").TAGS(["WAEncGroupMsg"]),f=30*o("WATimeUtils").DAY_SECONDS,g=new(o("WAPromiseQueue")).PromiseQueue;async function h(e,t,n){var r=e.senderKeyId;if(r==null||e.rotateSenderKey||!o("WATimeUtils").happenedWithin(e.ts,f))return o("WAResultOrError").makeError("sender-key-invalid");var a=await n.cryptoManager.storage.loadSenderKeySession(t,o("WAGlobals").getMyDeviceJid());if(a.success===!1||a.value.senderKeyStates.length===0)return o("WAResultOrError").makeError("sender-key-missing");var i=a.value.senderKeyStates.at(-1);return i==null?o("WAResultOrError").makeError("sender-key-missing"):i.senderKeyId!==e.senderKeyId?o("WAResultOrError").makeError("sender-key-id-mismatch"):o("WAResultOrError").makeResult({senderKeyId:r})}async function y(e,t){var n=await o("WACryptoManager").rotateGroupSenderKey(t.cryptoManager,e,o("WAGlobals").getMyDeviceJid());return await o("WADbPersonalSenderKeyStatusTxns").markSenderKeyAsRotated(e,n.senderKeyId,o("WATimeUtils").unixTime()),{senderKeyId:n.senderKeyId}}function C(t,n,r,a){return g.enqueue(async function(){var i=await o("WADbPersonalSenderKeyStatusTxns").getSenderKeyStatus(t),l=await h(i,t,r),s=await o("WAGetUserDevices").getUserDevices(n,r.cryptoManager),u=new Set(s);if(l.success===!1){_.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Rotating sender key for group "," because ",""])),t,l.error),o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.GROUP_SKS_INVALID,key:l.error}),a.addPoint("sender_key_rotation_start");var c=await y(t,r);return a.addPoint("sender_key_rotation_end"),{senderKeyId:c.senderKeyId,needsSenderKey:u,groupParticipants:new Set(s)}}else{var d;return((d=i.hasSenderKey)!=null?d:[]).forEach(function(e){return u.delete(e)}),a.addPoint("no_sk_rotation",{int:{noRotationNeedsSK:u.size}}),{senderKeyId:l.value.senderKeyId,needsSenderKey:u,groupParticipants:new Set(s)}}})}async function b(e,t,n,r,a,i,l){l.addPoint("enc_group_start");var f=await C(e,t.map(function(e){return e.user}),a,l),g=f.groupParticipants,h=f.needsSenderKey,y=f.senderKeyId;_.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Finish rotate participant info"]))),l.addPoint("rotated_participant_info");var b=null,S,R,L=t.flatMap(function(e){return e.devicesInfo}).map(function(e){return e.jid});g.delete(o("WAGlobals").getMyDeviceJid());var E=!o("WASortedLists").areEqual(o("WASortedLists").asSortedSet(g),o("WASortedLists").sortAndDedupe(L)),k=r.type==="text"&&r.isRevoked,I=r.type==="media"?o("WAProtocolMediaType").castToProtocolMediaType(r.mediaType):null;if(E||k){var T=await o("WAEncUserMsg").encryptGroupFanoutMsg(L,{type:"message",messageBytes:n,messageType:r,chat:e,backupDirective:i},a);T&&!(r.type==="text"&&r.isInvisible===!0)&&(S=T,R={encType:"group",to:e,v:n.version==="v3"?"3":"2",type:"skmsg",mediaType:I,ciphertext:null}),_.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Finish group fanout msg"]))),l.addPoint("finish_group_fanout_msg")}else{var D;if(n.version==="v3"){var x=o("WAAsMessageTransport").asMessageTransport(n.bytes);D=o("encodeProtobuf").encodeProtobuf(o("WAMsgTransport.pb").MessageTransportSpec,x).readByteArrayView()}else D=n.bytes;var $=await o("WACryptoManagerUtils").encryptGroupContentWithMetrics(e,D,a);if(_.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Finish encrypt group content"]))),l.addPoint("finish_encrypt_group_content"),$.success){_.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Encrypt success"])));var P=$.value;if(y!==P.senderKeyId&&g.forEach(function(e){return h.add(e)}),h.size>0){var N={groupId:e,axolotlSenderKeyDistributionMessage:o("WAHex").bytesToBuffer(P.senderKeyDistributionProto)};_.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start key distribution"])));var M=L.filter(function(e){return h.has(e)}),w=await v(M,N,a);_.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["end key distribution"]))),l.addPoint("finish_skdm_enc_node"),w.length>0&&(S=w,b={group:e,senderKeyId:P.senderKeyId,knowsSenderKey:new Set(M)})}R={encType:"group",to:e,v:n.version==="v2"?"2":"3",type:P.ciphertext.type,mediaType:I,ciphertext:P.ciphertext.ciphertext},r.type==="text"&&r.isInvisible===!0&&(R={encType:"group",to:e,v:n.version==="v2"?"2":"3",type:"skmsg",mediaType:null,ciphertext:null})}}var A=await o("WAPhash").calculatePHash(L.concat(o("WAGlobals").getMyDeviceJid()));return l.addPoint("phash_finish"),{phash:A,participants:S,encNode:R,senderKeyDistributionInfo:b}}function v(e,t,n){var r=o("WAAsMessageTransport").asMessageTransport(null,null,t,null),a=o("encodeProtobuf").encodeProtobuf(o("WAMsgTransport.pb").MessageTransportSpec,r).readByteArrayView();return o("WACryptoManagerUtils").bulkEncrypt(new Map(e.map(function(e){return[e,{plaintext:a}]})),n).then(function(e){var t=[];return e.forEach(function(e,n){t.push({encType:"device",to:n,v:"3",type:e.type,ciphertext:e.ciphertext,mediaType:null,count:null,baseKey:null})}),t})}l.encryptGroupMsg=b}),98);
__d("WAFrankingNode",["Promise","WAFranking","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,r,a){return r==null?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Franking key is missing"]))),(u||(u=n("Promise"))).resolve(null)):a!=null&&a!==0?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Can't handle franking version ",""])),a),(u||(u=n("Promise"))).resolve(null)):o("WAFranking").genFrankingTag(r,t)}l.genFrankingTagFromMessageApplicationEncode=c}),98);
__d("WAGenReportingMeta",["WAByteArray","WAFranking","WAFrankingNode"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){var r=await o("WAFrankingNode").genFrankingTagFromMessageApplicationEncode(e,t,n);return{frankingKey:t,frankingTag:r,frankingVersion:o("WAFranking").getFrankingVersion(n),reportingContent:o("WAByteArray").uint8ArrayToBuffer(e),reportingTag:null}}l.genReportingMeta=e}),98);
__d("WAGetKeysForUpload",["WALoggerTag","WAResultOrError","WASignalKeys","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WATagsLogger").TAGS([r("WALoggerTag").PrekeyGenerateAndUpload,r("WALoggerTag").SignedPrekey]);function u(t,n){return t.storage.loadPreKeys(n).then(function(n){var r=n.preKeys,a=n.signedPreKey,i=[];return r.forEach(function(t){var n=o("WASignalKeys").deserializePreKey(t);n==null?s.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to deserialize prekey received from the db"]))):i.push(n)}),o("WAResultOrError").makeResult({regInfo:t.regInfo,keyType:o("WASignalKeys").KEY_TYPE,preKeys:i,signedPreKey:a})})}l.getKeysForUpload=u}),98);
__d("WAMakeSignedPreKeyMixin",["WAWap"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={idElementValue:o("WAWap").BIG_ENDIAN_CONTENT(e.id,3)},n={anyElementValue:e.keyPair.publicKey},r=e.signature;return{keyIDMixinArgs:t,keyDataMixinArgs:n,signatureElementValue:r}}l.makeSignedPreKeyMixin=e}),98);
__d("WARandomJitter",[],(function(t,n,r,o,a,i){"use strict";function e(){return Math.round(Math.random()*500-250)}i.getRandomJitter=e}),66);
__d("WARetryUtils",["WARandomJitter"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e?{algo:{backoff:{first:1,second:1,type:"fibonacci"},toMs:function(t){return(1+t)*1e3+o("WARandomJitter").getRandomJitter()},type:"adjust"},relativeDelay:!0,max:6e5}:{algo:{type:"adjust",backoff:{type:"fibonacci",first:1,second:1},toMs:function(t){return(9+t)*1e3}},max:62e4}}l.fibonacciBackoff=e}),98);
__d("WASmaxInPreKeysSetVnameFailureBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");return n.success?o("WAResultOrError").makeResult({text:n.value}):n}l.parseSetVnameFailureBadRequestMixin=e}),98);
__d("WASmaxInPreKeysSetVnameFailureFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");return n.success?o("WAResultOrError").makeResult({text:n.value}):n}l.parseSetVnameFailureFallbackMixin=e}),98);
__d("WASmaxInPreKeysSetVnameFailureInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");return n.success?o("WAResultOrError").makeResult({text:n.value}):n}l.parseSetVnameFailureInternalServerErrorMixin=e}),98);
__d("WASmaxInPreKeysSetVnameFailureNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"violation");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","not-acceptable");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(n.value,"reason");if(!a.success)return a;var i=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrInt,n.value,"max");if(!i.success)return i;var l=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrInt,n.value,"length");return l.success?o("WAResultOrError").makeResult({text:r.value,violationReason:a.value,violationMax:i.value,violationLength:l.value}):l}l.parseSetVnameFailureNotAcceptableMixin=e}),98);
__d("WASmaxInPreKeysVnameFailures",["WAResultOrError","WASmaxInPreKeysSetVnameFailureBadRequestMixin","WASmaxInPreKeysSetVnameFailureFallbackMixin","WASmaxInPreKeysSetVnameFailureInternalServerErrorMixin","WASmaxInPreKeysSetVnameFailureNotAcceptableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysSetVnameFailureNotAcceptableMixin").parseSetVnameFailureNotAcceptableMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"SetVnameFailureNotAcceptable",value:t.value});var n=o("WASmaxInPreKeysSetVnameFailureBadRequestMixin").parseSetVnameFailureBadRequestMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"SetVnameFailureBadRequest",value:n.value});var r=o("WASmaxInPreKeysSetVnameFailureInternalServerErrorMixin").parseSetVnameFailureInternalServerErrorMixin(e);if(r.success)return o("WAResultOrError").makeResult({name:"SetVnameFailureInternalServerError",value:r.value});var a=o("WASmaxInPreKeysSetVnameFailureFallbackMixin").parseSetVnameFailureFallbackMixin(e);return a.success?o("WAResultOrError").makeResult({name:"SetVnameFailureFallback",value:a.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["VnameFailureNotAcceptable","VnameFailureBadRequest","VnameFailureInternalServerError","VnameFailureFallback"],[t,n,r,a])}l.parseVnameFailures=e}),98);
__d("WASmaxInPreKeysSetResponsePreKeySuccessVnameFailure",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysVnameFailures","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(r.value,"error");if(!a.success)return a;var i=o("WASmaxParseUtils").attrString(r.value,"text");if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,r.value,"code",207);if(!l.success)return l;var s=o("WASmaxParseUtils").attrIntRange(a.value,"code",400,599);if(!s.success)return s;var u=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!u.success)return u;var c=o("WASmaxInPreKeysVnameFailures").parseVnameFailures(a.value);return c.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorText:i.value,errorCode:l.value,errorErrorCode:s.value},u.value,{errorErrorVnameFailures:c.value})):c}l.parseSetResponsePreKeySuccessVnameFailure=e}),98);
__d("WASmaxInPreKeysIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"field");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"name");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"reason");return r.success?o("WAResultOrError").makeResult({name:n.value,reason:r.value}):r}function s(t){var n=o("WASmaxParseUtils").assertTag(t,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").optionalChildWithTag(t,"field",e);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,t,"text","not-acceptable");if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,t,"code",406);return i.success?o("WAResultOrError").makeResult({text:a.value,code:i.value,field:r.value}):i}l.parseIQErrorNotAcceptableField=e,l.parseIQErrorNotAcceptableMixin=s}),98);
__d("WASmaxInPreKeysRequestErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNotAcceptableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:t.value});var n=o("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorNotAcceptable","IQErrorFallbackClient"],[t,n])}l.parseRequestErrors=e}),98);
__d("WASmaxInPreKeysSetResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysRequestErrors").parseRequestErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestErrors:i.value})):i}l.parseSetResponseRequestError=e}),98);
__d("WASmaxInPreKeysSetResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysServerErrors").parseServerErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorServerErrors:i.value})):i}l.parseSetResponseServerError=e}),98);
__d("WASmaxInPreKeysSetResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseSetResponseSuccess=e}),98);
__d("WASmaxOutPreKeysKeyDataMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyElementValue,n=o("WASmaxJsx").smax("smax$any",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeKeyDataMixin=s}),98);
__d("WASmaxOutPreKeysIdentityKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysKeyDataMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxJsx").smax("smax$any",null,o("WASmaxOutPreKeysKeyDataMixin").mergeKeyDataMixin(o("WASmaxJsx").smax("identity",null),e));return t}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIdentityKeyMixin=s}),98);
__d("WASmaxOutPreKeysKeyTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("type",null,new Uint8Array([5])));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeKeyTypeMixin=s}),98);
__d("WASmaxOutPreKeysKeyIDMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.idElementValue,n=o("WASmaxJsx").smax("id",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeKeyIDMixin=s}),98);
__d("WASmaxOutPreKeysPreKeyListMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysKeyDataMixin","WASmaxOutPreKeysKeyIDMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.keyIDMixinArgs,n=e.keyDataMixinArgs,r=o("WASmaxJsx").smax("key",null,o("WASmaxOutPreKeysKeyIDMixin").mergeKeyIDMixin(o("WASmaxJsx").smax("id",null),t),o("WASmaxOutPreKeysKeyDataMixin").mergeKeyDataMixin(o("WASmaxJsx").smax("value",null),n));return r}function s(t){var n=t.keyArgs,r=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("list",null,o("WASmaxChildren").REPEATED_CHILD(e,n,0,2e4)));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makePreKeyListListKey=e,l.mergePreKeyListMixin=u}),98);
__d("WASmaxOutPreKeysRegistrationIDMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.registrationElementValue,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("registration",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRegistrationIDMixin=s}),98);
__d("WASmaxOutPreKeysRequestPaddingMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.paddingElementValue,n=o("WASmaxJsx").smax("iq",null,o("WASmaxJsx").smax("padding",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRequestPaddingMixin=s}),98);
__d("WASmaxOutPreKeysSignedPreKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysKeyDataMixin","WASmaxOutPreKeysKeyIDMixin"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.keyIDMixinArgs,r=e.keyDataMixinArgs,a=e.signatureElementValue,i=(t=o("WASmaxJsx")).smax("smax$any",null,t.smax("skey",null,o("WASmaxOutPreKeysKeyIDMixin").mergeKeyIDMixin(t.smax("id",null),n),o("WASmaxOutPreKeysKeyDataMixin").mergeKeyDataMixin(t.smax("value",null),r),t.smax("signature",null,a)));return i}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeSignedPreKeyMixin=s}),98);
__d("WASmaxOutPreKeysVerifiedNameMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.verifiedNameElementValue,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("verified_name",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeVerifiedNameMixin=s}),98);
__d("WASmaxOutPreKeysIdentityKeyBundleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysIdentityKeyMixin","WASmaxOutPreKeysKeyTypeMixin","WASmaxOutPreKeysPreKeyListMixin","WASmaxOutPreKeysRegistrationIDMixin","WASmaxOutPreKeysRequestPaddingMixin","WASmaxOutPreKeysSignedPreKeyMixin","WASmaxOutPreKeysVerifiedNameMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.verifiedNameMixinArgs,n=e.requestPaddingMixinArgs,r=o("WASmaxMixins").optionalMerge(o("WASmaxOutPreKeysRequestPaddingMixin").mergeRequestPaddingMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutPreKeysVerifiedNameMixin").mergeVerifiedNameMixin,o("WASmaxOutPreKeysKeyTypeMixin").mergeKeyTypeMixin(o("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(o("WASmaxOutPreKeysPreKeyListMixin").mergePreKeyListMixin(o("WASmaxOutPreKeysIdentityKeyMixin").mergeIdentityKeyMixin(o("WASmaxOutPreKeysRegistrationIDMixin").mergeRegistrationIDMixin(o("WASmaxJsx").smax("iq",null),e),e),e),e)),t),n);return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIdentityKeyBundleMixin=s}),98);
__d("WASmaxOutPreKeysSetRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysIdentityKeyBundleMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutPreKeysIdentityKeyBundleMixin").mergeIdentityKeyBundleMixin(o("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(o("WASmaxJsx").smax("iq",{type:"set"})),e);return t}l.makeSetRequest=e}),98);
__d("WASmaxPreKeysSetRPC",["WAComms","WASmaxInPreKeysSetResponsePreKeySuccessVnameFailure","WASmaxInPreKeysSetResponseRequestError","WASmaxInPreKeysSetResponseServerError","WASmaxInPreKeysSetResponseSuccess","WASmaxOutPreKeysSetRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(t,n,r,o,a,i,l){async function e(e,t){var n=o("WASmaxOutPreKeysSetRequest").makeSetRequest(e),r=await o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInPreKeysSetResponseSuccess").parseSetResponseSuccess(r,n);if(a.success)return{name:"SetResponseSuccess",value:a.value};var i=o("WASmaxInPreKeysSetResponsePreKeySuccessVnameFailure").parseSetResponsePreKeySuccessVnameFailure(r,n);if(i.success)return{name:"SetResponsePreKeySuccessVnameFailure",value:i.value};var l=o("WASmaxInPreKeysSetResponseRequestError").parseSetResponseRequestError(r,n);if(l.success)return{name:"SetResponseRequestError",value:l.value};var s=o("WASmaxInPreKeysSetResponseServerError").parseSetResponseServerError(r,n);if(s.success)return{name:"SetResponseServerError",value:s.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Set",{Success:a,PreKeySuccessVnameFailure:i,RequestError:l,ServerError:s}))}l.sendSetRPC=e}),98);
__d("WAGenerateAndUploadPreKeysProtocol",["WACryptoManager","WAGetKeysForUpload","WAGlobals","WAMakeSignedPreKeyMixin","WAPromiseRetryLoop","WAResultOrError","WARetryUtils","WASmaxPreKeysSetRPC","WATagsLogger","WAWap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("WATagsLogger").TAGS(["generateAndUploadPreKeysProtocol"]);async function p(){var t=await o("WAGlobals").getWaOneQueue().enqueue(async function(t){var n=t.cryptoManager,r=await o("WACryptoManager").generatePreKeys(n);return r.success?(m.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["About to upload pre keys"]))).devConsole("generation "+r.value),o("WAGetKeysForUpload").getKeysForUpload(n,r.value)):r},{operationType:"generate_prekeys",flush:!0,afterInit:!0}),n=t.value,r=n.preKeys,a=n.regInfo,i=n.signedPreKey,l=babelHelpers.extends({registrationElementValue:o("WAWap").BIG_ENDIAN_CONTENT(a.regId),anyElementValue:a.staticKeyPair.publicKey,keyArgs:r.map(_)},o("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(i)),p=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"uploadKeys",timer:o("WARetryUtils").fibonacciBackoff(!1),code:async function(t){m.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Attempt to upload keys"])));var e=await o("WASmaxPreKeysSetRPC").sendSetRPC(l);switch(e.name){case"SetResponseSuccess":{m.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Keys are successfully uploaded"]))),t(o("WAResultOrError").makeResult({preKeys:r}));return}case"SetResponseRequestError":{m.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Got Malformed upload keys IQ on upload pre keys attempt"]))),t(o("WAResultOrError").makeError("request-error"));return}default:e.name,m.WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Got unexpected error: ",", will retry after backoff"])),e.name)}}});return p.start(),p.promise()}function _(e){var t={idElementValue:o("WAWap").BIG_ENDIAN_CONTENT(e.id,3)},n={anyElementValue:e.keyPair.publicKey};return{keyIDMixinArgs:t,keyDataMixinArgs:n}}l.generateAndUploadPreKeysProtocol=p}),98);
__d("WAGenerateAndUploadPreKeys",["WABridge","WAGenerateAndUploadPreKeysProtocol","WALoggerTag","WAOdsEnums","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS([r("WALoggerTag").PrekeyGenerateAndUpload,r("WALoggerTag").SignedPrekey]);function c(t){var n=t.reason;return u.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["About to generate and upload pre keys with reason: ",""])),n),o("WAGenerateAndUploadPreKeysProtocol").generateAndUploadPreKeysProtocol().then(function(e){var t;if(e.success){o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.PREKEY_UPLOAD,key:"success",amount:e.value.preKeys.length},!0);return}var n=e.error;if(n==="request-error")throw o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.PREKEY_UPLOAD,key:"malformed"},!0),r("err")("Malformed upload keys IQ");u.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate and upload prekeys with error ",": ","}"])),n,(t=e.payload)==null?void 0:t.message)})}l.generateAndUploadPreKeys=c}),98);
__d("WAGetCurrentUserDeviceInfoApi",["WAGetMetaApi","WASignalKeys"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return o("WAGetMetaApi").getMeta().then(function(e){var t=e==null?void 0:e.deviceId,n=e==null?void 0:e.identityKeyPair;if(t==null||n==null)return null;var r=o("WASignalKeys").serializePubKey(n);return{deviceId:t,identityKey:r}})},s=function(){return o("WAGetMetaApi").getMeta().then(function(e){return(e==null?void 0:e.deviceId)==null?null:{deviceId:e==null?void 0:e.deviceId}})};l.getCurrentUserDeviceInfo=e,l.getCurrentUserDeviceId=s}),98);
__d("WAGetDeviceIdentityMixin",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e!=null?{deviceIdentityElementValue:e}:null}i.getDeviceIdentityMixin=e}),66);
__d("WAGetLocalPublicPrivateIdentityKeyApi",["WADbSignal","WALogger","WASignalDB","WASignalKeys","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return o("WASignalDB").getDb().runInTransaction(["meta"],"readonly",async function(t){var n,a=await t.stores.meta.get(o("WADbSignal").MetaKeysEnum.identityKeyPair);if((a==null||(n=a.value)==null?void 0:n.identityKeyPair)==null){var i="[Remote Presence Error] Identity key pair was null";throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),i),r("err")(i)}return o("WASignalKeys").toSerializedKeyPair(a.value.identityKeyPair)},o("WASignalDB").signalOp("getLocalPublicPrivateIdentityKey"))};l.getLocalPublicPrivateIdentityKey=s}),98);
__d("WAGetIdentityKeys",["WAGetLocalPublicPrivateIdentityKeyApi"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e=await o("WAGetLocalPublicPrivateIdentityKeyApi").getLocalPublicPrivateIdentityKey(),t=e.privateKey,n=e.serializedPubKey;return{identityPrivateKey:t,identityPublicKey:n}}l.getIdentityKeysInWorker=e}),98);
__d("WALoadReceiptApi",["MAWTransactionMode","WADbTransactor","WAMsg","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WADbTransactor").makeSignalTransactor({receipts:o("MAWTransactionMode").READONLY},"loadReceipt",function(e){return(function(t){var n=o("WAMsg").craftWAMsgIdString(t);return e.receipts.get({waMsgId:n}).then(function(e){var n;return e==null?o("WAResultOrError").makeError("missing-receipt"):o("WAResultOrError").makeResult({id:t,permittedIdentitiesPerDevice:(n=e.permittedIdentitiesPerDevice)!=null?n:new Map,recipientDevices:e.recipientDevices})})})});l.loadReceipt=e}),98);
__d("WAMarkSenderKeyAsSentApi",["WASignalDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",async function(e){var o=await e.stores.personalSenderKeyStatuses.get(t);o!=null&&o.senderKeyId===n&&(r.forEach(function(e){o.hasSenderKey.add(e)}),await e.stores.personalSenderKeyStatuses.bulkPut([o]))},o("WASignalDB").signalOp("markSenderKeyAsSent"))};l.markSenderKeyAsSent=e}),98);
__d("WASmaxInDevicesNotifyResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:i.value})):i}l.parseNotifyResponseError=e}),98);
__d("WASmaxInDevicesNotifyResponseSuccess",["WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseNotifyResponseSuccess=e}),98);
__d("WASmaxOutDevicesBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQSetRequestMixin=s}),98);
__d("WASmaxOutDevicesNotifyRequest",["WASmaxChildren","WASmaxJsx","WASmaxOutDevicesBaseIQSetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.userJid,n=o("WASmaxJsx").smax("user",{jid:o("WAWap").USER_JID(t)});return n}function s(t){var n=t.userArgs,r=o("WASmaxOutDevicesBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},o("WASmaxJsx").smax("users",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,25))));return r}l.makeNotifyRequestUsersUser=e,l.makeNotifyRequest=s}),98);
__d("WASmaxDevicesNotifyRPC",["WAComms","WASmaxInDevicesNotifyResponseError","WASmaxInDevicesNotifyResponseSuccess","WASmaxOutDevicesNotifyRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(t,n,r,o,a,i,l){async function e(e,t){var n=o("WASmaxOutDevicesNotifyRequest").makeNotifyRequest(e),r=await o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInDevicesNotifyResponseSuccess").parseNotifyResponseSuccess(r,n);if(a.success)return{name:"NotifyResponseSuccess",value:a.value};var i=o("WASmaxInDevicesNotifyResponseError").parseNotifyResponseError(r,n);if(i.success)return{name:"NotifyResponseError",value:i.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Notify",{Success:a,Error:i}))}l.sendNotifyRPC=e}),98);
__d("WANotifyDeviceChange",["WAGlobals","WALogger","WAPersistedJobManager","WASmaxDevicesNotifyRPC","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.users;if(n.size===0)return Promise.resolve();var r=o("WAGlobals").getConfig().maxUsersForNotifyDeviceChange(),a=Array.from(n);return n.size>r&&(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["The maximum number of users that can be notified is ",""])),r),a=a.slice(0,r)),u(a)}async function u(e){var t=await o("WASmaxDevicesNotifyRPC").sendNotifyRPC({userArgs:e.map(function(e){return{userJid:e}})});if(t.name!=="NotifyResponseSuccess"){t.name;var n=t.value.errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup;if(n.name==="RetryableIQError"){var a=n.value.backoff;throw a!=null?new(o("WAPersistedJobManager")).RetryOnBackoff({algo:{type:"constant",delay:a},jitter:0}):new(o("WAPersistedJobManager")).RetryOnBackoff({algo:{type:"exponential",first:o("WATimeUtils").HOUR_MILLISECONDS/60},jitter:.1})}throw r("err")("Failed with an unexpected error code "+n.value.code)}}l.notifyDeviceChange=s}),98);
__d("WAParseFranking",["WAFranking","WAFrankingTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n;if(e==null)return null;var r=(t=e.maybeChild("franking_tag"))==null?void 0:t.contentBytes(),a=(n=e.maybeChild("reporting_tag"))==null?void 0:n.contentBytes();return{frankingKey:null,frankingTag:r!=null?o("WAFrankingTypes").castToFrankingTag(r):null,reportingTag:a!=null?o("WAFrankingTypes").castToReportingTag(a):null,frankingVersion:o("WAFranking").getFrankingVersion(),reportingContent:null}}l.parseFrankingNode=e}),98);
__d("WAQueryGroupsAndSync",["FBLogger","WACreateGroup","WAGetDevices","WAGlobals","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n){if(n===void 0&&(n=!1),t!=null){if(t.type==="all"){r("FBLogger")("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsAndSync: unsupported input type: all"])));return}var o=t.groups;if(o==null||o.length===0){r("FBLogger")("wmi").MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsAndSync: empty groups list"])));return}await c({groupJids:o,ignoreDhash:n})}}async function c(e){var t=e.groupJids,n=e.ignoreDhash,r=n===void 0?!1:n,a=await d({groupJids:t});if(a.length!==0){await o("WACreateGroup").createGroups(a.map(function(e){return{groupStatus:"queried",groupToCreate:e,serverTs:o("WATimeUtils").unixTime(),extras:void 0,folder:void 0,key:void 0}}));var i=m(a);i.size!==0&&await o("WAGetDevices").getDevices({users:i,reason:"query-groups",ignoreDhash:r})}}async function d(e){var t=e.groupJids,n=await Promise.all(t.map(function(e){return o("WAGlobals").getDependencies().queryGroup({groupJid:e})})),r=[];for(var a of n)a.success&&r.push(a.value);return r}function m(e){var t=new Set;for(var n of e)for(var r of n.participants)r.success?t.add(r.value.user):t.add(r.error.user);return t}l.queryGroupsLegacyWAAPI=u,l.queryGroupsAndSync=c}),98);
__d("WASmaxInMessagePublishAckAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","3");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckAdminEditMixin=e}),98);
__d("WASmaxInMessagePublishAckAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","8");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckAdminRevokeMixin=e}),98);
__d("WASmaxInMessagePublishAckMessageEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","1");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckMessageEditMixin=e}),98);
__d("WASmaxInMessagePublishAckMessagePinMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","2");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckMessagePinMixin=e}),98);
__d("WASmaxInMessagePublishEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={CBP:"CBP",NBP:"NBP",PMP:"PMP"},u={delivery:"delivery",no_optimization:"no_optimization"},c={false:"false",true:"true"},d={free_customer_service:"free_customer_service",free_entry_point:"free_entry_point",regular:"regular"},m={lid:"lid",pn:"pn"},p={validators:[(e=o("WAJids")).validateDeviceJid,e.validateDeviceJid,e.validateUserJid,e.validateUserJid],typeName:"DeviceJid|DeviceJid|UserJid|UserJid"},_={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.ENUM_CBP_NBP_PMP=s,l.ENUM_DELIVERY_NOOPTIMIZATION=u,l.ENUM_FALSE_TRUE=c,l.ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR=d,l.ENUM_LID_PN=m,l.DEVICEJID_DEVICEJID_USERJID_USERJID=p,l.USERJID_USERJID=_}),98);
__d("WASmaxInMessagePublishAckPaidConversationMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"delivery_context");if(!t.success)return t;var n=o("WASmaxParseUtils").attrStringEnum(e,"optimization_goal",o("WASmaxInMessagePublishEnums").ENUM_DELIVERY_NOOPTIMIZATION);return n.success?o("WAResultOrError").makeResult({optimizationGoal:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"source_url");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(e){var t=o("WASmaxParseUtils").assertTag(e,"referral");if(!t.success)return t;var n=o("WASmaxParseUtils").optionalChildWithTag(e,"source_url",s);if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"source_type");return r.success?o("WAResultOrError").makeResult({sourceType:r.value,sourceUrl:n.value}):r}function c(e){var t=o("WASmaxParseUtils").assertTag(e,"origin");if(!t.success)return t;var n=o("WASmaxParseUtils").optionalChildWithTag(e,"referral",u);if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"type");return r.success?o("WAResultOrError").makeResult({type:r.value,referral:n.value}):r}function d(e){var t=o("WASmaxParseUtils").assertTag(e,"pricing");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"consumer_country_code");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"business_country_code");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"conversation_status",0,void 0);if(!a.success)return a;var i=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"latest_c2b_timestamp",0,void 0);if(!i.success)return i;var l=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"analytics_conversation_id");if(!l.success)return l;var s=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"b2c_timestamp",0,void 0);return s.success?o("WAResultOrError").makeResult({consumerCountryCode:n.value,businessCountryCode:r.value,conversationStatus:a.value,latestC2bTimestamp:i.value,analyticsConversationId:l.value,b2cTimestamp:s.value}):s}function m(t){var n=o("WASmaxParseUtils").assertTag(t,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t,"biz");if(!r.success)return r;var a=o("WASmaxParseUtils").optionalChildWithTag(r.value,"delivery_context",e);if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(r.value,"origin",c);if(!i.success)return i;var l=o("WASmaxParseUtils").optionalChildWithTag(r.value,"pricing",d);if(!l.success)return l;var s=o("WASmaxParseUtils").attrString(r.value,"paid_convo_id");if(!s.success)return s;var u=o("WASmaxParseUtils").attrStringEnum(r.value,"pricing_model",o("WASmaxInMessagePublishEnums").ENUM_CBP_NBP_PMP);if(!u.success)return u;var m=o("WASmaxParseUtils").attrStringEnum(r.value,"billable",o("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);if(!m.success)return m;var p=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,r.value,"expiration_timestamp",0,void 0);if(!p.success)return p;var _=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"pricing_category");if(!_.success)return _;var f=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,r.value,"pricing_type",o("WASmaxInMessagePublishEnums").ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR);return f.success?o("WAResultOrError").makeResult({bizPaidConvoId:s.value,bizPricingModel:u.value,bizBillable:m.value,bizExpirationTimestamp:p.value,bizPricingCategory:_.value,bizPricingType:f.value,bizDeliveryContext:a.value,bizOrigin:i.value,bizPricing:l.value}):f}l.parseAckPaidConversationBizDeliveryContext=e,l.parseAckPaidConversationBizOriginReferralSourceUrl=s,l.parseAckPaidConversationBizOriginReferral=u,l.parseAckPaidConversationBizOrigin=c,l.parseAckPaidConversationBizPricing=d,l.parseAckPaidConversationMixin=m}),98);
__d("WASmaxInMessagePublishAckPaidGroupConversationMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"biz");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(n.value,"pricing");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"business_country_code");return a.success?o("WAResultOrError").makeResult({bizPricingBusinessCountryCode:a.value}):a}l.parseAckPaidGroupConversationMixin=e}),98);
__d("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup",["WAResultOrError","WASmaxInMessagePublishAckPaidConversationMixin","WASmaxInMessagePublishAckPaidGroupConversationMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInMessagePublishAckPaidConversationMixin").parseAckPaidConversationMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"AckPaidConversation",value:t.value});var n=o("WASmaxInMessagePublishAckPaidGroupConversationMixin").parseAckPaidGroupConversationMixin(e);return n.success?o("WAResultOrError").makeResult({name:"AckPaidGroupConversation",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["AckPaidConversation","AckPaidGroupConversation"],[t,n])}l.parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup=e}),98);
__d("WASmaxInMessagePublishAckRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","7");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckRevokeMixin=e}),98);
__d("WASmaxInMessagePublishServerFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"franking");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"reporting_tag");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(n.value,9,128);return r.success?o("WAResultOrError").makeResult({frankingReportingTagElementValue:r.value}):r}l.parseServerFrankingTagMixin=e}),98);
__d("WASmaxInMessagePublishAckMixin",["WAResultOrError","WASmaxInMessagePublishAckAdminEditMixin","WASmaxInMessagePublishAckAdminRevokeMixin","WASmaxInMessagePublishAckMessageEditMixin","WASmaxInMessagePublishAckMessagePinMixin","WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup","WASmaxInMessagePublishAckRevokeMixin","WASmaxInMessagePublishServerFrankingTagMixin","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",r.value);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"class","message");if(!i.success)return i;var l=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",l.value);if(!s.success)return s;var u=o("WASmaxParseUtils").attrIntRange(e,"t",0,void 0);if(!u.success)return u;var c=o("WASmaxInMessagePublishAckMessageEditMixin").parseAckMessageEditMixin(e),d=o("WASmaxInMessagePublishAckAdminEditMixin").parseAckAdminEditMixin(e),m=o("WASmaxInMessagePublishAckMessagePinMixin").parseAckMessagePinMixin(e),p=o("WASmaxInMessagePublishAckAdminRevokeMixin").parseAckAdminRevokeMixin(e),_=o("WASmaxInMessagePublishAckRevokeMixin").parseAckRevokeMixin(e),f=o("WASmaxInMessagePublishServerFrankingTagMixin").parseServerFrankingTagMixin(e),g=o("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup").parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup(e);return o("WAResultOrError").makeResult({class:i.value,t:u.value,ackMessageEditMixin:c.success?c.value:null,ackAdminEditMixin:d.success?d.value:null,ackMessagePinMixin:m.success?m.value:null,ackAdminRevokeMixin:p.success?p.value:null,ackRevokeMixin:_.success?_.value:null,serverFrankingTagMixin:f.success?f.value:null,ackPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup:g.success?g.value:null})}l.parseAckMixin=e}),98);
__d("WASmaxInMessagePublishApplicationNegativeAckMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"application_error",0,void 0);return n.success?o("WAResultOrError").makeResult({applicationError:n.value}):n}l.parseApplicationNegativeAckMixin=e}),98);
__d("WASmaxInMessagePublishMessageNackRetryAttributesMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"backoff",0,86400);return n.success?o("WAResultOrError").makeResult({backoff:n.value}):n}l.parseMessageNackRetryAttributesMixin=e}),98);
__d("WASmaxInMessagePublishNegativeAckMixin",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishApplicationNegativeAckMixin","WASmaxInMessagePublishMessageNackRetryAttributesMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"error");if(!r.success)return r;var a=o("WASmaxInMessagePublishAckMixin").parseAckMixin(e,t);if(!a.success)return a;var i=o("WASmaxInMessagePublishApplicationNegativeAckMixin").parseApplicationNegativeAckMixin(e),l=o("WASmaxInMessagePublishMessageNackRetryAttributesMixin").parseMessageNackRetryAttributesMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({error:r.value},a.value,{applicationNegativeAckMixin:i.success?i.value:null,messageNackRetryAttributesMixin:l.success?l.value:null}))}l.parseNegativeAckMixin=e}),98);
__d("WASmaxInMessagePublishIndividualResponseNegative",["WAResultOrError","WASmaxInMessagePublishNegativeAckMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrUserJid,e,"recipient");if(!r.success)return r;var a=o("WASmaxInMessagePublishNegativeAckMixin").parseNegativeAckMixin(e,t);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({recipient:r.value},a.value)):a}l.parseIndividualResponseNegative=e}),98);
__d("WASmaxInMessagePublishAckRcatMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"rcat");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytes(n.value);return r.success?o("WAResultOrError").makeResult({rcatElementValue:r.value}):r}l.parseAckRcatMixin=e}),98);
__d("WASmaxInMessagePublishDeviceListStaleMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"phash");return n.success?o("WAResultOrError").makeResult({phash:n.value}):n}l.parseDeviceListStaleMixin=e}),98);
__d("WASmaxInMessagePublishRefreshLIDMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrStringEnum(e,"refresh_lid",o("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);return n.success?o("WAResultOrError").makeResult({refreshLid:n.value}):n}l.parseRefreshLIDMixin=e}),98);
__d("WASmaxInMessagePublishIndividualResponseSuccess",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishAckRcatMixin","WASmaxInMessagePublishDeviceListStaleMixin","WASmaxInMessagePublishEnums","WASmaxInMessagePublishRefreshLIDMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrUserJid,e,"recipient");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrJidEnum,e,"participant",o("WASmaxInMessagePublishEnums").USERJID_USERJID);if(!a.success)return a;var i=o("WASmaxInMessagePublishAckMixin").parseAckMixin(e,t);if(!i.success)return i;var l=o("WASmaxInMessagePublishDeviceListStaleMixin").parseDeviceListStaleMixin(e),s=o("WASmaxInMessagePublishRefreshLIDMixin").parseRefreshLIDMixin(e),u=o("WASmaxInMessagePublishAckRcatMixin").parseAckRcatMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({recipient:r.value,participant:a.value},i.value,{deviceListStaleMixin:l.success?l.value:null,refreshLIDMixin:s.success?s.value:null,ackRcatMixin:u.success?u.value:null}))}l.parseIndividualResponseSuccess=e}),98);
__d("WASmaxOutMessagePublishAppdataMetaAttributeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaAppdata,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{appdata:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeAppdataMetaAttributeMixin=s}),98);
__d("WASmaxOutMessagePublishArmadilloOriginalMessageTimestampMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaOriginalMsgT,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{original_msg_t:o("WAWap").INT(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeArmadilloOriginalMessageTimestampMixin=s}),98);
__d("WASmaxOutMessagePublishAutomatedMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("automated",null));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeAutomatedMixin=s}),98);
__d("WASmaxOutMessagePublishAuthMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.authVerificationTimestamp,n=e.authDisableIosAutofill,r=e.authEnableRiskCheck,a=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("auth",{verification_timestamp:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,t),disable_ios_autofill:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,n),enable_risk_check:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,r)})));return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeAuthMixin=s}),98);
__d("WASmaxOutMessagePublishBizAcceptTsMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.bizAcceptTs,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",{accept_ts:o("WAWap").INT(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizAcceptTsMixin=s}),98);
__d("WASmaxOutMessagePublishBizAutoResponseMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.bizAutoResponse,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",{auto_response:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizAutoResponseMixin=s}),98);
__d("WASmaxOutMessagePublishBizCampaignMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.bizCampaignId,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",{campaign_id:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizCampaignMixin=s}),98);
__d("WASmaxOutMessagePublishBizEngagementDataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.engagementConversationState,n=e.engagementCustomerServiceState,r=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("engagement",{conversation_state:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),customer_service_state:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,n)})));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizEngagementDataMixin=s}),98);
__d("WASmaxOutMessagePublishBizMetadataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n,r=e.metadataAppOwner,a=e.metadataCsidBm,i=e.metadataPaymentBm,l=e.metadataCustomerCategory,s=e.metadataDidBepRun,u=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("metadata",{app_owner:(t=o("WASmaxAttrs")).OPTIONAL((n=o("WAWap")).CUSTOM_STRING,r),csid_bm:t.OPTIONAL(n.CUSTOM_STRING,a),payment_bm:t.OPTIONAL(n.CUSTOM_STRING,i),customer_category:t.OPTIONAL(n.CUSTOM_STRING,l),did_bep_run:t.OPTIONAL(n.CUSTOM_STRING,s)})));return u}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizMetadataMixin=s}),98);
__d("WASmaxOutMessagePublishBizPricingDataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.pricingConsumerCountryCode,n=e.pricingBusinessCountryCode,r=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("pricing",{consumer_country_code:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),business_country_code:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,n)})));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizPricingDataMixin=s}),98);
__d("WASmaxOutMessagePublishBizRolesMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.bizHostStorage,n=e.bizActualActors,r=e.bizPrivacyModeTs,a=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",{host_storage:o("WAWap").INT(t),actual_actors:o("WAWap").INT(n),privacy_mode_ts:o("WAWap").INT(r)}));return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizRolesMixin=s}),98);
__d("WASmaxMixinGroupExhaustiveError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="SmaxMixinGroupExhaustiveError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.SmaxMixinGroupExhaustiveError=e}),66);
__d("WASmaxOutMessagePublishButtonsMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("buttons",null)));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeButtonsMixin=s}),98);
__d("WASmaxOutMessagePublishExtensionsMetadataMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.capabilityArgs,n=o("WASmaxJsx").smax("capabilities",null,o("WASmaxChildren").REPEATED_CHILD(s,t,1,50));return n}function s(e){var t=e.capabilityName,n=o("WASmaxJsx").smax("capability",{name:o("WAWap").CUSTOM_STRING(t)});return n}function u(t){var n=t.capabilitiesArgs,r=t.extensionsMetadataWellVersion,a=t.extensionsMetadataDataApiVersion,i=t.extensionsMetadataFlowMessageVersion,l=o("WASmaxJsx").smax("native_flow",null,o("WASmaxJsx").smax("extensions_metadata",{well_version:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,r),data_api_version:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,a),flow_message_version:o("WAWap").INT(i)},o("WASmaxChildren").OPTIONAL_CHILD(e,n)));return l}function c(e,t){var n=u(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeExtensionsMetadataExtensionsMetadataCapabilities=e,l.makeExtensionsMetadataExtensionsMetadataCapabilitiesCapability=s,l.mergeExtensionsMetadataMixin=c}),98);
__d("WASmaxOutMessagePublishMixedMetadataMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.paymentsMetadataVersion,n=o("WASmaxJsx").smax("native_flow",null,o("WASmaxJsx").smax("mixed_metadata",null,o("WASmaxJsx").smax("payments_metadata",{version:o("WAWap").INT(t)})));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMixedMetadataMixin=s}),98);
__d("WASmaxOutMessagePublishNativeFlowMessageTypeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishExtensionsMetadataMixin","WASmaxOutMessagePublishMixedMetadataMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.nativeFlowName,n=e.nativeFlowV,r=e.extensionsMetadataMixinArgs,a=e.mixedMetadataMixinArgs,i=o("WASmaxJsx").smax("interactive",{type:"native_flow"},o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishMixedMetadataMixin").mergeMixedMetadataMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishExtensionsMetadataMixin").mergeExtensionsMetadataMixin,o("WASmaxJsx").smax("native_flow",{name:o("WAWap").CUSTOM_STRING(t),v:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,n)}),r),a));return i}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeNativeFlowMessageTypeMixin=s}),98);
__d("WASmaxOutMessagePublishInteractiveMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishNativeFlowMessageTypeMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.hasInteractiveV1,n=e.nativeFlowMessageTypeMixinArgs,r=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxOutMessagePublishNativeFlowMessageTypeMixin").mergeNativeFlowMessageTypeMixin(o("WASmaxJsx").smax("interactive",{v:o("WASmaxAttrs").OPTIONAL_LITERAL("1",t)}),n)));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeInteractiveMixin=s}),98);
__d("WASmaxOutMessagePublishNativeFlowMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.bizNativeFlowName,n=e.bizNativeFlowVersion,r=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",{native_flow_name:o("WAWap").CUSTOM_STRING(t),native_flow_version:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,n)}));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeNativeFlowMixin=s}),98);
__d("WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishButtonsMixin","WASmaxOutMessagePublishInteractiveMixin","WASmaxOutMessagePublishNativeFlowMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isButtons)return o("WASmaxOutMessagePublishButtonsMixin").mergeButtonsMixin(e);if(t.nativeFlow)return o("WASmaxOutMessagePublishNativeFlowMixin").mergeNativeFlowMixin(e,t.nativeFlow);if(t.interactive)return o("WASmaxOutMessagePublishInteractiveMixin").mergeInteractiveMixin(e,t.interactive);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeButtonsOrNativeFlowOrInteractiveMixinGroup=e}),98);
__d("WASmaxOutMessagePublishConversionRecipientStatusMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.conversionRecipientStatus,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("conversion",{recipient_status:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeConversionRecipientStatusMixin=s}),98);
__d("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.ctwaAttributionElementValue,n=o("WASmaxJsx").smax("ctwa_attribution",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeClickToWhatsAppAttributionMixin=s}),98);
__d("WASmaxOutMessagePublishCtwaAttributionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishClickToWhatsAppAttributionMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin").mergeClickToWhatsAppAttributionMixin(o("WASmaxJsx").smax("ctwa_attribution",null),e);return t}function s(t){var n=t.ctwaAttributionArgs,r=o("WASmaxJsx").smax("message",null,o("WASmaxChildren").OPTIONAL_CHILD(e,n));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeCtwaAttributionCtwaAttribution=e,l.mergeCtwaAttributionMixin=u}),98);
__d("WASmaxOutMessagePublishClickToWhatsAppTypeMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.sourceUrlElementValue,n=o("WASmaxJsx").smax("source_url",null,t);return n}function s(t){var n,r,a=t.sourceUrlArgs,i=t.ctwaConversionSource,l=t.ctwaConversionData,s=t.ctwaSourceType,u=t.ctwaEntryPointConversionSource,c=t.ctwaEntryPointConversionApp,d=t.ctwaSignals,m=o("WASmaxJsx").smax("ctwa",{conversion_source:(n=o("WASmaxAttrs")).OPTIONAL((r=o("WAWap")).CUSTOM_STRING,i),conversion_data:n.OPTIONAL(r.CUSTOM_STRING,l),source_type:n.OPTIONAL(r.CUSTOM_STRING,s),entry_point_conversion_source:n.OPTIONAL(r.CUSTOM_STRING,u),entry_point_conversion_app:n.OPTIONAL(r.CUSTOM_STRING,c),signals:n.OPTIONAL(r.CUSTOM_STRING,d)},o("WASmaxChildren").OPTIONAL_CHILD(e,a));return m}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeClickToWhatsAppTypeSourceUrl=e,l.mergeClickToWhatsAppTypeMixin=u}),98);
__d("WASmaxOutMessagePublishCtwaConversionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishClickToWhatsAppTypeMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishClickToWhatsAppTypeMixin").mergeClickToWhatsAppTypeMixin(o("WASmaxJsx").smax("ctwa",null),e);return t}function s(t){var n=t.ctwaArgs,r=o("WASmaxJsx").smax("message",null,o("WASmaxChildren").OPTIONAL_CHILD(e,n));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeCtwaConversionCtwa=e,l.mergeCtwaConversionMixin=u}),98);
__d("WASmaxOutMessagePublishDeliveryContextMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n,r=e.deliveryContextHsmMaxBid,a=e.deliveryContextOptimizationGoal,i=e.deliveryContextTemplateId,l=e.deliveryContextCampaignId,s=e.deliveryContextSourceType,u=e.deliveryContextTierType,c=e.deliveryContextDeliveryType,d=e.deliveryContextClientToken,m=e.deliveryContextPrice,p=e.deliveryContextWabaId,_=e.deliveryContextQualityFlag,f=e.deliveryContextIsZeroRatedTemplate,g=e.deliveryContextPartnerId,h=e.deliveryContextAppId,y=e.deliveryContextVertical,C=e.deliveryContextBmMessageLimitStatus,b=e.deliveryContextDisableIosAutofill,v=e.deliveryContextAuthBlockRecentRegisters,S=e.deliveryContextMaskLinkedDevicesWithoutResend,R=e.deliveryContextEncryptedDeterministicTemplateId,L=e.deliveryContextShouldBypassIntegrityPhoneLimit,E=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("delivery_context",{hsm_max_bid:(t=o("WASmaxAttrs")).OPTIONAL((n=o("WAWap")).INT,r),optimization_goal:t.OPTIONAL(n.CUSTOM_STRING,a),template_id:t.OPTIONAL(n.CUSTOM_STRING,i),campaign_id:t.OPTIONAL(n.CUSTOM_STRING,l),source_type:t.OPTIONAL(n.CUSTOM_STRING,s),tier_type:t.OPTIONAL(n.CUSTOM_STRING,u),delivery_type:t.OPTIONAL(n.CUSTOM_STRING,c),client_token:t.OPTIONAL(n.CUSTOM_STRING,d),price:t.OPTIONAL(n.INT,m),waba_id:t.OPTIONAL(n.CUSTOM_STRING,p),quality_flag:t.OPTIONAL(n.CUSTOM_STRING,_),is_zero_rated_template:t.OPTIONAL(n.CUSTOM_STRING,f),partner_id:t.OPTIONAL(n.CUSTOM_STRING,g),app_id:t.OPTIONAL(n.CUSTOM_STRING,h),vertical:t.OPTIONAL(n.INT,y),bm_message_limit_status:t.OPTIONAL(n.CUSTOM_STRING,C),disable_ios_autofill:t.OPTIONAL(n.CUSTOM_STRING,b),auth_block_recent_registers:t.OPTIONAL(n.CUSTOM_STRING,v),mask_linked_devices_without_resend:t.OPTIONAL(n.CUSTOM_STRING,S),encrypted_deterministic_template_id:t.OPTIONAL(n.CUSTOM_STRING,R),should_bypass_integrity_phone_limit:t.OPTIONAL(n.CUSTOM_STRING,L)})));return E}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeDeliveryContextMixin=s}),98);
__d("WASmaxOutMessagePublishCapabilitiesMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.hasFeatureV1,n=o("WASmaxJsx").smax("feature",{name:"full_catalog",v:o("WASmaxAttrs").OPTIONAL_LITERAL("1",t)});return n}function s(t){var n=t.featureArgs,r=o("WASmaxJsx").smax("hsm",null,o("WASmaxJsx").smax("capabilities",null,o("WASmaxChildren").OPTIONAL_CHILD(e,n)));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeCapabilitiesCapabilitiesFeature=e,l.mergeCapabilitiesMixin=u}),98);
__d("WASmaxOutMessagePublishHSMReviewMetadataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n,r=e.anyCategory,a=e.anyTag,i=e.anyId,l=e.anySubTag,s=e.anyLibraryTemplateId,u=e.anyIsTemplateFromLibraryEdited,c=o("WASmaxJsx").smax("smax$any",{category:(t=o("WASmaxAttrs")).OPTIONAL((n=o("WAWap")).CUSTOM_STRING,r),tag:t.OPTIONAL(n.CUSTOM_STRING,a),id:t.OPTIONAL(n.CUSTOM_STRING,i),sub_tag:t.OPTIONAL(n.CUSTOM_STRING,l),library_template_id:t.OPTIONAL(n.CUSTOM_STRING,s),is_template_from_library_edited:t.OPTIONAL(n.CUSTOM_STRING,u)});return c}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeHSMReviewMetadataMixin=s}),98);
__d("WASmaxOutMessagePublishQualityTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.hasQualityTokenV1,n=e.qualityTokenElementValue,r=o("WASmaxJsx").smax("hsm",null,o("WASmaxJsx").smax("quality_token",{v:o("WASmaxAttrs").OPTIONAL_LITERAL("1",t)},n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeQualityTokenMixin=s}),98);
__d("WASmaxOutMessagePublishHsmMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishCapabilitiesMixin","WASmaxOutMessagePublishHSMReviewMetadataMixin","WASmaxOutMessagePublishQualityTokenMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.messageTtl,r=e.hasHsmV1,a=e.hasHsmButtons1,i=e.hsmObjective,l=e.hSMReviewMetadataMixinArgs,s=e.capabilitiesMixinArgs,u=e.qualityTokenMixinArgs,c=o("WASmaxJsx").smax("message",{ttl:(t=o("WASmaxAttrs")).OPTIONAL(o("WAWap").INT,n)},o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishQualityTokenMixin").mergeQualityTokenMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishCapabilitiesMixin").mergeCapabilitiesMixin,o("WASmaxOutMessagePublishHSMReviewMetadataMixin").mergeHSMReviewMetadataMixin(o("WASmaxJsx").smax("hsm",{v:t.OPTIONAL_LITERAL("1",r),buttons:t.OPTIONAL_LITERAL("1",a),objective:t.OPTIONAL(o("WAWap").CUSTOM_STRING,i)}),l),s),u));return c}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeHsmMixin=s}),98);
__d("WASmaxOutMessagePublishQualityControlMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.decisionSourceValue,n=o("WASmaxJsx").smax("decision_source",{value:o("WAWap").CUSTOM_STRING(t)});return n}function s(t){var n=t.decisionSourceArgs,r=t.qualityControlSourceType,a=t.qualityControlDecisionId,i=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("quality_control",{source_type:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,r),decision_id:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,a)},o("WASmaxChildren").REPEATED_CHILD(e,n,0,1/0))));return i}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeQualityControlBizQualityControlDecisionSource=e,l.mergeQualityControlMixin=u}),98);
__d("WASmaxOutMessagePublishBizMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAuthMixin","WASmaxOutMessagePublishBizAcceptTsMixin","WASmaxOutMessagePublishBizAutoResponseMixin","WASmaxOutMessagePublishBizCampaignMixin","WASmaxOutMessagePublishBizEngagementDataMixin","WASmaxOutMessagePublishBizMetadataMixin","WASmaxOutMessagePublishBizPricingDataMixin","WASmaxOutMessagePublishBizRolesMixin","WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup","WASmaxOutMessagePublishConversionRecipientStatusMixin","WASmaxOutMessagePublishCtwaAttributionMixin","WASmaxOutMessagePublishCtwaConversionMixin","WASmaxOutMessagePublishDeliveryContextMixin","WASmaxOutMessagePublishHsmMixin","WASmaxOutMessagePublishQualityControlMixin"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.hsmMixinArgs,r=e.bizRolesMixinArgs,a=e.bizAutoResponseMixinArgs,i=e.bizAcceptTsMixinArgs,l=e.bizCampaignMixinArgs,s=e.deliveryContextMixinArgs,u=e.qualityControlMixinArgs,c=e.authMixinArgs,d=e.conversionRecipientStatusMixinArgs,m=e.ctwaConversionMixinArgs,p=e.bizMetadataMixinArgs,_=e.ctwaAttributionMixinArgs,f=e.bizEngagementDataMixinArgs,g=e.bizPricingDataMixinArgs,h=e.buttonsOrNativeFlowOrInteractiveMixinGroupArgs,y=(t=o("WASmaxMixins")).optionalMerge(o("WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup").mergeButtonsOrNativeFlowOrInteractiveMixinGroup,t.optionalMerge(o("WASmaxOutMessagePublishBizPricingDataMixin").mergeBizPricingDataMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizEngagementDataMixin").mergeBizEngagementDataMixin,t.optionalMerge(o("WASmaxOutMessagePublishCtwaAttributionMixin").mergeCtwaAttributionMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizMetadataMixin").mergeBizMetadataMixin,t.optionalMerge(o("WASmaxOutMessagePublishCtwaConversionMixin").mergeCtwaConversionMixin,t.optionalMerge(o("WASmaxOutMessagePublishConversionRecipientStatusMixin").mergeConversionRecipientStatusMixin,t.optionalMerge(o("WASmaxOutMessagePublishAuthMixin").mergeAuthMixin,t.optionalMerge(o("WASmaxOutMessagePublishQualityControlMixin").mergeQualityControlMixin,t.optionalMerge(o("WASmaxOutMessagePublishDeliveryContextMixin").mergeDeliveryContextMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizCampaignMixin").mergeBizCampaignMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizAcceptTsMixin").mergeBizAcceptTsMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizAutoResponseMixin").mergeBizAutoResponseMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizRolesMixin").mergeBizRolesMixin,t.optionalMerge(o("WASmaxOutMessagePublishHsmMixin").mergeHsmMixin,o("WASmaxJsx").smax("message",null),n),r),a),i),l),s),u),c),d),m),p),_),f),g),h);return y}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBizMixin=s}),98);
__d("WASmaxOutMessagePublishClientFrankingTagMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.frankingTagElementValue,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("franking",null,o("WASmaxJsx").smax("franking_tag",null,t)));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeClientFrankingTagMixin=s}),98);
__d("WASmaxOutMessagePublishClientReportingTokenMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.reportingTokenV,n=e.reportingTokenElementValue,r=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("reporting",null,o("WASmaxJsx").smax("reporting_token",{v:o("WAWap").INT(t)},n)));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeClientReportingTokenMixin=s}),98);
__d("WASmaxOutMessagePublishDeviceIdentityMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.deviceIdentityElementValue,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("device-identity",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeDeviceIdentityMixin=s}),98);
__d("WASmaxOutMessagePublishInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.testConfig,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("test",{config:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeInternalTestMixin=s}),98);
__d("WASmaxOutMessagePublishLIDSessionDeprecationMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaDeprecatedLidSession,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{deprecated_lid_session:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeLIDSessionDeprecationMixin=s}),98);
__d("WASmaxOutMessagePublishMessageAssociationTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaMessageAssociationType,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{message_association_type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMessageAssociationTypeMixin=s}),98);
__d("WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("meta",{"decrypt-fail":"hide"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeMetaHideDecryptionPlaceholderMixin=s}),98);
__d("WASmaxOutMessagePublishMulticastMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("multicast",null));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeMulticastMixin=s}),98);
__d("WASmaxOutMessagePublishNoExtraFanoutMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{device_fanout:"false"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeNoExtraFanoutMixin=s}),98);
__d("WASmaxOutMessagePublishAnonPaddingMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.taPadElementValue,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("ta_pad",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeAnonPaddingMixin=s}),98);
__d("WASmaxOutMessagePublishWireSizePaddingMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.paddingElementValue,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("padding",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeWireSizePaddingMixin=s}),98);
__d("WASmaxOutMessagePublishPaddingMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAnonPaddingMixin","WASmaxOutMessagePublishWireSizePaddingMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anonPaddingMixinArgs,n=e.wireSizePaddingMixinArgs,r=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishWireSizePaddingMixin").mergeWireSizePaddingMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishAnonPaddingMixin").mergeAnonPaddingMixin,o("WASmaxJsx").smax("message",null),t),n);return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePaddingMixin=s}),98);
__d("WASmaxOutMessagePublishPreFilledNumberMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("url_number",null));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergePreFilledNumberMixin=s}),98);
__d("WASmaxOutMessagePublishPreFilledTextMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("url_text",null));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergePreFilledTextMixin=s}),98);
__d("WASmaxOutMessagePublishSenderIntentMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{sender_intent:"hosted"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeSenderIntentMixin=s}),98);
__d("WASmaxOutMessagePublishRequestIDMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.requestIdElementValue,n=o("WASmaxJsx").smax("trace",null,o("WASmaxJsx").smax("request_id",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRequestIDMixin=s}),98);
__d("WASmaxOutMessagePublishTraceIDMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.edgeIdElementValue,n=o("WASmaxJsx").smax("edge_id",null,t);return n}function s(e){var t=e.deviceArgs,n=e.correlationIdType,r=e.idElementValue,a=o("WASmaxJsx").smax("correlation_id",{type:o("WAWap").CUSTOM_STRING(n)},o("WASmaxJsx").smax("id",null,r),o("WASmaxChildren").OPTIONAL_CHILD(c,t));return a}function u(e){var t=e.observabilityFlagsId,n=o("WASmaxJsx").smax("observability_flags",{id:o("WAWap").INT(t)});return n}function c(e){var t=e.deviceId,n=o("WASmaxJsx").smax("device",{id:o("WAWap").INT(t)});return n}function d(t){var n=t.edgeIdArgs,r=t.correlationIdArgs,a=t.observabilityFlagsArgs,i=t.traceIdElementValue,l=o("WASmaxJsx").smax("trace",null,[o("WASmaxJsx").smax("trace_id",null,i),o("WASmaxChildren").OPTIONAL_CHILD(e,n)].concat(o("WASmaxChildren").REPEATED_CHILD(s,r,0,10),[o("WASmaxChildren").OPTIONAL_CHILD(u,a)]));return l}function m(e,t){var n=d(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeTraceIDEdgeId=e,l.makeTraceIDCorrelationId=s,l.makeTraceIDObservabilityFlags=u,l.makeTraceIDCorrelationIdDevice=c,l.mergeTraceIDMixin=m}),98);
__d("WASmaxOutMessagePublishRequestOrTraceIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishRequestIDMixin","WASmaxOutMessagePublishTraceIDMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.requestID)return o("WASmaxOutMessagePublishRequestIDMixin").mergeRequestIDMixin(e,t.requestID);if(t.traceID)return o("WASmaxOutMessagePublishTraceIDMixin").mergeTraceIDMixin(e,t.traceID);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeRequestOrTraceIDMixinGroup=e}),98);
__d("WASmaxOutMessagePublishTraceContextMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishRequestOrTraceIDMixinGroup"],(function(t,n,r,o,a,i,l){function e(e){var t=e.requestOrTraceIDMixinGroupArgs,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxOutMessagePublishRequestOrTraceIDMixinGroup").mergeRequestOrTraceIDMixinGroup(o("WASmaxJsx").smax("trace",null),t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeTraceContextMixin=s}),98);
__d("WASmaxOutMessagePublishVerifiedNameNameMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageVerifiedName,n=o("WASmaxJsx").smax("message",{verified_name:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeVerifiedNameNameMixin=s}),98);
__d("WASmaxOutMessagePublishWebDriverConfigMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaWebdriverConfig,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{webdriver_config:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeWebDriverConfigMixin=s}),98);
__d("WASmaxOutMessagePublishBaseMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAutomatedMixin","WASmaxOutMessagePublishBizMixin","WASmaxOutMessagePublishClientFrankingTagMixin","WASmaxOutMessagePublishClientReportingTokenMixin","WASmaxOutMessagePublishDeviceIdentityMixin","WASmaxOutMessagePublishInternalTestMixin","WASmaxOutMessagePublishLIDSessionDeprecationMixin","WASmaxOutMessagePublishMessageAssociationTypeMixin","WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin","WASmaxOutMessagePublishMulticastMixin","WASmaxOutMessagePublishNoExtraFanoutMixin","WASmaxOutMessagePublishPaddingMixin","WASmaxOutMessagePublishPreFilledNumberMixin","WASmaxOutMessagePublishPreFilledTextMixin","WASmaxOutMessagePublishSenderIntentMixin","WASmaxOutMessagePublishTraceContextMixin","WASmaxOutMessagePublishVerifiedNameNameMixin","WASmaxOutMessagePublishWebDriverConfigMixin"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.deviceIdentityMixinArgs,r=e.hasNoExtraFanout,a=e.hasMulticast,i=e.hasPreFilledText,l=e.hasPreFilledNumber,s=e.hasAutomated,u=e.bizMixinArgs,c=e.verifiedNameNameMixinArgs,d=e.clientFrankingTagMixinArgs,m=e.clientReportingTokenMixinArgs,p=e.internalTestMixinArgs,_=e.hasMetaHideDecryptionPlaceholder,f=e.traceContextMixinArgs,g=e.hasSenderIntent,h=e.lIDSessionDeprecationMixinArgs,y=e.paddingMixinArgs,C=e.webDriverConfigMixinArgs,b=e.messageAssociationTypeMixinArgs,v=(t=o("WASmaxMixins")).optionalMerge(o("WASmaxOutMessagePublishMessageAssociationTypeMixin").mergeMessageAssociationTypeMixin,t.optionalMerge(o("WASmaxOutMessagePublishWebDriverConfigMixin").mergeWebDriverConfigMixin,t.optionalMerge(o("WASmaxOutMessagePublishPaddingMixin").mergePaddingMixin,t.optionalMerge(o("WASmaxOutMessagePublishLIDSessionDeprecationMixin").mergeLIDSessionDeprecationMixin,t.optionalMerge(o("WASmaxOutMessagePublishSenderIntentMixin").mergeSenderIntentMixin,t.optionalMerge(o("WASmaxOutMessagePublishTraceContextMixin").mergeTraceContextMixin,t.optionalMerge(o("WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin").mergeMetaHideDecryptionPlaceholderMixin,t.optionalMerge(o("WASmaxOutMessagePublishInternalTestMixin").mergeInternalTestMixin,t.optionalMerge(o("WASmaxOutMessagePublishClientReportingTokenMixin").mergeClientReportingTokenMixin,t.optionalMerge(o("WASmaxOutMessagePublishClientFrankingTagMixin").mergeClientFrankingTagMixin,t.optionalMerge(o("WASmaxOutMessagePublishVerifiedNameNameMixin").mergeVerifiedNameNameMixin,t.optionalMerge(o("WASmaxOutMessagePublishBizMixin").mergeBizMixin,t.optionalMerge(o("WASmaxOutMessagePublishAutomatedMixin").mergeAutomatedMixin,t.optionalMerge(o("WASmaxOutMessagePublishPreFilledNumberMixin").mergePreFilledNumberMixin,t.optionalMerge(o("WASmaxOutMessagePublishPreFilledTextMixin").mergePreFilledTextMixin,t.optionalMerge(o("WASmaxOutMessagePublishMulticastMixin").mergeMulticastMixin,t.optionalMerge(o("WASmaxOutMessagePublishNoExtraFanoutMixin").mergeNoExtraFanoutMixin,t.optionalMerge(o("WASmaxOutMessagePublishDeviceIdentityMixin").mergeDeviceIdentityMixin,o("WASmaxJsx").smax("message",null),n),r),a),i),l),s),u),c),d),m),p),_),f),g),h),y),C),b);return v}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBaseMixin=s}),98);
__d("WASmaxOutMessagePublishGroupInviteTargetMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaGroupInvite,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{group_invite:o("WAWap").GROUP_JID(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeGroupInviteTargetMixin=s}),98);
__d("WASmaxOutMessagePublishBotFeedbackMessageTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("bot",{type:"feedback"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBotFeedbackMessageTypeMixin=s}),98);
__d("WASmaxOutMessagePublishEncRetryMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encCount,n=o("WASmaxJsx").smax("enc",{count:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncRetryMixin=s}),98);
__d("WASmaxOutMessagePublishAvatarStickerTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("enc",{sticker_type:"avatar"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeAvatarStickerTypeMixin=s}),98);
__d("WASmaxOutMessagePublishMediaTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encMediatype,n=o("WASmaxJsx").smax("enc",{mediatype:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMediaTypeMixin=s}),98);
__d("WASmaxOutMessagePublishEncMediaTypeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAvatarStickerTypeMixin","WASmaxOutMessagePublishMediaTypeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encNativeFlowName,n=e.hasAvatarStickerType,r=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishAvatarStickerTypeMixin").mergeAvatarStickerTypeMixin,o("WASmaxOutMessagePublishMediaTypeMixin").mergeMediaTypeMixin(o("WASmaxJsx").smax("enc",{native_flow_name:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}),e),n);return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncMediaTypeMixin=s}),98);
__d("WASmaxOutMessagePublishEncPayloadMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encElementValue,n=o("WASmaxJsx").smax("enc",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncPayloadMixin=s}),98);
__d("WASmaxOutMessagePublishEncSessionTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("enc",{session_type:"pq"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeEncSessionTypeMixin=s}),98);
__d("WASmaxOutMessagePublishEncStateMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encState,n=o("WASmaxJsx").smax("enc",{state:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncStateMixin=s}),98);
__d("WASmaxOutMessagePublishEncStateOrSessionTypeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncSessionTypeMixin","WASmaxOutMessagePublishEncStateMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.encState)return o("WASmaxOutMessagePublishEncStateMixin").mergeEncStateMixin(e,t.encState);if(t.isEncSessionType)return o("WASmaxOutMessagePublishEncSessionTypeMixin").mergeEncSessionTypeMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeEncStateOrSessionTypeMixinGroup=e}),98);
__d("WASmaxOutMessagePublishEncTypeIndividualMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncMediaTypeMixin","WASmaxOutMessagePublishEncPayloadMixin","WASmaxOutMessagePublishEncStateOrSessionTypeMixinGroup","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encType,n=e.encMediaTypeMixinArgs,r=e.encStateOrSessionTypeMixinGroupArgs,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishEncStateOrSessionTypeMixinGroup").mergeEncStateOrSessionTypeMixinGroup,o("WASmaxOutMessagePublishEncPayloadMixin").mergeEncPayloadMixin(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishEncMediaTypeMixin").mergeEncMediaTypeMixin,o("WASmaxJsx").smax("enc",{type:o("WAWap").CUSTOM_STRING(t)}),n),e),r);return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncTypeIndividualMixin=s}),98);
__d("WASmaxOutMessagePublishEncVersion2Mixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("enc",{v:"2"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeEncVersion2Mixin=s}),98);
__d("WASmaxOutMessagePublishEncVersionFutureproofMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encV,n=o("WASmaxJsx").smax("enc",{v:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncVersionFutureproofMixin=s}),98);
__d("WASmaxOutMessagePublishEncVersionBot",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncVersion2Mixin","WASmaxOutMessagePublishEncVersionFutureproofMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isEncVersion2)return o("WASmaxOutMessagePublishEncVersion2Mixin").mergeEncVersion2Mixin(e);if(t.encVersionFutureproof)return o("WASmaxOutMessagePublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(e,t.encVersionFutureproof);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeEncVersionBot=e}),98);
__d("WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encDuration,n=o("WASmaxJsx").smax("enc",{mediatype:"livelocation",duration:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncLiveLocationDeprecatedMixin=s}),98);
__d("WASmaxOutMessagePublishEncLiveLocationMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encDuration,n=o("WASmaxJsx").smax("enc",{mediatype:"livelocation",duration:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncLiveLocationMixin=s}),98);
__d("WASmaxOutMessagePublishMediaTypeOrEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin","WASmaxOutMessagePublishEncLiveLocationMixin","WASmaxOutMessagePublishMediaTypeMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.mediaType)return o("WASmaxOutMessagePublishMediaTypeMixin").mergeMediaTypeMixin(e,t.mediaType);if(t.encLiveLocation)return o("WASmaxOutMessagePublishEncLiveLocationMixin").mergeEncLiveLocationMixin(e,t.encLiveLocation);if(t.encLiveLocationDeprecated)return o("WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin").mergeEncLiveLocationDeprecatedMixin(e,t.encLiveLocationDeprecated);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeMediaTypeOrEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup=e}),98);
__d("WASmaxOutMessagePublishBotRequestMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncRetryMixin","WASmaxOutMessagePublishEncTypeIndividualMixin","WASmaxOutMessagePublishEncVersionBot","WASmaxOutMessagePublishMediaTypeOrEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toJid,n=e.encRetryMixinArgs,r=e.encTypeIndividualMixinArgs,a=e.encVersionBotArgs,i=e.mediaTypeOrEncLiveLocationOrEncLiveLocationDeprecatedMixinGroupArgs,l=o("WASmaxJsx").smax("to",{jid:o("WAWap").JID(t)},o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishMediaTypeOrEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup").mergeMediaTypeOrEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup,o("WASmaxOutMessagePublishEncVersionBot").mergeEncVersionBot(o("WASmaxOutMessagePublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishEncRetryMixin").mergeEncRetryMixin,o("WASmaxJsx").smax("enc",null),n),r),a),i));return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotRequestMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeMediaMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"media"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeMediaMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeTextMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"text"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeTextMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishContentTypeTextMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isContentTypeText)return o("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(e);if(t.isContentTypeMedia)return o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeContentTypeTextOrMediaMixinGroup=e}),98);
__d("WASmaxOutMessagePublishBotMetricsEntryPointMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaOrigin,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{origin:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotMetricsEntryPointMixin=s}),98);
__d("WASmaxOutMessagePublishBotClientMultiThreadIDMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botClientThreadId,n=o("WASmaxJsx").smax("bot",{client_thread_id:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotClientMultiThreadIDMixin=s}),98);
__d("WASmaxOutMessagePublishBotConversationThreadIDMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botConversationThreadId,n=o("WASmaxJsx").smax("bot",{conversation_thread_id:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotConversationThreadIDMixin=s}),98);
__d("WASmaxOutMessagePublishBotClientMultiThreadIDMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotClientMultiThreadIDMixin","WASmaxOutMessagePublishBotConversationThreadIDMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botClientMultiThreadIDMixinArgs,n=e.botConversationThreadIDMixinArgs,r=o("WASmaxJsx").smax("message",null,o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishBotConversationThreadIDMixin").mergeBotConversationThreadIDMixin,o("WASmaxOutMessagePublishBotClientMultiThreadIDMixin").mergeBotClientMultiThreadIDMixin(o("WASmaxJsx").smax("bot",null),t),n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotClientMultiThreadIDMessageMixin=s}),98);
__d("WASmaxOutMessagePublishBotLocalAutomatedTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botLocalAutomatedType,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("bot",{local_automated_type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotLocalAutomatedTypeMixin=s}),98);
__d("WASmaxOutMessagePublishBotMessageTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botType,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("bot",{type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotMessageTypeMixin=s}),98);
__d("WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaThreadOrigin,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{thread_origin:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotMetricsThreadEntryPointMixin=s}),98);
__d("WASmaxOutMessagePublishBotModeSelectionMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botModeSelection,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("bot",{mode_selection:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotModeSelectionMixin=s}),98);
__d("WASmaxOutMessagePublishBotPersonaTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botPersonaType,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("bot",{persona_type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotPersonaTypeMixin=s}),98);
__d("WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botFeedbackRequested,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("bot",{feedback_requested:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBusinessBotMessageFeedbackRequestedMixin=s}),98);
__d("WASmaxOutMessagePublishBusinessBotMessageMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.botBizBot,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("bot",{biz_bot:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBusinessBotMessageMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeEventMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaEventType,n=o("WASmaxJsx").smax("message",{type:"event"},o("WASmaxJsx").smax("meta",{event_type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypeEventMixin=s}),98);
__d("WASmaxOutMessagePublishProductListMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("list",{type:"product_list"})));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeProductListMixin=s}),98);
__d("WASmaxOutMessagePublishSingleSelectListMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.listV,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("biz",null,o("WASmaxJsx").smax("list",{type:"single_select",v:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)})));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeSingleSelectListMixin=s}),98);
__d("WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishProductListMixin","WASmaxOutMessagePublishSingleSelectListMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.singleSelectList)return o("WASmaxOutMessagePublishSingleSelectListMixin").mergeSingleSelectListMixin(e,t.singleSelectList);if(t.isProductList)return o("WASmaxOutMessagePublishProductListMixin").mergeProductListMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeSingleSelectOrProductListMixinGroup=e}),98);
__d("WASmaxOutMessagePublishContentTypeListFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("to",null,o("WASmaxJsx").smax("enc",{mediatype:"list"}));return e}function s(t){var n=t.toCount,r=t.singleSelectOrProductListMixinGroupArgs,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup").mergeSingleSelectOrProductListMixinGroup,o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").HOMOGENEOUS_CHILD_COUNT(e,n)))),r);return a}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeContentTypeListFanoutParticipantsTo=e,l.mergeContentTypeListFanoutMixin=u}),98);
__d("WASmaxOutMessagePublishLiveLocationModeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaLivelocMode,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{liveloc_mode:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeLiveLocationModeMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishLiveLocationModeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encDuration,n=o("WASmaxJsx").smax("to",null,o("WASmaxJsx").smax("enc",{mediatype:"livelocation",duration:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,t)}));return n}function s(t){var n=t.toArgs,r=t.liveLocationModeMixinArgs,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishLiveLocationModeMixin").mergeLiveLocationModeMixin,o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").HOMOGENEOUS_CHILD(e,n)))),r);return a}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeContentTypeLiveLocationFanoutParticipantsTo=e,l.mergeContentTypeLiveLocationFanoutMixin=u}),98);
__d("WASmaxOutMessagePublishContentTypeMedianotifyMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"medianotify"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeMedianotifyMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishContentTypeMedianotifyMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isContentTypeMedia)return o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(e);if(t.isContentTypeMedianotify)return o("WASmaxOutMessagePublishContentTypeMedianotifyMixin").mergeContentTypeMedianotifyMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeContentTypeMediaOrMedianotifyMixinGroup=e}),98);
__d("WASmaxOutMessagePublishSenderContentBindingMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.senderContentBindingElementValue,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("sender_content_binding",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeSenderContentBindingMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup","WASmaxOutMessagePublishSenderContentBindingMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encMediatype,n=e.hasEncStickerTypeAvatar,r=e.encNativeFlowName,a=o("WASmaxJsx").smax("to",null,o("WASmaxJsx").smax("enc",{mediatype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),sticker_type:o("WASmaxAttrs").OPTIONAL_LITERAL("avatar",n),native_flow_name:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,r)}));return a}function s(t){var n=t.toArgs,r=t.senderContentBindingMixinArgs,a=t.contentTypeMediaOrMedianotifyMixinGroupArgs,i=o("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup").mergeContentTypeMediaOrMedianotifyMixinGroup(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishSenderContentBindingMixin").mergeSenderContentBindingMixin,o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").HOMOGENEOUS_CHILD(e,n))),r),a);return i}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeContentTypeMediaFanoutDeprecatedParticipantsTo=e,l.mergeContentTypeMediaFanoutDeprecatedMixin=u}),98);
__d("WASmaxOutMessagePublishContentTypeMediaFanoutMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup","WASmaxOutMessagePublishSenderContentBindingMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encMediatype,n=e.hasEncStickerTypeAvatar,r=e.encNativeFlowName,a=o("WASmaxJsx").smax("to",null,o("WASmaxJsx").smax("enc",{mediatype:o("WAWap").CUSTOM_STRING(t),sticker_type:o("WASmaxAttrs").OPTIONAL_LITERAL("avatar",n),native_flow_name:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,r)}));return a}function s(t){var n=t.toArgs,r=t.senderContentBindingMixinArgs,a=t.contentTypeMediaOrMedianotifyMixinGroupArgs,i=o("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup").mergeContentTypeMediaOrMedianotifyMixinGroup(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishSenderContentBindingMixin").mergeSenderContentBindingMixin,o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").HOMOGENEOUS_CHILD(e,n))),r),a);return i}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeContentTypeMediaFanoutParticipantsTo=e,l.mergeContentTypeMediaFanoutMixin=u}),98);
__d("WASmaxOutMessagePublishContentTypePollCreationMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaContenttype,n=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"creation",contenttype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypePollCreationMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"result_snapshot"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypePollResultSnapshotMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollVoteMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaContenttype,n=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"vote",contenttype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypePollVoteMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeReactionMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"reaction"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeReactionMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePayMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"pay"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypePayMixin=s}),98);
__d("WASmaxOutMessagePublishPayNodeTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.payType,n=o("WASmaxJsx").smax("pay",{type:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePayNodeTypeMixin=s}),98);
__d("WASmaxOutMessagePublishBasePayNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishPayNodeTypeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.payCountry,n=e.payVersion,r=e.payIsFirstSend,a=o("WASmaxOutMessagePublishPayNodeTypeMixin").mergePayNodeTypeMixin(o("WASmaxJsx").smax("pay",{country:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),version:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,n),is_first_send:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,r)}),e);return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBasePayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishLegacyAmountMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.payCurrency,n=e.payAmount,r=o("WASmaxJsx").smax("pay",{currency:o("WAWap").CUSTOM_STRING(t),amount:o("WAWap").CUSTOM_STRING(n)});return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeLegacyAmountMixin=s}),98);
__d("WASmaxOutMessagePublishMoneyMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.moneyValue,n=e.moneyOffset,r=e.moneyCurrency,a=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("money",{value:o("WAWap").CUSTOM_STRING(t),offset:o("WAWap").CUSTOM_STRING(n),currency:o("WAWap").CUSTOM_STRING(r)}));return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMoneyMixin=s}),98);
__d("WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBasePayNodeMixin","WASmaxOutMessagePublishLegacyAmountMixin","WASmaxOutMessagePublishMoneyMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishMoneyMixin").mergeMoneyMixin(o("WASmaxJsx").smax("amount",null),e);return t}function s(t){var n=t.amountArgs,r=t.payCredentialId,a=t.payDeviceId,i=t.payRequestId,l=t.legacyAmountMixinArgs,s=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishLegacyAmountMixin").mergeLegacyAmountMixin,o("WASmaxOutMessagePublishBasePayNodeMixin").mergeBasePayNodeMixin(o("WASmaxJsx").smax("pay",{"credential-id":o("WAWap").CUSTOM_STRING(r),"device-id":o("WAWap").CUSTOM_STRING(a),"request-id":o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,i)},o("WASmaxChildren").OPTIONAL_CHILD(e,n)),t),l);return s}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeBaseIndividualPublishSendPayNodeAmount=e,l.mergeBaseIndividualPublishSendPayNodeMixin=u}),98);
__d("WASmaxOutMessagePublishInstallmentMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishMoneyMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishMoneyMixin").mergeMoneyMixin(o("WASmaxJsx").smax("due_amount",null),e);return t}function s(e){var t=o("WASmaxOutMessagePublishMoneyMixin").mergeMoneyMixin(o("WASmaxJsx").smax("interest",null),e);return t}function u(t){var n=t.dueAmountArgs,r=t.interestArgs,a=t.installmentMaxCount,i=t.installmentSelectedCount,l=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("installment",{max_count:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,a),selected_count:o("WAWap").INT(i)},o("WASmaxChildren").OPTIONAL_CHILD(e,n),o("WASmaxChildren").OPTIONAL_CHILD(s,r)));return l}function c(e,t){var n=u(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeInstallmentInstallmentDueAmount=e,l.makeInstallmentInstallmentInterest=s,l.mergeInstallmentMixin=c}),98);
__d("WASmaxOutMessagePublishBeneficiaryMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n,r=e.beneficiaryName,a=e.beneficiaryAddressLine1,i=e.beneficiaryAddressLine2,l=e.beneficiaryCity,s=e.beneficiaryState,u=e.beneficiaryPhoneNumber,c=e.beneficiaryCountry,d=e.beneficiaryPostalCode,m=o("WASmaxJsx").smax("beneficiary",{name:(t=o("WAWap")).CUSTOM_STRING(r),address_line1:t.CUSTOM_STRING(a),address_line2:(n=o("WASmaxAttrs")).OPTIONAL(t.CUSTOM_STRING,i),city:n.OPTIONAL(t.CUSTOM_STRING,l),state:n.OPTIONAL(t.CUSTOM_STRING,s),phone_number:n.OPTIONAL(t.CUSTOM_STRING,u),country:t.CUSTOM_STRING(c),postal_code:t.CUSTOM_STRING(d)});return m}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBeneficiaryMixin=s}),98);
__d("WASmaxOutMessagePublishBeneficiariesMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBeneficiaryMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishBeneficiaryMixin").mergeBeneficiaryMixin(o("WASmaxJsx").smax("beneficiary",null),e);return t}function s(t){var n=t.beneficiaryArgs,r=o("WASmaxJsx").smax("smax$any",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,5));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeBeneficiariesBeneficiary=e,l.mergeBeneficiariesMixin=u}),98);
__d("WASmaxOutMessagePublishOrderInPaymentMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBeneficiariesMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishBeneficiariesMixin").mergeBeneficiariesMixin(o("WASmaxJsx").smax("beneficiaries",null),e);return t}function s(t){var n,r=t.beneficiariesArgs,a=t.orderId,i=t.orderMessageId,l=t.orderPaymentConfigId,s=t.orderType,u=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("order",{id:(n=o("WAWap")).CUSTOM_STRING(a),message_id:o("WASmaxAttrs").OPTIONAL(n.STANZA_ID,i),payment_config_id:o("WASmaxAttrs").OPTIONAL(n.CUSTOM_STRING,l),type:o("WASmaxAttrs").OPTIONAL(n.CUSTOM_STRING,s)},o("WASmaxChildren").OPTIONAL_CHILD(e,r)));return u}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeOrderInPaymentOrderBeneficiaries=e,l.mergeOrderInPaymentMixin=u}),98);
__d("WASmaxOutMessagePublishPaymentInitiatorMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyPaymentInitiator,n=o("WASmaxJsx").smax("smax$any",{payment_initiator:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePaymentInitiatorMixin=s}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishInstallmentMixin","WASmaxOutMessagePublishOrderInPaymentMixin","WASmaxOutMessagePublishPaymentInitiatorMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.orderInPaymentMixinArgs,n=e.paymentInitiatorMixinArgs,r=e.installmentMixinArgs,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishInstallmentMixin").mergeInstallmentMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishPaymentInitiatorMixin").mergePaymentInitiatorMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishOrderInPaymentMixin").mergeOrderInPaymentMixin,o("WASmaxJsx").smax("pay",{"transaction-type":"p2m"}),t),n),r);return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBRPublishSendPayNodeP2MMixin=s}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("pay",{"transaction-type":"p2p"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBRPublishSendPayNodeP2PMixin=s}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin","WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isBRPublishSendPayNodeP2P)return o("WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin").mergeBRPublishSendPayNodeP2PMixin(e);if(t.bRPublishSendPayNodeP2M)return o("WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin").mergeBRPublishSendPayNodeP2MMixin(e,t.bRPublishSendPayNodeP2M);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeBRPublishSendPayNodeP2POrMMixinGroup=e}),98);
__d("WASmaxOutMessagePublishBRSendPayEloNodeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.eloDeviceSignature,r=e.eloWalletSignature,a=e.eloChallengeId,i=e.eloCardholderVerificationMethod,l=o("WASmaxJsx").smax("pay",null,o("WASmaxJsx").smax("elo",{device_signature:(t=o("WAWap")).CUSTOM_STRING(n),wallet_signature:t.CUSTOM_STRING(r),challenge_id:t.CUSTOM_STRING(a),cardholder_verification_method:t.CUSTOM_STRING(i)}));return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBRSendPayEloNodeMixin=s}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup","WASmaxOutMessagePublishBRSendPayEloNodeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.payId,r=e.payPaymentRails,a=e.payTrustedDeviceInfo,i=e.payNonce,l=e.bRSendPayEloNodeMixinArgs,s=e.bRPublishSendPayNodeP2POrMMixinGroupArgs,u=o("WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup").mergeBRPublishSendPayNodeP2POrMMixinGroup(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishBRSendPayEloNodeMixin").mergeBRSendPayEloNodeMixin,o("WASmaxJsx").smax("pay",{id:(t=o("WAWap")).CUSTOM_STRING(n),"payment-rails":t.CUSTOM_STRING(r),"trusted-device-info":t.CUSTOM_STRING(a),nonce:t.CUSTOM_STRING(i)}),l),s);return u}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBRPublishSendPayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishUPILiteDetailsMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.upiLiteDetailsLiteReferenceNumber,r=e.upiLiteDetailsLiteArqc,a=e.upiLiteDetailsLiteTimestamp,i=e.upiLiteDetailsLitePurpose,l=o("WASmaxJsx").smax("upi_lite_details",{lite_reference_number:(t=o("WAWap")).CUSTOM_STRING(n),lite_arqc:t.CUSTOM_STRING(r),lite_timestamp:t.INT(a),lite_purpose:t.CUSTOM_STRING(i)});return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeUPILiteDetailsMixin=s}),98);
__d("WASmaxOutMessagePublishOrderMessageMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n,r=e.orderOrderId,a=e.orderOrderMessageId,i=e.orderExpiryTs,l=e.orderOrderType,s=e.orderDiscountProgramName,u=o("WASmaxJsx").smax("order",{"order-id":(t=o("WAWap")).CUSTOM_STRING(r),"order-message-id":(n=o("WASmaxAttrs")).OPTIONAL(t.CUSTOM_STRING,a),"expiry-ts":n.OPTIONAL(t.INT,i),"order-type":n.OPTIONAL(t.CUSTOM_STRING,l),"discount-program-name":n.OPTIONAL(t.CUSTOM_STRING,s)});return u}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeOrderMessageMixin=s}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishOrderMessageMixin","WASmaxOutMessagePublishPaymentInitiatorMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.orderArgs,n=e.paymentLinkArgs,r=o("WASmaxJsx").smax("upi",null,o("WASmaxChildren").OPTIONAL_CHILD(s,t),o("WASmaxChildren").OPTIONAL_CHILD(u,n));return r}function s(e){var t=o("WASmaxOutMessagePublishOrderMessageMixin").mergeOrderMessageMixin(o("WASmaxJsx").smax("order",null),e);return t}function u(e){var t=e.paymentLinkOrderId,n=e.paymentLinkMessageId,r=o("WASmaxJsx").smax("payment_link",{order_id:o("WAWap").CUSTOM_STRING(t),message_id:o("WAWap").CUSTOM_STRING(n)});return r}function c(t){var n=t.upiArgs,r=t.paymentInitiatorMixinArgs,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishPaymentInitiatorMixin").mergePaymentInitiatorMixin,o("WASmaxJsx").smax("pay",{"transaction-type":"p2m"},o("WASmaxChildren").OPTIONAL_CHILD(e,n)),r);return a}function d(e,t){var n=c(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeUPIPublishSendPayNodeP2MUpi=e,l.makeUPIPublishSendPayNodeP2MUpiOrder=s,l.makeUPIPublishSendPayNodeP2MUpiPaymentLink=u,l.mergeUPIPublishSendPayNodeP2MMixin=d}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.hasPayTransactionTypeP2P,n=o("WASmaxJsx").smax("pay",{"transaction-type":o("WASmaxAttrs").OPTIONAL_LITERAL("p2p",t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeUPIPublishSendPayNodeP2PMixin=s}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin","WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.uPIPublishSendPayNodeP2P)return o("WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin").mergeUPIPublishSendPayNodeP2PMixin(e,t.uPIPublishSendPayNodeP2P);if(t.uPIPublishSendPayNodeP2M)return o("WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin").mergeUPIPublishSendPayNodeP2MMixin(e,t.uPIPublishSendPayNodeP2M);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeUPIPublishSendPayNodeP2POrMMixinGroup=e}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishUPILiteDetailsMixin","WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.upiLiteDetailsArgs,n=e.upiToken,r=o("WASmaxJsx").smax("upi",{token:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,n)},o("WASmaxChildren").OPTIONAL_CHILD(s,t));return r}function s(e){var t=o("WASmaxOutMessagePublishUPILiteDetailsMixin").mergeUPILiteDetailsMixin(o("WASmaxJsx").smax("upi_lite_details",null),e);return t}function u(t){var n,r,a=t.upiArgs,i=t.payId,l=t.payMpin,s=t.payReceiverVpa,u=t.payReceiverVpaId,c=t.payReceiverName,d=t.paySenderVpa,m=t.paySenderVpaId,p=t.paySenderName,_=t.paySeqNo,f=t.payUpiBankInfo,g=t.payMode,h=t.payPurposeCode,y=t.payMcc,C=t.payRefId,b=t.payDeviceSsid,v=t.payNote,S=t.uPIPublishSendPayNodeP2POrMMixinGroupArgs,R=o("WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup").mergeUPIPublishSendPayNodeP2POrMMixinGroup(o("WASmaxJsx").smax("pay",{id:(n=o("WASmaxAttrs")).OPTIONAL((r=o("WAWap")).CUSTOM_STRING,i),mpin:n.OPTIONAL(r.CUSTOM_STRING,l),"receiver-vpa":r.CUSTOM_STRING(s),"receiver-vpa-id":n.OPTIONAL(r.CUSTOM_STRING,u),"receiver-name":n.OPTIONAL(r.CUSTOM_STRING,c),"sender-vpa":r.CUSTOM_STRING(d),"sender-vpa-id":n.OPTIONAL(r.CUSTOM_STRING,m),"sender-name":n.OPTIONAL(r.CUSTOM_STRING,p),"seq-no":r.CUSTOM_STRING(_),"upi-bank-info":r.CUSTOM_STRING(f),mode:n.OPTIONAL(r.CUSTOM_STRING,g),"purpose-code":n.OPTIONAL(r.CUSTOM_STRING,h),mcc:n.OPTIONAL(r.CUSTOM_STRING,y),"ref-id":n.OPTIONAL(r.CUSTOM_STRING,C),device_ssid:n.OPTIONAL(r.CUSTOM_STRING,b),note:n.OPTIONAL(r.CUSTOM_STRING,v)},o("WASmaxChildren").OPTIONAL_CHILD(e,a)),S);return R}function c(e,t){var n=u(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeUPIPublishSendPayNodeUpi=e,l.makeUPIPublishSendPayNodeUpiUpiLiteDetails=s,l.mergeUPIPublishSendPayNodeMixin=c}),98);
__d("WASmaxOutMessagePublishBRPublishOrUPIPublishSendPayNodeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishBRPublishSendPayNodeMixin","WASmaxOutMessagePublishUPIPublishSendPayNodeMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.bRPublishSendPayNode)return o("WASmaxOutMessagePublishBRPublishSendPayNodeMixin").mergeBRPublishSendPayNodeMixin(e,t.bRPublishSendPayNode);if(t.uPIPublishSendPayNode)return o("WASmaxOutMessagePublishUPIPublishSendPayNodeMixin").mergeUPIPublishSendPayNodeMixin(e,t.uPIPublishSendPayNode);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeBRPublishOrUPIPublishSendPayNodeMixinGroup=e}),98);
__d("WASmaxOutMessagePublishIntegrationPublishPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBRPublishOrUPIPublishSendPayNodeMixinGroup"],(function(t,n,r,o,a,i,l){function e(e){var t=e.bRPublishOrUPIPublishSendPayNodeMixinGroupArgs,n=o("WASmaxOutMessagePublishBRPublishOrUPIPublishSendPayNodeMixinGroup").mergeBRPublishOrUPIPublishSendPayNodeMixinGroup(o("WASmaxJsx").smax("pay",null),t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIntegrationPublishPayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin","WASmaxOutMessagePublishIntegrationPublishPayNodeMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishIntegrationPublishPayNodeMixin").mergeIntegrationPublishPayNodeMixin(o("WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin").mergeBaseIndividualPublishSendPayNodeMixin(o("WASmaxJsx").smax("pay",null),e),e);return t}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualNonNoviPublishSendPayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin").mergeIndividualNonNoviPublishSendPayNodeMixin(o("WASmaxJsx").smax("pay",null),e);return t}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualPublishSendPayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualRequestPayNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBasePayNodeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.paySender,n=e.payExpiryTs,r=e.payRequestId,a=o("WASmaxOutMessagePublishBasePayNodeMixin").mergeBasePayNodeMixin(o("WASmaxJsx").smax("pay",{sender:o("WASmaxAttrs").OPTIONAL(o("WAWap").USER_JID,t),"expiry-ts":o("WAWap").CUSTOM_STRING(n),"request-id":o("WAWap").CUSTOM_STRING(r)}),e);return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualRequestPayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishPayInviteNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.payService,n=o("WASmaxJsx").smax("pay",{type:"invite",service:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePayInviteNodeMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin","WASmaxOutMessagePublishIndividualRequestPayNodeMixin","WASmaxOutMessagePublishPayInviteNodeMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.individualPublishSendPayNode)return o("WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin").mergeIndividualPublishSendPayNodeMixin(e,t.individualPublishSendPayNode);if(t.individualRequestPayNode)return o("WASmaxOutMessagePublishIndividualRequestPayNodeMixin").mergeIndividualRequestPayNodeMixin(e,t.individualRequestPayNode);if(t.payInviteNode)return o("WASmaxOutMessagePublishPayInviteNodeMixin").mergePayInviteNodeMixin(e,t.payInviteNode);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup=e}),98);
__d("WASmaxOutMessagePublishIndividualPublishPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup"],(function(t,n,r,o,a,i,l){function e(e){var t=e.individualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroupArgs,n=o("WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup").mergeIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup(o("WASmaxJsx").smax("pay",null),t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualPublishPayNodeMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualPublishPayNodeMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxJsx").smax("message",null,o("WASmaxOutMessagePublishIndividualPublishPayNodeMixin").mergeIndividualPublishPayNodeMixin(o("WASmaxJsx").smax("pay",null),e));return t}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualIndividualPublishPayNodeMessageMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypePayMixin","WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.individualIndividualPublishPayNodeMessageMixinArgs,n=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin").mergeIndividualIndividualPublishPayNodeMessageMixin,o("WASmaxOutMessagePublishContentTypePayMixin").mergeContentTypePayMixin(o("WASmaxJsx").smax("message",null)),t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualContentTypePayIndividualMixin=s}),98);
__d("WASmaxOutMessagePublishContentFanoutMixins",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeEventMixin","WASmaxOutMessagePublishContentTypeListFanoutMixin","WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin","WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin","WASmaxOutMessagePublishContentTypeMediaFanoutMixin","WASmaxOutMessagePublishContentTypeMedianotifyMixin","WASmaxOutMessagePublishContentTypePollCreationMixin","WASmaxOutMessagePublishContentTypePollResultSnapshotMixin","WASmaxOutMessagePublishContentTypePollVoteMixin","WASmaxOutMessagePublishContentTypeReactionMixin","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isContentTypeText)return o("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(e);if(t.contentTypeMediaFanout)return o("WASmaxOutMessagePublishContentTypeMediaFanoutMixin").mergeContentTypeMediaFanoutMixin(e,t.contentTypeMediaFanout);if(t.contentTypeMediaFanoutDeprecated)return o("WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin").mergeContentTypeMediaFanoutDeprecatedMixin(e,t.contentTypeMediaFanoutDeprecated);if(t.contentTypeLiveLocationFanout)return o("WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin").mergeContentTypeLiveLocationFanoutMixin(e,t.contentTypeLiveLocationFanout);if(t.individualContentTypePayIndividual)return o("WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin").mergeIndividualContentTypePayIndividualMixin(e,t.individualContentTypePayIndividual);if(t.contentTypeListFanout)return o("WASmaxOutMessagePublishContentTypeListFanoutMixin").mergeContentTypeListFanoutMixin(e,t.contentTypeListFanout);if(t.isContentTypeReaction)return o("WASmaxOutMessagePublishContentTypeReactionMixin").mergeContentTypeReactionMixin(e);if(t.contentTypePollCreation)return o("WASmaxOutMessagePublishContentTypePollCreationMixin").mergeContentTypePollCreationMixin(e,t.contentTypePollCreation);if(t.contentTypePollVote)return o("WASmaxOutMessagePublishContentTypePollVoteMixin").mergeContentTypePollVoteMixin(e,t.contentTypePollVote);if(t.isContentTypePollResultSnapshot)return o("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin").mergeContentTypePollResultSnapshotMixin(e);if(t.isContentTypeMedianotify)return o("WASmaxOutMessagePublishContentTypeMedianotifyMixin").mergeContentTypeMedianotifyMixin(e);if(t.contentTypeEvent)return o("WASmaxOutMessagePublishContentTypeEventMixin").mergeContentTypeEventMixin(e,t.contentTypeEvent);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeContentFanoutMixins=e}),98);
__d("WASmaxOutMessagePublishLidChatOriginMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{origin:"ctwa"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeLidChatOriginMixin=s}),98);
__d("WASmaxOutMessagePublishMsgMetaOriginMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaOrigin,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{origin:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMsgMetaOriginMixin=s}),98);
__d("WASmaxOutMessagePublishPeripheralOriginMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaPeripheral,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{peripheral:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePeripheralOriginMixin=s}),98);
__d("WASmaxOutMessagePublishTDeprecatedMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageT,n=o("WASmaxJsx").smax("message",{t:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeTDeprecatedMixin=s}),98);
__d("WASmaxOutMessagePublishToContentBindingMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toJid,n=e.contentBindingElementValue,r=o("WASmaxJsx").smax("to",{jid:o("WAWap").JID(t)},o("WASmaxJsx").smax("content_binding",null,n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeToContentBindingMixin=s}),98);
__d("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAvatarStickerTypeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encMediatype,n=e.encNativeFlowName,r=e.hasAvatarStickerType,a=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishAvatarStickerTypeMixin").mergeAvatarStickerTypeMixin,o("WASmaxJsx").smax("enc",{mediatype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),native_flow_name:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,n)}),r);return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncMediaTypeDeprecatedMixin=s}),98);
__d("WASmaxOutMessagePublishEncVersion3Mixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("enc",{v:"3"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeEncVersion3Mixin=s}),98);
__d("WASmaxOutMessagePublishEncVersion",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncVersion2Mixin","WASmaxOutMessagePublishEncVersion3Mixin","WASmaxOutMessagePublishEncVersionFutureproofMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isEncVersion2)return o("WASmaxOutMessagePublishEncVersion2Mixin").mergeEncVersion2Mixin(e);if(t.isEncVersion3)return o("WASmaxOutMessagePublishEncVersion3Mixin").mergeEncVersion3Mixin(e);if(t.encVersionFutureproof)return o("WASmaxOutMessagePublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(e,t.encVersionFutureproof);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeEncVersion=e}),98);
__d("WASmaxOutMessagePublishToDeviceMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin","WASmaxOutMessagePublishEncTypeIndividualMixin","WASmaxOutMessagePublishEncVersion","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toJid,n=e.encTypeIndividualMixinArgs,r=e.encMediaTypeDeprecatedMixinArgs,a=e.encVersionArgs,i=o("WASmaxJsx").smax("to",{jid:o("WAWap").JID(t)},o("WASmaxOutMessagePublishEncVersion").mergeEncVersion(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin").mergeEncMediaTypeDeprecatedMixin,o("WASmaxOutMessagePublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(o("WASmaxJsx").smax("enc",null),n),r),a));return i}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeToDeviceMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualIndividualFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotClientMultiThreadIDMessageMixin","WASmaxOutMessagePublishBotLocalAutomatedTypeMixin","WASmaxOutMessagePublishBotMessageTypeMixin","WASmaxOutMessagePublishBotMetricsEntryPointMixin","WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin","WASmaxOutMessagePublishBotModeSelectionMixin","WASmaxOutMessagePublishBotPersonaTypeMixin","WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin","WASmaxOutMessagePublishBusinessBotMessageMixin","WASmaxOutMessagePublishContentFanoutMixins","WASmaxOutMessagePublishLidChatOriginMixin","WASmaxOutMessagePublishMsgMetaOriginMixin","WASmaxOutMessagePublishPeripheralOriginMixin","WASmaxOutMessagePublishTDeprecatedMixin","WASmaxOutMessagePublishToContentBindingMixin","WASmaxOutMessagePublishToDeviceMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toContentBindingMixinArgs,n=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishToContentBindingMixin").mergeToContentBindingMixin,o("WASmaxOutMessagePublishToDeviceMixin").mergeToDeviceMixin(o("WASmaxJsx").smax("to",null),e),t);return n}function s(){var e=o("WASmaxJsx").smax("enc",null);return e}function u(t){var n,r=t.toArgs,a=t.messageTo,i=t.tDeprecatedMixinArgs,l=t.botMessageTypeMixinArgs,s=t.businessBotMessageMixinArgs,u=t.botMetricsEntryPointMixinArgs,c=t.botMetricsThreadEntryPointMixinArgs,d=t.msgMetaOriginMixinArgs,m=t.hasLidChatOrigin,p=t.botLocalAutomatedTypeMixinArgs,_=t.businessBotMessageFeedbackRequestedMixinArgs,f=t.botPersonaTypeMixinArgs,g=t.botClientMultiThreadIDMessageMixinArgs,h=t.botModeSelectionMixinArgs,y=t.peripheralOriginMixinArgs,C=t.contentFanoutMixinsArgs,b=o("WASmaxOutMessagePublishContentFanoutMixins").mergeContentFanoutMixins((n=o("WASmaxMixins")).optionalMerge(o("WASmaxOutMessagePublishPeripheralOriginMixin").mergePeripheralOriginMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotModeSelectionMixin").mergeBotModeSelectionMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotClientMultiThreadIDMessageMixin").mergeBotClientMultiThreadIDMessageMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotPersonaTypeMixin").mergeBotPersonaTypeMixin,n.optionalMerge(o("WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin").mergeBusinessBotMessageFeedbackRequestedMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotLocalAutomatedTypeMixin").mergeBotLocalAutomatedTypeMixin,n.optionalMerge(o("WASmaxOutMessagePublishLidChatOriginMixin").mergeLidChatOriginMixin,n.optionalMerge(o("WASmaxOutMessagePublishMsgMetaOriginMixin").mergeMsgMetaOriginMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin").mergeBotMetricsThreadEntryPointMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotMetricsEntryPointMixin").mergeBotMetricsEntryPointMixin,n.optionalMerge(o("WASmaxOutMessagePublishBusinessBotMessageMixin").mergeBusinessBotMessageMixin,n.optionalMerge(o("WASmaxOutMessagePublishBotMessageTypeMixin").mergeBotMessageTypeMixin,n.optionalMerge(o("WASmaxOutMessagePublishTDeprecatedMixin").mergeTDeprecatedMixin,o("WASmaxJsx").smax("message",{to:o("WAWap").JID(a)},o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").REPEATED_CHILD(e,r,1,1997))),i),l),s),u),c),d),m),p),_),f),g),h),y),C);return b}function c(e,t){var n=u(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeIndividualIndividualFanoutParticipantsTo=e,l.makeIndividualIndividualFanoutEnc=s,l.mergeIndividualIndividualFanoutMixin=c}),98);
__d("WASmaxOutMessagePublishEncListMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("enc",{mediatype:"list"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeEncListMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeListMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishEncListMixin","WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup"],(function(t,n,r,o,a,i,l){function e(e){var t=e.singleSelectOrProductListMixinGroupArgs,n=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup").mergeSingleSelectOrProductListMixinGroup,o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(o("WASmaxJsx").smax("message",null,o("WASmaxOutMessagePublishEncListMixin").mergeEncListMixin(o("WASmaxJsx").smax("enc",null)))),t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypeListMixin=s}),98);
__d("WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin","WASmaxOutMessagePublishEncLiveLocationMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.encLiveLocation)return o("WASmaxOutMessagePublishEncLiveLocationMixin").mergeEncLiveLocationMixin(e,t.encLiveLocation);if(t.encLiveLocationDeprecated)return o("WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin").mergeEncLiveLocationDeprecatedMixin(e,t.encLiveLocationDeprecated);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup=e}),98);
__d("WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup","WASmaxOutMessagePublishLiveLocationModeMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.liveLocationModeMixinArgs,n=e.encLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroupArgs,r=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishLiveLocationModeMixin").mergeLiveLocationModeMixin,o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(o("WASmaxJsx").smax("message",null,o("WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup").mergeEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup(o("WASmaxJsx").smax("enc",null),n))),t);return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypeLiveLocationSingleMixin=s}),98);
__d("WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin","WASmaxOutMessagePublishEncMediaTypeMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.encMediaType)return o("WASmaxOutMessagePublishEncMediaTypeMixin").mergeEncMediaTypeMixin(e,t.encMediaType);if(t.encMediaTypeDeprecated)return o("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin").mergeEncMediaTypeDeprecatedMixin(e,t.encMediaTypeDeprecated);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup=e}),98);
__d("WASmaxOutMessagePublishContentTypeMediaSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup","WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup","WASmaxOutMessagePublishSenderContentBindingMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.senderContentBindingMixinArgs,n=e.contentTypeMediaOrMedianotifyMixinGroupArgs,r=e.encMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroupArgs,a=o("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup").mergeContentTypeMediaOrMedianotifyMixinGroup(o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishSenderContentBindingMixin").mergeSenderContentBindingMixin,o("WASmaxJsx").smax("message",null,o("WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup").mergeEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup(o("WASmaxJsx").smax("enc",null),r)),t),n);return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypeMediaSingleMixin=s}),98);
__d("WASmaxOutMessagePublishContentMixins",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeEventMixin","WASmaxOutMessagePublishContentTypeListMixin","WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin","WASmaxOutMessagePublishContentTypeMediaSingleMixin","WASmaxOutMessagePublishContentTypePollCreationMixin","WASmaxOutMessagePublishContentTypePollResultSnapshotMixin","WASmaxOutMessagePublishContentTypePollVoteMixin","WASmaxOutMessagePublishContentTypeReactionMixin","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isContentTypeText)return o("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(e);if(t.contentTypeMediaSingle)return o("WASmaxOutMessagePublishContentTypeMediaSingleMixin").mergeContentTypeMediaSingleMixin(e,t.contentTypeMediaSingle);if(t.contentTypeLiveLocationSingle)return o("WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin").mergeContentTypeLiveLocationSingleMixin(e,t.contentTypeLiveLocationSingle);if(t.individualContentTypePayIndividual)return o("WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin").mergeIndividualContentTypePayIndividualMixin(e,t.individualContentTypePayIndividual);if(t.contentTypeList)return o("WASmaxOutMessagePublishContentTypeListMixin").mergeContentTypeListMixin(e,t.contentTypeList);if(t.isContentTypeReaction)return o("WASmaxOutMessagePublishContentTypeReactionMixin").mergeContentTypeReactionMixin(e);if(t.contentTypePollCreation)return o("WASmaxOutMessagePublishContentTypePollCreationMixin").mergeContentTypePollCreationMixin(e,t.contentTypePollCreation);if(t.contentTypePollVote)return o("WASmaxOutMessagePublishContentTypePollVoteMixin").mergeContentTypePollVoteMixin(e,t.contentTypePollVote);if(t.isContentTypePollResultSnapshot)return o("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin").mergeContentTypePollResultSnapshotMixin(e);if(t.contentTypeEvent)return o("WASmaxOutMessagePublishContentTypeEventMixin").mergeContentTypeEventMixin(e,t.contentTypeEvent);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeContentMixins=e}),98);
__d("WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageRecipient,n=o("WASmaxJsx").smax("message",{recipient:o("WAWap").JID(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualIndividualRetryToPeerMixin=s}),98);
__d("WASmaxOutMessagePublishRetryMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncRetryMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageT,n=e.encRetryMixinArgs,r=o("WASmaxJsx").smax("message",{t:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,t)},o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishEncRetryMixin").mergeEncRetryMixin,o("WASmaxJsx").smax("enc",null),n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRetryMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualIndividualRetryMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin","WASmaxOutMessagePublishRetryMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.individualIndividualRetryToPeerMixinArgs,n=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin").mergeIndividualIndividualRetryToPeerMixin,o("WASmaxOutMessagePublishRetryMixin").mergeRetryMixin(o("WASmaxJsx").smax("message",null),e),t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualIndividualRetryMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualSingleContentBindingMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.contentBindingElementValue,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("content_binding",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualSingleContentBindingMixin=s}),98);
__d("WASmaxOutMessagePublishReceiverAccountKindMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaReceiverAccountKind,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{receiver_account_kind:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeReceiverAccountKindMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualIndividualSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotClientMultiThreadIDMessageMixin","WASmaxOutMessagePublishBotLocalAutomatedTypeMixin","WASmaxOutMessagePublishBotMessageTypeMixin","WASmaxOutMessagePublishBotMetricsEntryPointMixin","WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin","WASmaxOutMessagePublishBotModeSelectionMixin","WASmaxOutMessagePublishBotPersonaTypeMixin","WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin","WASmaxOutMessagePublishBusinessBotMessageMixin","WASmaxOutMessagePublishContentMixins","WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin","WASmaxOutMessagePublishEncTypeIndividualMixin","WASmaxOutMessagePublishEncVersion","WASmaxOutMessagePublishIndividualIndividualRetryMixin","WASmaxOutMessagePublishIndividualSingleContentBindingMixin","WASmaxOutMessagePublishLidChatOriginMixin","WASmaxOutMessagePublishMsgMetaOriginMixin","WASmaxOutMessagePublishPeripheralOriginMixin","WASmaxOutMessagePublishReceiverAccountKindMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.messageTo,r=e.individualIndividualRetryMixinArgs,a=e.individualSingleContentBindingMixinArgs,i=e.botMessageTypeMixinArgs,l=e.businessBotMessageMixinArgs,s=e.botMetricsEntryPointMixinArgs,u=e.botMetricsThreadEntryPointMixinArgs,c=e.msgMetaOriginMixinArgs,d=e.hasLidChatOrigin,m=e.botLocalAutomatedTypeMixinArgs,p=e.businessBotMessageFeedbackRequestedMixinArgs,_=e.botPersonaTypeMixinArgs,f=e.botClientMultiThreadIDMessageMixinArgs,g=e.botModeSelectionMixinArgs,h=e.peripheralOriginMixinArgs,y=e.receiverAccountKindMixinArgs,C=e.contentMixinsArgs,b=e.encTypeIndividualMixinArgs,v=e.encMediaTypeDeprecatedMixinArgs,S=e.encVersionArgs,R=o("WASmaxOutMessagePublishContentMixins").mergeContentMixins((t=o("WASmaxMixins")).optionalMerge(o("WASmaxOutMessagePublishReceiverAccountKindMixin").mergeReceiverAccountKindMixin,t.optionalMerge(o("WASmaxOutMessagePublishPeripheralOriginMixin").mergePeripheralOriginMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotModeSelectionMixin").mergeBotModeSelectionMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotClientMultiThreadIDMessageMixin").mergeBotClientMultiThreadIDMessageMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotPersonaTypeMixin").mergeBotPersonaTypeMixin,t.optionalMerge(o("WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin").mergeBusinessBotMessageFeedbackRequestedMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotLocalAutomatedTypeMixin").mergeBotLocalAutomatedTypeMixin,t.optionalMerge(o("WASmaxOutMessagePublishLidChatOriginMixin").mergeLidChatOriginMixin,t.optionalMerge(o("WASmaxOutMessagePublishMsgMetaOriginMixin").mergeMsgMetaOriginMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin").mergeBotMetricsThreadEntryPointMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotMetricsEntryPointMixin").mergeBotMetricsEntryPointMixin,t.optionalMerge(o("WASmaxOutMessagePublishBusinessBotMessageMixin").mergeBusinessBotMessageMixin,t.optionalMerge(o("WASmaxOutMessagePublishBotMessageTypeMixin").mergeBotMessageTypeMixin,t.optionalMerge(o("WASmaxOutMessagePublishIndividualSingleContentBindingMixin").mergeIndividualSingleContentBindingMixin,t.optionalMerge(o("WASmaxOutMessagePublishIndividualIndividualRetryMixin").mergeIndividualIndividualRetryMixin,o("WASmaxJsx").smax("message",{to:o("WAWap").JID(n)},o("WASmaxOutMessagePublishEncVersion").mergeEncVersion(t.optionalMerge(o("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin").mergeEncMediaTypeDeprecatedMixin,o("WASmaxOutMessagePublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(o("WASmaxJsx").smax("enc",null),b),v),S)),r),a),i),l),s),u),c),d),m),p),_),f),g),h),y),C);return R}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualIndividualSingleMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishBotMetricsEntryPointMixin","WASmaxOutMessagePublishIndividualIndividualFanoutMixin","WASmaxOutMessagePublishIndividualIndividualSingleMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.individualIndividualSingle)return o("WASmaxOutMessagePublishIndividualIndividualSingleMixin").mergeIndividualIndividualSingleMixin(e,t.individualIndividualSingle);if(t.individualIndividualFanout)return o("WASmaxOutMessagePublishIndividualIndividualFanoutMixin").mergeIndividualIndividualFanoutMixin(e,t.individualIndividualFanout);if(t.botMetricsEntryPoint)return o("WASmaxOutMessagePublishBotMetricsEntryPointMixin").mergeBotMetricsEntryPointMixin(e,t.botMetricsEntryPoint);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup=e}),98);
__d("WASmaxOutMessagePublishIndividualBotRequestMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotFeedbackMessageTypeMixin","WASmaxOutMessagePublishBotRequestMixin","WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup","WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageTo,n=e.contentTypeTextOrMediaMixinGroupArgs,r=e.individualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroupArgs,a=e.hasBotFeedbackMessageType,i=e.botRequestMixinArgs,l=o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup").mergeIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup,o("WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup").mergeContentTypeTextOrMediaMixinGroup(o("WASmaxJsx").smax("message",{to:o("WAWap").USER_JID(t)},o("WASmaxMixins").optionalMerge(o("WASmaxOutMessagePublishBotFeedbackMessageTypeMixin").mergeBotFeedbackMessageTypeMixin,o("WASmaxJsx").smax("bot",null,o("WASmaxOutMessagePublishBotRequestMixin").mergeBotRequestMixin(o("WASmaxJsx").smax("to",null),i)),a)),n),r);return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualBotRequestMessageMixin=s}),98);
__d("WASmaxOutMessagePublishBotResponseMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.botEditTargetId,r=e.botSenderTimestampMs,a=e.botEdit,i=e.hasBotTypeVoice,l=o("WASmaxJsx").smax("bot",{edit_target_id:(t=o("WASmaxAttrs")).OPTIONAL(o("WAWap").CUSTOM_STRING,n),sender_timestamp_ms:t.OPTIONAL(o("WAWap").INT,r),edit:t.OPTIONAL(o("WAWap").CUSTOM_STRING,a),type:t.OPTIONAL_LITERAL("voice",i)});return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBotResponseMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toCount,n=o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").REPEATED_CHILD_COUNT(s,t,2,2));return n}function s(){var e=o("WASmaxJsx").smax("to",null,o("WASmaxJsx").smax("enc",{mediatype:"image"}));return e}function u(t){var n=t.participantsArgs,r=o("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(o("WASmaxJsx").smax("message",null,o("WASmaxChildren").OPTIONAL_CHILD(e,n)));return r}function c(e,t){var n=u(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeIndividualContentTypeBotResponseMediaFanoutParticipants=e,l.makeIndividualContentTypeBotResponseMediaFanoutParticipantsTo=s,l.mergeIndividualContentTypeBotResponseMediaFanoutMixin=c}),98);
__d("WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isContentTypeText)return o("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(e);if(t.individualContentTypeBotResponseMediaFanout)return o("WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin").mergeIndividualContentTypeBotResponseMediaFanoutMixin(e,t.individualContentTypeBotResponseMediaFanout);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup=e}),98);
__d("WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncPayloadMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishEncPayloadMixin").mergeEncPayloadMixin(o("WASmaxJsx").smax("enc",{type:"msmsg"}),e);return t}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncTypeMessageSecretMessageMixin=s}),98);
__d("WASmaxOutMessagePublishMessageTargetMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.metaTargetId,r=e.metaTargetSenderJid,a=e.metaTargetChatJid,i=e.metaTargetChatJidLid,l=o("WASmaxJsx").smax("meta",{target_id:(t=o("WAWap")).STANZA_ID(n),target_sender_jid:o("WASmaxAttrs").OPTIONAL(t.USER_JID,r),target_chat_jid:o("WASmaxAttrs").OPTIONAL(t.JID,a),target_chat_jid_lid:o("WASmaxAttrs").OPTIONAL(t.JID,i)});return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMessageTargetMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualBotResponseFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotResponseMixin","WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup","WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin","WASmaxOutMessagePublishEncVersionBot","WASmaxOutMessagePublishMessageTargetMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toArgs,n=o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").REPEATED_CHILD(s,t,2,2));return n}function s(e){var t=e.toJid,n=o("WASmaxJsx").smax("to",{jid:o("WAWap").USER_JID(t)});return n}function u(t){var n,r=t.participantsArgs,a=t.messageTo,i=t.contentTypeTextOrIndividualBotResponseMediaFanoutMixinGroupArgs,l=t.botResponseMixinArgs,s=t.messageTargetMixinArgs,u=t.encTypeMessageSecretMessageMixinArgs,c=t.encVersionBotArgs,d=o("WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup").mergeContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup((n=o("WASmaxJsx")).smax("message",{to:o("WAWap").USER_JID(a)},o("WASmaxOutMessagePublishBotResponseMixin").mergeBotResponseMixin(n.smax("bot",null),l),o("WASmaxOutMessagePublishMessageTargetMixin").mergeMessageTargetMixin(n.smax("meta",null),s),o("WASmaxOutMessagePublishEncVersionBot").mergeEncVersionBot(o("WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin").mergeEncTypeMessageSecretMessageMixin(n.smax("enc",null),u),c),o("WASmaxChildren").OPTIONAL_CHILD(e,r)),i);return d}function c(e,t){var n=u(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeIndividualBotResponseFanoutParticipants=e,l.makeIndividualBotResponseFanoutParticipantsTo=s,l.mergeIndividualBotResponseFanoutMixin=c}),98);
__d("WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishIndividualBotRequestMessageMixin","WASmaxOutMessagePublishIndividualBotResponseFanoutMixin","WASmaxOutMessagePublishIndividualIndividualFanoutMixin","WASmaxOutMessagePublishIndividualIndividualSingleMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.individualBotResponseFanout)return o("WASmaxOutMessagePublishIndividualBotResponseFanoutMixin").mergeIndividualBotResponseFanoutMixin(e,t.individualBotResponseFanout);if(t.individualBotRequestMessage)return o("WASmaxOutMessagePublishIndividualBotRequestMessageMixin").mergeIndividualBotRequestMessageMixin(e,t.individualBotRequestMessage);if(t.individualIndividualSingle)return o("WASmaxOutMessagePublishIndividualIndividualSingleMixin").mergeIndividualIndividualSingleMixin(e,t.individualIndividualSingle);if(t.individualIndividualFanout)return o("WASmaxOutMessagePublishIndividualIndividualFanoutMixin").mergeIndividualIndividualFanoutMixin(e,t.individualIndividualFanout);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup=e}),98);
__d("WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageRecipient,n=o("WASmaxJsx").smax("message",{recipient:o("WAWap").JID(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeIndividualRecipientDeprecaredMixin=s}),98);
__d("WASmaxOutMessagePublishMessageEditMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{edit:"1"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeMessageEditMixin=s}),98);
__d("WASmaxOutMessagePublishMessagePinMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{edit:"2"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeMessagePinMixin=s}),98);
__d("WASmaxOutMessagePublishRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{edit:"7"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeRevokeMixin=s}),98);
__d("WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishMessageEditMixin","WASmaxOutMessagePublishMessagePinMixin","WASmaxOutMessagePublishRevokeMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.isMessageEdit)return o("WASmaxOutMessagePublishMessageEditMixin").mergeMessageEditMixin(e);if(t.isMessagePin)return o("WASmaxOutMessagePublishMessagePinMixin").mergeMessagePinMixin(e);if(t.isRevoke)return o("WASmaxOutMessagePublishRevokeMixin").mergeRevokeMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeMessageEditOrMessagePinOrRevokeMixinGroup=e}),98);
__d("WASmaxOutMessagePublishMetaConverstationThreadIdMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaConversationThreadId,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{conversation_thread_id:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMetaConverstationThreadIdMixin=s}),98);
__d("WASmaxOutMessagePublishMetaDestinationIdMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaDestinationId,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{destination_id:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMetaDestinationIdMixin=s}),98);
__d("WASmaxOutMessagePublishMetaScheduledMessageMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaSt,n=e.keyRkid,r=e.keyElementValue,a=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{type:"scheduled_message",st:o("WAWap").INT(t)},o("WASmaxJsx").smax("key",{rkid:o("WAWap").CUSTOM_STRING(n)},r)));return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMetaScheduledMessageMixin=s}),98);
__d("WASmaxOutMessagePublishPeerRecipientUsernameMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyPeerRecipientUsername,n=o("WASmaxJsx").smax("smax$any",{peer_recipient_username:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePeerRecipientUsernameMixin=s}),98);
__d("WASmaxOutMessagePublishPeerRecipientLIDMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyPeerRecipientLid,n=o("WASmaxJsx").smax("smax$any",{peer_recipient_lid:o("WAWap").JID(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePeerRecipientLIDMixin=s}),98);
__d("WASmaxOutMessagePublishPeerRecipientPNMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyPeerRecipientPn,n=o("WASmaxJsx").smax("smax$any",{peer_recipient_pn:o("WAWap").JID(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePeerRecipientPNMixin=s}),98);
__d("WASmaxOutMessagePublishRecipientPNMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.messageRecipientPn,n=o("WASmaxJsx").smax("message",{recipient_pn:o("WAWap").JID(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRecipientPNMixin=s}),98);
__d("WASmaxOutMessagePublishRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishPeerRecipientLIDMixin","WASmaxOutMessagePublishPeerRecipientPNMixin","WASmaxOutMessagePublishRecipientPNMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.recipientPN)return o("WASmaxOutMessagePublishRecipientPNMixin").mergeRecipientPNMixin(e,t.recipientPN);if(t.peerRecipientPN)return o("WASmaxOutMessagePublishPeerRecipientPNMixin").mergePeerRecipientPNMixin(e,t.peerRecipientPN);if(t.peerRecipientLID)return o("WASmaxOutMessagePublishPeerRecipientLIDMixin").mergePeerRecipientLIDMixin(e,t.peerRecipientLID);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup=e}),98);
__d("WASmaxOutMessagePublishStatusMentionMessageMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{is_status_mention:"true"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeStatusMentionMessageMixin=s}),98);
__d("WASmaxOutMessagePublishPrivacyTokenContentsMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyElementValue,n=o("WASmaxJsx").smax("smax$any",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePrivacyTokenContentsMixin=s}),98);
__d("WASmaxOutMessagePublishTCTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishPrivacyTokenContentsMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.tctokenT,n=e.privacyTokenContentsMixinArgs,r=o("WASmaxJsx").smax("smax$any",null,o("WASmaxOutMessagePublishPrivacyTokenContentsMixin").mergePrivacyTokenContentsMixin(o("WASmaxJsx").smax("tctoken",{t:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,t)}),n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeTCTokenMixin=s}),98);
__d("WASmaxOutMessagePublishThreadTypeTagEnumMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaThreadType,n=o("WASmaxJsx").smax("meta",{thread_type:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeThreadTypeTagEnumMixin=s}),98);
__d("WASmaxOutMessagePublishThreadTypeTagLegacyMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaThreadType,n=o("WASmaxJsx").smax("meta",{thread_type:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeThreadTypeTagLegacyMixin=s}),98);
__d("WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishThreadTypeTagEnumMixin","WASmaxOutMessagePublishThreadTypeTagLegacyMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.threadTypeTagEnum)return o("WASmaxOutMessagePublishThreadTypeTagEnumMixin").mergeThreadTypeTagEnumMixin(e,t.threadTypeTagEnum);if(t.threadTypeTagLegacy)return o("WASmaxOutMessagePublishThreadTypeTagLegacyMixin").mergeThreadTypeTagLegacyMixin(e,t.threadTypeTagLegacy);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeThreadTypeTagEnumOrLegacyMixinGroup=e}),98);
__d("WASmaxOutMessagePublishThreadTypeTagMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup"],(function(t,n,r,o,a,i,l){function e(e){var t=e.threadTypeTagEnumOrLegacyMixinGroupArgs,n=o("WASmaxJsx").smax("message",null,o("WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup").mergeThreadTypeTagEnumOrLegacyMixinGroup(o("WASmaxJsx").smax("meta",null),t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeThreadTypeTagMixin=s}),98);
__d("WASmaxOutMessagePublishViewOnceMetaAttributeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{view_once:"true"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeViewOnceMetaAttributeMixin=s}),98);
__d("WASmaxOutMessagePublishIndividualRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAppdataMetaAttributeMixin","WASmaxOutMessagePublishArmadilloOriginalMessageTimestampMixin","WASmaxOutMessagePublishBaseMixin","WASmaxOutMessagePublishGroupInviteTargetMixin","WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup","WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin","WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup","WASmaxOutMessagePublishMetaConverstationThreadIdMixin","WASmaxOutMessagePublishMetaDestinationIdMixin","WASmaxOutMessagePublishMetaScheduledMessageMixin","WASmaxOutMessagePublishPeerRecipientUsernameMixin","WASmaxOutMessagePublishPeripheralOriginMixin","WASmaxOutMessagePublishRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup","WASmaxOutMessagePublishStatusMentionMessageMixin","WASmaxOutMessagePublishTCTokenMixin","WASmaxOutMessagePublishThreadTypeTagMixin","WASmaxOutMessagePublishViewOnceMetaAttributeMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.messageId,r=e.groupInviteTargetMixinArgs,a=e.threadTypeTagMixinArgs,i=e.peerRecipientUsernameMixinArgs,l=e.individualRecipientDeprecaredMixinArgs,s=e.appdataMetaAttributeMixinArgs,u=e.hasStatusMentionMessage,c=e.tCTokenMixinArgs,d=e.hasViewOnceMetaAttribute,m=e.metaDestinationIdMixinArgs,p=e.metaConverstationThreadIdMixinArgs,_=e.metaScheduledMessageMixinArgs,f=e.peripheralOriginMixinArgs,g=e.armadilloOriginalMessageTimestampMixinArgs,h=e.individualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroupArgs,y=e.messageEditOrMessagePinOrRevokeMixinGroupArgs,C=e.recipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroupArgs,b=(t=o("WASmaxMixins")).optionalMerge(o("WASmaxOutMessagePublishRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup").mergeRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup,t.optionalMerge(o("WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup").mergeMessageEditOrMessagePinOrRevokeMixinGroup,o("WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup").mergeIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup(t.optionalMerge(o("WASmaxOutMessagePublishArmadilloOriginalMessageTimestampMixin").mergeArmadilloOriginalMessageTimestampMixin,t.optionalMerge(o("WASmaxOutMessagePublishPeripheralOriginMixin").mergePeripheralOriginMixin,t.optionalMerge(o("WASmaxOutMessagePublishMetaScheduledMessageMixin").mergeMetaScheduledMessageMixin,t.optionalMerge(o("WASmaxOutMessagePublishMetaConverstationThreadIdMixin").mergeMetaConverstationThreadIdMixin,t.optionalMerge(o("WASmaxOutMessagePublishMetaDestinationIdMixin").mergeMetaDestinationIdMixin,t.optionalMerge(o("WASmaxOutMessagePublishViewOnceMetaAttributeMixin").mergeViewOnceMetaAttributeMixin,t.optionalMerge(o("WASmaxOutMessagePublishTCTokenMixin").mergeTCTokenMixin,t.optionalMerge(o("WASmaxOutMessagePublishStatusMentionMessageMixin").mergeStatusMentionMessageMixin,t.optionalMerge(o("WASmaxOutMessagePublishAppdataMetaAttributeMixin").mergeAppdataMetaAttributeMixin,t.optionalMerge(o("WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin").mergeIndividualRecipientDeprecaredMixin,t.optionalMerge(o("WASmaxOutMessagePublishPeerRecipientUsernameMixin").mergePeerRecipientUsernameMixin,t.optionalMerge(o("WASmaxOutMessagePublishThreadTypeTagMixin").mergeThreadTypeTagMixin,t.optionalMerge(o("WASmaxOutMessagePublishGroupInviteTargetMixin").mergeGroupInviteTargetMixin,o("WASmaxOutMessagePublishBaseMixin").mergeBaseMixin(o("WASmaxJsx").smax("message",{id:o("WAWap").STANZA_ID(n)}),e),r),a),i),l),s),u),c),d),m),p),_),f),g),h),y),C);return b}l.makeIndividualRequest=e}),98);
__d("WASmaxMessagePublishIndividualRPC",["WAComms","WASmaxInMessagePublishIndividualResponseNegative","WASmaxInMessagePublishIndividualResponseSuccess","WASmaxOutMessagePublishIndividualRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(t,n,r,o,a,i,l){async function e(e,t){var n=o("WASmaxOutMessagePublishIndividualRequest").makeIndividualRequest(e),r=await o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInMessagePublishIndividualResponseNegative").parseIndividualResponseNegative(r,n);if(a.success)return{name:"IndividualResponseNegative",value:a.value};var i=o("WASmaxInMessagePublishIndividualResponseSuccess").parseIndividualResponseSuccess(r,n);if(i.success)return{name:"IndividualResponseSuccess",value:i.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Individual",{Negative:a,Success:i}))}l.sendIndividualRPC=e}),98);
__d("WASendMsgRPC",["WADeprecatedSendIq","WADeprecatedWapParser","WAFrankingTypes","WAGetDeviceIdentityMixin","WAJids","WALogger","WAParseFranking","WASmaxMessagePublishIndividualRPC","WATimeUtils","WAWap"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t,n,r,a){a===void 0&&(a=!1);var i=o("WAJids").interpretAsGroupJid(e.protocolMsgId.chat),l=e.messageType.type==="text"&&e.messageType.invitedParticipantUserJid!=null;if(t.type==="direct_user"){var s={individualIndividualSingle:{messageTo:t.message.to,individualIndividualRetryMixinArgs:p(e.count,t.recipient),contentMixinsArgs:m(e,t.message),encTypeIndividualMixinArgs:_(t.message),encVersionArgs:f(t.message)}},u=e.type==="direct"?e.originalMsgTimestampMs:void 0,C={messageId:e.externalId,deviceIdentityMixinArgs:o("WAGetDeviceIdentityMixin").getDeviceIdentityMixin(e.deviceIdentity),hasNoExtraFanout:e.messageType.isInvisible===!0?!0:null,messageEditOrMessagePinOrRevokeMixinGroupArgs:g(e.messageType),clientFrankingTagMixinArgs:n!=null&&n.frankingTag?{frankingTagElementValue:n.frankingTag}:null,hasMetaHideDecryptionPlaceholder:y(e.messageType)?!0:null,groupInviteTargetMixinArgs:l&&i!=null?{metaGroupInvite:i}:null,individualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroupArgs:s,internalTestMixinArgs:a?{testConfig:"armadillo_express"}:null,armadilloOriginalMessageTimestampMixinArgs:u!=null?{metaOriginalMsgT:u}:null};r==null||r.addPoint("send_individual_rpc");var b=await o("WASmaxMessagePublishIndividualRPC").sendIndividualRPC(C);if(b.name==="IndividualResponseSuccess"){var v,S=((v=b.value.deviceListStaleMixin)==null?void 0:v.phash)!=null?{type:"mismatch",local:null,server:b.value.deviceListStaleMixin.phash}:{type:"ok"},R=b.value.serverFrankingTagMixin!=null&&n!=null?babelHelpers.extends({},n,{reportingTag:o("WAFrankingTypes").castToReportingTag(b.value.serverFrankingTagMixin.frankingReportingTagElementValue)}):null;return{type:"success",ts:o("WATimeUtils").castToUnixTime(b.value.t),phash:S,count:null,reportingMeta:R}}else{var L,E;return b.name,{type:"error",errorCode:parseInt(b.value.error,10),backoff:parseInt((L=b.value.messageNackRetryAttributesMixin)==null?void 0:L.backoff,10),applicationError:(E=b.value.applicationNegativeAckMixin)==null?void 0:E.applicationError}}}var k=e.messageType.isInvisible===!0?"false":o("WAWap").DROP_ATTR,I=t.participant!=null?o("WAWap").JID(t.participant):o("WAWap").DROP_ATTR,T=t.phash!=null&&t.type==="group"?o("WAWap").CUSTOM_STRING(t.phash):o("WAWap").DROP_ATTR;function D(){return e.messageType.type==="text"&&e.messageType.isRevoked?"7":e.messageType.type==="text"&&e.messageType.isEdit===!0?"1":o("WAWap").DROP_ATTR}var x=D();function $(){return l&&i!=null?o("WAWap").wap("meta",{"decrypt-fail":"hide",group_invite:o("WAWap").CUSTOM_STRING(i)}):y(e.messageType)?o("WAWap").wap("meta",{"decrypt-fail":"hide"}):null}var P=$(),N=a?o("WAWap").wap("test",{config:o("WAWap").CUSTOM_STRING("armadillo_express")}):null,M=e.deviceIdentity!=null?o("WAWap").wap("device-identity",null,e.deviceIdentity):null,w=(n==null?void 0:n.frankingTag)!=null?o("WAWap").wap("franking",null,o("WAWap").wap("franking_tag",null,n.frankingTag)):null,A=null;t.participants!=null&&(A=o("WAWap").wap("participants",null,t.participants.map(function(e){return c(e)})));var F=null;t.message!=null&&(F=c(t.message,!0));var O=o("WAWap").wap("message",{device_fanout:k,edit:x,id:o("WAWap").CUSTOM_STRING(e.externalId),participant:I,phash:T,to:o("WAWap").JID(t.messageTo),type:e.messageType.type},P,w,A,F,M,N);h(e.externalId),r==null||r.addPoint("send_stanza_and_return_ack");var B=await o("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(O,{id:e.externalId,class:"message",from:t.messageTo,participant:t.participant!=null?t.participant:null});r==null||r.addPoint("send_msg_ack_parser");var W=d.parse(B);if(W.success){r==null||r.addPoint("send_msg_ack_parser_success");var q=W.success,U=q.applicationError,V=q.backoff,H=q.errorCode;if(H==null){var G,z=W.success,j=z.count,K=z.phash,Q=z.ts,X=n!=null?babelHelpers.extends({},n,{reportingTag:(G=W.success.reportingMeta)==null?void 0:G.reportingTag}):null;return{type:"success",ts:Q,phash:K==null||K===t.phash?{type:"ok"}:{type:"mismatch",local:t.phash,server:K},count:j,reportingMeta:X}}else return r==null||r.addPoint("send_msg_ack_parser_failed",{int:{errorCode:H,applicationError:U}}),{type:"error",errorCode:H,applicationError:U,backoff:V}}else return{type:"parsing_error"}}function c(e,t){t===void 0&&(t=!1);var n=o("WAWap").wap("enc",{count:e.count!=null?o("WAWap").INT(e.count):o("WAWap").DROP_ATTR,mediatype:e.mediaType!=null?o("WAWap").CUSTOM_STRING(e.mediaType):o("WAWap").DROP_ATTR,type:o("WAWap").CUSTOM_STRING(e.type),v:o("WAWap").CUSTOM_STRING(e.v)},e.ciphertext);return t||e.encType==="group"?n:o("WAWap").wap("to",{jid:o("WAWap").DEVICE_JID(e.to)},n)}var d=new(r("WADeprecatedWapParser"))("sendMsgAck",function(e){return e.assertTag("ack"),{count:e.maybeAttrInt("count"),errorCode:e.maybeAttrInt("error"),phash:e.maybeAttrString("phash"),applicationError:e.maybeAttrInt("application_error"),ts:e.attrTime("t"),reportingMeta:o("WAParseFranking").parseFrankingNode(e.maybeChild("franking")),backoff:e.maybeAttrInt("backoff")}});function m(t,n){if(t.messageType.type==="reaction")return{isContentTypeReaction:!0};if(t.messageType.type==="text")return{isContentTypeText:!0};if(t.messageType.type,n.mediaType!=null){var r={contentTypeMediaOrMedianotifyMixinGroupArgs:{isContentTypeMedia:!0},encMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroupArgs:{encMediaType:{encMediatype:n.mediaType}}};return{contentTypeMediaSingle:r}}return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WASendMsgRPC: Wrong media type: ",""])),t.messageType.mediaType),{isContentTypeText:!0}}function p(e,t){var n=e!=null?{encCount:e}:null,r=t!=null?{messageRecipient:t}:null;return{encRetryMixinArgs:n,individualIndividualRetryToPeerMixinArgs:r}}function _(e){return{encType:e.type,encElementValue:e.ciphertext}}function f(e){return e.v==="2"?{isEncVersion2:!0}:{isEncVersion3:!0}}function g(e){return e.type==="text"&&e.isRevoked?{isRevoke:!0}:null}function h(e){try{var t=BigInt(e)}catch(t){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[WASendMsgRPC] Sending message with not allowed stanzaId: ",", error: ",""])),e,t)}}function y(e){return e.type==="reaction"||e.isInvisible===!0||e.isEdit===!0}l.sendStanza=u,l.createEncWapNode=c}),98);
__d("WASendMsgInternal",["FBLogger","WABridge","WADevicesState","WAEncGroupMsg","WAEncUserMsg","WAGlobals","WAJids","WALogger","WAMarkSenderKeyAsSentApi","WAOdsEnums","WAQueryGroupsAndSync","WAResultOrError","WASendMsgRPC"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=10002,_=10009;async function f(e,t){var n,a,i,l;t.addPoint("encrypt_start",{string:{sentMessageType:e.messageType.isRevoked===!0?"revoke":e.messageType.type},bool:{isInvisibleMsg:e.messageType.type==="text"&&e.messageType.isInvisible===!0}});var s=await o("WAGlobals").getWaOneQueue().enqueue(function(n){var r=n.cryptoManager;return e.type==="chat"?b(e,t,2,{cryptoManager:r}):C(e,{cryptoManager:r},2)},{operationType:"encrypt",flush:!0});if(t.addPoint("finish_encrypt",{string:{chatType:s.success?s.value.type:s.error}}),s.success===!1)throw r("FBLogger")("wmi").mustfixThrow("Encryption failed %s",s.error);var u=s.value;t.addPoint("sending_stanza_start",{string:{encryptionType:u.type},int:{ciphertextByteLength:(n=(a=(i=u.message)==null||(i=i.ciphertext)==null?void 0:i.length)!=null?a:(l=u.participants)==null||(l=l[0].ciphertext)==null?void 0:l.length)!=null?n:0}});var c=await o("WASendMsgRPC").sendStanza(e,u,e.reportingMeta,t);return t.addPoint("sending_stanza_end",{bool:{wai:c.type==="success"}}),{serverResponse:c,encryption:u}}async function g(t,n,r){var a,i,l,s;r===void 0&&(r=!1),R(t,n);var u=r?3:2,c=function(r){return t.type==="chat"?b(t,n,u,{cryptoManager:r}):C(t,{cryptoManager:r},u)},d=await o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return c(t)},{operationType:"encrypt",flush:!0}),m=d.success?d.value.type:d.error;if(n.addPoint("finish_encrypt",{string:{chatType:m}}),d.success===!1)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWSendMsg Failed to encrypt message for "," message"])),m),o("WAResultOrError").makeError({type:"encryption-error",isRetriable:!1});var _=d.value;n.addPoint("sending_stanza_start",{string:{encryptionType:_.type},int:{ciphertextByteLength:(a=(i=(l=_.message)==null||(l=l.ciphertext)==null?void 0:l.length)!=null?i:(s=_.participants)==null||(s=s[0].ciphertext)==null?void 0:s.length)!=null?a:0}});var f=await o("WASendMsgRPC").sendStanza(t,_,t.reportingMeta,n,r);if(n.addPoint("sending_stanza_end"),f.type==="success"){n.addPoint("send_stanza_success");try{var g,h=await Promise.all([v(t,_,f,n),S(_)]),y=h[0];return n.addPoint("mark_sender_key_sent"),o("WAResultOrError").makeResult({baseKey:(g=_.message)==null?void 0:g.baseKey,reportingMeta:f.reportingMeta,serverTs:f.ts,meta:{pOrDhashMismatch:y}})}catch(e){throw n.addPoint("send_stanza_failed"),e}}if(f.type,L(f,m,n),f.applicationError===p&&await o("WAGlobals").getDependencies().handleReachabilityErrorAdminMsg(t.chat),f.type==="parsing_error")return o("WAResultOrError").makeError({type:"result-parsing-error",isRetriable:!0});if(f.type==="error"){var E=f.errorCode!=null&&f.errorCode>=500;return E?o("WAResultOrError").makeError({type:"retryable-error",backoff:f.backoff,isRetriable:!0}):o("WAResultOrError").makeError({type:"non-retryable-error",applicationErrorCode:f.applicationError,errorCode:f.errorCode,isRetriable:!1})}return o("WAResultOrError").makeError({type:"unexpected-message-codepath",details:"impossible-server-error-result",isRetriable:!0,applicationErrorCode:f.applicationError})}function h(e){return o("WADevicesState").getDevicesState().reset([e]),o("WADevicesState").getDevicesState().waitForUserDevices([e],"SendMsgUtil_recoverUser",!0)}function y(e){return o("WAJids").switchOnChatJidType(e,{interopUser:h,msgrUser:h,lidUser:h,phoneUser:h,group:function(t){return o("WAQueryGroupsAndSync").queryGroupsAndSync({groupJids:[t],ignoreDhash:!0})}})}async function C(e,t,n){var r=e.backupDirective,a=e.chat,i=e.count,l=e.identityKey,s=e.messageBytes,u=e.messageType,c=e.sessionInfo,d=e.to,m=await o("WAEncUserMsg").encryptDeviceJidMessage(d,{type:"message",chat:a,messageBytes:s,messageType:u,applicationPayloadVersion:n,backupDirective:r},t,i,c,l);return o("WAJids").switchOnUserChatJidType(a,{user:function(n){return m!=null?o("WAResultOrError").makeResult({type:"direct_user",messageTo:e.to,message:m,recipient:o("WAGlobals").isPeerDevice(e.to)?n:null}):o("WAResultOrError").makeError("direct_user")},group:function(n){return m!=null?o("WAResultOrError").makeResult({type:"direct_group",messageTo:n,participant:e.to,message:m}):o("WAResultOrError").makeError("direct_group")}})}function b(e,t,n,r){var a=e.backupDirective,i=e.chat,l=e.messageBytes,c=e.messageType,d=e.recipients;return o("WAJids").switchOnUserChatJidType(i,{user:async function(i){var e=await o("WAEncUserMsg").encryptUserMsg(d,{type:"message",messageBytes:l,messageType:c,chat:i,applicationPayloadVersion:n,backupDirective:a},r,t),s=e.participants;return s!=null&&s.length>0?o("WAResultOrError").makeResult({type:"user",messageTo:i,participants:s,phash:e.phash}):o("WAResultOrError").makeError("user")},group:async function(n){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptChatMessage -- group message"])));var e=await o("WAEncGroupMsg").encryptGroupMsg(n,d,l,c,r,a,t);o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptChatMessage -- finish encrypt group message"])));var i=e.encNode,m=e.participants;return m==null&&i==null?o("WAResultOrError").makeError("group"):o("WAResultOrError").makeResult({type:"group",messageTo:n,participants:m,message:i,senderKeyDistributionInfo:e.senderKeyDistributionInfo,phash:e.phash})}})}async function v(e,t,n,r){if(n.type!=="success")return!1;var a=n.phash;return a.type==="mismatch"?(r.addPoint("phash_mismatch"),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch, local[","] server[","]"])),a.local,a.server),o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.PHASH_MISMATCH,key:t.type}),await y(e.chat),r.addPoint("participant_recovery_finished"),!0):!1}async function S(e){if(e.senderKeyDistributionInfo!=null){var t=e.senderKeyDistributionInfo,n=t.group,r=t.knowsSenderKey,a=t.senderKeyId;await o("WAMarkSenderKeyAsSentApi").markSenderKeyAsSent(n,a,r)}}function R(e,t){var n=0;e.type==="chat"&&(n=e.recipients.reduce(function(e,t){return e+t.devicesInfo.length},0)),t.addPoint("start_encrypt",{int:{numDevices:n},bool:{isInvisibleMsg:e.messageType.type==="text"&&e.messageType.isInvisible===!0}})}function L(e,t,n){if(e.type!=="success"){e.type==="parsing_error"&&(o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["sendMessage ack success is false, chatType:",""])),t),n.addPoint("ack_parse_fail"));var r=e.applicationError,a=e.errorCode;r===p&&n.addPoint("reachability_error_code"),o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["sendMessage ack success is true, error: ",", applicationError: ",", chatType:",""])),a,r,t),a!=null&&n.addPoint("ack_success_error_"+a,{int:{applicationError:r}}),r===_&&n.addPoint("sender_blocked",{})}}l.sendMessageV2=f,l.sendMessage=g}),98);
__d("WASentBytesCacheApi",["MAWTransactionMode","WADbTransactor"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e=o("WADbTransactor")).makeSignalTransactor({sentBytesCache:(s=o("MAWTransactionMode")).READWRITE},"deleteSentBytes",function(e){return function(t){return e.sentBytesCache.bulkDelete(t)}}),c=e.makeSignalTransactor({sentBytesCache:s.READONLY},"loadExpired",function(e){return function(t){return e.sentBytesCache.where("ts").belowOrEqual(t).toArray().then(function(e){return e.map(function(e){return e.waMsgId})})}}),d=e.makeSignalTransactor({sentBytesCache:s.READONLY},"loadSentBytes",function(e){return function(t){return e.sentBytesCache.bulkGet(t).then(function(e){return e.filter(Boolean)})}}),m=e.makeSignalTransactor({sentBytesCache:s.READWRITE},"saveSentBytes",function(e){return function(t){return e.sentBytesCache.put(t).then(function(){})}});l.deleteSentBytes=u,l.loadExpired=c,l.loadSentBytes=d,l.saveSentBytes=m}),98);
__d("WASentBytesCache",["WAGlobals","WAJids","WAMsg","WASentBytesCacheApi","WATagsLogger","WATimeUtils","WAWaitForUserUnblocked","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["SentBytesCache"]),c=720*60*60,d=(function(){function t(){var t=this;o("WAWaitForUserUnblocked").waitForUserUnblocked().then(function(){t.$1().catch(function(t){u.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to prune sent bytes: ",""])),t)})})}var n=t.prototype;return n.loadSentBytes=function(t){return o("WASentBytesCacheApi").loadSentBytes(t)},n.getMsgsForRetry=async function(t){var e=Array.from(new Set(t.map(function(e){var t=e.deviceJid;return o("WAJids").extractUserJid(t)}))),n=new Map;try{n=await o("WAGlobals").getWaOneQueue().enqueue(function(t){var n=t.cryptoManager;return n.storage.bulkLoadIdentities(e)},{operationType:"retries_load_identities",flush:!1,afterInit:!0})}catch(e){var a=r("getErrorSafe")(e);u.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["It fails to bulkLoadIdentities: ",""])),a.toString())}var i=await this.loadSentBytes(t.map(function(e){var t=e.protocolMsgId;return o("WAMsg").craftWAMsgIdString({author:t.author,chat:t.chat,externalId:t.externalId})}));return t.map(function(e){var t,r=e.deviceJid,a=e.protocolMsgId,l=o("WAMsg").craftWAMsgIdString({author:a.author,chat:a.chat,externalId:a.externalId}),s=(t=n.get(o("WAJids").extractUserJid(r)))==null?void 0:t.get(r);if(s==null)return{type:"unauthorized"};var u=i.find(function(e){return e.waMsgId===l});return u==null?{type:"missing"}:o("WATimeUtils").happenedWithin(u.ts,c)?{frankingKey:u.frankingKey,frankingVersion:u.frankingVersion,messageBytes:u.messageBytes,backupDirective:u.backupDirective,messageType:u.messageType,protocolMsgId:u.protocolMsgId,retryCount:e.retryCount+1,type:"unacked",serverTs:u.ts}:{type:"unauthorized"}})},n.saveSentBytes=function(t){return o("WASentBytesCacheApi").saveSentBytes(t)},n.$1=function(){return o("WASentBytesCacheApi").loadExpired(o("WATimeUtils").pastUnixTime(c)).then(function(e){return o("WASentBytesCacheApi").deleteSentBytes(e)})},t})(),m=new d;function p(){return m}l.SentBytesCache=d,l.sentBytesCache=p}),98);
__d("WASmaxInAppdataPublishAckMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",r.value);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"class","appdata");if(!i.success)return i;var l=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",l.value);if(!s.success)return s;var u=o("WASmaxParseUtils").attrIntRange(e,"t",0,void 0);return u.success?o("WAResultOrError").makeResult({class:i.value,t:u.value}):u}l.parseAckMixin=e}),98);
__d("WASmaxInAppdataPublishPeerResponseNegative",["WAResultOrError","WASmaxInAppdataPublishAckMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"error");if(!r.success)return r;var a=o("WASmaxInAppdataPublishAckMixin").parseAckMixin(e,t);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({error:r.value},a.value)):a}l.parsePeerResponseNegative=e}),98);
__d("WASmaxInAppdataPublishDeviceListStaleMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"phash");return n.success?o("WAResultOrError").makeResult({phash:n.value}):n}l.parseDeviceListStaleMixin=e}),98);
__d("WASmaxInAppdataPublishPeerResponseSuccess",["WAResultOrError","WASmaxInAppdataPublishAckMixin","WASmaxInAppdataPublishDeviceListStaleMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxInAppdataPublishAckMixin").parseAckMixin(e,t);if(!r.success)return r;var a=o("WASmaxInAppdataPublishDeviceListStaleMixin").parseDeviceListStaleMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({},r.value,{deviceListStaleMixin:a.success?a.value:null}))}l.parsePeerResponseSuccess=e}),98);
__d("WASmaxOutAppdataPublishDeviceIdentityMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.deviceIdentityElementValue,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("device-identity",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeDeviceIdentityMixin=s}),98);
__d("WASmaxOutAppdataPublishInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.testConfig,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("test",{config:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeInternalTestMixin=s}),98);
__d("WASmaxOutAppdataPublishRequestIDMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.requestIdElementValue,n=o("WASmaxJsx").smax("trace",null,o("WASmaxJsx").smax("request_id",null,t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRequestIDMixin=s}),98);
__d("WASmaxOutAppdataPublishTraceIDMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.edgeIdElementValue,n=o("WASmaxJsx").smax("edge_id",null,t);return n}function s(e){var t=e.deviceArgs,n=e.correlationIdType,r=e.idElementValue,a=o("WASmaxJsx").smax("correlation_id",{type:o("WAWap").CUSTOM_STRING(n)},o("WASmaxJsx").smax("id",null,r),o("WASmaxChildren").OPTIONAL_CHILD(u,t));return a}function u(e){var t=e.deviceId,n=o("WASmaxJsx").smax("device",{id:o("WAWap").INT(t)});return n}function c(t){var n=t.edgeIdArgs,r=t.correlationIdArgs,a=t.traceIdElementValue,i=o("WASmaxJsx").smax("trace",null,[o("WASmaxJsx").smax("trace_id",null,a),o("WASmaxChildren").OPTIONAL_CHILD(e,n)].concat(o("WASmaxChildren").REPEATED_CHILD(s,r,0,10)));return i}function d(e,t){var n=c(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeTraceIDEdgeId=e,l.makeTraceIDCorrelationId=s,l.makeTraceIDCorrelationIdDevice=u,l.mergeTraceIDMixin=d}),98);
__d("WASmaxOutAppdataPublishRequestOrTraceIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutAppdataPublishRequestIDMixin","WASmaxOutAppdataPublishTraceIDMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.requestID)return o("WASmaxOutAppdataPublishRequestIDMixin").mergeRequestIDMixin(e,t.requestID);if(t.traceID)return o("WASmaxOutAppdataPublishTraceIDMixin").mergeTraceIDMixin(e,t.traceID);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeRequestOrTraceIDMixinGroup=e}),98);
__d("WASmaxOutAppdataPublishTraceContextMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishRequestOrTraceIDMixinGroup"],(function(t,n,r,o,a,i,l){function e(e){var t=e.requestOrTraceIDMixinGroupArgs,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxOutAppdataPublishRequestOrTraceIDMixinGroup").mergeRequestOrTraceIDMixinGroup(o("WASmaxJsx").smax("trace",null),t));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeTraceContextMixin=s}),98);
__d("WASmaxOutAppdataPublishWithDeviceListCheckMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.appdataDeviceListCheck,n=o("WASmaxJsx").smax("appdata",{device_list_check:o("WAWap").CUSTOM_STRING(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeWithDeviceListCheckMixin=s}),98);
__d("WASmaxOutAppdataPublishBaseMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishDeviceIdentityMixin","WASmaxOutAppdataPublishInternalTestMixin","WASmaxOutAppdataPublishTraceContextMixin","WASmaxOutAppdataPublishWithDeviceListCheckMixin"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e.deviceIdentityMixinArgs,r=e.withDeviceListCheckMixinArgs,a=e.internalTestMixinArgs,i=e.traceContextMixinArgs,l=(t=o("WASmaxMixins")).optionalMerge(o("WASmaxOutAppdataPublishTraceContextMixin").mergeTraceContextMixin,t.optionalMerge(o("WASmaxOutAppdataPublishInternalTestMixin").mergeInternalTestMixin,t.optionalMerge(o("WASmaxOutAppdataPublishWithDeviceListCheckMixin").mergeWithDeviceListCheckMixin,t.optionalMerge(o("WASmaxOutAppdataPublishDeviceIdentityMixin").mergeDeviceIdentityMixin,o("WASmaxJsx").smax("appdata",null),n),r),a),i);return l}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeBaseMixin=s}),98);
__d("WASmaxOutAppdataPublishEncPayloadMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encElementValue,n=o("WASmaxJsx").smax("enc",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncPayloadMixin=s}),98);
__d("WASmaxOutAppdataPublishEncTypeIndividualMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncPayloadMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encType,n=o("WASmaxOutAppdataPublishEncPayloadMixin").mergeEncPayloadMixin(o("WASmaxJsx").smax("enc",{type:o("WAWap").CUSTOM_STRING(t)}),e);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncTypeIndividualMixin=s}),98);
__d("WASmaxOutAppdataPublishEncVersionFutureproofMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encV,n=o("WASmaxJsx").smax("enc",{v:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncVersionFutureproofMixin=s}),98);
__d("WASmaxOutAppdataPublishPeerPeerFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncTypeIndividualMixin","WASmaxOutAppdataPublishEncVersionFutureproofMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.toJid,n=e.encVersionFutureproofMixinArgs,r=e.encTypeIndividualMixinArgs,a=o("WASmaxJsx").smax("to",{jid:o("WAWap").DEVICE_JID(t)},o("WASmaxOutAppdataPublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(o("WASmaxOutAppdataPublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(o("WASmaxJsx").smax("enc",null),n),r));return a}function s(t){var n=t.toArgs,r=t.appdataTo,a=o("WASmaxJsx").smax("appdata",{to:o("WAWap").USER_JID(r)},o("WASmaxJsx").smax("participants",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,24)));return a}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makePeerPeerFanoutParticipantsTo=e,l.mergePeerPeerFanoutMixin=u}),98);
__d("WASmaxOutAppdataPublishEncRetryMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.encCount,n=o("WASmaxJsx").smax("enc",{count:o("WAWap").INT(t)});return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeEncRetryMixin=s}),98);
__d("WASmaxOutAppdataPublishRetryMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncRetryMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.appdataT,n=e.encRetryMixinArgs,r=o("WASmaxJsx").smax("appdata",{t:o("WAWap").INT(t)},o("WASmaxOutAppdataPublishEncRetryMixin").mergeEncRetryMixin(o("WASmaxJsx").smax("enc",null),n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeRetryMixin=s}),98);
__d("WASmaxOutAppdataPublishPeerPeerSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncTypeIndividualMixin","WASmaxOutAppdataPublishEncVersionFutureproofMixin","WASmaxOutAppdataPublishRetryMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.appdataTo,n=e.retryMixinArgs,r=e.encVersionFutureproofMixinArgs,a=e.encTypeIndividualMixinArgs,i=o("WASmaxMixins").optionalMerge(o("WASmaxOutAppdataPublishRetryMixin").mergeRetryMixin,o("WASmaxJsx").smax("appdata",{to:o("WAWap").DEVICE_JID(t)},o("WASmaxOutAppdataPublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(o("WASmaxOutAppdataPublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(o("WASmaxJsx").smax("enc",null),r),a)),n);return i}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePeerPeerSingleMixin=s}),98);
__d("WASmaxOutAppdataPublishPeerMsgTypes",["WASmaxMixinGroupExhaustiveError","WASmaxOutAppdataPublishPeerPeerFanoutMixin","WASmaxOutAppdataPublishPeerPeerSingleMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.peerPeerFanout)return o("WASmaxOutAppdataPublishPeerPeerFanoutMixin").mergePeerPeerFanoutMixin(e,t.peerPeerFanout);if(t.peerPeerSingle)return o("WASmaxOutAppdataPublishPeerPeerSingleMixin").mergePeerPeerSingleMixin(e,t.peerPeerSingle);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergePeerMsgTypes=e}),98);
__d("WASmaxOutAppdataPublishPeerRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAppdataPublishBaseMixin","WASmaxOutAppdataPublishPeerMsgTypes","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.appdataId,n=e.appdataPushPriority,r=e.peerMsgTypesArgs,a=o("WASmaxOutAppdataPublishPeerMsgTypes").mergePeerMsgTypes(o("WASmaxOutAppdataPublishBaseMixin").mergeBaseMixin(o("WASmaxJsx").smax("appdata",{id:o("WAWap").STANZA_ID(t),category:"peer",push_priority:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,n)}),e),r);return a}l.makePeerRequest=e}),98);
__d("WASmaxAppdataPublishPeerRPC",["WAComms","WASmaxInAppdataPublishPeerResponseNegative","WASmaxInAppdataPublishPeerResponseSuccess","WASmaxOutAppdataPublishPeerRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(t,n,r,o,a,i,l){async function e(e,t){var n=o("WASmaxOutAppdataPublishPeerRequest").makePeerRequest(e),r=await o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInAppdataPublishPeerResponseNegative").parsePeerResponseNegative(r,n);if(a.success)return{name:"PeerResponseNegative",value:a.value};var i=o("WASmaxInAppdataPublishPeerResponseSuccess").parsePeerResponseSuccess(r,n);if(i.success)return{name:"PeerResponseSuccess",value:i.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Peer",{Negative:a,Success:i}))}l.sendPeerRPC=e}),98);